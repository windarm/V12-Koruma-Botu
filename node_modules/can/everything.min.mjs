(function(e,t){"undefined"==typeof process&&(e.process={argv:[],cwd:function(){return""},browser:!0,env:{NODE_ENV:t||"development"},version:"",platform:e.navigator&&e.navigator.userAgent&&/Windows/.test(e.navigator.userAgent)?"win":""})})("object"==typeof self&&self.Object==Object?self:"object"==typeof process&&"[object process]"===Object.prototype.toString.call(process)?global:window,"development");var canNamespace_1_0_0_canNamespace={},supportsNativeSymbols=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),CanSymbol;if(supportsNativeSymbols)CanSymbol=Symbol;else{var symbolNum=0;CanSymbol=function(e){var t="@@symbol"+symbolNum++ +e,n={};return Object.defineProperties(n,{toString:{value:function(){return t}}}),n};var descriptionToSymbol={},symbolToDescription={};CanSymbol.for=function(e){var t=descriptionToSymbol[e];return t||(t=descriptionToSymbol[e]=CanSymbol(e),symbolToDescription[t]=e),t},CanSymbol.keyFor=function(e){return symbolToDescription[e]},["hasInstance","isConcatSpreadable","iterator","match","prototype","replace","search","species","split","toPrimitive","toStringTag","unscopables"].forEach(function(e){CanSymbol[e]=CanSymbol("Symbol."+e)})}["isMapLike","isListLike","isValueLike","isFunctionLike","getOwnKeys","getOwnKeyDescriptor","proto","getOwnEnumerableKeys","hasOwnKey","hasKey","size","getName","getIdentity","assignDeep","updateDeep","getValue","setValue","getKeyValue","setKeyValue","updateValues","addValue","removeValues","apply","new","onValue","offValue","onKeyValue","offKeyValue","getKeyDependencies","getValueDependencies","keyHasDependencies","valueHasDependencies","onKeys","onKeysAdded","onKeysRemoved","onPatches"].forEach(function(e){CanSymbol.for("can."+e)});var canSymbol_1_6_5_canSymbol=canNamespace_1_0_0_canNamespace.Symbol=CanSymbol,helpers={makeGetFirstSymbolValue:function(e){var t=e.map(function(e){return canSymbol_1_6_5_canSymbol.for(e)}),n=t.length;return function(e){for(var a=-1;++a<n;)if(e[t[a]]!==void 0)return e[t[a]]}},hasLength:function(e){var t=typeof e;if("string"==t||Array.isArray(e))return!0;var n=e&&"boolean"!==t&&"number"!==t&&"length"in e&&e.length;return"function"!=typeof e&&(0===n||"number"==typeof n&&0<n&&n-1 in e)}},plainFunctionPrototypePropertyNames=Object.getOwnPropertyNames(function(){}.prototype),plainFunctionPrototypeProto=Object.getPrototypeOf(function(){}.prototype);function isConstructorLike(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(t!==void 0)return t;if("function"!=typeof e)return!1;var n=e.prototype;if(!n)return!1;if(plainFunctionPrototypeProto!==Object.getPrototypeOf(n))return!0;var a=Object.getOwnPropertyNames(n);if(a.length===plainFunctionPrototypePropertyNames.length){for(var r=0,o=a.length;r<o;r++)if(a[r]!==plainFunctionPrototypePropertyNames[r])return!0;return!1}return!0}var getNewOrApply=helpers.makeGetFirstSymbolValue(["can.new","can.apply"]);function isFunctionLike(e){var t=!!e&&e[canSymbol_1_6_5_canSymbol.for("can.isFunctionLike")],n;return void 0===t?(n=getNewOrApply(e),void 0===n?"function"==typeof e:!!n):t}function isPrimitive(e){var t=typeof e;return!(null!=e&&("function"===t||"object"===t))}var coreHasOwn=Object.prototype.hasOwnProperty,funcToString=Function.prototype.toString,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(t===Object.prototype||null===t)return!0;var n=coreHasOwn.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&funcToString.call(n)===objectCtorString}function isBuiltIn(e){return!!(isPrimitive(e)||Array.isArray(e)||isPlainObject(e)||"[object Object]"!==Object.prototype.toString.call(e)&&-1!==Object.prototype.toString.call(e).indexOf("[object "))}function isValueLike(e){var t;if(isPrimitive(e))return!0;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isValueLike")],"undefined"!=typeof t)return t;var n=e[canSymbol_1_6_5_canSymbol.for("can.getValue")];if(void 0!==n)return!!n}function isMapLike(e){if(isPrimitive(e))return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMapLike")];if("undefined"!=typeof t)return!!t;var n=e[canSymbol_1_6_5_canSymbol.for("can.getKeyValue")];return!(void 0!==n)||!!n}var onValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onValue"),onKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),onPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.onPatches");function isObservableLike(e){return!isPrimitive(e)&&!!(e[onValueSymbol]||e[onKeyValueSymbol]||e[onPatchesSymbol])}function isListLike(e){var t;if("string"==typeof e)return!0;if(isPrimitive(e))return!1;if(t=e[canSymbol_1_6_5_canSymbol.for("can.isListLike")],"undefined"!=typeof t)return t;var n=e[canSymbol_1_6_5_canSymbol.iterator];return void 0===n?!!Array.isArray(e)||helpers.hasLength(e):!!n}var supportsNativeSymbols$1=function(){var e="undefined"!=typeof Symbol&&"function"==typeof Symbol.for;if(!e)return!1;var t=Symbol("a symbol for testing symbols");return"symbol"==typeof t}(),isSymbolLike;if(supportsNativeSymbols$1)isSymbolLike=function(e){return"symbol"==typeof e};else{var symbolStart="@@symbol";isSymbolLike=function(e){return!("object"!=typeof e||Array.isArray(e))&&e.toString().substr(0,symbolStart.length)===symbolStart}}var type={isConstructorLike:isConstructorLike,isFunctionLike:isFunctionLike,isListLike:isListLike,isMapLike:isMapLike,isObservableLike:isObservableLike,isPrimitive:isPrimitive,isBuiltIn:isBuiltIn,isValueLike:isValueLike,isSymbolLike:isSymbolLike,isMoreListLikeThanMapLike:function(e){if(Array.isArray(e))return!0;if(e instanceof Array)return!0;if(null==e)return!1;var t=e[canSymbol_1_6_5_canSymbol.for("can.isMoreListLikeThanMapLike")];if(t!==void 0)return t;var n=this.isListLike(e),a=this.isMapLike(e);if(n&&!a)return!0;return(n||!a)&&void 0},isIteratorLike:function(e){return e&&"object"==typeof e&&"function"==typeof e.next&&0===e.next.length},isPromise:function(e){return e instanceof Promise||"[object Promise]"===Object.prototype.toString.call(e)},isPlainObject:isPlainObject},call={call:function(e,t){var n=[].slice.call(arguments,2),a=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return a?a.call(e,t,n):e.apply(t,n)},apply:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.apply")];return a?a.call(e,t,n):e.apply(t,n)},new:function(e){var t=[].slice.call(arguments,1),n=e[canSymbol_1_6_5_canSymbol.for("can.new")];if(n)return n.apply(e,t);var a=Object.create(e.prototype),r=e.apply(a,t);return type.isPrimitive(r)?a:r}},setKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),getKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),getValueSymbol=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol=canSymbol_1_6_5_canSymbol.for("can.setValue"),reflections={setKeyValue:function(e,t,n){if(type.isSymbolLike(t))return void("symbol"==typeof t?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,value:n,writable:!0}));var a=e[setKeyValueSymbol];return void 0===a?void(e[t]=n):a.call(e,t,n)},getKeyValue:function(e,t){var n=e[getKeyValueSymbol];return n?n.call(e,t):e[t]},deleteKeyValue:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.deleteKeyValue")];return n?n.call(e,t):void delete e[t]},getValue:function(e){if(type.isPrimitive(e))return e;var t=e[getValueSymbol];return t?t.call(e):e},setValue:function(e,t){var n=e&&e[setValueSymbol];if(n)return n.call(e,t);throw new Error("can-reflect.setValue - Can not set value.")},splice:function(e,t,n,a){var r;if("number"!=typeof n){var o=e[canSymbol_1_6_5_canSymbol.for("can.updateValues")];if(o)return o.call(e,t,n,a);r=n.length}else r=n;3>=arguments.length&&(a=[]);var i=e[canSymbol_1_6_5_canSymbol.for("can.splice")];return i?i.call(e,t,r,a):[].splice.apply(e,[t,r].concat(a))},addValues:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.addValues")];return a?a.call(e,t,n):Array.isArray(e)&&void 0===n?e.push.apply(e,t):reflections.splice(e,n,[],t)},removeValues:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.removeValues")];return a?a.call(e,t,n):Array.isArray(e)&&void 0===n?void t.forEach(function(t){var n=e.indexOf(t);0<=n&&e.splice(n,1)}):reflections.splice(e,n,t,[])}};reflections.get=reflections.getKeyValue,reflections.set=reflections.setKeyValue,reflections["delete"]=reflections.deleteKeyValue;var getSet=reflections,slice=[].slice;function makeFallback(e,t){return function(n,a,r,o){var i=n[canSymbol_1_6_5_canSymbol.for(e)];return void 0===i?this[t].apply(this,arguments):i.call(n,a,r,o)}}function makeErrorIfMissing(e,t){return function(n){var a=n[canSymbol_1_6_5_canSymbol.for(e)];if(a!==void 0){var r=slice.call(arguments,1);return a.apply(n,r)}throw new Error(t)}}var observe={onKeyValue:makeFallback("can.onKeyValue","onEvent"),offKeyValue:makeFallback("can.offKeyValue","offEvent"),onKeys:makeErrorIfMissing("can.onKeys","can-reflect: can not observe an onKeys event"),onKeysAdded:makeErrorIfMissing("can.onKeysAdded","can-reflect: can not observe an onKeysAdded event"),onKeysRemoved:makeErrorIfMissing("can.onKeysRemoved","can-reflect: can not unobserve an onKeysRemoved event"),getKeyDependencies:makeErrorIfMissing("can.getKeyDependencies","can-reflect: can not determine dependencies"),getWhatIChange:makeErrorIfMissing("can.getWhatIChange","can-reflect: can not determine dependencies"),getChangesDependencyRecord:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord")];if("function"==typeof t)return t()},keyHasDependencies:makeErrorIfMissing("can.keyHasDependencies","can-reflect: can not determine if this has key dependencies"),onValue:makeErrorIfMissing("can.onValue","can-reflect: can not observe value change"),offValue:makeErrorIfMissing("can.offValue","can-reflect: can not unobserve value change"),getValueDependencies:makeErrorIfMissing("can.getValueDependencies","can-reflect: can not determine dependencies"),valueHasDependencies:makeErrorIfMissing("can.valueHasDependencies","can-reflect: can not determine if value has dependencies"),onPatches:makeErrorIfMissing("can.onPatches","can-reflect: can not observe patches on object"),offPatches:makeErrorIfMissing("can.offPatches","can-reflect: can not unobserve patches on object"),onInstancePatches:makeErrorIfMissing("can.onInstancePatches","can-reflect: can not observe onInstancePatches on Type"),offInstancePatches:makeErrorIfMissing("can.offInstancePatches","can-reflect: can not unobserve onInstancePatches on Type"),onInstanceBoundChange:makeErrorIfMissing("can.onInstanceBoundChange","can-reflect: can not observe bound state change in instances."),offInstanceBoundChange:makeErrorIfMissing("can.offInstanceBoundChange","can-reflect: can not unobserve bound state change"),isBound:makeErrorIfMissing("can.isBound","can-reflect: cannot determine if object is bound"),onEvent:function(e,t,n,a){if(e){var r=e[canSymbol_1_6_5_canSymbol.for("can.onEvent")];if(r!==void 0)return r.call(e,t,n,a);e.addEventListener&&e.addEventListener(t,n,a)}},offEvent:function(e,t,n,a){if(e){var r=e[canSymbol_1_6_5_canSymbol.for("can.offEvent")];if(r!==void 0)return r.call(e,t,n,a);e.removeEventListener&&e.removeEventListener(t,n,a)}},setPriority:function(e,t){if(e){var n=e[canSymbol_1_6_5_canSymbol.for("can.setPriority")];if(void 0!==n)return n.call(e,t),!0}return!1},getPriority:function(e){if(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getPriority")];if(t!==void 0)return t.call(e)}}},getPrototypeOfWorksWithPrimitives=!0;try{}catch(t){getPrototypeOfWorksWithPrimitives=!1}var ArrayMap;if("function"==typeof Map)ArrayMap=Map;else{var isEven=function(e){return 0==e%2};ArrayMap=function(){this.contents=[]},ArrayMap.prototype={_getIndex:function(e){var t;do t=this.contents.indexOf(e,t);while(-1!==t&&!isEven(t));return t},has:function(e){return-1!==this._getIndex(e)},get:function(e){var t=this._getIndex(e);if(-1!==t)return this.contents[t+1]},set:function(e,t){var n=this._getIndex(e);-1===n?(this.contents.push(e),this.contents.push(t)):this.contents[n+1]=t},delete:function(e){var t=this._getIndex(e);-1!==t&&this.contents.splice(t,2)}}}var hasOwnProperty=Object.prototype.hasOwnProperty,shiftFirstArgumentToThis=function(e){return function(){var t=[this];return t.push.apply(t,arguments),e.apply(null,t)}},getKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),shiftedGetKeyValue=shiftFirstArgumentToThis(getSet.getKeyValue),setKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setKeyValue"),shiftedSetKeyValue=shiftFirstArgumentToThis(getSet.setKeyValue),sizeSymbol=canSymbol_1_6_5_canSymbol.for("can.size"),hasUpdateSymbol=helpers.makeGetFirstSymbolValue(["can.updateDeep","can.assignDeep","can.setKeyValue"]),shouldUpdateOrAssign=function(e){return type.isPlainObject(e)||Array.isArray(e)||!!hasUpdateSymbol(e)},shapeReflections;function isSerializedHelper(e){return!!type.isPrimitive(e)||!hasUpdateSymbol(e)&&type.isBuiltIn(e)&&!type.isPlainObject(e)&&!Array.isArray(e)&&!type.isObservableLike(e)}var Object_Keys;try{Object_Keys=Object.keys}catch(t){Object_Keys=function(e){return type.isPrimitive(e)?[]:Object.keys(e)}}function createSerializeMap(e){var t=e||ArrayMap;return{unwrap:new t,serialize:new t,isSerializing:{unwrap:new t,serialize:new t},circularReferenceIsSerializing:{unwrap:new t,serialize:new t}}}function makeSerializer(e,t){function n(e){this.first=!a,this.first&&(a=createSerializeMap(e)),this.map=a,this.result=null}var a=null;return n.prototype.end=function(){return this.first&&(a=null),this.result},function o(a,r){if(isSerializedHelper(a))return a;var s=new n(r);if(type.isValueLike(a))s.result=this[e](getSet.getValue(a));else{var l=type.isIteratorLike(a)||type.isMoreListLikeThanMapLike(a);if(s.result=l?[]:{},s.map[e].has(a))return s.map.isSerializing[e].has(a)&&s.map.circularReferenceIsSerializing[e].set(a,!0),s.map[e].get(a);s.map[e].set(a,s.result);for(var d=0,p=t.length,o;d<p;d++)if(o=a[t[d]],o){s.map.isSerializing[e].set(a,!0);var c=s.result;if(s.result=o.call(a,c),s.map.isSerializing[e].delete(a),s.result!==c){if(s.map.circularReferenceIsSerializing[e].has(a))throw s.end(),new Error("Cannot serialize cirular reference!");s.map[e].set(a,s.result)}return s.end()}"function"==typeof obj?(s.map[e].set(a,a),s.result=a):l?this.eachIndex(a,function(t,n){s.result[n]=this[e](t)},this):this.eachKey(a,function(t,n){s.result[n]=this[e](t)},this)}return s.end()}}var makeMap="undefined"==typeof Map?function(e){var t={};return e.forEach(function(e){t[e]=!0}),{get:function(e){return t[e]},set:function(e,n){t[e]=n},keys:function(){return e}}}:function(e){var t=new Map;return shapeReflections.eachIndex(e,function(e){t.set(e,!0)}),t};var fastHasOwnKey=function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(t)return t.bind(e);var n=makeMap(shapeReflections.getOwnEnumerableKeys(e));return function(e){return n.get(e)}};function addPatch(e,t){var n=e[e.length-1];return n&&n.deleteCount===n.insert.length&&t.index-n.index===n.deleteCount?(n.insert.push.apply(n.insert,t.insert),void(n.deleteCount+=t.deleteCount)):void e.push(t)}function updateDeepList(e,t,n){var a=this.toArray(t),r=[],o=-1;this.eachIndex(e,function(t,i){if(o=i,i>=a.length)return n||addPatch(r,{index:i,deleteCount:e.length-i+1,insert:[]}),!1;var s=a[i];type.isPrimitive(t)||type.isPrimitive(s)||!1===shouldUpdateOrAssign(t)?addPatch(r,{index:i,deleteCount:1,insert:[s]}):!0===n?this.assignDeep(t,s):this.updateDeep(t,s)},this),a.length>o&&addPatch(r,{index:o+1,deleteCount:0,insert:a.slice(o+1)});for(var s=0,l=r.length,d;s<l;s++)d=r[s],getSet.splice(e,d.index,d.deleteCount,d.insert);return e}shapeReflections={each:function(e,t,n){return type.isIteratorLike(e)||type.isMoreListLikeThanMapLike(e)?shapeReflections.eachIndex(e,t,n):shapeReflections.eachKey(e,t,n)},eachIndex:function(e,t,n){if(Array.isArray(e))return shapeReflections.eachListLike(e,t,n);var a=e[canSymbol_1_6_5_canSymbol.iterator],r;if(type.isIteratorLike(e)?r=e:a&&(r=a.call(e)),r)for(var o=0,i;!(i=r.next()).done&&!1!==t.call(n||e,i.value,o++,e););else shapeReflections.eachListLike(e,t,n);return e},eachListLike:function(e,t,n){var a=-1,r=e.length;if(r===void 0){var o=e[sizeSymbol];if(o)r=o.call(e);else throw new Error("can-reflect: unable to iterate.")}for(;++a<r;){var i=e[a];if(!1===t.call(n||i,i,a,e))break}return e},toArray:function(e){var t=[];return shapeReflections.each(e,function(e){t.push(e)}),t},eachKey:function(e,t,n){if(e){var a=shapeReflections.getOwnEnumerableKeys(e),r=e[getKeyValueSymbol$1]||shiftedGetKeyValue;return shapeReflections.eachIndex(a,function(a){var o=r.call(e,a);return t.call(n||e,o,a,e)})}return e},hasOwnKey:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.hasOwnKey")];if(n)return n.call(e,t);var a=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];if(a){var r=!1;return shapeReflections.eachIndex(a.call(e),function(e){if(e===t)return r=!0,!1}),r}return hasOwnProperty.call(e,t)},getOwnEnumerableKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")];if(t)return t.call(e);if(e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")]&&e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")]){var n=[];return shapeReflections.eachIndex(shapeReflections.getOwnKeys(e),function(t){var a=shapeReflections.getOwnKeyDescriptor(e,t);a.enumerable&&n.push(t)},this),n}return Object_Keys(e)},getOwnKeys:function(e){var t=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeys")];return t?t.call(e):Object.getOwnPropertyNames(e)},getOwnKeyDescriptor:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.getOwnKeyDescriptor")];return n?n.call(e,t):Object.getOwnPropertyDescriptor(e,t)},unwrap:makeSerializer("unwrap",[canSymbol_1_6_5_canSymbol.for("can.unwrap")]),serialize:makeSerializer("serialize",[canSymbol_1_6_5_canSymbol.for("can.serialize"),canSymbol_1_6_5_canSymbol.for("can.unwrap")]),assignMap:function(e,t){var n=fastHasOwnKey(e),a=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,o){n(o)&&a.call(e,o)===t||r.call(e,o,t)}),e},assignList:function(e,t){var n=shapeReflections.toArray(t);return getSet.splice(e,0,n,n),e},assign:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.assignList(e,t):shapeReflections.assignMap(e,t),e},assignDeepMap:function(e,t){var n=fastHasOwnKey(e),a=e[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(t,function(t,o){if(!n(o))getSet.setKeyValue(e,o,t);else{var i=a.call(e,o);t===i||(type.isPrimitive(i)||type.isPrimitive(t)||!1===shouldUpdateOrAssign(i)?r.call(e,o,t):shapeReflections.assignDeep(i,t))}},this),e},assignDeepList:function(e,t){return updateDeepList.call(this,e,t,!0)},assignDeep:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.assignDeep")];return n?n.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.assignDeepList(e,t):shapeReflections.assignDeepMap(e,t),e},updateMap:function(e,t){var n=makeMap(shapeReflections.getOwnEnumerableKeys(t)),a=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(o,i){if(!n.get(i))return void getSet.deleteKeyValue(e,i);n.set(i,!1);var s=a.call(t,i);s!==o&&r.call(e,i,s)},this),shapeReflections.eachIndex(n.keys(),function(o){n.get(o)&&r.call(e,o,a.call(t,o))}),e},updateList:function(e,t){var n=shapeReflections.toArray(t);return getSet.splice(e,0,e,n),e},update:function(e,t){return type.isIteratorLike(t)||type.isMoreListLikeThanMapLike(t)?shapeReflections.updateList(e,t):shapeReflections.updateMap(e,t),e},updateDeepMap:function(e,t){var n=makeMap(shapeReflections.getOwnEnumerableKeys(t)),a=t[getKeyValueSymbol$1]||shiftedGetKeyValue,r=e[setKeyValueSymbol$1]||shiftedSetKeyValue;return shapeReflections.eachKey(e,function(o,i){if(!n.get(i))return void getSet.deleteKeyValue(e,i);n.set(i,!1);var s=a.call(t,i);type.isPrimitive(o)||type.isPrimitive(s)||!1===shouldUpdateOrAssign(o)?r.call(e,i,s):shapeReflections.updateDeep(o,s)},this),shapeReflections.eachIndex(n.keys(),function(o){n.get(o)&&r.call(e,o,a.call(t,o))}),e},updateDeepList:function(e,t){return updateDeepList.call(this,e,t)},updateDeep:function(e,t){var n=e[canSymbol_1_6_5_canSymbol.for("can.updateDeep")];return n?n.call(e,t):type.isMoreListLikeThanMapLike(t)?shapeReflections.updateDeepList(e,t):shapeReflections.updateDeepMap(e,t),e},hasKey:function(e,t){if(null==e)return!1;if(type.isPrimitive(e)){if(hasOwnProperty.call(e,t))return!0;var n;return n=getPrototypeOfWorksWithPrimitives?Object.getPrototypeOf(e):e.__proto__,void 0===n?void 0!==e[t]:t in n}var a=e[canSymbol_1_6_5_canSymbol.for("can.hasKey")];if(a)return a.call(e,t);var r=shapeReflections.hasOwnKey(e,t);return r||t in e},getAllEnumerableKeys:function(){},getAllKeys:function(){},assignSymbols:function(e,t){return shapeReflections.eachKey(t,function(t,n){var a=type.isSymbolLike(canSymbol_1_6_5_canSymbol[n])?canSymbol_1_6_5_canSymbol[n]:canSymbol_1_6_5_canSymbol.for(n);getSet.setKeyValue(e,a,t)}),e},isSerialized:isSerializedHelper,size:function(e){if(null==e)return 0;var t=e[sizeSymbol],n=0;return t?t.call(e):helpers.hasLength(e)?e.length:type.isListLike(e)?(shapeReflections.eachIndex(e,function(){n++}),n):e?shapeReflections.getOwnEnumerableKeys(e).length:void 0},defineInstanceKey:function(e,t,n){var a=e[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")];if(a)return a.call(e,t,n);var r=e.prototype;a=r[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")],a?a.call(r,t,n):Object.defineProperty(r,t,shapeReflections.assign({configurable:!0,enumerable:!type.isSymbolLike(t),writable:!0},n))}},shapeReflections.isSerializable=shapeReflections.isSerialized,shapeReflections.keys=shapeReflections.getOwnEnumerableKeys;var shape=shapeReflections,getSchemaSymbol=canSymbol_1_6_5_canSymbol.for("can.getSchema"),isMemberSymbol=canSymbol_1_6_5_canSymbol.for("can.isMember"),newSymbol=canSymbol_1_6_5_canSymbol.for("can.new");function comparator(e,t){return e.localeCompare(t)}function sort(e){if(type.isPrimitive(e)||e instanceof Date)return e;var t;return type.isListLike(e)?(t=[],shape.eachKey(e,function(e){t.push(sort(e))}),t):type.isMapLike(e)?(t={},shape.getOwnKeys(e).sort(comparator).forEach(function(n){t[n]=sort(getSet.getKeyValue(e,n))}),t):e}function isPrimitiveConverter(e){return e===Number||e===String||e===Boolean}var schemaReflections={getSchema:function(e){if(void 0!==e){var t=e[getSchemaSymbol];return void 0===t&&(e=e.constructor,t=e&&e[getSchemaSymbol]),void 0===t?void 0:t.call(e)}},getIdentity:function(e,t){if(t=t||schemaReflections.getSchema(e),void 0===t)throw new Error("can-reflect.getIdentity - Unable to find a schema for the given value.");var n=t.identity;if(!n||0===n.length)throw new Error("can-reflect.getIdentity - Provided schema lacks an identity property.");else{if(1===n.length)return getSet.getKeyValue(e,n[0]);var a={};return n.forEach(function(t){a[t]=getSet.getKeyValue(e,t)}),JSON.stringify(schemaReflections.cloneKeySort(a))}},cloneKeySort:function(e){return sort(e)},convert:function(e,t){if(isPrimitiveConverter(t))return t(e);var n=t[isMemberSymbol],a=!1,r=typeof t,o=t[newSymbol];if(void 0===n?"function"===r&&type.isConstructorLike(t)&&(a=e instanceof t):a=n.call(t,e),a)return e;if(void 0!==o)return o.call(t,e);if("function"===r)return type.isConstructorLike(t)?new t(e):t(e);throw new Error("can-reflect: Can not convert values into type. Type must provide `can.new` symbol.")}},schema=schemaReflections,getNameSymbol=canSymbol_1_6_5_canSymbol.for("can.getName");function setName(e,t){if("function"!=typeof t){var n=t;t=function(){return n}}Object.defineProperty(e,getNameSymbol,{value:t})}var anonymousID=0;function getName(e){var t=typeof e;if(null===e||"object"!==t&&"function"!==t)return""+e;var n=e[getNameSymbol];if(n)return n.call(e);if("function"==t)return"name"in e||(e.name="functionIE"+anonymousID++),e.name;if(e.constructor&&e!==e.constructor){var a=getName(e.constructor);if(a){if(type.isValueLike(e))return a+"<>";if(type.isMoreListLikeThanMapLike(e))return a+"[]";if(type.isMapLike(e))return a+"{}"}}}var getName_1={setName:setName,getName:getName};function keysPolyfill(){var e=[],t=0;return this.forEach(function(t,n){e.push(n)}),{next:function(){return{value:e[t],done:t++===e.length}}}}"undefined"!=typeof Map&&(shape.assignSymbols(Map.prototype,{"can.getOwnEnumerableKeys":Map.prototype.keys,"can.setKeyValue":Map.prototype.set,"can.getKeyValue":Map.prototype.get,"can.deleteKeyValue":Map.prototype["delete"],"can.hasOwnKey":Map.prototype.has}),"function"!=typeof Map.prototype.keys&&(Map.prototype.keys=Map.prototype[canSymbol_1_6_5_canSymbol.for("can.getOwnEnumerableKeys")]=keysPolyfill)),"undefined"!=typeof WeakMap&&shape.assignSymbols(WeakMap.prototype,{"can.getOwnEnumerableKeys":function(){throw new Error("can-reflect: WeakMaps do not have enumerable keys.")},"can.setKeyValue":WeakMap.prototype.set,"can.getKeyValue":WeakMap.prototype.get,"can.deleteKeyValue":WeakMap.prototype["delete"],"can.hasOwnKey":WeakMap.prototype.has}),"undefined"!=typeof Set&&(shape.assignSymbols(Set.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&shape.each(t,function(e){this.delete(e)},this),shape.each(n,function(e){this.add(e)},this)},"can.size":function(){return this.size}}),"function"!=typeof Set.prototype[canSymbol_1_6_5_canSymbol.iterator]&&(Set.prototype[canSymbol_1_6_5_canSymbol.iterator]=function(){var e=[],t=0;return this.forEach(function(t){e.push(t)}),{next:function(){return{value:e[t],done:t++===e.length}}}})),"undefined"!=typeof WeakSet&&shape.assignSymbols(WeakSet.prototype,{"can.isListLike":!0,"can.isMoreListLikeThanMapLike":!0,"can.updateValues":function(e,t,n){t!==n&&shape.each(t,function(e){this.delete(e)},this),shape.each(n,function(e){this.add(e)},this)},"can.size":function(){throw new Error("can-reflect: WeakSets do not have enumerable keys.")}});var reflect={};[call,getSet,observe,shape,type,getName_1,schema].forEach(function(e){for(var t in e)reflect[t]=e[t]});var canReflect_1_18_0_canReflect=canNamespace_1_0_0_canNamespace.Reflect=reflect,utils={isContainer:function(e){var t=typeof e;return e&&("object"===t||"function"===t)},strReplacer:/\{([^\}]+)\}/g,parts:function(e){return Array.isArray(e)?e:"undefined"==typeof e?[]:(e+"").replace(/\[/g,".").replace(/]/g,"").split(".")}},canKey_1_2_1_utils=utils,_delete=function(e,t){for(var n=canKey_1_2_1_utils.parts(t),a=e,r=0;r<n.length-1;r++)a&&(a=canReflect_1_18_0_canReflect.getKeyValue(a,n[r]));a&&canReflect_1_18_0_canReflect.deleteKeyValue(a,n[n.length-1])};function get(e,t){var n=canKey_1_2_1_utils.parts(t),a=n.length,r,o,s;if(!a)return e;for(r=e,o=0;o<a&&canKey_1_2_1_utils.isContainer(r)&&null!==r;o++)s=r,r=canReflect_1_18_0_canReflect.getKeyValue(s,n[o]);return r}var get_1=get,replaceWith=function(e,t,n,a){return e.replace(canKey_1_2_1_utils.strReplacer,function(e,r){var o=get_1(t,r);return a&&_delete(t,r),n?n(r,o):o})},setValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setValue");function set$1(e,t,n){for(var a=canKey_1_2_1_utils.parts(t),r=e,o=a.length,s=0;s<o-1&&canKey_1_2_1_utils.isContainer(r);s++)r=canReflect_1_18_0_canReflect.getKeyValue(r,a[s]);if(r)canReflect_1_18_0_canReflect.setKeyValue(r,a[s],n);else throw new TypeError("Cannot set value at key path '"+t+"'");return e}var set_1=set$1,walk=function(e,t,n){var a=canKey_1_2_1_utils.parts(t),r=a.length,o,s,l,d;if(r)for(o=e,s=0;s<r;s++){l=o,d=a[s],o=canKey_1_2_1_utils.isContainer(l)&&canReflect_1_18_0_canReflect.getKeyValue(l,d);var p=n({parent:l,key:d,value:o},s);void 0!==p&&(o=p)}};function deleteKeys(e){for(var t=e.length-1,n;0<=t;t--)if(n=e[t],delete n.parent[n.key],0!==canReflect_1_18_0_canReflect.size(n.parent))return}var transform=function(e,t){var n=canReflect_1_18_0_canReflect.serialize(e);return canReflect_1_18_0_canReflect.eachKey(t,function(e,t){var a=canKey_1_2_1_utils.parts(t),r=canKey_1_2_1_utils.parts(e),o=[];walk(n,a,function(e){o.push(e)});var i=o[o.length-1],s=i.value;void 0!==s&&(walk(n,r,function(e,t){return t<r.length-1&&!e.value?e.parent[e.key]={}:void(t===r.length-1&&(e.parent[e.key]=s))}),deleteKeys(o))}),n},canKey_1_2_1_canKey=canNamespace_1_0_0_canNamespace.key={deleteKey:_delete,get:get_1,replaceWith:replaceWith,set:set_1,transform:transform,walk:walk},commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis;function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var warnTimeout=5e3,logLevel=0,warn=function(){var e=this.logLevel;2>e&&("undefined"!=typeof console&&console.warn?this._logger("warn",Array.prototype.slice.call(arguments)):"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments)))},log=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.log&&this._logger("log",Array.prototype.slice.call(arguments))},error=function(){var e=this.logLevel;1>e&&"undefined"!=typeof console&&console.error&&this._logger("error",Array.prototype.slice.call(arguments))},_logger=function(t,n){try{console[t].apply(console,n)}catch(a){console[t](n)}},canLog_1_0_2_canLog={warnTimeout:5000,logLevel:logLevel,warn:warn,log:log,error:error,_logger:_logger},dev={warnTimeout:5e3,logLevel:0,stringify:function(e){return JSON.stringify(e,function(e,t){return t===void 0?"/* void(undefined) */":t},"  ").replace(/"\/\* void\(undefined\) \*\/"/g,"undefined")},warn:function(){},log:function(){},error:function(){},_logger:canLog_1_0_2_canLog._logger},canQueues_1_3_2_queueState={lastTask:null},canAssign_1_3_3_canAssign=canNamespace_1_0_0_canNamespace.assign=function(e,t){for(var n in t){var a=Object.getOwnPropertyDescriptor(e,n);a&&!1===a.writable||(e[n]=t[n])}return e};function noOperation(){}var Queue=function(e,t){this.callbacks=canAssign_1_3_3_canAssign({onFirstTask:noOperation,onComplete:function(){canQueues_1_3_2_queueState.lastTask=null}},t||{}),this.name=e,this.index=0,this.tasks=[],this._log=!1};Queue.prototype.constructor=Queue,Queue.noop=noOperation,Queue.prototype.enqueue=function(e,t,n,a){var r=this.tasks.push({fn:e,context:t,args:n,meta:a||{}});1===r&&this.callbacks.onFirstTask(this)},Queue.prototype.flush=function(){for(;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.callbacks.onComplete(this)},Queue.prototype.log=function(){this._log=!arguments.length||arguments[0]};var canQueues_1_3_2_queue=Queue,PriorityQueue=function(){canQueues_1_3_2_queue.apply(this,arguments),this.taskMap=new Map,this.taskContainersByPriority=[],this.curPriorityIndex=1/0,this.curPriorityMax=0,this.isFlushing=!1,this.tasksRemaining=0};PriorityQueue.prototype=Object.create(canQueues_1_3_2_queue.prototype),PriorityQueue.prototype.constructor=PriorityQueue,PriorityQueue.prototype.enqueue=function(e,t,n,a){if(!this.taskMap.has(e)){this.tasksRemaining++;var r=0===this.taskContainersByPriority.length,o={fn:e,context:t,args:n,meta:a||{}},i=this.getTaskContainerAndUpdateRange(o);i.tasks.push(o),this.taskMap.set(e,o),r&&this.callbacks.onFirstTask(this)}},PriorityQueue.prototype.getTaskContainerAndUpdateRange=function(e){var t=e.meta.priority||0;t<this.curPriorityIndex&&(this.curPriorityIndex=t),t>this.curPriorityMax&&(this.curPriorityMax=t);var n=this.taskContainersByPriority,a=n[t];return a||(a=n[t]={tasks:[],index:0}),a},PriorityQueue.prototype.flush=function(){if(!this.isFlushing)for(this.isFlushing=!0;;)if(this.curPriorityIndex<=this.curPriorityMax){var e=this.taskContainersByPriority[this.curPriorityIndex];if(e&&e.tasks.length>e.index){var t=e.tasks[e.index++];this.tasksRemaining--,this.taskMap["delete"](t.fn),t.fn.apply(t.context,t.args)}else this.curPriorityIndex++}else return this.taskMap=new Map,this.curPriorityIndex=1/0,this.curPriorityMax=0,this.taskContainersByPriority=[],this.isFlushing=!1,void this.callbacks.onComplete(this)},PriorityQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},PriorityQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},PriorityQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=t.meta.priority||0,a=this.taskContainersByPriority[n],r=a.tasks.indexOf(t,a.index);if(0<=r)return a.tasks.splice(r,1),this.tasksRemaining--,this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},PriorityQueue.prototype.tasksRemainingCount=function(){return this.tasksRemaining};var canQueues_1_3_2_priorityQueue=PriorityQueue,CompletionQueue=function(){canQueues_1_3_2_queue.apply(this,arguments),this.flushCount=0};CompletionQueue.prototype=Object.create(canQueues_1_3_2_queue.prototype),CompletionQueue.prototype.constructor=CompletionQueue,CompletionQueue.prototype.flush=function(){if(0===this.flushCount){for(this.flushCount++;this.index<this.tasks.length;){var e=this.tasks[this.index++];e.fn.apply(e.context,e.args)}this.index=0,this.tasks=[],this.flushCount--,this.callbacks.onComplete(this)}};var canQueues_1_3_2_completionQueue=CompletionQueue,canQueues_1_3_2_sortedIndexBy=function(e,t,n){if(t&&t.length){if(-1===e(n,t[0]))return 0;if(1===e(n,t[t.length-1]))return t.length;for(var a=0,r=t.length;a<r;){var o=a+r>>>1,i=t[o],s=e(n,i);-1===s?r=o:a=o+1}return r}},sortStable=!0,indexOf=Array.prototype.indexOf,hasDuplicate,sortInput;function sortOrder(e,t){if(e===t)return hasDuplicate=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n?e===document||e.ownerDocument===document&&document.documentElement.contains(e)?-1:t===document||t.ownerDocument===document&&document.documentElement.contains(t)?1:sortInput?indexOf.call(sortInput,e)-indexOf.call(sortInput,t):0:4&n?-1:1)}function uniqueSort(e){var t=[],n=0,a=0,r;if(hasDuplicate=!1,sortInput=!sortStable&&e.slice(0),e.sort(sortOrder),hasDuplicate){for(;r=e[a++];)r===e[a]&&(n=t.push(a));for(;n--;)e.splice(t[n],1)}return sortInput=null,e}var canQueues_1_3_2_elementSort={uniqueSort:uniqueSort,sortOrder:sortOrder},canElementSymbol=canSymbol_1_6_5_canSymbol.for("can.element");function sortTasks(e,t){return canQueues_1_3_2_elementSort.sortOrder(e.meta.element,t.meta.element)}var DomOrderQueue=function(){canQueues_1_3_2_queue.apply(this,arguments),this.taskMap=new Map,this.unsortable=[],this.isFlushing=!1};DomOrderQueue.prototype=Object.create(canQueues_1_3_2_queue.prototype),DomOrderQueue.prototype.constructor=DomOrderQueue,DomOrderQueue.prototype.enqueue=function(e,t,n,a){var r;if(!this.taskMap.has(e)){a||(a={}),a.element||(a.element=e[canElementSymbol]),r={fn:e,context:t,args:n,meta:a},this.taskMap.set(e,r);var o=canQueues_1_3_2_sortedIndexBy(sortTasks,this.tasks,r);this.tasks.splice(o,0,r),1===this.tasks.length&&this.callbacks.onFirstTask(this)}else r=this.taskMap.get(e),r.context=t,r.args=n,a||(a={}),a.element||(a.element=e[canElementSymbol]),r.meta=a},DomOrderQueue.prototype.flush=function(){if(!this.isFlushing){for(this.isFlushing=!0;this.tasks.length;){var e=this.tasks.shift();this.taskMap["delete"](e.fn),e.fn.apply(e.context,e.args)}this.isFlushing=!1,this.callbacks.onComplete(this)}},DomOrderQueue.prototype.isEnqueued=function(e){return this.taskMap.has(e)},DomOrderQueue.prototype.flushQueuedTask=function(e){var t=this.dequeue(e);t&&t.fn.apply(t.context,t.args)},DomOrderQueue.prototype.dequeue=function(e){var t=this.taskMap.get(e);if(t){var n=this.tasks.indexOf(t);if(0<=n)return this.tasks.splice(n,1),this.taskMap["delete"](t.fn),t;console.warn("Task",e,"has already run")}},DomOrderQueue.prototype.tasksRemainingCount=function(){return this.tasks.length};var canQueues_1_3_2_domOrderQueue=DomOrderQueue,canQueues_1_3_2_canQueues=createCommonjsModule(function(e){var t=0,n=!1,a=0,r=["notify","derive","domUI","dom","mutate"],o,i,s,l,d,p;i=new canQueues_1_3_2_queue("NOTIFY",{onComplete:function(){s.flush()},onFirstTask:function(){t?n=!0:i.flush()}}),s=new canQueues_1_3_2_priorityQueue("DERIVE",{onComplete:function(){d.flush()},onFirstTask:function(){n=!0}}),d=new canQueues_1_3_2_domOrderQueue("DOM   ",{onComplete:function(){l.flush()},onFirstTask:function(){n=!0}}),l=new canQueues_1_3_2_completionQueue("DOM_UI",{onComplete:function(){p.flush()},onFirstTask:function(){n=!0}}),p=new canQueues_1_3_2_queue("MUTATE",{onComplete:function(){canQueues_1_3_2_queueState.lastTask=null},onFirstTask:function(){n=!0}});var c={Queue:canQueues_1_3_2_queue,PriorityQueue:canQueues_1_3_2_priorityQueue,CompletionQueue:canQueues_1_3_2_completionQueue,DomOrderQueue:canQueues_1_3_2_domOrderQueue,notifyQueue:i,deriveQueue:s,domQueue:d,domUIQueue:l,mutateQueue:p,batch:{start:function(){t++,1===t&&(a++,o={number:a})},stop:function(){t--,0===t&&n&&(n=!1,i.flush())},isCollecting:function(){return 0<t},number:function(){return a},data:function(){return o}},runAsTask:function(e){return e},enqueueByQueue:function(e,t,n,a,o){e&&(c.batch.start(),r.forEach(function(r){var i=c[r+"Queue"],s=e[r];s!==void 0&&s.forEach(function(e){var r=null==a?{}:a(e,t,n);r.reasonLog=o,i.enqueue(e,t,n,r)})}),c.batch.stop())},lastTask:function(){return canQueues_1_3_2_queueState.lastTask},stack:function(e){for(var t=e||canQueues_1_3_2_queueState.lastTask,n=[];t;)n.unshift(t),t=t.meta.parentTask;return n},logStack:function(e){var t=this.stack(e);t.forEach(function(e,t){var n=e.meta;0===t&&n&&n.reasonLog&&dev.log.apply(dev,n.reasonLog);var a=n&&n.log?n.log:[e.fn.name,e];dev.log.apply(dev,[e.meta.stack.name+" ran task:"].concat(a))})},taskCount:function(){return i.tasks.length+s.tasks.length+l.tasks.length+p.tasks.length},flush:function(){i.flush()},log:function(){i.log.apply(i,arguments),s.log.apply(s,arguments),l.log.apply(l,arguments),d.log.apply(d,arguments),p.log.apply(p,arguments)}};if(canNamespace_1_0_0_canNamespace.queues)throw new Error("You can't have two versions of can-queues, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.queues=c}),canObservationRecorder_1_3_1_canObservationRecorder=createCommonjsModule(function(e){var t=[],n=canSymbol_1_6_5_canSymbol.for("can.addParent"),a=canSymbol_1_6_5_canSymbol.for("can.getValue"),r={stack:t,start:function(e){var n={keyDependencies:new Map,valueDependencies:new Set,childDependencies:new Set,traps:null,ignore:0,name:e};return t.push(n),n},stop:function(){return t.pop()},add:function(e,n){var a=t[t.length-1];if(a&&0===a.ignore)if(a.traps)a.traps.push([e,n]);else if(void 0===n)a.valueDependencies.add(e);else{var r=a.keyDependencies.get(e);r||(r=new Set,a.keyDependencies.set(e,r)),r.add(n)}},addMany:function(e){var n=t[t.length-1];if(n)if(n.traps)n.traps.push.apply(n.traps,e);else for(var a=0,r=e.length;a<r;a++)this.add(e[a][0],e[a][1])},created:function(e){var a=t[t.length-1];a&&(a.childDependencies.add(e),e[n]&&e[n](a))},ignore:function(e){return function(){if(t.length){var n=t[t.length-1];n.ignore++;var a=e.apply(this,arguments);return n.ignore--,a}return e.apply(this,arguments)}},peekValue:function(e){if(!e||!e[a])return e;if(t.length){var n=t[t.length-1];n.ignore++;var r=e[a]();return n.ignore--,r}return e[a]()},isRecording:function(){var e=t.length,n=e&&t[e-1];return n&&0===n.ignore&&n},makeDependenciesRecord:function(e){return{traps:null,keyDependencies:new Map,valueDependencies:new Set,ignore:0,name:e}},makeDependenciesRecorder:function(){return r.makeDependenciesRecord()},trap:function(){if(t.length){var e=t[t.length-1],n=e.traps,a=e.traps=[];return function(){return e.traps=n,a}}return function(){return[]}},trapsCount:function(){if(t.length){var e=t[t.length-1];return e.traps.length}return 0}};if(canNamespace_1_0_0_canNamespace.ObservationRecorder)throw new Error("You can't have two versions of can-observation-recorder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.ObservationRecorder=r});function isBuiltInPrototype(e){if(e===Object.prototype)return!0;var t=Object.prototype.toString.call(e),n=-1!==t.indexOf("[object ");return"[object Object]"!==t&&n}function getDeepSize(e,t){if(0===t)return canReflect_1_18_0_canReflect.size(e);if(0===canReflect_1_18_0_canReflect.size(e))return 0;var n=0;return canReflect_1_18_0_canReflect.each(e,function(e){n+=getDeepSize(e,t-1)}),n}function getDeep(e,t,n,a){if(e)if(a!==n)canReflect_1_18_0_canReflect.each(e,function(e){getDeep(e,t,n+1,a)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e))canReflect_1_18_0_canReflect.addValues(t,canReflect_1_18_0_canReflect.toArray(e));else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}function clearDeep(e,t,n,a){if(!(n===t.length))canReflect_1_18_0_canReflect.each(e,function(r,o){clearDeep(r,t.concat(o),n,a),canReflect_1_18_0_canReflect.deleteKeyValue(e,o)});else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)){var r=canReflect_1_18_0_canReflect.toArray(e);a&&r.forEach(function(e){a.apply(null,t.concat(e))}),canReflect_1_18_0_canReflect.removeValues(e,r)}else throw new Error("can-key-tree: Map-type leaf containers are not supported yet.")}var KeyTree=function(e,t){var n=e[0];this.root=canReflect_1_18_0_canReflect.isConstructorLike(n)?new n:n,this.callbacks=t||{},this.treeStructure=e,this.empty=!0};canReflect_1_18_0_canReflect.assign(KeyTree.prototype,{add:function(e){if(e.length>this.treeStructure.length)throw new Error("can-key-tree: Can not add path deeper than tree.");for(var t=this.root,n=!0===this.empty,a=0;a<e.length-1;a++){var r=e[a],o=canReflect_1_18_0_canReflect.getKeyValue(t,r);if(!o){var s=this.treeStructure[a+1];o=isBuiltInPrototype(s.prototype)?new s:new s(r),canReflect_1_18_0_canReflect.setKeyValue(t,r,o)}t=o}if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(t))canReflect_1_18_0_canReflect.addValues(t,[e[e.length-1]]);else throw new Error("can-key-tree: Map types are not supported yet.");return n&&(this.empty=!1,this.callbacks.onFirst&&this.callbacks.onFirst.call(this)),this},getNode:function(e){for(var t=this.root,n=0,a;n<e.length;n++)if(a=e[n],t=canReflect_1_18_0_canReflect.getKeyValue(t,a),!t)return;return t},get:function(e){var t=this.getNode(e);if(this.treeStructure.length===e.length)return t;var n=this.treeStructure[this.treeStructure.length-1],a=new n;return getDeep(t,a,e.length,this.treeStructure.length-1),a},delete:function(e,t){for(var n=this.root,a=[this.root],r=e[e.length-1],o=0;o<e.length-1;o++){var s=e[o],l=canReflect_1_18_0_canReflect.getKeyValue(n,s);if(void 0===l)return!1;a.push(l),n=l}if(!e.length)clearDeep(n,[],this.treeStructure.length-1,t);else if(e.length!==this.treeStructure.length){var d=canReflect_1_18_0_canReflect.getKeyValue(n,r);if(void 0!==d)clearDeep(d,e,this.treeStructure.length-1,t),canReflect_1_18_0_canReflect.deleteKeyValue(n,r);else return!1}else if(canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(n))t&&t.apply(null,e.concat(r)),canReflect_1_18_0_canReflect.removeValues(n,[r]);else throw new Error("can-key-tree: Map types are not supported yet.");for(o=a.length-2;0<=o&&0===canReflect_1_18_0_canReflect.size(n);o--)n=a[o],canReflect_1_18_0_canReflect.deleteKeyValue(n,e[o]);return 0===canReflect_1_18_0_canReflect.size(this.root)&&(this.empty=!0,this.callbacks.onEmpty&&this.callbacks.onEmpty.call(this)),!0},size:function(){return getDeepSize(this.root,this.treeStructure.length-1)},isEmpty:function(){return this.empty}});var canKeyTree_1_2_2_canKeyTree=KeyTree,canDefineLazyValue_1_1_1_defineLazyValue=function(e,t,n,a){Object.defineProperty(e,t,{configurable:!0,get:function(){Object.defineProperty(this,t,{value:void 0,writable:!0});var r=n.call(this,e,t);return Object.defineProperty(this,t,{value:r,writable:!!a}),r},set:function(e){return Object.defineProperty(this,t,{value:e,writable:!!a}),e}})},properties={on:function(e,t){this.handlers.add([t||"mutate",e])},off:function(e,t){e===void 0?t===void 0?this.handlers.delete([]):this.handlers.delete([t]):this.handlers.delete([t||"mutate",e])}},symbols={"can.onValue":properties.on,"can.offValue":properties.off,"can.dispatch":function(e,t){var n=[];n=[this.handlers.getNode([]),this,[e,t]],canQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues,n)},"can.getWhatIChange":function(){},"can.isBound":function(){return!this.handlers.isEmpty()}};function defineLazyHandlers(){return new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.onBound!==void 0&&this.onBound.bind(this),onEmpty:this.onUnbound!==void 0&&this.onUnbound.bind(this)})}var mixinValueEventBindings=function(e){return canReflect_1_18_0_canReflect.assign(e,properties),canReflect_1_18_0_canReflect.assignSymbols(e,symbols),canDefineLazyValue_1_1_1_defineLazyValue(e,"handlers",defineLazyHandlers,!0),e};mixinValueEventBindings.addHandlers=function(e,t){return console.warn("can-event-queue/value: Avoid using addHandlers. Add onBound and onUnbound methods instead."),e.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],t),e};var value=mixinValueEventBindings;function addNewKeyDependenciesIfNotInOld(e){(this.oldEventSet===void 0||!1===this.oldEventSet["delete"](e))&&canReflect_1_18_0_canReflect.onKeyValue(this.observable,e,this.onDependencyChange,"notify")}function addObservablesNewKeyDependenciesIfNotInOld(e,t){e.forEach(addNewKeyDependenciesIfNotInOld,{onDependencyChange:this.onDependencyChange,observable:t,oldEventSet:this.oldDependencies.keyDependencies.get(t)})}function removeKeyDependencies(e){canReflect_1_18_0_canReflect.offKeyValue(this.observable,e,this.onDependencyChange,"notify")}function removeObservablesKeyDependencies(e,t){e.forEach(removeKeyDependencies,{onDependencyChange:this.onDependencyChange,observable:t})}function addValueDependencies(e){!1===this.oldDependencies.valueDependencies.delete(e)&&canReflect_1_18_0_canReflect.onValue(e,this.onDependencyChange,"notify")}function removeValueDependencies(e){canReflect_1_18_0_canReflect.offValue(e,this.onDependencyChange,"notify")}var canObservation_4_2_0_recorderDependencyHelpers={updateObservations:function(e){e.newDependencies.keyDependencies.forEach(addObservablesNewKeyDependenciesIfNotInOld,e),e.oldDependencies.keyDependencies.forEach(removeObservablesKeyDependencies,e),e.newDependencies.valueDependencies.forEach(addValueDependencies,e),e.oldDependencies.valueDependencies.forEach(removeValueDependencies,e)},stopObserving:function(e,t){e.keyDependencies.forEach(removeObservablesKeyDependencies,{onDependencyChange:t}),e.valueDependencies.forEach(removeValueDependencies,{onDependencyChange:t})}},temporarilyBoundNoOperation=function(){},unbindTemporarilyBoundValue=function(){for(var e=0,t=observables.length;e<t;e++)canReflect_1_18_0_canReflect.offValue(observables[e],temporarilyBoundNoOperation);observables=null},observables;function temporarilyBind(e){var t=e.computeInstance||e;canReflect_1_18_0_canReflect.onValue(t,temporarilyBoundNoOperation),observables||(observables=[],setTimeout(unbindTemporarilyBoundValue,10)),observables.push(t)}var canObservation_4_2_0_temporarilyBind=temporarilyBind,dispatchSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatch"),getChangesSymbol=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies");function Observation(e,t,n){this.deriveQueue=canQueues_1_3_2_canQueues.deriveQueue,this.func=e,this.context=t,this.options=n||{priority:0,isObservable:!0},this.bound=!1,this._value=void 0,this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord(),this.oldDependencies=null;var a=this;this.onDependencyChange=function(e){a.dependencyChange(this,e)},this.update=this.update.bind(this)}value(Observation.prototype),canReflect_1_18_0_canReflect.assign(Observation.prototype,{onBound:function(){this.bound=!0,this.oldDependencies=this.newDependencies,canObservationRecorder_1_3_1_canObservationRecorder.start(this._name),this._value=this.func.call(this.context),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.stop(),canObservation_4_2_0_recorderDependencyHelpers.updateObservations(this)},dependencyChange:function(){if(!0===this.bound){var e=[];e=[this.update,this,[],{priority:this.options.priority,element:this.options.element}],this.deriveQueue.enqueue.apply(this.deriveQueue,e)}},update:function(){if(!0===this.bound){var e=this._value;this.oldValue=null,this.onBound(),e!==this._value&&this[dispatchSymbol](this._value,e)}},onUnbound:function(){this.bound=!1,canObservation_4_2_0_recorderDependencyHelpers.stopObserving(this.newDependencies,this.onDependencyChange),this.newDependencies=canObservationRecorder_1_3_1_canObservationRecorder.makeDependenciesRecord()},get:function(){return this.options.isObservable&&canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!1===this.bound&&Observation.temporarilyBind(this)),!0===this.bound?(0<this.deriveQueue.tasksRemainingCount()&&Observation.updateChildrenAndSelf(this),this._value):this.func.call(this.context)},hasDependencies:function(){var e=this.newDependencies;return this.bound?0<e.valueDependencies.size+e.keyDependencies.size:void 0},log:function(){}}),Object.defineProperty(Observation.prototype,"value",{get:function(){return this.get()}});var observationProto={"can.getValue":Observation.prototype.get,"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.valueHasDependencies":Observation.prototype.hasDependencies,"can.getValueDependencies":function(){if(!0===this.bound){var e=this.newDependencies,t={};return e.keyDependencies.size&&(t.keyDependencies=e.keyDependencies),e.valueDependencies.size&&(t.valueDependencies=e.valueDependencies),t}},"can.getPriority":function(){return this.options.priority},"can.setPriority":function(e){this.options.priority=e},"can.setElement":function(e){this.options.element=e,this.deriveQueue=canQueues_1_3_2_canQueues.domQueue||canQueues_1_3_2_canQueues.deriveQueue}};canReflect_1_18_0_canReflect.assignSymbols(Observation.prototype,observationProto),Observation.updateChildrenAndSelf=function(e){if(void 0!==e.update&&!0===e.deriveQueue.isEnqueued(e.update))return e.deriveQueue.flushQueuedTask(e.update),!0;if(e[getValueDependenciesSymbol]){var t=!1,n=e[getValueDependenciesSymbol]().valueDependencies||[];return n.forEach(function(e){!0===Observation.updateChildrenAndSelf(e)&&(t=!0)}),t}return!1};var alias={addAll:"addMany"};["add","addAll","ignore","trap","trapsCount","isRecording"].forEach(function(e){Observation[e]=function(){var t=alias[e]?alias[e]:e;return console.warn("can-observation: Call "+t+"() on can-observation-recorder."),canObservationRecorder_1_3_1_canObservationRecorder[t].apply(this,arguments)}}),Observation.prototype.start=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onBound()},Observation.prototype.stop=function(){return console.warn("can-observation: Use .on and .off to bind."),this.onUnbound()},Observation.temporarilyBind=canObservation_4_2_0_temporarilyBind;var canObservation_4_2_0_canObservation=canNamespace_1_0_0_canNamespace.Observation=Observation,key=function(e,t){var n=canKey_1_2_1_utils.parts(t),a=n.length-1,r=new canObservation_4_2_0_canObservation(function(){var t;return canKey_1_2_1_canKey.walk(e,n,function(e,n){n===a&&(t=e.value)}),t}),o=function(t){canKey_1_2_1_canKey.set(e,n,t)};Object.defineProperty(r,"value",{get:r.get,set:o});return canReflect_1_18_0_canReflect.assignSymbols(r,{"can.setValue":o})},canSimpleObservable_2_5_0_log=function(){},dispatchSymbol$1=canSymbol_1_6_5_canSymbol.for("can.dispatch");function SimpleObservable(e){this._value=e}value(SimpleObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SimpleObservable.prototype,{log:canSimpleObservable_2_5_0_log,get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),this._value},set:function(e){var t=this._value;this._value=e,this[dispatchSymbol$1](e,t)}}),Object.defineProperty(SimpleObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}});var simpleObservableProto={"can.getValue":SimpleObservable.prototype.get,"can.setValue":SimpleObservable.prototype.set,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}};canReflect_1_18_0_canReflect.assignSymbols(SimpleObservable.prototype,simpleObservableProto);var canSimpleObservable_2_5_0_canSimpleObservable=canNamespace_1_0_0_canNamespace.SimpleObservable=SimpleObservable,peek=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));function SettableObservable(e,t,n){this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(n),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){return e.call(t,this.lastSetValue.get())},this)}value(SettableObservable.prototype),canReflect_1_18_0_canReflect.assignMap(SettableObservable.prototype,{log:canSimpleObservable_2_5_0_log,constructor:SettableObservable,handler:function(e){var t=this._value,n;this._value=e,canQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[e,t],null,n)},onBound:function(){this.bound||(this.bound=!0,this.activate())},activate:function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this._value=peek(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.handler,"notify")},set:function(e){var t=this.lastSetValue.get();canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isValueLike(t)&&!canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.setValue(t,e):e!==t&&this.lastSetValue.set(e)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound?this._value:this.observation.get()},hasDependencies:function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},getValueDependencies:function(){return canReflect_1_18_0_canReflect.getValueDependencies(this.observation)}}),Object.defineProperty(SettableObservable.prototype,"value",{set:function(e){return this.set(e)},get:function(){return this.get()}}),canReflect_1_18_0_canReflect.assignSymbols(SettableObservable.prototype,{"can.getValue":SettableObservable.prototype.get,"can.setValue":SettableObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.valueHasDependencies":SettableObservable.prototype.hasDependencies,"can.getValueDependencies":SettableObservable.prototype.getValueDependencies});var settable=SettableObservable,canValue_1_1_2_canValue=canNamespace_1_0_0_canNamespace.value={bind:function(e,t){return key(e,t)},from:function(e,t){return new canObservation_4_2_0_canObservation(function(){return canKey_1_2_1_canKey.get(e,t)})},returnedBy:function(e,t,n){return 1===e.length?new settable(e,t,n):new canObservation_4_2_0_canObservation(e,t)},to:function(e,t){var n=key(e,t);return canReflect_1_18_0_canReflect.assignSymbols(n,{"can.getValue":null})},with:function(e){return new canSimpleObservable_2_5_0_canSimpleObservable(e)}},inSetupSymbol=canSymbol_1_6_5_canSymbol.for("can.initializing"),initializing=0,Construct=function(){if(arguments.length)return Construct.extend.apply(Construct,arguments)},canGetDescriptor;try{canGetDescriptor=!0}catch(t){canGetDescriptor=!1}var getDescriptor=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return n&&(n.get||n.set)?n:null},inheritGetterSetter=function(e,t,n){n=n||e;var a;for(var r in e)(a=getDescriptor(e,r))?this._defineProperty(n,t,r,a):Construct._overwrite(n,t,r,e[r])},simpleInherit=function(e,t,n){for(var a in n=n||e,e)Construct._overwrite(n,t,a,e[a])},defineNonEnumerable=function(e,t,n){Object.defineProperty(e,t,{configurable:!0,writable:!0,enumerable:!1,value:n})};canReflect_1_18_0_canReflect.assignMap(Construct,{constructorExtends:!0,newInstance:function(){var e=this.instance(),t;if(e.setup){if(Object.defineProperty(e,"__inSetup",{configurable:!0,enumerable:!1,value:!0,writable:!0}),Object.defineProperty(e,inSetupSymbol,{configurable:!0,enumerable:!1,value:!0,writable:!0}),t=e.setup.apply(e,arguments),t instanceof Construct.ReturnValue)return t.value;e.__inSetup=!1,e[inSetupSymbol]=!1}return e.init&&e.init.apply(e,t||arguments),e},_inherit:canGetDescriptor?inheritGetterSetter:simpleInherit,_defineProperty:function(e,t,n,a){Object.defineProperty(e,n,a)},_overwrite:function(e,t,n,a){Object.defineProperty(e,n,{value:a,configurable:!0,enumerable:!0,writable:!0})},setup:function(e){var t=e.defaults?canReflect_1_18_0_canReflect.serialize(e.defaults):{};this.defaults=canReflect_1_18_0_canReflect.assignDeepMap(t,this.defaults)},instance:function(){initializing=1;var e=new this;return initializing=0,e},extend:function(e,n,a){function r(){if(!initializing)return(!this||this.constructor!==p)&&arguments.length&&p.constructorExtends?p.extend.apply(p,arguments):p.newInstance.apply(p,arguments)}var o=e,i=n,s=a;"string"!=typeof o&&(s=i,i=o,o=null),s||(s=i,i=null),s=s||{};var l=this,d=this.prototype,p,c;for(var u in c=this.instance(),Construct._inherit(s,d,c),o||(i&&i.shortName?o=i.shortName:this.shortName&&(o=this.shortName)),p="function"==typeof namedCtor?namedCtor(constructorName,r):function(){return r.apply(this,arguments)},l)l.hasOwnProperty(u)&&(p[u]=l[u]);if(Construct._inherit(i,l,p),canReflect_1_18_0_canReflect.assignMap(p,{constructor:p,prototype:c}),void 0!==o){if(Object.getOwnPropertyDescriptor){var y=Object.getOwnPropertyDescriptor(p,"name");(!y||y.configurable)&&Object.defineProperty(p,"name",{writable:!0,value:o,configurable:!0})}p.shortName=o}defineNonEnumerable(p.prototype,"constructor",p);var m=[l].concat(Array.prototype.slice.call(arguments)),t=p.setup.apply(p,m);return p.init&&p.init.apply(p,t||m),p},ReturnValue:function(e){this.value=e}}),defineNonEnumerable(Construct.prototype,"setup",function(){}),defineNonEnumerable(Construct.prototype,"init",function(){});var canConstruct_3_5_6_canConstruct=canNamespace_1_0_0_canNamespace.Construct=Construct;function dispatch(e){var t=this.eventHandlers[e];if(t)for(var n=t.slice(),a=this.getKeyValue(e),r=0;r<n.length;r++)n[r](a)}function Globals(){this.eventHandlers={},this.properties={}}Globals.prototype.define=function(e,t,n){return void 0===n&&(n=!0),this.properties[e]||(this.properties[e]={default:t,value:t,enableCache:n}),this},Globals.prototype.getKeyValue=function(e){var t=this.properties[e];if(t)return"function"==typeof t.value?t.cachedValue?t.cachedValue:t.enableCache?(t.cachedValue=t.value(),t.cachedValue):t.value():t.value},Globals.prototype.makeExport=function(e){return function(t){return 0===arguments.length?this.getKeyValue(e):"undefined"==typeof t||null===t?void this.deleteKeyValue(e):("function"==typeof t?this.setKeyValue(e,function(){return t}):this.setKeyValue(e,t),t)}.bind(this)},Globals.prototype.offKeyValue=function(e,t){if(this.properties[e]){var n=this.eventHandlers[e];if(n){var a=n.indexOf(t);n.splice(a,1)}}return this},Globals.prototype.onKeyValue=function(e,t){return this.properties[e]&&(!this.eventHandlers[e]&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)),this},Globals.prototype.deleteKeyValue=function(e){var t=this.properties[e];return void 0!==t&&(t.value=t.default,t.cachedValue=void 0,dispatch.call(this,e)),this},Globals.prototype.setKeyValue=function(e,t){if(!this.properties[e])return this.define(e,t);var n=this.properties[e];return n.value=t,n.cachedValue=void 0,dispatch.call(this,e),this},Globals.prototype.reset=function(){for(var e in this.properties)this.properties.hasOwnProperty(e)&&(this.properties[e].value=this.properties[e].default,this.properties[e].cachedValue=void 0,dispatch.call(this,e));return this},canReflect_1_18_0_canReflect.assignSymbols(Globals.prototype,{"can.getKeyValue":Globals.prototype.getKeyValue,"can.setKeyValue":Globals.prototype.setKeyValue,"can.deleteKeyValue":Globals.prototype.deleteKeyValue,"can.onKeyValue":Globals.prototype.onKeyValue,"can.offKeyValue":Globals.prototype.offKeyValue});var canGlobals_1_2_2_canGlobalsProto=Globals,canGlobals_1_2_2_canGlobalsInstance=createCommonjsModule(function(e){var t=new canGlobals_1_2_2_canGlobalsProto;if(canNamespace_1_0_0_canNamespace.globals)throw new Error("You can't have two versions of can-globals, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.globals=t});canGlobals_1_2_2_canGlobalsInstance.define("global",function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:"object"==typeof process&&"[object process]"==={}.toString.call(process)?commonjsGlobal:window});var global_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("global");canGlobals_1_2_2_canGlobalsInstance.define("document",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").document});var document$1=canGlobals_1_2_2_canGlobalsInstance.makeExport("document");canGlobals_1_2_2_canGlobalsInstance.define("isNode",function(){return"object"==typeof process&&"[object process]"==={}.toString.call(process)});var isNode=canGlobals_1_2_2_canGlobalsInstance.makeExport("isNode");canGlobals_1_2_2_canGlobalsInstance.define("isBrowserWindow",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("isNode");return"undefined"!=typeof window&&"undefined"!=typeof document&&!1===e});var isBrowserWindow=canGlobals_1_2_2_canGlobalsInstance.makeExport("isBrowserWindow");function getTargetDocument(e){return e.ownerDocument||document$1()}function createEvent(e,t,n,a){var r=getTargetDocument(e),o=r.createEvent("HTMLEvents"),i;if("string"==typeof t)i=t;else for(var s in i=t.type,t)void 0===o[s]&&(o[s]=t[s]);return void 0===n&&(n=!0),o.initEvent(i,n,a),o}function isDomEventTarget(e){if(!(e&&e.nodeName))return e===window;var t=e.nodeType;return 1===t||9===t||11===t}function addDomContext(e,t){return isDomEventTarget(e)&&(t=Array.prototype.slice.call(t,0),t.unshift(e)),t}function removeDomContext(e,t){return isDomEventTarget(e)||(t=Array.prototype.slice.call(t,0),e=t.shift()),{context:e,args:t}}var fixSyntheticEventsOnDisabled=!1;(function(){if(isBrowserWindow()){var e=document.createElement("input");e.disabled=!0;var t=setTimeout(function(){fixSyntheticEventsOnDisabled=!0},50),n=function n(){clearTimeout(t),e.removeEventListener("fix_synthetic_events_on_disabled_test",n)};e.addEventListener("fix_synthetic_events_on_disabled_test",n);try{var a=document.create("HTMLEvents");a.initEvent("fix_synthetic_events_on_disabled_test",!1),e.dispatchEvent(a)}catch(t){n(),fixSyntheticEventsOnDisabled=!0}}})();function isDispatchingOnDisabled(e,t){var n=t.type,a=!!e.disabled;return("inserted"===n||"removed"===n)&&a}function forceEnabledForDispatch(e,t){return fixSyntheticEventsOnDisabled&&isDispatchingOnDisabled(e,t)}var util={createEvent:createEvent,addDomContext:addDomContext,removeDomContext:removeDomContext,isDomEventTarget:isDomEventTarget,getTargetDocument:getTargetDocument,forceEnabledForDispatch:forceEnabledForDispatch};function EventRegistry(){this._registry={}}var makeEventRegistry=function(){return new EventRegistry};EventRegistry.prototype.has=function(e){return!!this._registry[e]},EventRegistry.prototype.get=function(e){return this._registry[e]},EventRegistry.prototype.add=function(e,t){if(!e)throw new Error("An EventDefinition must be provided");if("function"!=typeof e.addEventListener)throw new TypeError("EventDefinition addEventListener must be a function");if("function"!=typeof e.removeEventListener)throw new TypeError("EventDefinition removeEventListener must be a function");if(t=t||e.defaultEventType,"string"!=typeof t)throw new TypeError("Event type must be a string, not "+t);if(this.has(t))throw new Error("Event \""+t+"\" is already registered");this._registry[t]=e;var n=this;return function(){n._registry[t]=void 0}};var useCapture=function(e){return"focus"===e||"blur"===e};function makeDelegator(e){var t=function(e){this.element=e,this.events={},this.delegated={}};return canReflect_1_18_0_canReflect.assignSymbols(t.prototype,{"can.setKeyValue":function(t,n){var a=this.delegated[t]=function(e){var t=e.target,a=!0,r=e.stopPropagation;e.stopPropagation=function(){r.apply(this,arguments),a=!1};var o=e.stopImmediatePropagation;e.stopImmediatePropagation=function(){o.apply(this,arguments),a=!1};do{var i=t===document?document.documentElement:t,s=i.matches||i.msMatchesSelector;canReflect_1_18_0_canReflect.each(n,function(t,n){s&&s.call(i,n)&&t.forEach(function(t){t.call(i,e)})}),t=t.parentNode}while(t&&t!==e.currentTarget&&a)};this.events[t]=n,e.addEventListener(this.element,t,a,useCapture(t))},"can.getKeyValue":function(e){return this.events[e]},"can.deleteKeyValue":function(t){e.removeEventListener(this.element,t,this.delegated[t],useCapture(t)),delete this.delegated[t],delete this.events[t]},"can.getOwnEnumerableKeys":function(){return Object.keys(this.events)}}),t}var MakeDelegateEventTree=function(e){var t=makeDelegator(e);return new canKeyTree_1_2_2_canKeyTree([Map,t,Object,Array])},domEvents={_eventRegistry:makeEventRegistry(),addEvent:function(e,t){return this._eventRegistry.add(e,t)},addEventListener:function(e,t){var n=domEvents._eventRegistry.has(t);if(n){var a=domEvents._eventRegistry.get(t);return a.addEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.addEventListener.apply(e,r)},removeEventListener:function(e,t){var n=domEvents._eventRegistry.has(t);if(n){var a=domEvents._eventRegistry.get(t);return a.removeEventListener.apply(domEvents,arguments)}var r=Array.prototype.slice.call(arguments,1);return e.removeEventListener.apply(e,r)},addDelegateListener:function(e,t,n,a){domEvents._eventTree.add([e,t,n,a])},removeDelegateListener:function(e,t,n,a){domEvents._eventTree.delete([e,t,n,a])},dispatch:function(e,t,n,a){var r=util.createEvent(e,t,n,a),o=util.forceEnabledForDispatch(e,r);o&&(e.disabled=!1);var i=e.dispatchEvent(r);return o&&(e.disabled=!0),i}};domEvents._eventTree=MakeDelegateEventTree(domEvents);var canDomEvents_1_3_11_canDomEvents=canNamespace_1_0_0_canNamespace.domEvents=domEvents,isDomEventTarget$1=util.isDomEventTarget,metaSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),dispatchBoundChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceBoundChange"),dispatchInstanceOnPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.dispatchInstanceOnPatches"),onKeyValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offKeyValue"),onEventSymbol=canSymbol_1_6_5_canSymbol.for("can.onEvent"),offEventSymbol=canSymbol_1_6_5_canSymbol.for("can.offEvent"),onValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offValue"),inSetupSymbol$1=canSymbol_1_6_5_canSymbol.for("can.initializing"),legacyMapBindings;function addHandlers(e,t){t.handlers||(t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Object,Array],{onFirst:function(){e._eventSetup!==void 0&&e._eventSetup();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!0)},onEmpty:function(){e._eventTeardown!==void 0&&e._eventTeardown();var t=e.constructor;t[dispatchBoundChangeSymbol]!==void 0&&e instanceof t&&t[dispatchBoundChangeSymbol](e,!1)}})),t.listenHandlers||(t.listenHandlers=new canKeyTree_1_2_2_canKeyTree([Map,Map,Object,Array]))}var ensureMeta=function(e){var t=e[metaSymbol];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol,t)),addHandlers(e,t),t};function stopListeningArgumentsToKeys(e,t,n,a){arguments.length&&canReflect_1_18_0_canReflect.isPrimitive(e)&&(a=n,n=t,t=e,e=this.context),"function"==typeof t&&(a=n,n=t,t=void 0),"string"==typeof n&&(a=n,n=void 0);var r=[];return e&&(r.push(e),(t||n||a)&&(r.push(t),(a||n)&&(r.push(a||this.defaultQueue),n&&r.push(n)))),r}var props={dispatch:function(e,t){if(!0!==this.__inSetup&&!0!==this[inSetupSymbol$1]){"string"==typeof e&&(e={type:e});var n=ensureMeta(this),a=n.handlers,r=void 0!==e.type&&a.getNode([e.type]),o=e.patches&&this.constructor[dispatchInstanceOnPatchesSymbol],i=void 0!==e.patches&&a.getNode(["can.patches","onKeyValue"]),s=void 0!==e.keyChanged&&a.getNode(["can.keys","onKeyValue"]),l=o||r||i||s;if(l&&canQueues_1_3_2_canQueues.batch.start(),r&&(r.onKeyValue&&canQueues_1_3_2_canQueues.enqueueByQueue(r.onKeyValue,this,t,e.makeMeta,e.reasonLog),r.event)){e.batchNum=canQueues_1_3_2_canQueues.batch.number();var d=[e].concat(t);canQueues_1_3_2_canQueues.enqueueByQueue(r.event,this,d,e.makeMeta,e.reasonLog)}s&&canQueues_1_3_2_canQueues.enqueueByQueue(s,this,[e.keyChanged],e.makeMeta,e.reasonLog),i&&canQueues_1_3_2_canQueues.enqueueByQueue(i,this,[e.patches],e.makeMeta,e.reasonLog),o&&this.constructor[dispatchInstanceOnPatchesSymbol](this,e.patches),l&&canQueues_1_3_2_canQueues.batch.stop()}return e},addEventListener:function(e,t,n){return ensureMeta(this).handlers.add([e,"event",n||"mutate",t]),this},removeEventListener:function(e,t,n){if(e===void 0){var a=ensureMeta(this).handlers,r=a.getNode([]);Object.keys(r).forEach(function(e){a.delete([e,"event"])})}else t||n?t?ensureMeta(this).handlers.delete([e,"event",n||"mutate",t]):ensureMeta(this).handlers.delete([e,"event",n||"mutate"]):ensureMeta(this).handlers.delete([e,"event"]);return this},one:function(e,t){var n=function(){return legacyMapBindings.off.call(this,e,n),t.apply(this,arguments)};return legacyMapBindings.on.call(this,e,n),this},listenTo:function(e,t,n,a){return canReflect_1_18_0_canReflect.isPrimitive(e)&&(a=n,n=t,t=e,e=this),"function"==typeof t&&(a=n,n=t,t=void 0),ensureMeta(this).listenHandlers.add([e,t,a||"mutate",n]),legacyMapBindings.on.call(e,t,n,a||"mutate"),this},stopListening:function(){function e(e,t,n,a){legacyMapBindings.off.call(e,t,a,n)}var t=stopListeningArgumentsToKeys.apply({context:this,defaultQueue:"mutate"},arguments),n=ensureMeta(this).listenHandlers;return n.delete(t,e),this},on:function(e,t,n){var a=isDomEventTarget$1(this);if(a)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.addDelegateListener(this,e,t,n):canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,n);else if(this[onEventSymbol])this[onEventSymbol](e,t,n);else if("addEventListener"in this)this.addEventListener(e,t,n);else if(this[onKeyValueSymbol$1])canReflect_1_18_0_canReflect.onKeyValue(this,e,t,n);else if(!e&&this[onValueSymbol$1])canReflect_1_18_0_canReflect.onValue(this,t,n);else throw new Error("can-event-queue: Unable to bind "+e);return this},off:function(e,t,n){var a=isDomEventTarget$1(this);if(a)"string"==typeof t?canDomEvents_1_3_11_canDomEvents.removeDelegateListener(this,e,t,n):canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,n);else if(this[offEventSymbol])this[offEventSymbol](e,t,n);else if("removeEventListener"in this)this.removeEventListener(e,t,n);else if(this[offKeyValueSymbol])canReflect_1_18_0_canReflect.offKeyValue(this,e,t,n);else if(!e&&this[offValueSymbol])canReflect_1_18_0_canReflect.offValue(this,t,n);else throw new Error("can-event-queue: Unable to unbind "+e);return this}},symbols$1={"can.onKeyValue":function(e,t,n){ensureMeta(this).handlers.add([e,"onKeyValue",n||"mutate",t])},"can.offKeyValue":function(e,t,n){ensureMeta(this).handlers.delete([e,"onKeyValue",n||"mutate",t])},"can.isBound":function(){return!ensureMeta(this).handlers.isEmpty()},"can.getWhatIChange":function(){},"can.onPatches":function(e,t){var n=ensureMeta(this).handlers;n.add(["can.patches","onKeyValue",t||"notify",e])},"can.offPatches":function(e,t){var n=ensureMeta(this).handlers;n.delete(["can.patches","onKeyValue",t||"notify",e])}};function defineNonEnumerable$1(e,t,n){Object.defineProperty(e,t,{enumerable:!1,value:n})}legacyMapBindings=function(e){return canReflect_1_18_0_canReflect.assignMap(e,props),canReflect_1_18_0_canReflect.assignSymbols(e,symbols$1)},defineNonEnumerable$1(legacyMapBindings,"addHandlers",addHandlers),defineNonEnumerable$1(legacyMapBindings,"stopListeningArgumentsToKeys",stopListeningArgumentsToKeys),props.bind=props.addEventListener,props.unbind=props.removeEventListener,canReflect_1_18_0_canReflect.assignMap(legacyMapBindings,props),canReflect_1_18_0_canReflect.assignSymbols(legacyMapBindings,symbols$1),defineNonEnumerable$1(legacyMapBindings,"start",function(){console.warn("use can-queues.batch.start()"),canQueues_1_3_2_canQueues.batch.start()}),defineNonEnumerable$1(legacyMapBindings,"stop",function(){console.warn("use can-queues.batch.stop()"),canQueues_1_3_2_canQueues.batch.stop()}),defineNonEnumerable$1(legacyMapBindings,"flush",function(){console.warn("use can-queues.flush()"),canQueues_1_3_2_canQueues.flush()}),defineNonEnumerable$1(legacyMapBindings,"afterPreviousEvents",function(e){console.warn("don't use afterPreviousEvents"),canQueues_1_3_2_canQueues.mutateQueue.enqueue(function(){canQueues_1_3_2_canQueues.mutateQueue.enqueue(e)}),canQueues_1_3_2_canQueues.flush()}),defineNonEnumerable$1(legacyMapBindings,"after",function(e){console.warn("don't use after"),canQueues_1_3_2_canQueues.mutateQueue.enqueue(e),canQueues_1_3_2_canQueues.flush()});var map$1=legacyMapBindings,SimpleMap=canConstruct_3_5_6_canConstruct.extend("SimpleMap",{setup:function(e){this._data={},e&&"object"==typeof e&&this.attr(e)},attr:function(e,t){var n=this;if(0===arguments.length){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys");var a={};return canReflect_1_18_0_canReflect.eachKey(this._data,function(e,t){canObservationRecorder_1_3_1_canObservationRecorder.add(this,t),a[t]=e},this),a}if(1<arguments.length){var r=this._data.hasOwnProperty(e),o=this._data[e];if(this._data[e]=t,o!==t){var i={keyChanged:r?void 0:e,type:e};this.dispatch(i,[t,o])}}else if("object"==typeof e)canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){n.attr(t,e)}),canQueues_1_3_2_canQueues.batch.stop();else return"constructor"===e?this.constructor:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e])},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)},get:function(){return this.attr.apply(this,arguments)},set:function(){return this.attr.apply(this,arguments)},log:function(){}});map$1(SimpleMap.prototype);var simpleMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":SimpleMap.prototype.get,"can.setKeyValue":SimpleMap.prototype.set,"can.deleteKeyValue":function(e){var t;if(this._data.hasOwnProperty(e)){var n=this._data[e];delete this._data[e],t={keyChanged:e,type:e},this.dispatch(t,[void 0,n])}},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),Object.keys(this._data)},"can.assignDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e),canQueues_1_3_2_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateMap(this,e),canQueues_1_3_2_canQueues.batch.stop()},"can.keyHasDependencies":function(){return!1},"can.getKeyDependencies":function(){},"can.hasOwnKey":function(e){return this._data.hasOwnProperty(e)}};canReflect_1_18_0_canReflect.assignSymbols(SimpleMap.prototype,simpleMapProto);var canSimpleMap_4_3_3_canSimpleMap=SimpleMap;function createConstructorFunction(e,t){function n(){return Reflect.construct(e,arguments,this.constructor)}function a(e,t){n[t]||Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}"undefined"==typeof t&&(t=Object.getPrototypeOf(Object)),n.prototype=Object.create(e.prototype),n.prototype.constructor=n;for(let n=e;n!==t&&null!==n;){const e=Object.getOwnPropertyNames(n);e.forEach(function(e){a(n,e)});const t=Object.getOwnPropertySymbols(n);t.forEach(function(e){a(n,e)}),n=Object.getPrototypeOf(n)}return n}var createConstructorFunction_1=createConstructorFunction;function AsyncObservable(e,t,n){this.resolve=this.resolve.bind(this),this.lastSetValue=new canSimpleObservable_2_5_0_canSimpleObservable(n),this.handler=this.handler.bind(this),this.observation=new canObservation_4_2_0_canObservation(function(){this.resolveCalled=!1,this.inGetter=!0;var n=e.call(t,this.lastSetValue.get(),!0===this.bound?this.resolve:void 0);if(this.inGetter=!1,void 0===n?this.resolveCalled&&this.resolve(this._value):this.resolve(n),!0!==this.bound)return n},this)}AsyncObservable.prototype=Object.create(settable.prototype),AsyncObservable.prototype.constructor=AsyncObservable,AsyncObservable.prototype.handler=function(e){e!==void 0&&settable.prototype.handler.apply(this,arguments)};var peek$1=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));AsyncObservable.prototype.activate=function(){canReflect_1_18_0_canReflect.onValue(this.observation,this.handler,"notify"),this.resolveCalled||(this._value=peek$1(this.observation))},AsyncObservable.prototype.resolve=function(e){this.resolveCalled=!0;var t=this._value;if(this._value=e,!this.inGetter){var n=[this.handlers.getNode([]),this,[e,t],null];canQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues,n)}};var async=AsyncObservable,getChangesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),metaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.meta");function ResolverObservable(e,t,n,a){this.resolver=canObservationRecorder_1_3_1_canObservationRecorder.ignore(e),this.context=t,this._valueOptions={resolve:this.resolve.bind(this),listenTo:this.listenTo.bind(this),stopListening:this.stopListening.bind(this),lastSet:new canSimpleObservable_2_5_0_canSimpleObservable(n)},this.update=this.update.bind(this),this.contextHandlers=new WeakMap,this.teardown=null,this.binder={},this[metaSymbol$1]=canReflect_1_18_0_canReflect.assignMap({},a)}ResolverObservable.prototype=Object.create(settable.prototype);function deleteHandler(e,t,n,a){map$1.off.call(e,t,a,n)}canReflect_1_18_0_canReflect.assignMap(ResolverObservable.prototype,{constructor:ResolverObservable,listenTo:function(e,t,n,a){canReflect_1_18_0_canReflect.isPrimitive(e)&&(n=t,t=e,e=this.context),"function"==typeof t&&(n=t,t=void 0);var r=this,o=n.bind(this.context);o[getChangesSymbol$1]=function(){var e=new Set([r]);return{valueDependencies:e}},this.contextHandlers.set(n,o),map$1.listenTo.call(this.binder,e,t,o,a||"notify")},stopListening:function(){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers;if(t){var n=map$1.stopListeningArgumentsToKeys.call({context:this.context,defaultQueue:"notify"});t.delete(n,deleteHandler)}return this},resolve:function(e){if(this._value=e,this.isBinding)return this.lastValue=this._value,e;if(this._value!==this.lastValue){canQueues_1_3_2_canQueues.batch.start(),canQueues_1_3_2_canQueues.deriveQueue.enqueue(this.update,this,[],{}),canQueues_1_3_2_canQueues.batch.stop()}return e},update:function(){if(this.lastValue!==this._value){var e=this.lastValue;this.lastValue=this._value,canQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])}},activate:function(){this.isBinding=!0,this.teardown=this.resolver.call(this.context,this._valueOptions),this.isBinding=!1},onUnbound:function(){this.bound=!1,map$1.stopListening.call(this.binder),null!=this.teardown&&(this.teardown(),this.teardown=null)},set:function(e){this._valueOptions.lastSet.set(e)},get:function(){if(canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&this.onBound()),!0===this.bound)return this._value;this[metaSymbol$1].resetUnboundValueInGet&&(this._value=void 0);var e=function(){};this.on(e);var t=this._value;return this.off(e),t},hasDependencies:function e(){var e=!1;if(this.bound){var t=this.binder[metaSymbol$1],n=t&&t.listenHandlers;e=!!n.size()}return e},getValueDependencies:function(){if(this.bound){var e=this.binder[canSymbol_1_6_5_canSymbol.for("can.meta")],t=e&&e.listenHandlers,n=new Map,a=new Set;if(t&&(canReflect_1_18_0_canReflect.each(t.root,function(e,t){canReflect_1_18_0_canReflect.each(e,function(e,r){if(void 0===r)a.add(t);else{var o=n.get(t);o||(o=new Set,n.set(t,o)),o.add(r)}})}),a.size||n.size)){var r={};return n.size&&(r.keyDependencies=n),a.size&&(r.valueDependencies=a),r}}}}),canReflect_1_18_0_canReflect.assignSymbols(ResolverObservable.prototype,{"can.getValue":ResolverObservable.prototype.get,"can.setValue":ResolverObservable.prototype.set,"can.isMapLike":!1,"can.getPriority":function(){return this.priority||0},"can.setPriority":function(e){this.priority=e},"can.valueHasDependencies":ResolverObservable.prototype.hasDependencies,"can.getValueDependencies":ResolverObservable.prototype.getValueDependencies});var resolver=ResolverObservable,metaSymbol$2=canSymbol_1_6_5_canSymbol.for("can.meta");function addHandlers$1(e,t){t.lifecycleHandlers||(t.lifecycleHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array])),t.instancePatchesHandlers||(t.instancePatchesHandlers=new canKeyTree_1_2_2_canKeyTree([Object,Array]))}function ensureMeta$2(e){var t=e[metaSymbol$2];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol$2,t)),addHandlers$1(e,t),t}var props$1={};function onOffAndDispatch(e,t,n){props$1["can.on"+e]=function(e,t){ensureMeta$2(this)[n].add([t||"mutate",e])},props$1["can.off"+e]=function(e,t){ensureMeta$2(this)[n].delete([t||"mutate",e])},props$1["can."+t]=function(e,t){canQueues_1_3_2_canQueues.enqueueByQueue(ensureMeta$2(this)[n].getNode([]),this,[e,t])}}onOffAndDispatch("InstancePatches","dispatchInstanceOnPatches","instancePatchesHandlers"),onOffAndDispatch("InstanceBoundChange","dispatchInstanceBoundChange","lifecycleHandlers");function mixinTypeBindings(e){return canReflect_1_18_0_canReflect.assignSymbols(e,props$1)}Object.defineProperty(mixinTypeBindings,"addHandlers",{enumerable:!1,value:addHandlers$1});var type$1=mixinTypeBindings,strUndHash=/_|-/,strColons=/\=\=/,strWords=/([A-Z]+)([A-Z][a-z])/g,strLowUp=/([a-z\d])([A-Z])/g,strDash=/([a-z\d])([A-Z])/g,strQuote=/"/g,strSingleQuote=/'/g,strHyphenMatch=/-+(.)?/g,strCamelMatch=/[a-z][A-Z]/g,convertBadValues=function(e){var t=null===e||e===void 0||isNaN(e)&&"NaN"==""+e;return""+(t?"":e)},string={esc:function(e){return convertBadValues(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(strQuote,"&#34;").replace(strSingleQuote,"&#39;")},capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return convertBadValues(e).replace(strHyphenMatch,function(e,t){return t?t.toUpperCase():""})},hyphenate:function(e){return convertBadValues(e).replace(strCamelMatch,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},pascalize:function(e){return string.capitalize(string.camelize(e))},underscore:function(e){return e.replace(strColons,"/").replace(strWords,"$1_$2").replace(strLowUp,"$1_$2").replace(strDash,"_").toLowerCase()},undHash:strUndHash},canString_1_1_0_canString=string,canType_1_1_5_canType=createCommonjsModule(function(e,t){function n(e){return function(){return{type:"Or",values:e}}}function a(e){return this[b](e)?e:canReflect_1_18_0_canReflect.convert(e,this[S])}function r(e){var t=this[b](e);return t?e:i(this[S],e)}function o(e){return"false"!==e&&"0"!==e&&!!e}function i(e,t){var n=canString_1_1_0_canString.capitalize(typeof t),a=new Error("string"=="Type value "+typeof t?"\""+t+"\"":t+" ("+n+") is not of type "+canReflect_1_18_0_canReflect.getName(e)+".");throw a.type="can-type-error",a}function s(e){return b in e?e[b]:function(t){return t instanceof e}}function l(e){var t={};return t[v]=a,t[b]=s(e),t[S]=e,t[_]=n([e]),e[k]=t[k]=t,t}function d(e,t){var a=l(e);return e===Boolean&&(a[v]=o,a[_]=n([!0,!1])),a[b]=function(e){return typeof e===t},a}function p(e){if("function"==typeof e){if(canReflect_1_18_0_canReflect.hasOwnKey(e,k))return e[k];}else if(k in e)return e[k];return l(e)}function c(e){var t=e[b];return function(e){return null==e||t.call(this,e)}}function u(e){var t=canReflect_1_18_0_canReflect.getSchema(e),a=t.values.concat(L);return n(a)}function y(e,t,n){n in t&&(e[n]=t[n])}function m(e,t){var n=canReflect_1_18_0_canReflect.getName(t);return"type."+e+"("+n+")"}function g(e){return!canReflect_1_18_0_canReflect.isPrimitive(e)&&v in e&&b in e}function h(e,t){function n(e){var n=canReflect_1_18_0_canReflect.getSchema(this),a=n.keys,r={};return canReflect_1_18_0_canReflect.eachKey(e||{},function(e,t){r[t]=canReflect_1_18_0_canReflect.convert(e,a[t])}),canReflect_1_18_0_canReflect.new(t,r)}var a=e(t);return a[_]=function(){var n=canReflect_1_18_0_canReflect.getSchema(t),a=canReflect_1_18_0_canReflect.assignMap({},n);return a.keys={},canReflect_1_18_0_canReflect.eachKey(n.keys,function(t,n){a.keys[n]=e(t)}),a},canReflect_1_18_0_canReflect.setName(n,"Converted<"+canReflect_1_18_0_canReflect.getName(t)+">"),n.prototype=a,n}function f(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var a=e.call(this,n);return t.set(n,a),a}}var b=canSymbol_1_6_5_canSymbol.for("can.isMember"),v=canSymbol_1_6_5_canSymbol.for("can.new"),_=canSymbol_1_6_5_canSymbol.for("can.getSchema"),S=canSymbol_1_6_5_canSymbol.for("can.baseType"),k=canSymbol_1_6_5_canSymbol.for("can.strictTypeOf"),E=t,L=Object.freeze([null,void 0]);canReflect_1_18_0_canReflect.each({boolean:Boolean,number:Number,string:String},function(e,t){d(e,t)});var V=canReflect_1_18_0_canReflect.assignSymbols({},{"can.new":function(e){return e},"can.isMember":function(){return!0}}),x={};x[v]=function(e){return 0|e},x[b]=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},x[_]=n([Number]),canReflect_1_18_0_canReflect.setName(x,"Integer"),t.check=f(function(e){var t=Object.create(p(e));return t[v]=r,y(t,e,b),y(t,e,_),canReflect_1_18_0_canReflect.setName(t,m("check",e)),t}),t.convert=f(function(e){var t=Object.create(p(e));return y(t,e,b),y(t,e,_),canReflect_1_18_0_canReflect.setName(t,m("convert",e)),t}),t.maybe=f(function(e){var t=p(e),n={};n[v]={value:r},n[b]={value:c(t)},n[_]={value:u(t)};var a=Object.create(t,n);return canReflect_1_18_0_canReflect.setName(a,m("maybe",e)),a}),t.maybeConvert=f(function(e){var t=p(e),n={};n[b]={value:c(t)},n[_]={value:u(t)};var a=Object.create(t,n);return canReflect_1_18_0_canReflect.setName(a,m("maybeConvert",e)),a}),t.Any=V,t.Integer=x,t.late=function(e){var t=function(){return n=E.normalize(e()),t=function(){return n},n},n;return canReflect_1_18_0_canReflect.assignSymbols({},{"can.new":function(e){return canReflect_1_18_0_canReflect.new(t(),e)},"can.isMember":function(e){return t()[b](e)}})},t.isTypeObject=g,t.normalize=function(e){if(canReflect_1_18_0_canReflect.isPrimitive(e))throw new Error("can-type: Unable to normalize primitive values.");else return g(e)?e:E.check(e)},t.all=h,t.convertAll=h.bind(null,t.convert),canNamespace_1_0_0_canNamespace.type=t}),canType_1_1_5_canType_1=canType_1_1_5_canType.check,canType_1_1_5_canType_2=canType_1_1_5_canType.convert,canType_1_1_5_canType_3=canType_1_1_5_canType.maybe,canType_1_1_5_canType_4=canType_1_1_5_canType.maybeConvert,canType_1_1_5_canType_5=canType_1_1_5_canType.Any,canType_1_1_5_canType_6=canType_1_1_5_canType.Integer,canType_1_1_5_canType_7=canType_1_1_5_canType.late,canType_1_1_5_canType_8=canType_1_1_5_canType.isTypeObject,canType_1_1_5_canType_9=canType_1_1_5_canType.normalize,canType_1_1_5_canType_10=canType_1_1_5_canType.all,canType_1_1_5_canType_11=canType_1_1_5_canType.convertAll;let define;const newSymbol$1=Symbol.for("can.new"),serializeSymbol=Symbol.for("can.serialize"),inSetupSymbol$2=Symbol.for("can.initializing"),isMemberSymbol$1=Symbol.for("can.isMember"),hasBeenDefinedSymbol=Symbol.for("can.hasBeenDefined"),canMetaSymbol=Symbol.for("can.meta");let eventsProto,make,makeDefinition,getDefinitionsAndMethods,getDefinitionOrMethod;function isDefineType(e){return e&&(!0===e.canDefineType||e[newSymbol$1])}function observableType(){throw new Error("This is not currently implemented.")}let AsyncFunction;const browserSupportsAsyncFunctions=function(){try{return AsyncFunction=async function(){}.constructor,!0}catch(t){return!1}}();function isAsyncFunction(e){return!!browserSupportsAsyncFunctions&&e&&e instanceof AsyncFunction}const peek$2=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect));let Object_defineNamedPrototypeProperty=Object.defineProperty;function defineConfigurableAndNotEnumerable(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function defineNotWritableAndNotEnumerable(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!1})}function eachPropertyDescriptor(e,t,...n){for(const a of Object.getOwnPropertyNames(e))e.hasOwnProperty(a)&&t.call(e,a,Object.getOwnPropertyDescriptor(e,a),...n)}function getEveryPropertyAndSymbol(e){const t=Object.getOwnPropertyNames(e),n="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(e):[];return t.concat(n)}var define_1=define=function(e,t,n,a={}){let r=Object.create(n?n.dataInitializers:null),o=Object.create(n?n.computedInitializers:null),i=new Set,s;const l=getDefinitionsAndMethods(t,n,e,a);if(l.dataInitializers=r,l.computedInitializers=o,l.required=i,canReflect_1_18_0_canReflect.eachKey(l.definitions,function(t,n){!0===t.required&&i.add(n),define.property(e,n,t,r,o,l.defaultDefinition)}),e.hasOwnProperty("_data"))for(s in r)canDefineLazyValue_1_1_1_defineLazyValue(e._data,s,r[s].bind(e),!0);else canDefineLazyValue_1_1_1_defineLazyValue(e,"_data",function(){const e=this,t={};for(const n in r)canDefineLazyValue_1_1_1_defineLazyValue(t,n,r[n].bind(e),!0);return t});if(e.hasOwnProperty("_computed"))for(s in o)canDefineLazyValue_1_1_1_defineLazyValue(e._computed,s,o[s].bind(e));else canDefineLazyValue_1_1_1_defineLazyValue(e,"_computed",function(){const e=this,t=Object.create(null);for(const n in o)canDefineLazyValue_1_1_1_defineLazyValue(t,n,o[n].bind(e));return t});getEveryPropertyAndSymbol(eventsProto).forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:eventsProto[t],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:l,configurable:!0,writable:!0});const d=Symbol.iterator||Symbol.for("iterator");return e[d]||defineConfigurableAndNotEnumerable(e,d,function(){return new define.Iterator(this)}),l};const onlyType=function(e){for(const t in e)if("type"!=t)return!1;return!0},callAsync=function(e){return function(t,n){let a=e.call(this,n,t);return canReflect_1_18_0_canReflect.isPromise(a)?void a.then(n):a}};define.extensions=function(){},define.isEnumerable=function(e){return"object"!=typeof e||("serialize"in e?!!e.serialize:!e.get&&!e.async&&!e.value)},define.property=function(e,t,n,a,r,o){const i=define.extensions.apply(this,arguments);i&&(n=makeDefinition(t,i,o||{},e));const s=n.type;if(s&&onlyType(n)&&s===s.Any)return void Object_defineNamedPrototypeProperty(e,t,{get:make.get.data(t),set:make.set.events(t,make.get.data(t),make.set.data(t),make.eventType.data(t)),enumerable:!0,configurable:!0});n.type=s;let l=n.get||n.async||n.value?"computed":"data",d=make.read[l](t),p=make.get[l](t),c=make.set[l](t),u=function(e){return e},y;s&&(u=make.set.type(t,s,u));const m=make.set.events(t,d,c,make.eventType[l](t));n.value?r[t]=make.resolver(t,n,u):n.default!==void 0&&(y=canObservationRecorder_1_3_1_canObservationRecorder.ignore(make.get.defaultValue(t,n,u,m))),n.get?r[t]=make.compute(t,n.get,y):n.async?r[t]=make.compute(t,callAsync(n.async),y):y&&(a[t]=y),n.get&&n.set?c=make.set.setter(t,n.set,make.read.lastSet(t),c,!0):n.set?c=make.set.setter(t,n.set,d,m,!1):"data"===l?c=m:n.get&&1>n.get.length&&(c=function(){}),s&&(c=make.set.type(t,s,c)),Object_defineNamedPrototypeProperty(e,t,{get:p,set:c,enumerable:define.isEnumerable(n),configurable:!0})},define.makeDefineInstanceKey=function(e){e[Symbol.for("can.defineInstanceKey")]=function(e,t){define.hooks.finalizeClass(this);const n=this.prototype._define;t&&"undefined"!=typeof t.value&&(t.default=t.value,t.type=canType_1_1_5_canType.Any,delete t.value);const a=getDefinitionOrMethod(e,t,n.defaultDefinition,this);a&&"object"==typeof a?(define.property(this.prototype,e,a,n.dataInitializers,n.computedInitializers,n.defaultDefinition),n.definitions[e]=a):n.methods[e]=a,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},define.Constructor=function(e,t){const n=function(e){Object.defineProperty(this,inSetupSymbol$2,{configurable:!0,enumerable:!1,value:!0,writable:!0}),define.setup.call(this,e,t),this[inSetupSymbol$2]=!1},a=define(n.prototype,e);return type$1(n),define.makeDefineInstanceKey(n,a),n},make={computeObj:function(e,t,n){const a={oldValue:void 0,compute:n,count:0,handler:function(n){let r=a.oldValue;a.oldValue=n,e.dispatch({action:"prop",key:t,value:n,oldValue:r,type:t,target:e},[n,r])}};return a},resolver:function(e,t,n){const a=make.get.defaultValue(e,t,n);return function(){const n=this,r=a.call(this),o=make.computeObj(n,e,new resolver(t.value,n,r,{resetUnboundValueInGet:!0}));return o}},compute:function(e,t,n){return function(){const a=this,r=n&&n.call(this);let o,i;return o=0===t.length?new canObservation_4_2_0_canObservation(t,a):1===t.length?new settable(t,a,r):new async(t,a,r),i=make.computeObj(a,e,o),i}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect_1_18_0_canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,n){return function(a){if(this[inSetupSymbol$2])n.call(this,a);else{const r=t.call(this);if(a!==r){let t;n.call(this,a),t={patches:[{type:"set",key:e,value:a}],action:"prop",key:e,value:a,oldValue:r,type:e,target:this},this.dispatch(t,[a,r])}}}},eventDispatcher:function(e,t,n,a){if(!e[inSetupSymbol$2]&&a!==n){map$1.dispatch.call(e,{patches:[{type:"set",key:t,value:a}],action:"prop",key:t,value:a,oldValue:n,type:t,target:e},[a,n])}},setter:function(e,t,n,a,r){return function(e){canQueues_1_3_2_canQueues.batch.start();const o=n.call(this),i=t.call(this,e,o);if(r){if(void 0!==i)o!==i&&a.call(this,i),canQueues_1_3_2_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_2_canQueues.batch.stop();if(1===t.length)canQueues_1_3_2_canQueues.batch.stop();else return void canQueues_1_3_2_canQueues.batch.stop()}}else if(void 0!==i)a.call(this,i),canQueues_1_3_2_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_2_canQueues.batch.stop();if(1===t.length)a.call(this,void 0),canQueues_1_3_2_canQueues.batch.stop();else return void canQueues_1_3_2_canQueues.batch.stop()}}},type:function(e,t,n){function a(a){return n.call(this,t.call(this,a,e))}return isDefineType(t)?t.canDefineType?a:function(e){return n.call(this,canReflect_1_18_0_canReflect.convert(e,t))}:a}},eventType:{data:function(e){return function(t,n){return n!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect_1_18_0_canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){const t=this._computed[e].compute;if(t.lastSetValue)return canReflect_1_18_0_canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,a){return function(){let r=t.default;if(void 0!==r&&("function"==typeof r&&r.isAGetter&&(r=r.call(this)),r=n.call(this,r)),t.set){let n=!0,o;const i=make.set.setter(e,t.set,function(){},function(e){n?o=e:a.call(this,e)},t.get);return i.call(this,r),n=!1,o}return r}},data:function(e){return function(){return this[inSetupSymbol$2]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(){const t=this._computed[e].compute;return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),!canReflect_1_18_0_canReflect.isBound(t)&&canObservation_4_2_0_canObservation.temporarilyBind(t)),peek$2(t)}}}},define.behaviors=["get","set","value","type","serialize"];const addBehaviorToDefinition=function(e,t,n,a,r,o){if("enumerable"===t)e.serialize=!!a[t];else if("type"===t){const n=a[t];"undefined"!=typeof n&&(e[t]=n)}else{const a=n.get||n.value;n.get&&(a.isAGetter=!0),"async"==t&&1===a.length&&isAsyncFunction(a)&&dev.warn(`${canReflect_1_18_0_canReflect.getName(o)}: async property [${r}] should not be an async function and also use the resolve() argument. Remove the argument and return a value from the async function instead.`),e[t]=a}};makeDefinition=function(e,t,n,a){let r={};if(eachPropertyDescriptor(t,function(n,o){addBehaviorToDefinition(r,n,o,t,e,a)}),canReflect_1_18_0_canReflect.eachKey(n,function(e,t){void 0===r[t]&&"type"!==t&&(r[t]=e)}),t.type){const e=t.type,n=e[serializeSymbol];n&&(r.serialize=function(e){return n.call(e)}),r.type=canType_1_1_5_canType.normalize(e)}const o=!r.type&&(!n.type||n.type&&n.typeSetByDefault);if(r.hasOwnProperty("default")&&("function"==typeof r.default&&!r.default.isAGetter&&o&&(r.type=canType_1_1_5_canType.normalize(Function)),canReflect_1_18_0_canReflect.isPrimitive(r.default)&&o&&(null===r.default||"undefined"==typeof r.default?r.type=canType_1_1_5_canType.Any:r.type=canType_1_1_5_canType.normalize(r.default.constructor))),!r.type){const e=canReflect_1_18_0_canReflect.assignMap({},n);r=canReflect_1_18_0_canReflect.assignMap(e,r)}return 0===canReflect_1_18_0_canReflect.size(r)&&(r.type=canType_1_1_5_canType.Any,r.typeSetByDefault=!0),r},getDefinitionOrMethod=function(e,t,n,a){let r,o;return canReflect_1_18_0_canReflect.isPrimitive(t)?(o=null===t||"undefined"==typeof t?canType_1_1_5_canType.Any:n.typeSetByDefault?canType_1_1_5_canType.normalize(t.constructor):n.type,r={default:t,type:o}):t&&(t[serializeSymbol]||t[newSymbol$1])?t[isMemberSymbol$1]?r={type:t}:r={type:canType_1_1_5_canType.normalize(t)}:"function"==typeof t?canReflect_1_18_0_canReflect.isConstructorLike(t)?r={type:canType_1_1_5_canType.normalize(t)}:r={default:t,type:Function}:Array.isArray(t)?r={type:canType_1_1_5_canType.normalize(Array)}:canReflect_1_18_0_canReflect.isPlainObject(t)&&(r=t),r?makeDefinition(e,r,n,a):t},getDefinitionsAndMethods=function(e,t,n,a){function r(e,t,a){let r;if(r=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"===e||a&&"function"==typeof r)return void(i[e]=r);else{const t=getDefinitionOrMethod(e,r,s,n),a=typeof t;t&&"object"===a&&0<canReflect_1_18_0_canReflect.size(t)?o[e]=t:"function"===a&&(i[e]=t)}}const o=Object.create(t?t.definitions:null);let i={},s;return s=a?getDefinitionOrMethod("*",a,{},n):Object.create(null),eachPropertyDescriptor(n,r,!0),eachPropertyDescriptor(e,r),a&&defineConfigurableAndNotEnumerable(e,"*",a),{definitions:o,methods:i,defaultDefinition:s}},eventsProto=map$1({});function setupComputed(e,t){const n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,canReflect_1_18_0_canReflect.onValue(n.compute,n.handler,"notify"),n.oldValue=peek$2(n.compute)))}function teardownComputed(e,t){const n=e._computed&&e._computed[t];n&&(1===n.count?(n.count=0,canReflect_1_18_0_canReflect.offValue(n.compute,n.handler,"notify")):n.count--)}canAssign_1_3_3_canAssign(eventsProto,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return setupComputed(this,e),map$1.addEventListener.apply(this,arguments)},removeEventListener:function(e){return teardownComputed(this,e),map$1.removeEventListener.apply(this,arguments)}}),eventsProto.on=eventsProto.bind=eventsProto.addEventListener,eventsProto.off=eventsProto.unbind=eventsProto.removeEventListener;const onKeyValueSymbol$2=Symbol.for("can.onKeyValue"),offKeyValueSymbol$1=Symbol.for("can.offKeyValue");canReflect_1_18_0_canReflect.assignSymbols(eventsProto,{"can.onKeyValue":function(e){return setupComputed(this,e),map$1[onKeyValueSymbol$2].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed(this,e),map$1[offKeyValueSymbol$1].apply(this,arguments)}}),delete eventsProto.one,define.finalizeInstance=function(){defineNotWritableAndNotEnumerable(this,"constructor",this.constructor),defineNotWritableAndNotEnumerable(this,canMetaSymbol,Object.create(null))},define.setup=function(e,t){const n=new Set(this._define.required),a=this._define.definitions,r=Object.create(null),o=this;if(canReflect_1_18_0_canReflect.eachKey(e,function(e,r){if(n.has(r)&&n.delete(r),void 0!==a[r])o[r]=e;else{if(t)throw new Error(`The type ${canReflect_1_18_0_canReflect.getName(o.constructor)} is sealed, but the property [${r}] has no definition.`);define.expando(o,r,e)}}),0<canReflect_1_18_0_canReflect.size(r)&&defineConfigurableAndNotEnumerable(this,"_instanceDefinitions",r),n.size){let e;const t=Array.from(n);let a=canReflect_1_18_0_canReflect.getName(this);throw e=1===n.size?`${a}: Missing required property [${t[0]}].`:`${a}: Missing required properties [${t.join(", ")}].`,new Error(e)}};const returnFirstArg=function(e){return e};define.normalizeTypeDefinition=canType_1_1_5_canType.normalize,define.expando=function(e,t,n){if(define._specialKeys[t])return!0;const a=e._define.definitions;if(a&&a[t])return;let r=e._instanceDefinitions;if(!r){if(Object.isSealed(e)){let n=`Cannot set property [${t}] on sealed instance of ${canReflect_1_18_0_canReflect.getName(e)}`;throw new Error(n)}Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r=e._instanceDefinitions}if(!r[t]){const a=e._define.defaultDefinition||{type:observableType};return define.property(e,t,a,{},{}),e._data[t]=a.type?define.make.set.type(t,a.type,returnFirstArg).call(e,n):observableType(n),r[t]=a,e[inSetupSymbol$2]||(canQueues_1_3_2_canQueues.batch.start(),e.dispatch({action:"can.keys",type:"can.keys",target:e}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",key:t,type:t,value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({action:"set",type:"set",value:e._data[t],target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),canQueues_1_3_2_canQueues.batch.stop()),!0}},define.replaceWith=canDefineLazyValue_1_1_1_defineLazyValue,define.eventsProto=eventsProto,define.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable,define.make=make,define.getDefinitionOrMethod=getDefinitionOrMethod,define._specialKeys={_data:!0,_computed:!0};let simpleGetterSetters={};define.makeSimpleGetterSetter=function(e){if(simpleGetterSetters[e]===void 0){const t=make.set.events(e,make.get.data(e),make.set.data(e),make.eventType.data(e));simpleGetterSetters[e]={get:make.get.data(e),set:function(e){return t.call(this,observableType(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters[e]},define.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define.Iterator.prototype.next=function(){let e;if(this.definitions.length){e=this.definitions.shift();const t=this.obj._define.definitions[e];if(t.get)return this.next()}else if(this.instanceDefinitions.length)e=this.instanceDefinitions.shift();else return{value:void 0,done:!0};return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}},define.updateSchemaKeys=function(e,t){for(const n in t){const a=t[n];!1!==a.serialize&&(e.keys[n]=a.type?a.type:function(e){return e},!0===t[n].identity&&e.identity.push(n))}return e},define.hooks={finalizeClass:function(e){let t=e.hasOwnProperty(hasBeenDefinedSymbol);if(!t){let t=e.prototype,n="object"==typeof e.props?e.props:"object"==typeof e.define?e.define:{};define(t,n,null,e.propertyDefaults),e[hasBeenDefinedSymbol]=!0}},initialize:function(e,t){const n=!e.hasOwnProperty(canMetaSymbol),a=e.constructor.seal;n&&define.finalizeInstance.call(e),e[canMetaSymbol].initialized||(defineConfigurableAndNotEnumerable(e,inSetupSymbol$2,!0),define.setup.call(e,t,a),e[inSetupSymbol$2]=!1,e[canMetaSymbol].initialized=!0)},expando:define.expando,normalizeTypeDefinition:canType_1_1_5_canType.normalize};var ensureMeta$3=function(e){const t=Symbol.for("can.meta");let n=e[t];return n||(n={},canReflect_1_18_0_canReflect.setKeyValue(e,t,n)),n};const defineHelpers={defineExpando:define_1.expando,reflectSerialize:function(e){const t=this._define.definitions,n=this._define.defaultDefinition;return this.forEach(function(a,r){const o=t[r];a=o&&"function"==typeof o.serialize?o.serialize.call(this,a,r):n&&"function"==typeof n.serialize?n.serialize.call(this,a,r):canReflect_1_18_0_canReflect.serialize(a),void 0!==a&&(e[r]=a)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){void 0!==t&&(e[n]=canReflect_1_18_0_canReflect.unwrap(t))}),e},log:function(e){const t=this,n=function(e){return"string"==typeof e?JSON.stringify(e):e},a=ensureMeta$3(t),r=a.allowedLogKeysSet||new Set;a.allowedLogKeysSet=r,e&&r.add(e),a._log=function(a,o){const i=a.type;"can.onPatches"===i||e&&!r.has(i)||"can.keys"===i||e&&!r.has(i)||("add"===i||"remove"===i?dev.log(canReflect_1_18_0_canReflect.getName(t),"\n how   ",n(i),"\n what  ",n(o[0]),"\n index ",n(o[1])):dev.log(canReflect_1_18_0_canReflect.getName(t),"\n key ",n(i),"\n is  ",n(o[0]),"\n was ",n(o[1])))}},deleteKey:function(e){const t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],delete this[e],canQueues_1_3_2_canQueues.batch.start(),this.dispatch({action:"can.keys",type:"can.keys",target:this});const n=this._data[e];n!==void 0&&(delete this._data[e],this.dispatch({action:"delete",key:e,oldValue:n,type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,n])),canQueues_1_3_2_canQueues.batch.stop()}else this.set(e,void 0);return this}};var defineHelpers_1=defineHelpers;const{updateSchemaKeys,hooks,isEnumerable}=define_1,getSchemaSymbol$1=Symbol.for("can.getSchema");function keysForDefinition(e){const t=[];for(let n in e)isEnumerable(e[n])&&t.push(n);return t}function assign(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function update(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateList(this,e):canReflect_1_18_0_canReflect.updateMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function assignDeep(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function updateDeep(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateDeepList(this,e):canReflect_1_18_0_canReflect.updateDeepMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function setKeyValue(e,t){const n=defineHelpers_1.defineExpando(this,e,t);n||(this[e]=t)}function getKeyValue(e){const t=this[e];return void 0!==t||e in this||Object.isSealed(this)?t:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this[e])}var mixinMapprops=function(e){return class extends e{static[getSchemaSymbol$1](){hooks.finalizeClass(this);let e=this.prototype._define,t=e?e.definitions:{};return updateSchemaKeys({type:"map",identity:[],keys:{}},t)}get(e){return e?getKeyValue.call(this,e):canReflect_1_18_0_canReflect.unwrap(this,Map)}set(e,t){return"object"==typeof e?!0===t?updateDeep.call(this,e):assignDeep.call(this,e):setKeyValue.call(this,e,t),this}assignDeep(e){return assignDeep.call(this,e),this}updateDeep(e){return updateDeep.call(this,e),this}assign(e){return assign.call(this,e),this}update(e){return update.call(this,e),this}serialize(){return canReflect_1_18_0_canReflect.serialize(this,Map)}deleteKey(){return defineHelpers_1.deleteKey.apply(this,arguments)}forEach(e,t,n){function a(e,t,n){return canReflect_1_18_0_canReflect.eachKey(e,t,n)}return!1===n?void canObservationRecorder_1_3_1_canObservationRecorder.ignore(a)(this,e,t):a(this,e,t)}static[Symbol.for("can.new")](...e){return new this(...e)}get[Symbol.for("can.isMapLike")](){return!0}get[Symbol.for("can.isListLike")](){return!1}get[Symbol.for("can.isValueLike")](){return!1}[Symbol.for("can.getKeyValue")](...e){return getKeyValue.apply(this,e)}[Symbol.for("can.deleteKeyValue")](...e){return defineHelpers_1.deleteKey.call(this,...e)}[Symbol.for("can.getOwnKeys")](){const e=canReflect_1_18_0_canReflect.getOwnEnumerableKeys(this);if(this._computed){const t=canReflect_1_18_0_canReflect.getOwnKeys(this._computed);let n;for(let a=0;a<t.length;a++)n=t[a],0>e.indexOf(n)&&e.push(n)}return e}[Symbol.for("can.getOwnEnumerableKeys")](){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),canObservationRecorder_1_3_1_canObservationRecorder.add(Object.getPrototypeOf(this),"can.keys"),keysForDefinition(this._define.definitions).concat(keysForDefinition(this._instanceDefinitions))}[Symbol.for("can.serialize")](...e){return defineHelpers_1.reflectSerialize.apply(this,e)}[Symbol.for("can.unwrap")](...e){return defineHelpers_1.reflectUnwrap.apply(this,e)}[Symbol.for("can.hasKey")](e){return e in this._define.definitions||this._instanceDefinitions!==void 0&&e in this._instanceDefinitions}[Symbol.for("can.updateDeep")](...e){return this.updateDeep(...e)}}};const eventDispatcher=define_1.make.set.eventDispatcher,inSetupSymbol$3=canSymbol_1_6_5_canSymbol.for("can.initializing");let isProtoReadOnSuper=!1;(function(){if("function"==typeof Proxy){let e=new Proxy(class{fn(){}},{get(e,t,n){return"__proto__"===t&&(isProtoReadOnSuper=!0),Reflect.get(e,t,n)}});new class extends e{fn(){super.fn()}}().fn()}})();function proxyPrototype(e){function t(){let t=Reflect.construct(e,arguments,new.target);return n.add(t),t}const n=new WeakSet;t.instances=n;const a=Object.create(e.prototype),r=isProtoReadOnSuper?function(e,t,n){return this[inSetupSymbol$3]||"symbol"==typeof t||"__proto__"===t||canObservationRecorder_1_3_1_canObservationRecorder.add(n,t),Reflect.get(e,t,n)}:function(e,t,n){return this[inSetupSymbol$3]||"symbol"==typeof t||canObservationRecorder_1_3_1_canObservationRecorder.add(n,t),Reflect.get(e,t,n)};return t.prototype="function"==typeof Proxy?new Proxy(a,{get:r,set(e,t,a,r){if("symbol"==typeof t)return Reflect.set(e,t,a,r),!0;if(t in e||!n.has(r)){let n=Reflect.get(e,t,r);Reflect.set(e,t,a,r),eventDispatcher(r,t,n,a)}else define_1.expando(r,t,a);return!0}}):a,t}var mixinProxy=proxyPrototype;function mixinTypeEvents(e){let t=class extends e{};return type$1(t),map$1(t),t}var mixinTypeevents=mixinTypeEvents;const{hooks:hooks$1,makeDefineInstanceKey}=define_1,constructorPropsSymbol=Symbol.for("can.constructorProps"),renderedSymbol=Symbol.for("can.rendered");var mixinElement=function(e){let t=class extends mixinProxy(e){constructor(e){super(),hooks$1.finalizeClass(this.constructor),this[constructorPropsSymbol]=e}initialize(e){super.initialize&&super.initialize(e),hooks$1.initialize(this,e||this[constructorPropsSymbol])}render(e){super.render&&super.render(e),hooks$1.initialize(this,e||this[constructorPropsSymbol]),this[renderedSymbol]=!0}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[renderedSymbol]||this.render()}};return t=mixinTypeevents(mixinMapprops(t)),makeDefineInstanceKey(t),t},createConstructorFunction_1$1=createConstructorFunction_1,makeDefineInstanceKey$1=define_1.makeDefineInstanceKey,mixins_1=define_1.hooks,mixinElement_1=mixinElement,mixinMapProps_1=mixinMapprops,mixinProxy_1=mixinProxy,mixinTypeEvents_1=mixinTypeevents,mixins={createConstructorFunction:createConstructorFunction_1$1,makeDefineInstanceKey:makeDefineInstanceKey$1,mixins:mixins_1,mixinElement:mixinElement_1,mixinMapProps:mixinMapProps_1,mixinProxy:mixinProxy_1,mixinTypeEvents:mixinTypeEvents_1};const{createConstructorFunction:createConstructorFunction$1,makeDefineInstanceKey:makeDefineInstanceKey$2,mixins:mixins$1,mixinMapProps,mixinProxy:mixinProxy$1,mixinTypeEvents:mixinTypeEvents$1}=mixins;let ObservableObject=class extends mixinProxy$1(Object){constructor(e){super(),mixins$1.finalizeClass(this.constructor),mixins$1.initialize(this,e);const t=new Proxy(this,{defineProperty(e,t,n){const a=e.constructor.props;let r=n.value;return 0<=["_instanceDefinitions","_data","_computed"].indexOf(t)?Reflect.defineProperty(e,t,n):r?a&&a[t]||e.constructor.propertyDefaults?(e.set(t,r),!0):mixins$1.expando(e,t,r):Reflect.defineProperty(e,t,n)}});return this.constructor.instances.add(t),t}};ObservableObject=mixinTypeEvents$1(mixinMapProps(ObservableObject)),makeDefineInstanceKey$2(ObservableObject);var canObservableObject=canNamespace_1_0_0_canNamespace.ObservableObject=createConstructorFunction$1(ObservableObject);const{mixins:mixins$2}=mixins,metaSymbol$3=Symbol.for("can.meta"),helpers$1={assignNonEnumerable:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})},shouldRecordObservationOnAllKeysExceptFunctionsOnProto:function(e,t){return 0===t.preventSideEffects&&!e.isAccessor&&(e.targetHasOwnKey||!e.protoHasKey&&!Object.isSealed(t.target)||e.protoHasKey&&"function"!=typeof targetValue)},dispatchIndexEvent:function(e,t,n,a){var r=+e;if(!isNaN(r)){var o=this._define.definitions["#"];if("set"===t){this.dispatch({type:r,action:t,key:r,value:n,oldValue:a},[n,a]);let e=this[metaSymbol$3];if(!("preventSideEffects"in e)||0===e.preventSideEffects){helpers$1.dispatchLengthPatch.call(this,t,[{index:r,deleteCount:1,insert:[n],type:"splice"}],this.length,this.length)}}else if("add"===t){o&&"function"==typeof o.added&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(o.added).call(this,n,r),this.dispatch({type:r,action:t,key:r,value:n,oldValue:a},[n,a]);let e=this[metaSymbol$3];if(!("preventSideEffects"in e)||0===e.preventSideEffects){helpers$1.dispatchLengthPatch.call(this,t,[{index:r,deleteCount:0,insert:[n],type:"splice"}],this.length,this.length-1)}}else"remove"===t&&o&&"function"==typeof o.removed&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(o.removed).call(this,a,r)}else{var i=""+e;this.dispatch({type:i,key:i,action:t,value:n,oldValue:a,target:this},[n,a])}},dispatchLengthPatch:function(e,t,n,a){map$1.dispatch.call(this,{type:"length",key:"length",action:e,value:n,oldValue:a,patches:t},[n,a])},convertItem:function(e,t){if(e.items){const n=mixins$2.normalizeTypeDefinition(e.items.type||e.items);return canReflect_1_18_0_canReflect.convert(t,n)}return t},convertItems:function(e,t){if(t.length&&e.items)for(let n=0,a=t.length;n<a;n++)t[n]=helpers$1.convertItem(e,t[n]);return t}};var helpers_1$1=helpers$1,canMeta=Symbol.for("can.meta");const computedPropertyDefinitionSymbol=Symbol.for("can.computedPropertyDefinitions"),onKeyValueSymbol$3=Symbol.for("can.onKeyValue"),offKeyValueSymbol$2=Symbol.for("can.offKeyValue");function ComputedObjectObservationData(e,t,n){this.instance=e,this.prop=t,this.observation=n,this.forward=this.forward.bind(this)}ComputedObjectObservationData.prototype.bind=function(){this.bindingCount++,1===this.bindingCount&&this.observation.on(this.forward,"notify")},ComputedObjectObservationData.prototype.unbind=function(){this.bindingCount--,0===this.bindingCount&&this.observation.off(this.forward,"notify")},ComputedObjectObservationData.prototype.forward=function(e,t){map$1.dispatch.call(this.instance,{type:this.prop,key:this.prop,target:this.instance,value:e,oldValue:t},[e,t])},ComputedObjectObservationData.prototype.bindingCount=0;function findComputed(e,t){var n=e[canMeta],a=n.target,r=a[computedPropertyDefinitionSymbol];if(void 0!==r){var o=r[t];if(void 0!==o)return void 0===n.computedKeys[t]&&(n.computedKeys[t]=new ComputedObjectObservationData(e,t,o(e,t))),n.computedKeys[t]}}const computedHelpers={bind:function(e,t){let n=findComputed(e,t);void 0===n||n.bind()},addKeyDependencies:function(e){let t=e[onKeyValueSymbol$3],n=e[offKeyValueSymbol$2];canReflect_1_18_0_canReflect.assignSymbols(e,{"can.onKeyValue":function(e){return computedHelpers.bind(this,e),t.apply(this,arguments)},"can.offKeyValue":function(e){return computedHelpers.unbind(this,e),n.apply(this,arguments)},"can.getKeyDependencies":function(e){var t=findComputed(this,e);return void 0===t?void 0:{valueDependencies:new Set([t.observation])}}})}};var computedHelpers_1=computedHelpers;const{assignNonEnumerable,convertItem,dispatchIndexEvent,shouldRecordObservationOnAllKeysExceptFunctionsOnProto}=helpers_1$1,{mixins:mixins$3}=mixins,hasOwn=Object.prototype.hasOwnProperty,{isSymbolLike:isSymbolLike$1}=canReflect_1_18_0_canReflect,metaSymbol$4=Symbol.for("can.meta"),proxiedObjects=new WeakMap,proxies=new WeakSet,proxyKeys=Object.create(null);Object.getOwnPropertySymbols(map$1).forEach(function(e){assignNonEnumerable(proxyKeys,e,map$1[e])}),computedHelpers_1.addKeyDependencies(proxyKeys);const mutateMethods={push:function(e,t){return[{index:e.length-t.length,deleteCount:0,insert:t,type:"splice"}]},pop:function(e){return[{index:e.length,deleteCount:1,insert:[],type:"splice"}]},shift:function(){return[{index:0,deleteCount:1,insert:[],type:"splice"}]},unshift:function(e,t){return[{index:0,deleteCount:0,insert:t,type:"splice"}]},splice:function(e,t){return[{index:t[0],deleteCount:t[1],insert:t.slice(2),type:"splice"}]},sort:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]},reverse:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]}};canReflect_1_18_0_canReflect.eachKey(mutateMethods,function(e,t){var n=Array.prototype[t],a=function(){var t=this[metaSymbol$4],a=0===t.preventSideEffects,r=t.target.length;t.preventSideEffects++;var o=n.apply(t.target,arguments),i=e(t.target,Array.from(arguments),r);if(!0==a){var s={type:"length",key:"length",value:t.target.length,oldValue:r,patches:i};map$1.dispatch.call(t.proxy,s,[t.target.length,r])}return t.preventSideEffects--,o};proxiedObjects.set(n,a),proxies.add(a)});function setValueAndOnChange(e,t,n,a,r){let o=hasOwn.call(n,e),i=Object.getOwnPropertyDescriptor(n,e),s,l;if(i&&i.set)i.set.call(a,t);else if(s=n[e],l=s!==t,l){let a=typeof e;"string"===a&&!(e in n)?mixins$3.expando(n,e,t):("number"===a&&(t=convertItem(n.constructor,t)),n[e]=t,r(o,s))}}const proxyHandlers={get(e,t,n){if(isSymbolLike$1(t))return e[t];let a=proxiedObjects.get(e);canObservationRecorder_1_3_1_canObservationRecorder.add(a,t.toString());const r=!isSymbolLike$1(t)&&+t;Number.isInteger(r)&&canObservationRecorder_1_3_1_canObservationRecorder.add(a,"length");let o=Reflect.get(e,t,n);return o},set(e,t,n,a){var r=Number.isInteger;let o=proxiedObjects.get(e),i=!isSymbolLike$1(t)&&+t;return r(i)&&(t=i),setValueAndOnChange(t,n,e,o,function(e,o){r(t)&&dispatchIndexEvent.call(a,t,e?"undefined"==typeof n?"remove":"set":"add",n,o)}),!0},deleteProperty(e,t){let n=this.target[t],a=delete this.target[t];return a&&0===this.preventSideEffects&&void 0!==n&&dispatchIndexEvent.call(this.proxy,t,"remove",void 0,n),a},ownKeys(){canObservationRecorder_1_3_1_canObservationRecorder.add(this.proxy,"can.keys");let e=new Set(Object.getOwnPropertyNames(this.target).concat(Object.getOwnPropertySymbols(this.target)).concat(Object.getOwnPropertySymbols(this.proxyKeys)));return Array.from(e)}};function makeObservable(e,t){let n={target:e,proxyKeys:void 0===t.proxyKeys?Object.create(proxyKeys):t.proxyKeys,computedKeys:Object.create(null),options:t,preventSideEffects:0};return n.proxyKeys[metaSymbol$4]=n,n.proxy=new Proxy(e,{get:proxyHandlers.get.bind(n),set:proxyHandlers.set.bind(n),ownKeys:proxyHandlers.ownKeys.bind(n),deleteProperty:proxyHandlers.deleteProperty.bind(n),meta:n}),map$1.addHandlers(n.proxy,n),n.proxy}function proxyArray(){return class extends Array{constructor(...e){super(...e);let t=Object.create(proxyKeys);t.constructor=this.constructor;let n=makeObservable(this,{proxyKeys:t,shouldRecordObservation:shouldRecordObservationOnAllKeysExceptFunctionsOnProto});return proxiedObjects.set(this,n),proxies.add(n),n}}}var proxyArray_1=proxyArray;const{createConstructorFunction:createConstructorFunction$2,makeDefineInstanceKey:makeDefineInstanceKey$3,mixins:mixins$4,mixinMapProps:mixinMapProps$1,mixinTypeEvents:mixinTypeEvents$2}=mixins,{convertItem:convertItem$1,convertItems,dispatchLengthPatch}=helpers_1$1,ProxyArray=proxyArray_1(),localOnPatchesSymbol="can.patches",onKeyValueSymbol$4=Symbol.for("can.onKeyValue"),offKeyValueSymbol$3=Symbol.for("can.offKeyValue"),metaSymbol$5=Symbol.for("can.meta");function isListLike$1(e){return canReflect_1_18_0_canReflect.isListLike(e)&&"string"!=typeof e}const MixedInArray=mixinTypeEvents$2(mixinMapProps$1(ProxyArray));class ObservableArray extends MixedInArray{constructor(e,t){if("number"==typeof e)super(e);else if(0<arguments.length&&!isListLike$1(e))throw new Error("can-observable-array: Unexpected argument: "+typeof e);else super();mixins$4.finalizeClass(new.target),mixins$4.initialize(this,t||{});for(let n=0,a=e&&e.length;n<a;n++)this[n]=convertItem$1(new.target,e[n]);return new Proxy(this,{defineProperty(e,t,n){if("items"===t)throw new Error("ObservableArray does not support a class field named items. Try using a different name or using static items");if("_instanceDefinitions"===t)return Reflect.defineProperty(e,t,n);let a=n.value;const r=e.constructor.props;return r&&r[t]||e.constructor.propertyDefaults?a?(e.set(t,a),!0):Reflect.defineProperty(e,t,n):mixins$4.expando(e,t,a)}})}static get[Symbol.species](){return this}static[Symbol.for("can.new")](e){return new this(e||[])}push(...e){return super.push(...e)}unshift(...e){return super.unshift(...e)}filter(e){if("object"==typeof e){let t=e;e=function(e){for(let n in t)if(e[n]!==t[n])return!1;return!0}}return super.filter(e)}forEach(...e){return Array.prototype.forEach.apply(this,e)}splice(...e){let t=e[0],n=e[1],a=[],r=2<e.length,o,s,l;for(t=t||0,o=0,s=e.length-2;o<s;o++)l=o+2,a.push(e[l]),this[o+t]!==e[l]&&(r=!1);if(r&&this.length<=a.length)return a;void 0===n&&(n=e[1]=this.length-t),canQueues_1_3_2_canQueues.batch.start();var d=super.splice.apply(this,e);return canQueues_1_3_2_canQueues.batch.stop(),d}static convertsTo(e){const t=canType_1_1_5_canType.convert(e),n=class extends this{static get items(){return t}},a=`ConvertedObservableArray<${canReflect_1_18_0_canReflect.getName(e)}>`;return canReflect_1_18_0_canReflect.setName(n,a),n}[Symbol.for("can.splice")](e,t,n){return this.splice(...[e,t].concat(n))}[Symbol.for("can.onPatches")](e,t){this[onKeyValueSymbol$4](localOnPatchesSymbol,e,t)}[Symbol.for("can.offPatches")](e,t){this[offKeyValueSymbol$3](localOnPatchesSymbol,e,t)}get[Symbol.for("can.isListLike")](){return!0}[Symbol.for("can.getOwnEnumerableKeys")](){let e=super[Symbol.for("can.getOwnEnumerableKeys")](),t=new Set([...Object.keys(this),...e]);return Array.from(t)}}var mutateMethods$1={push:function(e,t){return[{index:e.length-t.length,deleteCount:0,insert:t,type:"splice"}]},pop:function(e,t,n){return[{index:e.length,deleteCount:0<n?1:0,type:"splice"}]},shift:function(e,t,n){return[{index:0,deleteCount:0<n?1:0,type:"splice"}]},unshift:function(e,t){return[{index:0,deleteCount:0,insert:t,type:"splice"}]},splice:function(e,t,n){var a=Math.min,r=Math.max;const o=0>t[0]?r(n+t[0],0):a(n,t[0]);return[{index:o,deleteCount:r(0,a(t[1],n-o)),insert:t.slice(2),type:"splice"}]},sort:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]},reverse:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]}};const convertArgs={push:function(e,t){return convertItems(e.constructor,t)},unshift:function(e,t){return convertItems(e.constructor,t)},splice:function(e,t){return t.slice(0,2).concat(convertItems(e.constructor,t.slice(2)))}};canReflect_1_18_0_canReflect.eachKey(mutateMethods$1,function(e,t){const n=ObservableArray.prototype[t];ObservableArray.prototype[t]=function(){const a=this.length;let r=Array.from(arguments);convertArgs[t]&&(r=convertArgs[t](this,r)),this[metaSymbol$5].preventSideEffects=(this[metaSymbol$5].preventSideEffects||0)+1;const o=n.apply(this,r);this[metaSymbol$5].preventSideEffects--;const i=e(this,r,a);return dispatchLengthPatch.call(this,t,i,this.length,a),o}}),makeDefineInstanceKey$3(ObservableArray);var canObservableArray=canNamespace_1_0_0_canNamespace.ObservableArray=createConstructorFunction$2(ObservableArray),getChangesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getChangesDependencyRecord"),getValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValue"),onValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onValue"),onEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol=canSymbol_1_6_5_canSymbol.for("can.offEmit"),setValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.setValue"),canElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.element");function defaultSetValue(e,t){canReflect_1_18_0_canReflect.setValue(t,e)}function onEmit(e,t,n){return e[onEmitSymbol](t,n)}function offEmit(e,t,n){return e[offEmitSymbol](t,n)}function turnOffListeningAndUpdate(e,t,n,a){var r;e[onValueSymbol$2]?r=canReflect_1_18_0_canReflect.offValue:e[onEmitSymbol]&&(r=offEmit),r&&r(e,n,a)}function turnOnListeningAndUpdate(e,t,n,a){var r;e[onValueSymbol$2]?r=canReflect_1_18_0_canReflect.onValue:e[onEmitSymbol]&&(r=onEmit),r&&r(e,n,a)}function Semaphore(e,t){this.value=0,this._binding=e,this._type=t}canAssign_1_3_3_canAssign(Semaphore.prototype,{decrement:function(){this.value-=1},increment:function(){this._incremented=!0,this.value+=1}});function Bind(e){this._options=e,void 0===e.queue&&(e.element?e.queue="dom":e.queue="domUI"),!1==0<e.cycles&&(e.cycles=0),e.onInitDoNotUpdateChild="boolean"==typeof e.onInitDoNotUpdateChild&&e.onInitDoNotUpdateChild,e.onInitDoNotUpdateParent="boolean"==typeof e.onInitDoNotUpdateParent&&e.onInitDoNotUpdateParent,e.onInitSetUndefinedParentIfChildIsDefined="boolean"!=typeof e.onInitSetUndefinedParentIfChildIsDefined||e.onInitSetUndefinedParentIfChildIsDefined;var t=new Semaphore(this,"child"),n=new Semaphore(this,"parent"),a=!0;"boolean"==typeof e.childToParent?a=e.childToParent:null==e.child[getValueSymbol$1]?a=!1:void 0===e.setParent&&null==e.parent[setValueSymbol$2]&&(a=!1);var r=!0;if("boolean"==typeof e.parentToChild?r=e.parentToChild:null==e.parent[getValueSymbol$1]?r=!1:void 0===e.setChild&&null==e.child[setValueSymbol$2]&&(r=!1),!1===a&&!1===r)throw new Error("Neither the child nor parent will be updated; this is a no-way binding");this._childToParent=a,this._parentToChild=r,void 0===e.setChild&&(e.setChild=defaultSetValue),void 0===e.setParent&&(e.setParent=defaultSetValue),void 0!==e.priority&&(canReflect_1_18_0_canReflect.setPriority(e.child,e.priority),canReflect_1_18_0_canReflect.setPriority(e.parent,e.priority));var o=2*e.cycles,i=o+("childSticksToParent"===e.sticky?1:0),s=o+("parentSticksToChild"===e.sticky?1:0);this._bindingState={child:!1,parent:!1},this._updateChild=function(a){updateValue.call(this,{bindingState:this._bindingState,newValue:a,debugObservableName:"child",debugPartnerName:"parent",observable:e.child,setValue:e.setChild,semaphore:t,allowedUpdates:i,sticky:"parentSticksToChild"===e.sticky,partner:e.parent,setPartner:e.setParent,partnerSemaphore:n})}.bind(this),this._updateParent=function(a){updateValue.call(this,{bindingState:this._bindingState,newValue:a,debugObservableName:"parent",debugPartnerName:"child",observable:e.parent,setValue:e.setParent,semaphore:n,allowedUpdates:s,sticky:"childSticksToParent"===e.sticky,partner:e.child,setPartner:e.setChild,partnerSemaphore:t})}.bind(this),e.element&&(this._updateChild[canElementSymbol$1]=this._updateParent[canElementSymbol$1]=e.element)}Object.defineProperty(Bind.prototype,"parentValue",{get:function(){return canReflect_1_18_0_canReflect.getValue(this._options.parent)}}),canAssign_1_3_3_canAssign(Bind.prototype,{start:function(){var e=this._options,t,n;this.startParent(),this.startChild(),!0===this._childToParent&&!0===this._parentToChild?(n=canReflect_1_18_0_canReflect.getValue(e.parent),n===void 0?(t=canReflect_1_18_0_canReflect.getValue(e.child),t===void 0?!1===e.onInitDoNotUpdateChild&&this._updateChild(n):!1===e.onInitDoNotUpdateParent&&!0===e.onInitSetUndefinedParentIfChildIsDefined&&this._updateParent(t)):!1===e.onInitDoNotUpdateChild&&this._updateChild(n)):!0===this._childToParent?!1===e.onInitDoNotUpdateParent&&(t=canReflect_1_18_0_canReflect.getValue(e.child),this._updateParent(t)):!0===this._parentToChild&&!1===e.onInitDoNotUpdateChild&&(n=canReflect_1_18_0_canReflect.getValue(e.parent),this._updateChild(n))},startChild:function(){if(!1===this._bindingState.child&&!0===this._childToParent){var e=this._options;this._bindingState.child=!0,turnOnListeningAndUpdate(e.child,e.parent,this._updateParent,e.queue)}},startParent:function(){if(!1===this._bindingState.parent&&!0===this._parentToChild){var e=this._options;this._bindingState.parent=!0,turnOnListeningAndUpdate(e.parent,e.child,this._updateChild,e.queue)}},stop:function(){var e=this._bindingState,t=this._options;!0===e.parent&&!0===this._parentToChild&&(e.parent=!1,turnOffListeningAndUpdate(t.parent,t.child,this._updateChild,t.queue)),!0===e.child&&!0===this._childToParent&&(e.child=!1,turnOffListeningAndUpdate(t.child,t.parent,this._updateParent,t.queue))}}),["parent","child"].forEach(function(e){Object.defineProperty(Bind.prototype,e,{get:function(){return this._options[e]}})});function updateValue(e){var t=e.bindingState;if(!1!==t.child||!1!==t.parent){var n=e.semaphore;if(!(n.value+e.partnerSemaphore.value<=e.allowedUpdates));else if(canQueues_1_3_2_canQueues.batch.start(),n.increment(e),e.setValue(e.newValue,e.observable),canQueues_1_3_2_canQueues.mutateQueue.enqueue(n.decrement,n,[]),canQueues_1_3_2_canQueues.batch.stop(),e.sticky){var a=canReflect_1_18_0_canReflect.getValue(e.observable);a!==canReflect_1_18_0_canReflect.getValue(e.partner)&&e.setPartner(a,e.partner)}}}var canBind_1_5_1_canBind=canNamespace_1_0_0_canNamespace.Bind=Bind;const value$1=canValue_1_1_2_canValue,metaSymbol$6=Symbol.for("can.meta");function isJSONLike(e){return canReflect_1_18_0_canReflect.isFunctionLike(e.parse)&&canReflect_1_18_0_canReflect.isFunctionLike(e.stringify)}function initializeFromAttribute(e,t,n,a){function r(e){return n&&(e=n.parse(e)),canReflect_1_18_0_canReflect.convert(e,o())}t[metaSymbol$6]===void 0&&(t[metaSymbol$6]={}),t[metaSymbol$6]._observedAttributes===void 0&&(t[metaSymbol$6]._observedAttributes=[]),t[metaSymbol$6]._attributeChangedCallbackHandler===void 0&&(t[metaSymbol$6]._attributeChangedCallbackHandler={}),a===void 0&&(a=e),a=canString_1_1_0_canString.hyphenate(a),t[metaSymbol$6]._hasInitializedAttributeBindings||(Object.defineProperty(t,"observedAttributes",{get(){return t[metaSymbol$6]._observedAttributes}}),t.prototype.attributeChangedCallback=function(e){t[metaSymbol$6]._attributeChangedCallbackHandler[e].apply(this,arguments)},t[metaSymbol$6]._hasInitializedAttributeBindings=!0),t[metaSymbol$6]._observedAttributes.push(a),t[metaSymbol$6]._attributeChangedCallbackHandler[a]=function(e,t,n){this[metaSymbol$6]&&this[metaSymbol$6]._attributeBindings&&n!==t&&canReflect_1_18_0_canReflect.setValue(this[metaSymbol$6]._attributeBindings[e],n)};var o=function(){var n=canReflect_1_18_0_canReflect.getSchema(t),a;return n&&(a=n.keys[e]),a||(a=canType_1_1_5_canType.Any),a=canType_1_1_5_canType.convert(a),o=function(){return a},a};return function(t){const n=value$1.to(t,e),o={};canReflect_1_18_0_canReflect.assignSymbols(o,{"can.setValue":function(e){canReflect_1_18_0_canReflect.setValue(n,r(e))}});const i=value$1.from(t.hasAttribute(a)?r(t.getAttribute(a)):void 0),s=new canBind_1_5_1_canBind({parent:i,child:o,queue:"dom",onInitDoNotUpdateChild:!0});return void 0===t[metaSymbol$6]&&(t[metaSymbol$6]={}),void 0===t[metaSymbol$6]._attributeBindings&&(t[metaSymbol$6]._attributeBindings={}),t[metaSymbol$6]._attributeBindings[a]=o,s}}var canObservableBindings_1_3_3_fromAttribute=function(e,t){var n;return 2===arguments.length&&canReflect_1_18_0_canReflect.isConstructorLike(t)&&!isJSONLike(t)?initializeFromAttribute(e,t):(1===arguments.length&&"object"==typeof e?(n=e,e=void 0):"object"==typeof t&&isJSONLike(t)&&(n=t),function(t,a){return initializeFromAttribute(t,a,n,e)})};canNamespace_1_0_0_canNamespace.fromAttribute=canObservableBindings_1_3_3_fromAttribute;var canObservableBindings_1_3_3_canObservableBindings={fromAttribute:canObservableBindings_1_3_3_fromAttribute},canObservableBindings_1_3_3_canObservableBindings_1=canObservableBindings_1_3_3_canObservableBindings.fromAttribute,setElementSymbol=canSymbol_1_6_5_canSymbol.for("can.setElement");function SetterObservable(e,t){this.setter=t,this.observation=new canObservation_4_2_0_canObservation(e),this.handler=this.handler.bind(this)}SetterObservable.prototype=Object.create(settable.prototype),SetterObservable.prototype.constructor=SetterObservable,SetterObservable.prototype.set=function(e){this.setter(e)},SetterObservable.prototype.hasDependencies=function(){return canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)},canReflect_1_18_0_canReflect.assignSymbols(SetterObservable.prototype,{"can.setValue":SetterObservable.prototype.set,"can.valueHasDependencies":SetterObservable.prototype.hasDependencies,"can.setElement":function(e){this.observation[setElementSymbol](e)}});var setter=SetterObservable;const lifecycleStatusSymbol=Symbol.for("can.lifecycleStatus"),inSetupSymbol$4=Symbol.for("can.initializing"),teardownHandlersSymbol=Symbol.for("can.teardownHandlers");function defineConfigurableNonEnumerable(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}var mixinLifecycleMethods=function(e=HTMLElement){return class extends e{constructor(){if(super(),arguments.length)throw new Error("can-stache-element: Do not pass arguments to the constructor. Initial property values should be passed to the `initialize` hook.");defineConfigurableNonEnumerable(this,inSetupSymbol$4,!0),defineConfigurableNonEnumerable(this,lifecycleStatusSymbol,{initialized:!1,rendered:!1,connected:!1,disconnected:!1}),defineConfigurableNonEnumerable(this,teardownHandlersSymbol,[])}connectedCallback(e){return this.initialize(e),this.render(),this.connect(),this}disconnectedCallback(){return this.disconnect(),this}initialize(e){const t=this[lifecycleStatusSymbol];return t.initialized?this:(this[inSetupSymbol$4]=!0,super.initialize&&super.initialize(e),this[inSetupSymbol$4]=!1,t.initialized=!0,this)}render(e){const t=this[lifecycleStatusSymbol];return t.rendered?this:(t.initialized||this.initialize(e),super.render&&super.render(e),t.rendered=!0,this)}connect(e){const t=this[lifecycleStatusSymbol];if(t.connected)return this;if(t.initialized||this.initialize(e),t.rendered||this.render(e),super.connect&&super.connect(e),this.connected){let e=this.connected();"function"==typeof e&&this[teardownHandlersSymbol].push(e)}return t.connected=!0,t.disconnected=!1,this}disconnect(){const e=this[lifecycleStatusSymbol];if(e.disconnected)return this;super.disconnect&&super.disconnect(),this.stopListening&&this.stopListening();for(let e of this[teardownHandlersSymbol])e.call(this);return this.disconnected&&this.disconnected(),this[lifecycleStatusSymbol]={initialized:!1,rendered:!1,connected:!1,disconnected:!0},this}}};const{mixinElement:mixinElement$1,mixins:mixins$5}=mixins,eventTargetInstalledSymbol=Symbol.for("can.eventTargetInstalled");var mixinProps=function(e=HTMLElement){function t(e){if(e[eventTargetInstalledSymbol])return;const t=e.prototype.addEventListener,r=e.prototype.removeEventListener;e.prototype.addEventListener=function(){return t.apply(this,arguments),n.apply(this,arguments)},e.prototype.removeEventListener=function(){return r.apply(this,arguments),a.apply(this,arguments)},e[eventTargetInstalledSymbol]=!0}const n=e.prototype.addEventListener,a=e.prototype.removeEventListener;class r extends mixinElement$1(e){constructor(){super(),t(this.constructor)}initialize(e){super.initialize(e);let t,n;for(t in this.constructor.props&&(n=Object.keys(this.constructor.props)),this)if(this.hasOwnProperty(t))if(n&&n.includes(t)){const e=this[t];delete this[t],this[t]=e}else mixins$5.expando(this,t,this[t])}}return r},canAttributeEncoder_1_1_4_canAttributeEncoder=createCommonjsModule(function(e){function t(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function n(e,t,n){return t+"-"+n.toLowerCase()}function a(e,t){return 0===e.indexOf(t)}function r(e,t){return e.length-e.lastIndexOf(t)===t.length}var o=function(e){var n={},a=e.split(",");return t(a,function(e){n[e]=!0}),n}("allowReorder,attributeName,attributeType,autoReverse,baseFrequency,baseProfile,calcMode,clipPathUnits,contentScriptType,contentStyleType,diffuseConstant,edgeMode,externalResourcesRequired,filterRes,filterUnits,glyphRef,gradientTransform,gradientUnits,kernelMatrix,kernelUnitLength,keyPoints,keySplines,keyTimes,lengthAdjust,limitingConeAngle,markerHeight,markerUnits,markerWidth,maskContentUnits,maskUnits,patternContentUnits,patternTransform,patternUnits,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,repeatCount,repeatDur,requiredExtensions,requiredFeatures,specularConstant,specularExponent,spreadMethod,startOffset,stdDeviation,stitchTiles,surfaceScale,systemLanguage,tableValues,textLength,viewBox,viewTarget,xChannelSelector,yChannelSelector,controlsList"),i={leftParens:/\(/g,rightParens:/\)/g,leftBrace:/\{/g,rightBrace:/\}/g,camelCase:/([a-z]|[0-9]|^)([A-Z])/g,forwardSlash:/\//g,space:/\s/g,uppercase:/[A-Z]/g,uppercaseDelimiterThenChar:/:u:([a-z])/g,caret:/\^/g,dollar:/\$/g,at:/@/g},s={prependUppercase:":u:",replaceSpace:":s:",replaceForwardSlash:":f:",replaceLeftParens:":lp:",replaceRightParens:":rp:",replaceLeftBrace:":lb:",replaceRightBrace:":rb:",replaceCaret:":c:",replaceDollar:":d:",replaceAt:":at:"},l={};if(l.encode=function(e){var t=e;return!o[t]&&t.match(i.camelCase)&&(a(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw")?t=t.replace(i.uppercase,function(e){return s.prependUppercase+e.toLowerCase()}):(a(t,"(")||a(t,"{"))&&(t=t.replace(i.camelCase,n))),t=t.replace(i.space,s.replaceSpace).replace(i.forwardSlash,s.replaceForwardSlash).replace(i.leftParens,s.replaceLeftParens).replace(i.rightParens,s.replaceRightParens).replace(i.leftBrace,s.replaceLeftBrace).replace(i.rightBrace,s.replaceRightBrace).replace(i.caret,s.replaceCaret).replace(i.dollar,s.replaceDollar).replace(i.at,s.replaceAt),t},l.decode=function(e){var t=e;return!o[t]&&i.uppercaseDelimiterThenChar.test(t)&&(a(t,"on:")||r(t,":to")||r(t,":from")||r(t,":bind")||r(t,":raw"))&&(t=t.replace(i.uppercaseDelimiterThenChar,function(e,t){return t.toUpperCase()})),t=t.replace(s.replaceLeftParens,"(").replace(s.replaceRightParens,")").replace(s.replaceLeftBrace,"{").replace(s.replaceRightBrace,"}").replace(s.replaceForwardSlash,"/").replace(s.replaceSpace," ").replace(s.replaceCaret,"^").replace(s.replaceDollar,"$").replace(s.replaceAt,"@"),t},canNamespace_1_0_0_canNamespace.encoder)throw new Error("You can't have two versions of can-attribute-encoder, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.encoder=l});function each(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function makeMap$1(e){var t={},n=e.split(",");return each(n,function(e){t[e]=!0}),t}function handleIntermediate(e,t){for(var n=0,a=e.length,r;n<a;n++)r=e[n],t[r.tokenType].apply(t,r.args);return e}var alphaNumeric="A-Za-z0-9",alphaNumericHU="-:_A-Za-z0-9",magicStart="{{",endTag=/^<\/([-:_A-Za-z0-9]+)[^>]*>/,magicMatch=/\{\{(![\s\S]*?!|[\s\S]*?)\}\}\}?/g,space=/\s/,alphaRegex=/[A-Za-z0-9]/,attributeRegexp=/[-:_A-Za-z0-9]+s*=s*("[^"]*"|'[^']*')/,empty=makeMap$1("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),caseMattersElements=makeMap$1("altGlyph,altGlyphDef,altGlyphItem,animateColor,animateMotion,animateTransform,clipPath,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,foreignObject,glyphRef,linearGradient,radialGradient,textPath"),closeSelf=makeMap$1("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),special=makeMap$1("script"),tokenTypes=["start","end","close","attrStart","attrEnd","attrValue","chars","comment","special","done"],startOppositesMap={"{":"}","(":")"},fn=function(){},HTMLParser=function(e,t,n){function a(e,n,a,o){n=caseMattersElements[n]?n:n.toLowerCase(),closeSelf[n]&&l.last()===n&&r("",n),o=empty[n]||!!o,t.start(n,o,g),o||l.push(n),HTMLParser.parseAttrs(a,t,g),t.end(n,o,g),"html"===n&&(y=!0)}function r(e,n){var a;if(!n)a=0;else for(n=caseMattersElements[n]?n:n.toLowerCase(),a=l.length-1;0<=a&&l[a]!==n;a--);if(0<=a){for(var r=l.length-1;r>=a;r--)t.close&&t.close(l[r],g);l.length=a,"body"===n&&(y=!0)}}function o(e,n){t.special&&t.special(n,g)}if("object"==typeof e)return handleIntermediate(e,t);var i=[];t=t||{},n&&each(tokenTypes,function(e){var n=t[e]||fn;t[e]=function(){if(!1!==n.apply(this,arguments)){var t=arguments.length;void 0===arguments[t-1]&&(t=arguments.length-1),i.push({tokenType:e,args:[].slice.call(arguments,0,t)})}}});var s=function(){p&&!y&&t.chars&&t.chars(p,g),y=!1,p=""},l=[],d=e,p="",c,u,y,m,g;for(l.last=function(){return this[this.length-1]};e;){if(u=!0,!l.last()||!special[l.last()]){if(0===e.indexOf("<!--"))c=e.indexOf("-->"),0<=c&&(s(),t.comment&&t.comment(e.substring(4,c),g),e=e.substring(c+3),u=!1);else if(0===e.indexOf("</"))m=e.match(endTag),m&&(s(),m[0].replace(endTag,r),e=e.substring(m[0].length),u=!1);else if(0===e.indexOf("<")){var h=HTMLParser.searchStartTag(e);h&&(s(),a.apply(null,h.match),e=h.html,u=!1)}else 0===e.indexOf(magicStart)&&(m=e.match(magicMatch),m&&(s(),m[0].replace(magicMatch,o),e=e.substring(m[0].length)));if(u){c=findBreak(e,magicStart),0===c&&e===d&&(p+=e.charAt(0),e=e.substr(1),c=findBreak(e,magicStart));var f=0>c?e:e.substring(0,c);e=0>c?"":e.substring(c),f&&(p+=f)}}else e=e.replace(new RegExp("([\\s\\S]*?)</"+l.last()+"[^>]*>"),function(e,n){return n=n.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(n,g),""}),r("",l.last());if(e===d)throw new Error("Parse Error: "+e);d=e}return s(),r(),t.done(g),i},callAttrStart=function(e,t,n,a,r){var o=a.substring("number"==typeof e.nameStart?e.nameStart:t,t),i=canAttributeEncoder_1_1_4_canAttributeEncoder.encode(o);e.attrStart=i,n.attrStart(e.attrStart,r),e.inName=!1},callAttrEnd=function(e,t,n,a,r){if(e.valueStart!==void 0&&e.valueStart<t){var o=a.substring(e.valueStart,t);n.attrValue(o,r)}n.attrEnd(e.attrStart,r),e.attrStart=void 0,e.valueStart=void 0,e.inValue=!1,e.inName=!1,e.lookingForEq=!1,e.inQuote=!1,e.lookingForName=!0},findBreak=function(e,t){for(var n=t.length,a=0,r=e.length;a<r;a++)if("<"===e[a]||e.substr(a,n)===t)return a;return-1};HTMLParser.parseAttrs=function(e,t,n){if(e){for(var a=0,r={inName:!1,nameStart:void 0,inValue:!1,valueStart:void 0,inQuote:!1,attrStart:void 0,lookingForName:!0,lookingForValue:!1,lookingForEq:!1},o;a<e.length;){o=a;var s=e.charAt(a);if(a++,magicStart===e.substr(o,magicStart.length)){r.inValue&&o>r.valueStart?t.attrValue(e.substring(r.valueStart,o),n):r.inName&&r.nameStart<o?(callAttrStart(r,o,t,e,n),callAttrEnd(r,o,t,e,n)):r.lookingForValue?r.inValue=!0:r.lookingForEq&&r.attrStart&&callAttrEnd(r,o,t,e,n),magicMatch.lastIndex=o;var l=magicMatch.exec(e);l&&(t.special(l[1],n),a=o+l[0].length,r.inValue&&(r.valueStart=o+l[0].length))}else if(r.inValue)r.inQuote?s===r.inQuote&&callAttrEnd(r,o,t,e,n):space.test(s)&&callAttrEnd(r,o,t,e,n);else if("="===s&&(r.lookingForEq||r.lookingForName||r.inName))r.attrStart||callAttrStart(r,o,t,e,n),r.lookingForValue=!0,r.lookingForEq=!1,r.lookingForName=!1;else if(r.inName){var d=e[r.nameStart],p,c;startOppositesMap[d]===s?(p="{"===d?"(":"{",c=startOppositesMap[p],e[o+1]===c?(callAttrStart(r,o+2,t,e,n),a++):callAttrStart(r,o+1,t,e,n),r.lookingForEq=!0):space.test(s)&&"{"!==d&&"("!==d&&(callAttrStart(r,o,t,e,n),r.lookingForEq=!0)}else r.lookingForName?space.test(s)||(r.attrStart&&callAttrEnd(r,o,t,e,n),r.nameStart=o,r.inName=!0):r.lookingForValue&&(space.test(s)?a===e.length&&callAttrEnd(r,o,t,e,n):(r.lookingForValue=!1,r.inValue=!0,"'"===s||"\""===s?(r.inQuote=s,r.valueStart=o+1):r.valueStart=o))}r.inName?(callAttrStart(r,o+1,t,e,n),callAttrEnd(r,o+1,t,e,n)):(r.lookingForEq||r.lookingForValue||r.inValue)&&callAttrEnd(r,o+1,t,e,n),magicMatch.lastIndex=0}},HTMLParser.searchStartTag=function(e){for(var t=e.indexOf(">"),n=attributeRegexp.exec(e.substring(1)),a=1;n&&t>=a+n.index;){for(a+=n.index+n[0].length;t<a;)t+=e.substring(t+1).indexOf(">")+1;n=attributeRegexp.exec(e.substring(a))}if(-1===t||!alphaRegex.test(e[1]))return null;var r="",o="",i=e.substring(0,t+1),s="/"===i[i.length-2],l=i.search(space),d,p,c;return s?(o="/",p=i.substring(1,i.length-2).trim()):p=i.substring(1,i.length-1).trim(),-1===l?d=p:(l--,d=p.substring(0,l),r=p.substring(l)),c=[i,d,r,o],{match:c,html:e.substring(i.length)}};var canViewParser_4_1_3_canViewParser=canNamespace_1_0_0_canNamespace.HTMLParser=HTMLParser;canGlobals_1_2_2_canGlobalsInstance.define("location",function(){return canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global").location});var location_1=canGlobals_1_2_2_canGlobalsInstance.makeExport("location");canGlobals_1_2_2_canGlobalsInstance.define("MutationObserver",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver});var mutationObserver=canGlobals_1_2_2_canGlobalsInstance.makeExport("MutationObserver");canGlobals_1_2_2_canGlobalsInstance.define("customElements",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global");return e.customElements});var customElements=canGlobals_1_2_2_canGlobalsInstance.makeExport("customElements"),canGlobals_1_2_2_canGlobals=canGlobals_1_2_2_canGlobalsInstance;function eliminate(e,t){var n=e.indexOf(t);0<=n&&e.splice(n,1)}function wasNotInSet(e,t){var n=t.has(e);return!1===n&&t.add(e),!n}function contains(e,t){return t&&t.nodeType===Node.TEXT_NODE?contains(e,t.parentNode):e.contains?e.contains(t):e.nodeType===Node.DOCUMENT_NODE&&e.documentElement?contains(e.documentElement,t):(t=t.parentNode,t===e)}function isDocumentElement(e){return document$1().documentElement===e}function isFragment(e){return!!(e&&11===e.nodeType)}function isElementNode(e){return!!(e&&1===e.nodeType)}function getChildren(e){for(var t=[],n=e.firstChild;n;)t.push(n),n=n.nextSibling;return t}function getParents(e){var t;return t=isFragment(e)?getChildren(e):[e],t}function getNodesLegacyB(e){var t=0,n=isFragment(e)?[]:[e],a,r;if(null==e.firstChild)return n;do!a&&(r=e.firstChild)?(t++,n.push(r)):(r=e.nextSibling)?(a=!1,n.push(r)):(r=e.parentNode,t--,a=!0),e=r;while(0<t);return n}function treeWalkerFilterFunction(){return NodeFilter.FILTER_ACCEPT}var treeWalkerFilter=treeWalkerFilterFunction;treeWalkerFilter.acceptNode=treeWalkerFilterFunction;function getNodesWithTreeWalker(e){for(var t=isFragment(e)?[]:[e],n=isElementNode(e)&&document$1().createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,treeWalkerFilter,!1),a;a=n&&n.nextNode();)t.push(a);return t}function getAllNodes(e){return void 0===document$1().createTreeWalker?getNodesLegacyB(e):getNodesWithTreeWalker(e)}function subscription(e){return function(){var t=e.apply(this,arguments),n=!1;return function(){if(n){var a=e.name||e.displayName||"an anonymous function";throw new Error("Disposal function returned by "+a+" called more than once.")}t.apply(this,arguments),n=!0}}}var canDomMutate_2_0_8_Util={eliminate:eliminate,getDocument:document$1,isDocumentElement:isDocumentElement,isFragment:isFragment,getParents:getParents,getAllNodes:getAllNodes,getChildren:getChildren,subscription:subscription,wasNotInSet:wasNotInSet,contains:contains},contains$1=canDomMutate_2_0_8_Util.contains,mutate={},isConnected;function getIsConnectedFromNode(e){return e.isConnected}function getIsConnectedFromDocument(e){var t=e.ownerDocument;return null===t||t===e||contains$1(t,e)}function setIsConnected(e){if(e){var t=e.createTextNode("");isConnected="isConnected"in t.constructor.prototype?getIsConnectedFromNode:getIsConnectedFromDocument,mutate&&(mutate.isConnected=isConnected)}else mutate.isConnected=getIsConnectedFromNode}setIsConnected(canGlobals_1_2_2_canGlobals.getKeyValue("document")),canGlobals_1_2_2_canGlobals.onKeyValue("document",setIsConnected);var canDomMutate_2_0_8_IsConnected=mutate,eliminate$1=canDomMutate_2_0_8_Util.eliminate,subscription$1=canDomMutate_2_0_8_Util.subscription,isDocumentElement$1=canDomMutate_2_0_8_Util.isDocumentElement,getAllNodes$1=canDomMutate_2_0_8_Util.getAllNodes,dataStore=new WeakMap,domMutate,dispatchNodeInserted,dispatchNodeConnected,dispatchGlobalConnected,dispatchNodeRemoved,dispatchNodeDisconnected,dispatchGlobalDisconnected,dispatchAttributeChange,queue;function getRelatedData(e,t){var n=dataStore.get(e);if(n)return n[t]}function setRelatedData(e,t,n){var a=dataStore.get(e);a||(a={},dataStore.set(e,a)),a[t]=n}function deleteRelatedData(e,t){var n=dataStore.get(e);return delete n[t]}function toMutationEvent(e,t){return{target:e,sourceMutation:t}}function getDocumentListeners(e,t){var n=document$1(),a=getRelatedData(n,t);if(a)return a.listeners}function getTargetListeners(e,t){var n=document$1(),a=getRelatedData(n,t);return a?a.get(e):void 0}function addTargetListener(e,t,n){var a=document$1(),r=getRelatedData(a,t);r||(r=new WeakMap,setRelatedData(a,t,r));var o=r.get(e);o||(o=[],r.set(e,o)),o.push(n)}function removeTargetListener(e,t,n){var a=document$1(),r=getRelatedData(a,t);if(r){var o=r.get(e);o&&(eliminate$1(o,n),0===o.length&&(r["delete"](e),0===r.size&&deleteRelatedData(a,t)))}}var promise=Promise.resolve();function nextTick(e){promise.then(e)}function flushCallbacks(e,t){for(var n=e.length,a=e.slice(0),r=0;r<n;r++)a[r](t)}function dispatch$1(e,t){return function(n){var a=e(n.target,t);a&&flushCallbacks(a,n)}}var count=0;function observeMutations(e,t,n,a){var r=getRelatedData(e,t);r||(r={observingCount:0},setRelatedData(e,t,r));var o=function(){r.observer&&(r.observer.disconnect(),r.observer=null);var t=mutationObserver();if(t){var o=global_1().Node;if(!!(o&&e instanceof o)){var i=new t(a);i.id=count++,i.observe(e,n),r.observer=i}}};return 0===r.observingCount&&(canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",o),o()),r.observingCount++,function(){var n=getRelatedData(e,t);n&&(n.observingCount--,0>=n.observingCount&&(n.observer&&n.observer.disconnect(),deleteRelatedData(e,t),canGlobals_1_2_2_canGlobals.offKeyValue("MutationObserver",o)))}}var treeMutationConfig={subtree:!0,childList:!0},attributeMutationConfig={attributes:!0,attributeOldValue:!0};function addNodeListener(e,t,n){return subscription$1(function(a,r){if(11===a.nodeType)return Function.prototype;var o;return o=n?observeMutations(a,t,attributeMutationConfig,queue.enqueueAndFlushMutations):observeMutations(document$1(),t,treeMutationConfig,queue.enqueueAndFlushMutations),addTargetListener(a,e,r),function(){o&&o(),removeTargetListener(a,e,r)}})}function addGlobalListener(e,t){return subscription$1(function(n,a){if(!isDocumentElement$1(n))throw new Error("Global mutation listeners must pass a documentElement");var r=document$1(),o=getRelatedData(r,e);o||(o={listeners:[]},setRelatedData(r,e,o));var i=o.listeners;return 0===i.length&&(o.removeListener=t(r,function(){})),i.push(a),function(){var t=getRelatedData(r,e);if(t){var n=t.listeners;eliminate$1(n,a),0===n.length&&(t.removeListener(),deleteRelatedData(r,e))}}})}var domMutationPrefix="domMutation",connectedDataKey="domMutationConnectedData",disconnectedDataKey="domMutationDisconnectedData",insertedDataKey="domMutationInsertedData",removedDataKey="domMutationRemovedData",attributeChangeDataKey="domMutationAttributeChangeData",documentConnectedDataKey="domMutationDocumentConnectedData",documentDisconnectedDataKey="domMutationDocumentDisconnectedData",documentAttributeChangeDataKey="domMutationDocumentAttributeChangeData",treeDataKey="domMutationTreeData",attributeDataKey="domMutationAttributeData";dispatchNodeInserted=dispatch$1(getTargetListeners,insertedDataKey),dispatchNodeConnected=dispatch$1(getTargetListeners,connectedDataKey),dispatchGlobalConnected=dispatch$1(getDocumentListeners,documentConnectedDataKey),dispatchNodeRemoved=dispatch$1(getTargetListeners,removedDataKey),dispatchNodeDisconnected=dispatch$1(getTargetListeners,disconnectedDataKey),dispatchGlobalDisconnected=dispatch$1(getDocumentListeners,documentDisconnectedDataKey),dispatchAttributeChange=dispatch$1(getTargetListeners,attributeChangeDataKey);var addNodeConnectedListener=addNodeListener(connectedDataKey,treeDataKey),addNodeDisconnectedListener=addNodeListener(disconnectedDataKey,treeDataKey),addNodeInsertedListener=addNodeListener(insertedDataKey,treeDataKey),addNodeRemovedListener=addNodeListener(removedDataKey,treeDataKey),addNodeAttributeChangeListener=addNodeListener(attributeChangeDataKey,attributeDataKey,!0),addConnectedListener=addGlobalListener(documentConnectedDataKey,addNodeConnectedListener),addDisconnectedListener=addGlobalListener(documentDisconnectedDataKey,addNodeDisconnectedListener),addAttributeChangeListener=addGlobalListener(documentAttributeChangeDataKey,addNodeAttributeChangeListener);function dispatchTreeMutation(e,t){for(var n=!0===e.isConnected||e.isConnected===void 0,o=e.removedNodes.length,i=0,s;i<o;i++)s=getAllNodes$1(e.removedNodes[i]),s.forEach(function(a){var r=toMutationEvent(a,e);canDomMutate_2_0_8_Util.wasNotInSet(a,t.removed)&&dispatchNodeRemoved(r),n&&canDomMutate_2_0_8_Util.wasNotInSet(a,t.disconnected)&&(dispatchNodeDisconnected(r),dispatchGlobalDisconnected(r))});for(var l=e.addedNodes.length,d=0,p;d<l;d++)p=getAllNodes$1(e.addedNodes[d]),p.forEach(function(a){var r=toMutationEvent(a,e);canDomMutate_2_0_8_Util.wasNotInSet(a,t.inserted)&&dispatchNodeInserted(r),n&&canDomMutate_2_0_8_Util.wasNotInSet(a,t.connected)&&(dispatchNodeConnected(r),dispatchGlobalConnected(r))})}var FLUSHING_MUTATIONS=[],IS_FLUSHING=!1,IS_FLUSH_PENDING=!1,ENQUEUED_MUTATIONS=[];queue={enqueueAndFlushMutations:function(e){if(IS_FLUSH_PENDING&&(FLUSHING_MUTATIONS.push.apply(FLUSHING_MUTATIONS,ENQUEUED_MUTATIONS),IS_FLUSH_PENDING=!1,ENQUEUED_MUTATIONS=[]),FLUSHING_MUTATIONS.push.apply(FLUSHING_MUTATIONS,e),!IS_FLUSHING){IS_FLUSHING=!0;for(var t=0,n={connected:new Set,disconnected:new Set,inserted:new Set,removed:new Set},a;t<FLUSHING_MUTATIONS.length;)a=FLUSHING_MUTATIONS[t],"childList"===a.type?dispatchTreeMutation(a,n):"attributes"===a.type&&dispatchAttributeChange(a),t++;FLUSHING_MUTATIONS=[],IS_FLUSHING=!1}},enqueueMutationsAndFlushAsync:function(e){ENQUEUED_MUTATIONS.push.apply(ENQUEUED_MUTATIONS,e),IS_FLUSH_PENDING||(IS_FLUSH_PENDING=!0,nextTick(function(){if(IS_FLUSH_PENDING){IS_FLUSH_PENDING=!1;var e=ENQUEUED_MUTATIONS;ENQUEUED_MUTATIONS=[],queue.enqueueAndFlushMutations(e)}else;}))}},domMutate={dispatchNodeInsertion:function(e,t){queue.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[e],isConnected:canDomMutate_2_0_8_IsConnected.isConnected(t),removedNodes:[]}])},dispatchNodeRemoval:function(e,t){queue.enqueueMutationsAndFlushAsync([{type:"childList",target:t,addedNodes:[],removedNodes:[e],isConnected:canDomMutate_2_0_8_IsConnected.isConnected(t)}])},dispatchNodeAttributeChange:function(e,t,n){queue.enqueueMutationsAndFlushAsync([{type:"attributes",target:e,attributeName:t,oldValue:n}])},onNodeConnected:addNodeConnectedListener,onNodeInsertion:function(){return console.warn("can-dom-mutate: Use onNodeConnected instead of onNodeInsertion"),addNodeConnectedListener.apply(this,arguments)},onNodeDisconnected:addNodeDisconnectedListener,onNodeRemoval:function(){return console.warn("can-dom-mutate: Use onNodeDisconnected instead of onNodeRemoval"),addNodeDisconnectedListener.apply(this,arguments)},onNodeAttributeChange:addNodeAttributeChangeListener,onDisconnected:addDisconnectedListener,onRemoval:function(){return console.warn("can-dom-mutate: Use onDisconnected instead of onRemoval"),addDisconnectedListener.apply(this,arguments)},onConnected:addConnectedListener,onInsertion:function(){return console.warn("can-dom-mutate: Use onConnected instead of onInsertion"),addConnectedListener.apply(this,arguments)},onAttributeChange:addAttributeChangeListener,flushRecords:function(e){e=e||document$1();var t=dataStore.get(e),n=[];t&&t.domMutationTreeData&&t.domMutationTreeData.observer&&(n=t.domMutationTreeData.observer.takeRecords()),queue.enqueueAndFlushMutations(n)},onNodeInserted:addNodeInsertedListener,onNodeRemoved:addNodeRemovedListener};var canDomMutate_2_0_8_canDomMutate=canNamespace_1_0_0_canNamespace.domMutate=domMutate,getParents$1=canDomMutate_2_0_8_Util.getParents,compat={replaceChild:function(e,t){var n=getParents$1(e),a=this.replaceChild(e,t);canDomMutate_2_0_8_canDomMutate.dispatchNodeRemoval(t,this);for(var r=0;r<n.length;r++)canDomMutate_2_0_8_canDomMutate.dispatchNodeInsertion(n[r],this);return a},setAttribute:function(e,t){var n=this.getAttribute(e),a=this.setAttribute(e,t),r=this.getAttribute(e);return n!==r&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,e,n),a},setAttributeNS:function(e,t,n){var a=this.getAttribute(t),r=this.setAttributeNS(e,t,n),o=this.getAttribute(t);return a!==o&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,t,a),r},removeAttribute:function(e){var t=this.getAttribute(e),n=this.removeAttribute(e);return t&&canDomMutate_2_0_8_canDomMutate.dispatchNodeAttributeChange(this,e,t),n}},compatData=[["appendChild","Insertion"],["insertBefore","Insertion"],["removeChild","Removal"]];compatData.forEach(function(e){var t=e[0],n="dispatchNode"+e[1];compat[t]=function(e){for(var a=getParents$1(e),r=this[t].apply(this,arguments),o=0;o<a.length;o++)canDomMutate_2_0_8_canDomMutate[n](a[o],this);return r}});var normal={},nodeMethods=["appendChild","insertBefore","removeChild","replaceChild","setAttribute","setAttributeNS","removeAttribute"];nodeMethods.forEach(function(e){normal[e]=function(){return canDomMutate_2_0_8_IsConnected.isConnected(this)?this[e].apply(this,arguments):compat[e].apply(this,arguments)}});var mutate$1={};function setMutateStrategy(e){var t=e?normal:compat;for(var n in t)mutate$1[n]=t[n]}var mutationObserverKey="MutationObserver";setMutateStrategy(canGlobals_1_2_2_canGlobals.getKeyValue("MutationObserver")),canGlobals_1_2_2_canGlobals.onKeyValue("MutationObserver",setMutateStrategy);var node=canNamespace_1_0_0_canNamespace.domMutateNode=canDomMutate_2_0_8_canDomMutate.node=mutate$1,canDomMutate_2_0_8_node=canNamespace_1_0_0_canNamespace.node=node;function childNodes(e){var t=e.childNodes;if("length"in t)return t;for(var n=e.firstChild,a=[];n;)a.push(n),n=n.nextSibling;return a}var canChildNodes_1_2_1_canChildNodes=canNamespace_1_0_0_canNamespace.childNodes=childNodes,fragmentRE=/^\s*<(\w+)[^>]*>/,toString={}.toString,toDOMSymbol=canSymbol_1_6_5_canSymbol.for("can.toDOM");function makeFragment(e,t,n){void 0===t&&(t=fragmentRE.test(e)&&RegExp.$1),e&&"[object Function]"===toString.call(e.replace)&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>"));var a=n.createElement("div"),r=n.createElement("div");return"tbody"===t||"tfoot"===t||"thead"===t||"colgroup"===t?(r.innerHTML="<table>"+e+"</table>",a=3===r.firstChild.nodeType?r.lastChild:r.firstChild):"col"===t?(r.innerHTML="<table><colgroup>"+e+"</colgroup></table>",a=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"tr"===t?(r.innerHTML="<table><tbody>"+e+"</tbody></table>",a=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild):"td"===t||"th"===t?(r.innerHTML="<table><tbody><tr>"+e+"</tr></tbody></table>",a=3===r.firstChild.nodeType?r.lastChild:r.firstChild.firstChild.firstChild):"option"===t?(r.innerHTML="<select>"+e+"</select>",a=3===r.firstChild.nodeType?r.lastChild:r.firstChild):a.innerHTML=""+e,[].slice.call(canChildNodes_1_2_1_canChildNodes(a))}function fragment(e,t){if(e&&11===e.nodeType)return e;t?t.length&&(t=t[0]):t=document$1();for(var n=makeFragment(e,void 0,t),a=(t||document).createDocumentFragment(),r=0,o=n.length;r<o;r++)a.appendChild(n[r]);return a}var makeFrag=function(e,t){var n=t||document$1(),a;if(!e||"string"==typeof e)a=fragment(null==e?"":""+e,n);else{if("function"==typeof e[toDOMSymbol])return makeFrag(e[toDOMSymbol]());if(11===e.nodeType)return e;if("number"==typeof e.nodeType)return a=n.createDocumentFragment(),a.appendChild(e),a;canReflect_1_18_0_canReflect.isListLike(e)?(a=n.createDocumentFragment(),canReflect_1_18_0_canReflect.eachIndex(e,function(e){a.appendChild(makeFrag(e))})):a=fragment(""+e,n)}return canChildNodes_1_2_1_canChildNodes(a).length||a.appendChild(n.createTextNode("")),a},canFragment_1_3_1_canFragment=canNamespace_1_0_0_canNamespace.fragment=canNamespace_1_0_0_canNamespace.frag=makeFrag,canViewCallbacks_5_0_0_canViewCallbacks=createCommonjsModule(function(e){var t=canSymbol_1_6_5_canSymbol.for("can.callbackMap"),n=canSymbol_1_6_5_canSymbol.for("can.initialize"),a={},r=function(){var e=canGlobals_1_2_2_canGlobals.getKeyValue("document");return null!=e&&null!=e.documentElement&&"false"!==e.documentElement.getAttribute("data-can-automount")},o=new WeakMap,s=function(e){var t=e.tagName&&e.tagName.toLowerCase(),n=a[t];n&&b.tagHandler(e,t,{})},l=!1,d=function(){var e=document$1().documentElement;if(l){if(l===e)return;v()}var t=canDomMutate_2_0_8_canDomMutate.onConnected(e,function(e){s(e.target)});l=!0,v=function(){t(),l=!1}},p=function(e){for(var t=document$1().getElementsByTagName(e),n=0,a;void 0!==(a=t[n]);n++)s(a)},c=function(e,t){if(t)"string"==typeof e?u[e]=t:y.push({match:e,handler:t});else{var n=u[e];if(!n)for(var a=0,r=y.length,o;a<r;a++)if(o=y[a],o.match.test(e))return o.handler;return n}},u={},y=[],m=new WeakMap,g=/[-\:]/,h=function(){},f=function(e,t){if(t){var n=g.test(e),o="undefined"!=typeof a[e.toLowerCase()],i;if(a[e.toLowerCase()]=t,r()){var s=canGlobals_1_2_2_canGlobals.getKeyValue("customElements");if(!s)d(),p(e);else if(i=s.get(e.toLowerCase()),n&&!i){var c=function(){return Reflect.construct(HTMLElement,[],c)};c.prototype=Object.create(HTMLElement.prototype),c.prototype.constructor=c,c.prototype.connectedCallback=function(){b.tagHandler(this,e.toLowerCase(),{})},s.define(e,c)}}else l&&v()}else{var u;return null===t?delete a[e.toLowerCase()]:u=a[e.toLowerCase()],!u&&g.test(e)&&(u=h),u}},b={_tags:a,_attributes:u,_regExpAttributes:y,defaultCallback:h,tag:f,attr:c,attrs:function(e){var n=canReflect_1_18_0_canReflect.getKeyValue(e,t)||e;m.has(n)||(m.set(n,!0),canReflect_1_18_0_canReflect.eachKey(n,function(e,t){c(t,e)}))},tagHandler:function(e,t,r){if(!o.has(e)){var i=r.scope,s=i&&i.templateContext.tags.get(t),l=s||a[t]||e[n],d;if(l?(d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(l)(e,r),o.set(e,!0)):d=i,d&&r.subtemplate){i!==d&&(i=i.add(d));var p=r.subtemplate(i,r.options),c="string"==typeof p?canFragment_1_3_1_canFragment(p):p;canDomMutate_2_0_8_node.appendChild.call(e,c)}}}},v;if(canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{},canNamespace_1_0_0_canNamespace.view.callbacks)throw new Error("You can't have two versions of can-view-callbacks, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.view.callbacks=b}),processNodes=function(e,t,n,a){for(var r=a.createDocumentFragment(),o=0,s=e.length,l;o<s;o++)l=e[o],r.appendChild(processNode(l,t,n.concat(o),a));return r},keepsTextNodes="undefined"!=typeof document&&function(){var e=document.createDocumentFragment(),t=document.createElement("div");t.appendChild(document.createTextNode("")),t.appendChild(document.createTextNode("")),e.appendChild(t);var n=e.cloneNode(!0);return 2===n.firstChild.childNodes.length}(),clonesWork="undefined"!=typeof document&&function(){var e=document.createElement("a");e.innerHTML="<xyz></xyz>";var t=e.cloneNode(!0),n="<xyz></xyz>"===t.innerHTML,a,r;return n?(e=document.createDocumentFragment(),e.appendChild(document.createTextNode("foo-bar")),a=mutationObserver(),a?(r=new a(function(){}),r.observe(document.documentElement,{childList:!0,subtree:!0}),t=e.cloneNode(!0),r.disconnect()):t=e.cloneNode(!0),1===t.childNodes.length):n}(),namespacesWork="undefined"!=typeof document&&!!document.createElementNS,cloneNode=clonesWork?function(e){return e.cloneNode(!0)}:function(e){var t=e.ownerDocument,n;if(1===e.nodeType?"http://www.w3.org/1999/xhtml"!==e.namespaceURI&&namespacesWork&&t.createElementNS?n=t.createElementNS(e.namespaceURI,e.nodeName):n=t.createElement(e.nodeName):3===e.nodeType?n=t.createTextNode(e.nodeValue):8===e.nodeType?n=t.createComment(e.nodeValue):11===e.nodeType&&(n=t.createDocumentFragment()),e.attributes)for(var a=e.attributes,r=0,o;r<a.length;r++)o=a[r],o&&o.specified&&(o.namespaceURI?n.setAttributeNS(o.namespaceURI,o.nodeName||o.name,o.nodeValue||o.value):n.setAttribute(o.nodeName||o.name,o.nodeValue||o.value));if(e&&e.firstChild)for(var s=e.firstChild;s;)n.appendChild(cloneNode(s)),s=s.nextSibling;return n};function processNode(e,t,n,a){var r=n,o=typeof e,s=function(){return l||(l={path:n,callbacks:[]},t.push(l),r=[]),l},l,d,c,u,y;if(!("object"==o))"string"===o?d=a.createTextNode(e):"function"===o&&(keepsTextNodes?(d=a.createTextNode(""),s().callbacks.push({callback:e})):(d=a.createComment("~"),s().callbacks.push({callback:function(){var t=a.createTextNode("");return canDomMutate_2_0_8_node.replaceChild.call(this.parentNode,t,this),e.apply(t,arguments)}})));else if(e.tag){if(d=namespacesWork&&e.namespace?a.createElementNS(e.namespace,e.tag):a.createElement(e.tag),e.attrs)for(var m in e.attrs){var g=e.attrs[m];"function"==typeof g?s().callbacks.push({callback:g}):null!==g&&"object"==typeof g&&g.namespaceURI?d.setAttributeNS(g.namespaceURI,m,g.value):canDomMutate_2_0_8_node.setAttribute.call(d,m,g)}if(e.attributes)for(u=0,y=e.attributes.length;u<y;u++)s().callbacks.push({callback:e.attributes[u]});e.children&&e.children.length&&(c=l?l.paths=[]:t,d.appendChild(processNodes(e.children,c,r,a)))}else if(e.comment&&(d=a.createComment(e.comment),e.callbacks))for(u=0,y=e.callbacks.length;u<y;u++)s().callbacks.push({callback:e.callbacks[u]});return d}function getCallbacks(e,t,n){for(var a=t.path,r=t.callbacks,o=t.paths,s=e,l=a?a.length:0,d=o?o.length:0,p=0;p<l;p++)s=s.childNodes.item(a[p]);for(p=0;p<d;p++)getCallbacks(s,o[p],n);n.push({element:s,callbacks:r})}function hydrateCallbacks(e,t){for(var n=e.length,a=0,r,o,s;a<n;a++){s=e[a],r=s.callbacks.length,o=s.element;for(var l=0;l<r;l++)s.callbacks[l].callback.apply(o,t)}}function makeTarget(e,t){var n=[],a=processNodes(e,n,[],t||document$1());return{paths:n,clone:a,hydrate:function(){for(var e=cloneNode(this.clone),t=[],r=0,o=t.length=arguments.length;r<o;r++)t[r]=arguments[r];for(var s=[],l=0;l<n.length;l++)getCallbacks(e,n[l],s);return hydrateCallbacks(s,t),e}}}makeTarget.keepsTextNodes=keepsTextNodes,makeTarget.cloneNode=cloneNode,canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewTarget_5_0_0_canViewTarget=canNamespace_1_0_0_canNamespace.view.target=makeTarget,getKeyValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getKeyValue"),observeDataSymbol=canSymbol_1_6_5_canSymbol.for("can.meta"),promiseDataPrototype={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0};function setVirtualProp(e,t,n){var a=e[observeDataSymbol],r=a[t];a[t]=n,canQueues_1_3_2_canQueues.enqueueByQueue(a.handlers.getNode([t]),e,[n,r],function(){return{}},["Promise",e,"resolved with value",n,"and changed virtual property: "+t])}function initPromise(e){var t=e[observeDataSymbol];t||(Object.defineProperty(e,observeDataSymbol,{enumerable:!1,configurable:!1,writable:!1,value:Object.create(promiseDataPrototype)}),t=e[observeDataSymbol],t.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Object,Array])),e.then(function(t){canQueues_1_3_2_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isResolved",!0),setVirtualProp(e,"value",t),setVirtualProp(e,"state","resolved"),canQueues_1_3_2_canQueues.batch.stop()},function(t){canQueues_1_3_2_canQueues.batch.start(),setVirtualProp(e,"isPending",!1),setVirtualProp(e,"isRejected",!0),setVirtualProp(e,"reason",t),setVirtualProp(e,"state","rejected"),canQueues_1_3_2_canQueues.batch.stop()})}function setupPromise(e){var t="getPrototypeOf"in Object?Object.getPrototypeOf(e):e.__proto__,n;e[getKeyValueSymbol$2]&&e[observeDataSymbol]||((null===t||t===Object.prototype)&&(t=e,"function"==typeof t.promise&&(n=t.promise,t.promise=function(){var e=n.call(t);return setupPromise(e),e})),canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getKeyValue":function(e){return this[observeDataSymbol]||initPromise(this),canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),"state"===e||"isPending"===e||"isResolved"===e||"isRejected"===e||"value"===e||"reason"===e?this[observeDataSymbol][e]:this[e]},"can.getValue":function(){return this[getKeyValueSymbol$2]("value")},"can.isValueLike":!1,"can.onKeyValue":function(e,t,n){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.add([e,n||"mutate",t])},"can.offKeyValue":function(e,t,n){this[observeDataSymbol]||initPromise(this),this[observeDataSymbol].handlers.delete([e,n||"mutate",t])},"can.hasOwnKey":function(e){return this[observeDataSymbol]||initPromise(this),e in this[observeDataSymbol]}}))}var canReflectPromise_2_2_1_canReflectPromise=setupPromise,getValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.setValue"),isValueLikeSymbol=canSymbol_1_6_5_canSymbol.for("can.isValueLike"),peek$3=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getKeyValue.bind(canReflect_1_18_0_canReflect)),isPromiseLike=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){return"object"==typeof e&&e&&"function"==typeof e.then}),bindName=Function.prototype.bind,isAt=function(e,t){var n=t[e-1];return n&&n.at},readValue=function(e,t,n,a,r,o){var s;do{s=!1;for(var l=0,d=observeReader.valueReaders.length;l<d;l++)observeReader.valueReaders[l].test(e,t,n,a)&&(e=observeReader.valueReaders[l].read(e,t,n,a,r,o))}while(s);return e},checkForObservableAndNotify=function(e,t,n,a,r){e.foundObservable&&!t.foundObservable&&canObservationRecorder_1_3_1_canObservationRecorder.trapsCount()&&(canObservationRecorder_1_3_1_canObservationRecorder.addMany(n()),e.foundObservable(a,r),t.foundObservable=!0)},objHasKeyAtIndex=function(e,t,n){return!!(t&&t.length&&canReflect_1_18_0_canReflect.hasKey(e,t[n].key))},observeReader;observeReader={read:function(e,t,n){n=n||{};var a={foundObservable:!1},o;n.foundObservable&&(o=canObservationRecorder_1_3_1_canObservationRecorder.trap());var s=readValue(e,0,t,n,a),l=t.length,d=0,p,c;for(checkForObservableAndNotify(n,a,o,e,0);d<l;){p=s;for(var u=0,y=observeReader.propertyReaders.length,m;u<y;u++)if(m=observeReader.propertyReaders[u],m.test(s)){s=m.read(s,t[d],d,n,a);break}if(checkForObservableAndNotify(n,a,o,p,d),++d,s=readValue(s,d,t,n,a,p),checkForObservableAndNotify(n,a,o,p,d-1),d<t.length&&(null===s||void 0===s))return c=objHasKeyAtIndex(p,t,d-1),n.earlyExit&&!c&&n.earlyExit(p,d-1,s),{value:void 0,parent:p,parentHasKey:c,foundLastParent:!1}}return c=objHasKeyAtIndex(p,t,t.length-1),void 0===s&&!c&&n.earlyExit&&n.earlyExit(p,d-1),{value:s,parent:p,parentHasKey:c,foundLastParent:!0}},get:function(e,t,n){return observeReader.read(e,observeReader.reads(t),n||{}).value},valueReadersMap:{},valueReaders:[{name:"function",test:function(e){return e&&canReflect_1_18_0_canReflect.isFunctionLike(e)&&!canReflect_1_18_0_canReflect.isConstructorLike(e)},read:function(e,t,n,a,r,o){return a.callMethodsOnObservables&&canReflect_1_18_0_canReflect.isObservableLike(o)&&canReflect_1_18_0_canReflect.isMapLike(o)?(dev.warn("can-stache-key: read() called with `callMethodsOnObservables: true`."),e.apply(o,a.args||[])):!1===a.proxyMethods?e:bindName.call(e,o)}},{name:"isValueLike",test:function(e,t,n,a){return e&&e[getValueSymbol$2]&&!1!==e[isValueLikeSymbol]&&(a.foundAt||!isAt(t,n))},read:function(e,t,n,a){return!1===a.readCompute&&t===n.length?e:canReflect_1_18_0_canReflect.getValue(e)},write:function(e,t){e[setValueSymbol$3]?e[setValueSymbol$3](t):e.set?e.set(t):e(t)}}],propertyReadersMap:{},propertyReaders:[{name:"map",test:function(e){return(canReflect_1_18_0_canReflect.isPromise(e)||isPromiseLike(e))&&canReflectPromise_2_2_1_canReflectPromise(e),canReflect_1_18_0_canReflect.isObservableLike(e)&&canReflect_1_18_0_canReflect.isMapLike(e)},read:function(e,t){var n=canReflect_1_18_0_canReflect.getKeyValue(e,t.key);return void 0===n?e[t.key]:n},write:canReflect_1_18_0_canReflect.setKeyValue},{name:"object",test:function(){return!0},read:function(e,t){if(null!=e)return"object"==typeof e?t.key in e?e[t.key]:void 0:e[t.key]},write:function(e,t,n){var a=e[t];null!=n&&"object"==typeof n&&canReflect_1_18_0_canReflect.isMapLike(a)?(dev.warn("can-stache-key: Merging data into \""+t+"\" because its parent is non-observable"),canReflect_1_18_0_canReflect.update(a,n)):null!=a&&a[setValueSymbol$3]!==void 0?canReflect_1_18_0_canReflect.setValue(a,n):e[t]=n}}],reads:function(e){var t=""+e,n=[],a=0,r=!1;"@"===t.charAt(0)&&(a=1,r=!0);for(var o="",s=a,l;s<t.length;s++)l=t.charAt(s),"."===l||"@"===l?"\\"===t.charAt(s-1)?o=o.substr(0,o.length-1)+".":(n.push({key:o,at:r}),r="@"===l,o=""):o+=l;return n.push({key:o,at:r}),n},write:function(e,t,n,a){var r="string"==typeof t?observeReader.reads(t):t,o;if(a=a||{},1<r.length?(o=r.pop(),e=observeReader.read(e,r,a).value,r.push(o)):o=r[0],!!e){var i=peek$3(e,o.key);observeReader.valueReadersMap.isValueLike.test(i,r.length-1,r,a)?observeReader.valueReadersMap.isValueLike.write(i,n,a):(observeReader.valueReadersMap.isValueLike.test(e,r.length-1,r,a)&&(e=e[getValueSymbol$2]()),observeReader.propertyReadersMap.map.test(e)?observeReader.propertyReadersMap.map.write(e,o.key,n,a):observeReader.propertyReadersMap.object.test(e)&&(observeReader.propertyReadersMap.object.write(e,o.key,n,a),a.observation&&a.observation.update()))}}},observeReader.propertyReaders.forEach(function(e){observeReader.propertyReadersMap[e.name]=e}),observeReader.valueReaders.forEach(function(e){observeReader.valueReadersMap[e.name]=e}),observeReader.set=observeReader.write;var canStacheKey_1_4_3_canStacheKey=observeReader,TemplateContext=function(e){e=e||{},this.vars=new canSimpleMap_4_3_3_canSimpleMap(e.vars||{}),this.helpers=new canSimpleMap_4_3_3_canSimpleMap(e.helpers||{}),this.partials=new canSimpleMap_4_3_3_canSimpleMap(e.partials||{}),this.tags=new canSimpleMap_4_3_3_canSimpleMap(e.tags||{})},canViewScope_4_13_6_templateContext=TemplateContext,canCid_1_3_1_canCid=createCommonjsModule(function(e){var t=0,n="can"+new Date,a=function(e,a){var r=e.nodeName?n:"_cid";return e[r]||(t++,e[r]=(a||"")+t),e[r]};if(a.domExpando=n,a.get=function(e){var t=typeof e;return null!==t&&("object"===t||"function"===t)?a(e):t+":"+e},canNamespace_1_0_0_canNamespace.cid)throw new Error("You can't have two versions of can-cid, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.cid=a}),singleReference;function getKeyName(e,t){var n=t?canCid_1_3_1_canCid(e)+":"+t:canCid_1_3_1_canCid(e);return n||e}singleReference={set:function(e,t,n,a){e[getKeyName(t,a)]=n},getAndDelete:function(e,t,n){var a=getKeyName(t,n),r=e[a];return delete e[a],r}};var canSingleReference_1_3_0_canSingleReference=singleReference,Compute=function(e){return arguments.length?canReflect_1_18_0_canReflect.setValue(this,e):canReflect_1_18_0_canReflect.getValue(this)},canViewScope_4_13_6_makeComputeLike=function(e){var t=Compute.bind(e);return t.on=t.bind=t.addEventListener=function(n,a){var r=function(e,n){a.call(t,{type:"change"},e,n)};canSingleReference_1_3_0_canSingleReference.set(a,this,r),e.on(r)},t.off=t.unbind=t.removeEventListener=function(t,n){e.off(canSingleReference_1_3_0_canSingleReference.getAndDelete(n,this))},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_18_0_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_18_0_canReflect.setValue(e,t)},"can.onValue":function(t,n){return canReflect_1_18_0_canReflect.onValue(e,t,n)},"can.offValue":function(t,n){return canReflect_1_18_0_canReflect.offValue(e,t,n)},"can.valueHasDependencies":function(){return canReflect_1_18_0_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_18_0_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t},makeDependencyRecord=function(){return{keyDependencies:new Map,valueDependencies:new Set}},makeRootRecord=function(){return{mutateDependenciesForKey:new Map,mutateDependenciesForValue:makeDependencyRecord()}},addMutatedBy=function(e){return function(t,n,a){var r=3===arguments.length;if(2===arguments.length&&(a=n,n=void 0),!a.keyDependencies&&!a.valueDependencies){var o=new Set;o.add(a),a={valueDependencies:o}}var i=e.get(t);i||(i=makeRootRecord(),e.set(t,i)),r&&!i.mutateDependenciesForKey.get(n)&&i.mutateDependenciesForKey.set(n,makeDependencyRecord());var s=r?i.mutateDependenciesForKey.get(n):i.mutateDependenciesForValue;a.valueDependencies&&canReflect_1_18_0_canReflect.addValues(s.valueDependencies,a.valueDependencies),a.keyDependencies&&canReflect_1_18_0_canReflect.each(a.keyDependencies,function(e,t){var n=s.keyDependencies.get(t);n||(n=new Set,s.keyDependencies.set(t,n)),canReflect_1_18_0_canReflect.addValues(n,e)})}},deleteMutatedBy=function(e){return function(t,n,a){var r=3===arguments.length,o=e.get(t);if(2===arguments.length&&(a=n,n=void 0),!a.keyDependencies&&!a.valueDependencies){var i=new Set;i.add(a),a={valueDependencies:i}}var s=r?o.mutateDependenciesForKey.get(n):o.mutateDependenciesForValue;a.valueDependencies&&canReflect_1_18_0_canReflect.removeValues(s.valueDependencies,a.valueDependencies),a.keyDependencies&&canReflect_1_18_0_canReflect.each(a.keyDependencies,function(e,t){var n=s.keyDependencies.get(t);n&&(canReflect_1_18_0_canReflect.removeValues(n,e),!n.size&&s.keyDependencies.delete(t))})}},isFunction=function(e){return"function"==typeof e},getWhatIChangeSymbol=canSymbol_1_6_5_canSymbol.for("can.getWhatIChange"),getKeyDependenciesSymbol=canSymbol_1_6_5_canSymbol.for("can.getKeyDependencies"),getValueDependenciesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies"),getKeyDependencies=function(e,t){if(isFunction(e[getKeyDependenciesSymbol]))return canReflect_1_18_0_canReflect.getKeyDependencies(e,t)},getValueDependencies=function(e){if(isFunction(e[getValueDependenciesSymbol$1]))return canReflect_1_18_0_canReflect.getValueDependencies(e)},getMutatedKeyDependencies=function(e,t,n){var a=e.get(t),r;return a&&a.mutateDependenciesForKey.has(n)&&(r=a.mutateDependenciesForKey.get(n)),r},getMutatedValueDependencies=function(e,t){var n=e.get(t),a;if(n){var r=n.mutateDependenciesForValue;r.keyDependencies.size&&(a=a||{},a.keyDependencies=r.keyDependencies),r.valueDependencies.size&&(a=a||{},a.valueDependencies=r.valueDependencies)}return a},getWhatIChange=function(e,t){if(isFunction(e[getWhatIChangeSymbol])){var n=2===arguments.length;return n?canReflect_1_18_0_canReflect.getWhatIChange(e,t):canReflect_1_18_0_canReflect.getWhatIChange(e)}},isEmptyRecord=function(e){return null==e||!Object.keys(e).length||e.keyDependencies&&!e.keyDependencies.size&&e.valueDependencies&&!e.valueDependencies.size},getWhatChangesMe=function(e,t,n){var a=3===arguments.length,r=a?getMutatedKeyDependencies(e,t,n):getMutatedValueDependencies(e,t),o=a?getKeyDependencies(t,n):getValueDependencies(t);if(!isEmptyRecord(r)||!isEmptyRecord(o))return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},r?{mutate:r}:null),o?{derive:o}:null)},getDependencyDataOf=function(e){return function(t,n){var a=2===arguments.length,r=a?getWhatChangesMe(e,t,n):getWhatChangesMe(e,t),o=a?getWhatIChange(t,n):getWhatIChange(t);if(r||o)return canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},o?{whatIChange:o}:null),r?{whatChangesMe:r}:null)}},mutatedByMap=new WeakMap,canReflectDependencies_1_1_2_canReflectDependencies={addMutatedBy:addMutatedBy(mutatedByMap),deleteMutatedBy:deleteMutatedBy(mutatedByMap),getDependencyDataOf:getDependencyDataOf(mutatedByMap)},canStacheHelpers_1_2_0_canStacheHelpers=createCommonjsModule(function(e){if(canNamespace_1_0_0_canNamespace.stacheHelpers)throw new Error("You can't have two versions of can-stache-helpers, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.stacheHelpers={}}),dispatchSymbol$2=canSymbol_1_6_5_canSymbol.for("can.dispatch"),setElementSymbol$1=canSymbol_1_6_5_canSymbol.for("can.setElement"),getFastPathRoot=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.reads&&1===e.reads.length){var t=e.root;return t&&t[canSymbol_1_6_5_canSymbol.for("can.getValue")]&&(t=canReflect_1_18_0_canReflect.getValue(t)),t&&canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)&&"function"!=typeof t[e.reads[0].key]&&t}}),isEventObject=function(e){return e&&"number"==typeof e.batchNum&&"string"==typeof e.type},ScopeKeyData=function(e,t,n){this.startingScope=e,this.key=t,this.read=this.read.bind(this),this.dispatch=this.dispatch.bind(this),"debugger"===t&&(this.startingScope={_context:canStacheHelpers_1_2_0_canStacheHelpers},this.read=function(){var t=canStacheHelpers_1_2_0_canStacheHelpers["debugger"];return t({scope:e})});var a=this.observation=new canObservation_4_2_0_canObservation(this.read,this);this.options=canAssign_1_3_3_canAssign({observation:this.observation},n),this.fastPath=void 0,this.root=void 0,this.reads=void 0,this.setRoot=void 0,this._thisArg=new canSimpleObservable_2_5_0_canSimpleObservable,this.parentHasKey=void 0;var r=new Set;r.add(a),this.dependencies={valueDependencies:r},this._latestValue=void 0};value(ScopeKeyData.prototype);function fastOnBoundSet_Value(){this._value=this.newVal}function fastOnBoundSetValue(){this.value=this.newVal}canAssign_1_3_3_canAssign(ScopeKeyData.prototype,{constructor:ScopeKeyData,dispatch:function(e){var t=this.value;this._latestValue=this.value=e,this[dispatchSymbol$2].call(this,this.value,t)},onBound:function(){this.bound=!0,canReflect_1_18_0_canReflect.onValue(this.observation,this.dispatch,"notify");var e=getFastPathRoot(this);e&&this.toFastPath(e),this._latestValue=this.value=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},onUnbound:function(){this.bound=!1,canReflect_1_18_0_canReflect.offValue(this.observation,this.dispatch,"notify"),this.toSlowPath()},set:function(e){var t=this.root||this.setRoot;t?this.reads.length?canStacheKey_1_4_3_canStacheKey.write(t,this.reads,e,this.options):canReflect_1_18_0_canReflect.setValue(t,e):this.startingScope.set(this.key,e,this.options)},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this)),!0===this.bound&&!0===this.fastPath?this._latestValue:canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this.observation)},toFastPath:function(e){var t=this,n=this.observation;this.fastPath=!0,n.dependencyChange=function(n,a){if(isEventObject(a))throw"no event objects!";return n===e&&"function"!=typeof a?(t._latestValue=a,this.newVal=a):t.toSlowPath(),canObservation_4_2_0_canObservation.prototype.dependencyChange.apply(this,arguments)},n.onBound=n.hasOwnProperty("_value")?fastOnBoundSet_Value:fastOnBoundSetValue},toSlowPath:function(){this.observation.dependencyChange=canObservation_4_2_0_canObservation.prototype.dependencyChange,this.observation.onBound=canObservation_4_2_0_canObservation.prototype.onBound,this.fastPath=!1},read:function(){var e;return this.root?(e=canStacheKey_1_4_3_canStacheKey.read(this.root,this.reads,this.options),this.thisArg=e.parent,e.value):(e=this.startingScope.read(this.key,this.options),this.scope=e.scope,this.reads=e.reads,this.root=e.rootObserve,this.setRoot=e.setRoot,this.thisArg=e.thisArg,this.parentHasKey=e.parentHasKey,e.value)},hasDependencies:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canReflect_1_18_0_canReflect.valueHasDependencies(this.observation)}}),Object.defineProperty(ScopeKeyData.prototype,"thisArg",{get:function(){return this._thisArg.get()},set:function(e){this._thisArg.set(e)}});var scopeKeyDataPrototype={"can.getValue":ScopeKeyData.prototype.get,"can.setValue":ScopeKeyData.prototype.set,"can.valueHasDependencies":ScopeKeyData.prototype.hasDependencies,"can.getValueDependencies":function(){return this.dependencies},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(this.observation)},"can.setPriority":function(e){canReflect_1_18_0_canReflect.setPriority(this.observation,e)},"can.setElement":function(e){this.observation[setElementSymbol$1](e)}};canReflect_1_18_0_canReflect.assignSymbols(ScopeKeyData.prototype,scopeKeyDataPrototype),Object.defineProperty(ScopeKeyData.prototype,"compute",{get:function(){var e=canViewScope_4_13_6_makeComputeLike(this);return Object.defineProperty(this,"compute",{value:e,writable:!1,configurable:!1}),e},configurable:!0}),Object.defineProperty(ScopeKeyData.prototype,"initialValue",{get:function(){return this.bound||canObservation_4_2_0_canObservation.temporarilyBind(this),canObservationRecorder_1_3_1_canObservationRecorder.peekValue(this)},set:function(){throw new Error("initialValue should not be set")},configurable:!0});var canViewScope_4_13_6_scopeKeyData=ScopeKeyData,canViewScope_4_13_6_compute_data=function(e,t,n){return new canViewScope_4_13_6_scopeKeyData(e,t,n||{args:[]})};function objectCreateWithSymbolsAndSpecificProperties(e,t){var n={};return"getOwnPropertySymbols"in Object&&Object.getOwnPropertySymbols(e).forEach(function(t){n[t]=e[t]}),Object.getOwnPropertyNames(e).forEach(function(a){(0<=t.indexOf(a)||0===a.indexOf("@@symbol"))&&(n[a]=e[a])}),Object.create(n)}var LetContext=canSimpleMap_4_3_3_canSimpleMap.extend("LetContext",{});LetContext.prototype=objectCreateWithSymbolsAndSpecificProperties(canSimpleMap_4_3_3_canSimpleMap.prototype,["setup","attr","serialize","get","set","log","dispatch","constructorExtends","newInstance","_inherit","_defineProperty","_overwrite","instance","extend","ReturnValue","setup","init"]),LetContext.prototype.constructor=LetContext;var canViewScope_4_13_6_letContext=LetContext;function canHaveProperties(e){return null!=e}function returnFalse(){return!1}function Scope(e,t,n){this._context=e,this._parent=t,this._meta=n||{},this.__cache={}}var parentContextSearch=/(\.\.\/)|(\.\/)|(this[\.@])/g;canAssign_1_3_3_canAssign(Scope,{read:canStacheKey_1_4_3_canStacheKey.read,TemplateContext:canViewScope_4_13_6_templateContext,keyInfo:function(e){"./"===e&&(e="this");var t={remainingKey:e,isScope:"scope"===e};if(t.isScope)return t;var n=e.substr(0,6);return(t.isInScope="scope."===n||"scope@"===n,t.isInScope)?(t.remainingKey=e.substr(6),t):"scope/"===n?(t.walkScope=!0,t.remainingKey=e.substr(6),t):"@scope/"===e.substr(0,7)?(t.walkScope=!0,t.remainingKey=e.substr(7),t):(t.parentContextWalkCount=0,t.remainingKey=e.replace(parentContextSearch,function(e,n){return t.isContextBased=!0,void 0!==n&&t.parentContextWalkCount++,""}),".."===t.remainingKey?(t.parentContextWalkCount++,t.remainingKey="this"):("."===t.remainingKey||""===t.remainingKey)&&(t.remainingKey="this"),"this"===t.remainingKey&&(t.isContextBased=!0),t)},isTemplateContextOrCanNotHaveProperties:function(e){var t=e._context;if(t instanceof canViewScope_4_13_6_templateContext)return!0;return!canHaveProperties(t)},shouldSkipIfSpecial:function(e){var t=!0===e._meta.special;return!(!0!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},shouldSkipEverythingButSpecial:function(e){var t=!0===e._meta.special;return!(!1!=t)||!!Scope.isTemplateContextOrCanNotHaveProperties(e)},makeShouldExitOnSecondNormalContext:function(){var e=!1;return function(t){var n=!t.isSpecial(),a=n&&e;return n&&(e=!0),a}},makeShouldExitAfterFirstNormalContext:function(){var e=!1;return function(t){if(e)return!0;var n=!t.isSpecial();return n&&(e=!0),!1}},makeShouldSkipSpecialContexts:function(e){var t=e||0;return function(e){return!(0>t&&e._meta.notContext)&&(!!e.isSpecial()||(t--,!(0>t)))}}}),canAssign_1_3_3_canAssign(Scope.prototype,{add:function(e,t){return e===this._context?this:new this.constructor(e,this,t)},find:function(e,t){var n=canStacheKey_1_4_3_canStacheKey.reads(e),a={shouldExit:returnFalse,shouldSkip:Scope.shouldSkipIfSpecial,shouldLookForHelper:!0,read:canStacheKey_1_4_3_canStacheKey.read},r=this._walk(n,t,a);return r.value},readFromSpecialContext:function(e){return this._walk([{key:e,at:!1}],{special:!0},{shouldExit:returnFalse,shouldSkip:Scope.shouldSkipEverythingButSpecial,shouldLookForHelper:!1,read:canStacheKey_1_4_3_canStacheKey.read})},readFromTemplateContext:function(e,t){var n=canStacheKey_1_4_3_canStacheKey.reads(e);return canStacheKey_1_4_3_canStacheKey.read(this.templateContext,n,t)},read:function(e,t){return t=t||{},this.readKeyInfo(Scope.keyInfo(e),t||{})},readKeyInfo:function(e,t){var n={read:t.read||canStacheKey_1_4_3_canStacheKey.read},a,r;if(e.isScope)return{value:this};if(e.isInScope)return r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),a=canStacheKey_1_4_3_canStacheKey.read(this,r,t),"undefined"!=typeof a.value||a.parentHasKey||(a=this.readFromTemplateContext(e.remainingKey,t)),canAssign_1_3_3_canAssign(a,{thisArg:0<r.length?a.parent:void 0});if(e.isContextBased)return r="this"===e.remainingKey?[]:canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),n.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),n.shouldSkip=Scope.makeShouldSkipSpecialContexts(e.parentContextWalkCount),n.shouldLookForHelper=!0,this._walk(r,t,n);if(e.walkScope)return n.shouldExit=returnFalse,n.shouldSkip=Scope.shouldSkipIfSpecial,n.shouldLookForHelper=!0,r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey),this._walk(r,t,n);r=canStacheKey_1_4_3_canStacheKey.reads(e.remainingKey);var o=t&&!0===t.special;return n.shouldExit=Scope.makeShouldExitOnSecondNormalContext(),n.shouldSkip=o?Scope.shouldSkipEverythingButSpecial:Scope.shouldSkipIfSpecial,n.shouldLookForHelper=!o,this._walk(r,t,n)},_walk:function(e,t,n){for(var a=this,r=[],o=-1,i=canAssign_1_3_3_canAssign({foundObservable:function(t,n){p=t,c=e.slice(n)},earlyExit:function(t,n){var r=!0===a._meta.variable,i=!1;i=!0==r&&0===n?canReflect_1_18_0_canReflect.hasKey(t,e[n].key):n>o||n===o&&"object"==typeof t&&canReflect_1_18_0_canReflect.hasOwnKey(t,e[n].key),i&&(y=p,u=c,o=n)}},t),s=canObservationRecorder_1_3_1_canObservationRecorder.isRecording(),l=!1,d,p,c,u,y;a;){if(!0===n.shouldSkip(a)){a=a._parent;continue}if(!0===n.shouldExit(a))break;l=!0,d=a._context;var m=canObservationRecorder_1_3_1_canObservationRecorder.trap(),g=n.read(d,e,i),h=m();if(void 0!==g.value||g.parentHasKey)return!h.length&&s?(p=g.parent,c=e.slice(e.length-1)):canObservationRecorder_1_3_1_canObservationRecorder.addMany(h),{scope:a,rootObserve:p,value:g.value,reads:c,thisArg:g.parent,parentHasKey:g.parentHasKey};r.push.apply(r,h),a=a._parent}if(n.shouldLookForHelper){var f=this.getHelperOrPartial(e);if(f&&f.value)return{value:f.value}}return canObservationRecorder_1_3_1_canObservationRecorder.addMany(r),{setRoot:y,reads:u,value:void 0,noContextAvailable:!l}},getDataForScopeSet:function(e,t){var n=Scope.keyInfo(e),a=canAssign_1_3_3_canAssign({read:function(e,n){if(void 0!==o||e instanceof canViewScope_4_13_6_letContext||(o=e),1<n.length){var a=n.slice(0,n.length-1),r=canStacheKey_1_4_3_canStacheKey.read(e,a,t).value;return null!=r&&canReflect_1_18_0_canReflect.hasKey(r,n[n.length-1].key)?{parent:r,parentHasKey:!0,value:void 0}:{}}return 1===n.length?canReflect_1_18_0_canReflect.hasKey(e,n[0].key)?{parent:e,parentHasKey:!0,value:void 0}:{}:{value:e}}},t),r=this.readKeyInfo(n,a),o;if("this"===n.remainingKey)return{parent:r.value,how:"setValue"};var i=n.remainingKey.split("."),s=i.pop(),l;return r.thisArg?l=r.thisArg:o&&(l=o),void 0===l?{error:"Attempting to set a value at "+e+" where the context is undefined."}:!canReflect_1_18_0_canReflect.isObservableLike(l)&&canReflect_1_18_0_canReflect.isObservableLike(l[s])?canReflect_1_18_0_canReflect.isMapLike(l[s])?{parent:l,key:s,how:"updateDeep",warn:"can-view-scope: Merging data into \""+s+"\" because its parent is non-observable"}:canReflect_1_18_0_canReflect.isValueLike(l[s])?{parent:l,key:s,how:"setValue"}:{parent:l,how:"write",key:s,passOptions:!0}:{parent:l,how:"write",key:s,passOptions:!0}},getHelper:function(e){return console.warn(".getHelper is deprecated, use .getHelperOrPartial"),this.getHelperOrPartial(e)},getHelperOrPartial:function(e){for(var t=this,n,a;t;){if(n=t._context,n instanceof canViewScope_4_13_6_templateContext){if(a=canStacheKey_1_4_3_canStacheKey.read(n.helpers,e,{proxyMethods:!1}),void 0!==a.value)return a;if(a=canStacheKey_1_4_3_canStacheKey.read(n.partials,e,{proxyMethods:!1}),void 0!==a.value)return a}t=t._parent}return canStacheKey_1_4_3_canStacheKey.read(canStacheHelpers_1_2_0_canStacheHelpers,e,{proxyMethods:!1})},get:function(e,t){t=canAssign_1_3_3_canAssign({isArgument:!0},t);var n=this.read(e,t);return n.value},peek:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.get(e,t)}),peak:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){return this.peek(e,t)}),getScope:function(e){for(var t=this;t;){if(e(t))return t;t=t._parent}},getContext:function(e){var t=this.getScope(e);return t&&t._context},getTemplateContext:function(){var e=this.getScope(function(e){return t=e,e._context instanceof canViewScope_4_13_6_templateContext}),t;return e||(e=new Scope(new canViewScope_4_13_6_templateContext()),t._parent=e),e},addTemplateContext:function(){return this.add(new canViewScope_4_13_6_templateContext)},addLetContext:function(e){return this.add(new canViewScope_4_13_6_letContext(e||{}),{variable:!0})},getRoot:function(){for(var e=this,t=this;e._parent;)t=e,e=e._parent;return e._context instanceof canViewScope_4_13_6_templateContext&&(e=t),e._context},getViewModel:function(){var e=this.getScope(function(e){return e._meta.viewModel});return e&&e._context},getTop:function(){var e;return this.getScope(function(t){return t._meta.viewModel&&(e=t),!1}),e&&e._context},getPathsForKey:function(){},hasKey:function(e){var t=canStacheKey_1_4_3_canStacheKey.reads(e),n;return n="scope"===t[0].key?canStacheKey_1_4_3_canStacheKey.read(this,t.slice(1),e):canStacheKey_1_4_3_canStacheKey.read(this._context,t,e),n.foundLastParent&&n.parentHasKey},set:function(e,t,n){n=n||{};var a=this.getDataForScopeSet(e,n),r=a.parent;switch(a.warn&&dev.warn(a.warn),a.how){case"set":r.set(a.key,t,a.passOptions?n:void 0);break;case"write":canStacheKey_1_4_3_canStacheKey.write(r,a.key,t,n);break;case"setValue":canReflect_1_18_0_canReflect.setValue("key"in a?r[a.key]:r,t);break;case"setKeyValue":canReflect_1_18_0_canReflect.setKeyValue(r,a.key,t);break;case"updateDeep":canReflect_1_18_0_canReflect.updateDeep(r[a.key],t);}},attr:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t,n){return dev.warn("can-view-scope::attr is deprecated, please use peek, get or set"),n=canAssign_1_3_3_canAssign({isArgument:!0},n),2===arguments.length?this.set(e,t,n):this.get(e,n)}),computeData:function(e,t){return canViewScope_4_13_6_compute_data(this,e,t)},compute:function(e,t){return this.computeData(e,t).compute},cloneFromRef:function(){for(var e=[],t=this,n,a;t;){if(n=t._context,n instanceof canViewScope_4_13_6_templateContext){a=t._parent;break}e.unshift(t),t=t._parent}return a?(e.forEach(function(e){a=a.add(e._context,e._meta)}),a):this},isSpecial:function(){return this._meta.notContext||this._meta.special||this._context instanceof canViewScope_4_13_6_templateContext||this._meta.variable}}),Scope.prototype._read=Scope.prototype._walk,canReflect_1_18_0_canReflect.assignSymbols(Scope.prototype,{"can.hasKey":Scope.prototype.hasKey});var templateContextPrimitives=["filename","lineNumber"];templateContextPrimitives.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromTemplateContext(e).value},set:function(t){this.templateContext[e]=t}})}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"templateContext",function(){return this.getTemplateContext()._context}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"root",function(){return dev.warn("`scope.root` is deprecated. Use either `scope.top`: https://canjs.com/doc/can-stache/keys/scope.html#scope_top or `scope.vm`: https://canjs.com/doc/can-stache/keys/scope.html#scope_vm instead."),this.getRoot()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"vm",function(){return this.getViewModel()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"top",function(){return this.getTop()}),canDefineLazyValue_1_1_1_defineLazyValue(Scope.prototype,"helpers",function(){return canStacheHelpers_1_2_0_canStacheHelpers});var specialKeywords=["index","key","element","event","viewModel","arguments","helperOptions","args"];specialKeywords.forEach(function(e){Object.defineProperty(Scope.prototype,e,{get:function(){return this.readFromSpecialContext(e).value}})}),canNamespace_1_0_0_canNamespace.view=canNamespace_1_0_0_canNamespace.view||{};var canViewScope_4_13_6_canViewScope=canNamespace_1_0_0_canNamespace.view.Scope=Scope;function KeyObservable(e,t){t=""+t,this.key=t,this.root=e,settable.call(this,function(){return canStacheKey_1_4_3_canStacheKey.get(this,t)},e)}KeyObservable.prototype=Object.create(settable.prototype),KeyObservable.prototype.set=function(e){canStacheKey_1_4_3_canStacheKey.set(this.root,this.key,e)};var keyObservable=KeyObservable,isViewSymbol=canSymbol_1_6_5_canSymbol.for("can.isView"),createNoOpRenderer=function(e){return function(){e&&(e.rendered=!0)}},utils$1={last:function(e){return null!=e&&e[e.length-1]},emptyHandler:function(){},jsonParse:function(e){return"'"===e[0]?e.substr(1,e.length-2):"undefined"===e?void 0:JSON.parse(e)},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}},createRenderers:function(e,t,n,a,r){e.fn=n?this.makeRendererConvertScopes(n,t,r,e.metadata):createNoOpRenderer(e.metadata),e.inverse=a?this.makeRendererConvertScopes(a,t,r,e.metadata):createNoOpRenderer(e.metadata),e.isSection=!!(n||a)},makeRendererConvertScopes:function(e,t,n,a){var r=function(n){n===void 0||n instanceof canViewScope_4_13_6_canViewScope||(t?n=t.add(n):n=new canViewScope_4_13_6_canViewScope(n||{})),a&&(a.rendered=!0);var r=e(n||t);return r};return n?r:canObservationRecorder_1_3_1_canObservationRecorder.ignore(r)},makeView:function(e){var t=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(t){return t instanceof canViewScope_4_13_6_canViewScope||(t=new canViewScope_4_13_6_canViewScope(t)),e(t)});return t[isViewSymbol]=!0,t},getItemsStringContent:function(e,t,n){for(var a="",r=canStacheKey_1_4_3_canStacheKey.get(e,"length"),o=canReflect_1_18_0_canReflect.isObservableLike(e),s=0,l;s<r;s++)l=o?new keyObservable(e,s):e[s],a+=n.fn(l);return a},getItemsFragContent:function(e,t,n){var a=[],r=canStacheKey_1_4_3_canStacheKey.get(e,"length"),o=canReflect_1_18_0_canReflect.isObservableLike(e),s=t.exprData&&t.exprData.hashExprs,l;0<canReflect_1_18_0_canReflect.size(s)&&(l={},canReflect_1_18_0_canReflect.eachKey(s,function(e,t){l[e.key]=t}));for(var d=0;d<r;d++){var p={},c=o?new keyObservable(e,d):e[d];0<canReflect_1_18_0_canReflect.size(l)&&(l.value&&(p[l.value]=c),l.index&&(p[l.index]=d)),a.push(t.fn(n.add(p,{notContext:!0}).add({index:d},{special:!0}).add(c)))}return a}},last=utils$1.last,decodeHTML="undefined"!=typeof document&&function(){var e=document$1().createElement("div");return function(t){return-1===t.indexOf("&")?t.replace(/\r\n/g,"\n"):(e.innerHTML=t,0===e.childNodes.length?"":e.childNodes.item(0).nodeValue)}}(),HTMLSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new HTMLSection]};canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_3_canAssign(HTMLSectionBuilder.prototype,{startSubSection:function(e){var t=new HTMLSection(e);return this.stack.push(t),t},endSubSectionAndReturnRenderer:function(){if(this.last().isEmpty())return this.stack.pop(),null;var e=this.endSection();return utils$1.makeView(e.compiled.hydrate.bind(e.compiled))},startSection:function(e,t){var n=new HTMLSection(e);this.last().add({comment:t||"#section",callbacks:[n.targetCallback]}),this.last().add({comment:"can-end-placeholder"}),this.stack.push(n)},endSection:function(){return this.last().compile(),this.stack.pop()},inverse:function(){this.last().inverse()},compile:function(){var e=this.stack.pop().compile();return utils$1.makeView(e.hydrate.bind(e))},push:function(e){this.last().push(e)},pop:function(){return this.last().pop()},removeCurrentNode:function(){this.last().removeCurrentNode()}});var HTMLSection=function(e){this.data="targetData",this.targetData=[],this.targetStack=[];var t=this;this.targetCallback=function(n){e.call(this,n,t.compiled.hydrate.bind(t.compiled),t.inverseCompiled&&t.inverseCompiled.hydrate.bind(t.inverseCompiled))}};canAssign_1_3_3_canAssign(HTMLSection.prototype,{inverse:function(){this.inverseData=[],this.data="inverseData"},push:function(e){this.add(e),this.targetStack.push(e)},pop:function(){return this.targetStack.pop()},add:function(e){"string"==typeof e&&(e=decodeHTML(e)),this.targetStack.length?last(this.targetStack).children.push(e):this[this.data].push(e)},compile:function(){return this.compiled=canViewTarget_5_0_0_canViewTarget(this.targetData,document$1()),this.inverseData&&(this.inverseCompiled=canViewTarget_5_0_0_canViewTarget(this.inverseData,document$1()),delete this.inverseData),this.targetStack=this.targetData=null,this.compiled},removeCurrentNode:function(){var e=this.children();return e.pop()},children:function(){return this.targetStack.length?last(this.targetStack).children:this[this.data]},isEmpty:function(){return!this.targetData.length}}),HTMLSectionBuilder.HTMLSection=HTMLSection;var html_section=HTMLSectionBuilder,canDomData_1_0_3_canDomData=createCommonjsModule(function(e){var t=function(e){for(var t in e)return!1;return!0},n=new WeakMap,a=function(e){var t=!1;return n.has(e)&&(t=!0,n.delete(e)),t};if(canNamespace_1_0_0_canNamespace.domData)throw new Error("You can't have two versions of can-dom-data, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.domData={_data:n,get:function(e,t){var a=n.get(e);return t===void 0?a:a&&a[t]},set:function(e,t,a){var r=n.get(e);return void 0===r&&(r={},n.set(e,r)),void 0!==t&&(r[t]=a),r},clean:function(e,r){var o=n.get(e);o&&o[r]&&delete o[r],t(o)&&a(e)},delete:a}}),slice$1=[].slice;function defaultIdentity(e,t){return e===t}function makeIdentityFromMapSchema(e){return e.identity&&e.identity.length?function(t,n){var a=canReflect_1_18_0_canReflect.getIdentity(t,e),r=canReflect_1_18_0_canReflect.getIdentity(n,e);return a===r}:defaultIdentity}function makeIdentityFromListSchema(e){return null==e.values?defaultIdentity:makeIdentityFromMapSchema(canReflect_1_18_0_canReflect.getSchema(e.values))}function makeIdentity(e,t){var n=canReflect_1_18_0_canReflect.getSchema(e),a;if(null!=n)if(null!=n.values)a=canReflect_1_18_0_canReflect.getSchema(n.values);else return defaultIdentity;return null==a&&0<t&&(a=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0))),a?makeIdentityFromMapSchema(a):defaultIdentity}function reverseDiff(e,t,n,a,r){for(var o=n.length-1,i=a.length-1;o>e&&i>t;){var s=n[o],l=a[i];if(r(s,l,o)){o--,i--;continue}else return[{type:"splice",index:t,deleteCount:o-e+1,insert:slice$1.call(a,t,i+1)}]}return[{type:"splice",index:t,deleteCount:o-e+1,insert:slice$1.call(a,t,i+1)}]}var list=function(e,t,n){var a=0,r=0,o=canReflect_1_18_0_canReflect.size(e),i=canReflect_1_18_0_canReflect.size(t),s=[],l;for(l="function"===typeof n?n:null==n?makeIdentity(e,o):"map"===n.type?makeIdentityFromMapSchema(n):makeIdentityFromListSchema(n);a<o&&r<i;){var d=e[a],p=t[r];if(l(d,p,a)){a++,r++;continue}if(r+1<i&&l(d,t[r+1],a)){s.push({index:r,deleteCount:0,insert:[t[r]],type:"splice"}),a++,r+=2;continue}else if(a+1<o&&l(e[a+1],p,a+1)){s.push({index:r,deleteCount:1,insert:[],type:"splice"}),a+=2,r++;continue}else return s.push.apply(s,reverseDiff(a,r,e,t,l)),s}return r===i&&a===o?s:(s.push({type:"splice",index:r,deleteCount:o-a,insert:slice$1.call(t,r)}),s)},global$1=global_1(),xmlnsAttrNamespaceURI="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI="http://www.w3.org/1999/xlink",attrsNamespacesURI={xmlns:xmlnsAttrNamespaceURI,"xlink:href":xlinkHrefAttrNamespaceURI},formElements={INPUT:!0,TEXTAREA:!0,SELECT:!0,BUTTON:!0},toString$1=function(e){return null==e?"":""+e},isSVG=function(e){return"http://www.w3.org/2000/svg"===e.namespaceURI},truthy=function(){return!0},getSpecialTest=function(e){return e&&e.test||truthy},propProp=function(e,t){return t=t||{},t.get=function(){return this[e]},t.set=function(t){this[e]!==t&&(this[e]=t)},t},booleanProp=function(e){return{isBoolean:!0,set:function(t){e in this?this[e]=t:canDomMutate_2_0_8_node.setAttribute.call(this,e,"")},remove:function(){this[e]=!1}}},setupMO=function(e,t){var n=canDomData_1_0_3_canDomData.get(e,"attrMO");if(!n){var a=function(){t.call(e)},r=mutationObserver();if(r){var o=new r(a);o.observe(e,{childList:!0,subtree:!0}),canDomData_1_0_3_canDomData.set(e,"attrMO",o)}else canDomData_1_0_3_canDomData.set(e,"attrMO",!0),canDomData_1_0_3_canDomData.set(e,"canBindingCallback",{onMutation:a})}},_findOptionToSelect=function(e,t){for(var n=e.firstChild;n;){if("OPTION"===n.nodeName&&t===n.value)return n;if("OPTGROUP"===n.nodeName){var a=_findOptionToSelect(n,t);if(a)return a}n=n.nextSibling}},setChildOptions=function(e,t){var n;null!=t&&(n=_findOptionToSelect(e,t)),n?n.selected=!0:e.selectedIndex=-1},forEachOption=function(e,t){for(var n=e.firstChild;n;)"OPTION"===n.nodeName&&t(n),"OPTGROUP"===n.nodeName&&forEachOption(n,t),n=n.nextSibling},collectSelectedOptions=function(e){var t=[];return forEachOption(e,function(e){e.selected&&t.push(e.value)}),t},markSelectedOptions=function(e,t){forEachOption(e,function(e){e.selected=-1!==t.indexOf(e.value)})},setChildOptionsOnChange=function(e,t){var n=canDomData_1_0_3_canDomData.get(e,"attrSetChildOptions");return n?Function.prototype:(n=function(){setChildOptions(e,e.value)},canDomData_1_0_3_canDomData.set(e,"attrSetChildOptions",n),t.call(e,"change",n),function(t){canDomData_1_0_3_canDomData.clean(e,"attrSetChildOptions"),t.call(e,"change",n)})},behaviorRules=new Map,isPropWritable=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);if(n)return n.writable||n.set;var a=Object.getPrototypeOf(e);return!!a&&isPropWritable(a,t)},cacheRule=function(e,t,n){var a;return a=behaviorRules.get(e.prototype),a||(a={},behaviorRules.set(e.constructor,a)),a[t]=n,n},specialAttributes={checked:{get:function(){return this.checked},set:function(e){var t=!!e||""===e||0===arguments.length;this.checked=t,t&&"radio"===this.type&&(this.defaultChecked=!0)},remove:function(){this.checked=!1},test:function(){return"INPUT"===this.nodeName}},class:{get:function(){return isSVG(this)?this.getAttribute("class"):this.className},set:function(e){e=e||"",isSVG(this)?canDomMutate_2_0_8_node.setAttribute.call(this,"class",""+e):this.className=e}},disabled:booleanProp("disabled"),focused:{get:function(){return this===document.activeElement},set:function(e){function t(){e?r.focus():r.blur()}var n=attr.get(this,"focused"),a=this.ownerDocument.documentElement,r=this;if(n!==e)if(!a.contains(r))var o=canDomMutate_2_0_8_canDomMutate.onNodeConnected(r,function(){o(),t()});else canQueues_1_3_2_canQueues.enqueueByQueue({mutate:[t]},null,[]);return!0},addEventListener:function(e,t,n){return n.call(this,"focus",t),n.call(this,"blur",t),function(e){e.call(this,"focus",t),e.call(this,"blur",t)}},test:function(){return"INPUT"===this.nodeName}},for:propProp("htmlFor"),innertext:propProp("innerText"),innerhtml:propProp("innerHTML"),innerHTML:propProp("innerHTML",{addEventListener:function(e,t){var n=[],a=this;return["change","blur"].forEach(function(e){var r=function(){t.apply(this,arguments)};canDomEvents_1_3_11_canDomEvents.addEventListener(a,e,r),n.push([e,r])}),function(e){n.forEach(function(t){e.call(a,t[0],t[1])})}}}),required:booleanProp("required"),readonly:booleanProp("readOnly"),selected:{get:function(){return this.selected},set:function(e){e=!!e,canDomData_1_0_3_canDomData.set(this,"lastSetValue",e),this.selected=e},addEventListener:function(e,t,n){var a=this,r=this.parentNode,o=a.selected,i=function(){var t=a.selected;o=canDomData_1_0_3_canDomData.get(a,"lastSetValue")||o,t!==o&&(o=t,canDomEvents_1_3_11_canDomEvents.dispatch(a,e))},s=setChildOptionsOnChange(r,n);return canDomEvents_1_3_11_canDomEvents.addEventListener(r,"change",i),n.call(a,e,t),function(n){s(n),canDomEvents_1_3_11_canDomEvents.removeEventListener(r,"change",i),n.call(a,e,t)}},test:function(){return"OPTION"===this.nodeName&&this.parentNode&&"SELECT"===this.parentNode.nodeName}},style:{set:function(){var e=global$1.document&&document$1().createElement("div");return e&&e.style&&"cssText"in e.style?function(e){this.style.cssText=e||""}:function(e){canDomMutate_2_0_8_node.setAttribute.call(this,"style",e)}}()},textcontent:propProp("textContent"),value:{get:function(){var e=this.value;return"SELECT"===this.nodeName&&"selectedIndex"in this&&-1===this.selectedIndex&&(e=void 0),e},set:function(e){var t=this.nodeName.toLowerCase();if(("input"===t||"textarea"===t)&&(e=toString$1(e)),(this.value!==e||"option"===t)&&(this.value=e),("input"===t||"textarea"===t)&&(this.defaultValue=e),"select"===t){canDomData_1_0_3_canDomData.set(this,"attrValueLastVal",e),setChildOptions(this,null===e?e:this.value);var n=this.ownerDocument.documentElement;if(!n.contains(this))var a=this,r=canDomMutate_2_0_8_canDomMutate.onNodeConnected(a,function(){r(),setChildOptions(a,null===e?e:a.value)});setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"attrValueLastVal");attr.set(this,"value",e),canDomEvents_1_3_11_canDomEvents.dispatch(this,"change")})}},test:function(){return formElements[this.nodeName]}},values:{get:function(){return collectSelectedOptions(this)},set:function(e){e=e||[],markSelectedOptions(this,e),canDomData_1_0_3_canDomData.set(this,"stickyValues",attr.get(this,"values")),setupMO(this,function(){var e=canDomData_1_0_3_canDomData.get(this,"stickyValues");attr.set(this,"values",e);var t=canDomData_1_0_3_canDomData.get(this,"stickyValues"),n=list(e.slice().sort(),t.slice().sort());n.length&&canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")})},addEventListener:function(e,t,n){var a=function(){canDomEvents_1_3_11_canDomEvents.dispatch(this,"values")};return canDomEvents_1_3_11_canDomEvents.addEventListener(this,"change",a),n.call(this,e,t),function(n){canDomEvents_1_3_11_canDomEvents.removeEventListener(this,"change",a),n.call(this,e,t)}}}},attr={rules:behaviorRules,specialAttributes:specialAttributes,getRule:function(e,t){var n=specialAttributes[t];if(n)return n;var a=behaviorRules.get(e.constructor),r=a&&a[t];if(r)return r;if(!(t in e))return this.attribute(t);var o=isPropWritable(e,t)?this.property(t):this.attribute(t);return cacheRule(e,t,o)},attribute:function(e){return{get:function(){return this.getAttribute(e)},set:function(t){attrsNamespacesURI[e]?canDomMutate_2_0_8_node.setAttributeNS.call(this,attrsNamespacesURI[e],e,t):canDomMutate_2_0_8_node.setAttribute.call(this,e,t)}}},property:function(e){return{get:function(){return this[e]},set:function(t){this[e]=t}}},findSpecialListener:function(e){return specialAttributes[e]&&specialAttributes[e].addEventListener},setAttrOrProp:function(e,t,n){return this.set(e,t,n)},set:function(e,t,n){var a=this.getRule(e,t),r=a&&a.set;if(r)return r.call(e,n)},get:function(e,t){var n=this.getRule(e,t),a=n&&n.get;if(a)return n.test?n.test.call(e)&&a.call(e):a.call(e)},remove:function(e,t){t=t.toLowerCase();var n=specialAttributes[t],a=n&&n.set,r=n&&n.remove,o=getSpecialTest(n);"function"==typeof r&&o.call(e)?r.call(e):"function"==typeof a&&o.call(e)?a.call(e,void 0):canDomMutate_2_0_8_node.removeAttribute.call(e,t)}},canAttributeObservable_2_0_2_behaviors=attr,setElementSymbol$2=canSymbol_1_6_5_canSymbol.for("can.setElement"),elementSymbol=canSymbol_1_6_5_canSymbol.for("can.element");function ListenUntilRemovedAndInitialize(e,t,n,a){this.observable=e,this.handler=t,this.placeholder=n,this.queueName=a,this.handler[elementSymbol]=n,e[setElementSymbol$2]?e[setElementSymbol$2](n):console.warn("no can.setElement symbol on observable",e),this.setup()}ListenUntilRemovedAndInitialize.prototype.setup=function(){if(this.setupNodeReinserted){if(!canDomMutate_2_0_8_IsConnected.isConnected(this.placeholder))return;this.setupNodeReinserted()}this.teardownNodeRemoved=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this.placeholder,this.teardown.bind(this)),canReflect_1_18_0_canReflect.onValue(this.observable,this.handler,this.queueName),this.handler(canReflect_1_18_0_canReflect.getValue(this.observable))},ListenUntilRemovedAndInitialize.prototype.teardown=function(){canDomMutate_2_0_8_IsConnected.isConnected(this.placeholder)||(this.teardownNodeRemoved(),this.setupNodeReinserted=canDomMutate_2_0_8_canDomMutate.onNodeInserted(this.placeholder,this.setup.bind(this)),canReflect_1_18_0_canReflect.offValue(this.observable,this.handler,this.queueName))};var helpers$2={range:{create:function(e,t){var n,a,r;return e.nodeType===Node.COMMENT_NODE?(n=e,r=e.nextSibling,r&&r.nodeType===Node.COMMENT_NODE&&"can-end-placeholder"===r.nodeValue?(a=r,a.nodeValue="/"+(n.nodeValue=t)):dev.warn("can-view-live: creating an end comment for ",t,e)):(dev.warn("can-view-live: forcing a comment range for ",t,e),n=e.ownerDocument.createComment(t),e.parentNode.replaceChild(n,e)),a||(a=e.ownerDocument.createComment("/"+t),n.parentNode.insertBefore(a,n.nextSibling)),{start:n,end:a}},remove:function(e){for(var t=e.start.parentNode,n=e.end.previousSibling,a;n&&n!==e.start;)a=n,n=n.previousSibling,canDomMutate_2_0_8_node.removeChild.call(t,a);canDomMutate_2_0_8_canDomMutate.flushRecords()},update:function(e,t){var n=e.start.parentNode;n&&(canDomMutate_2_0_8_node.insertBefore.call(n,t,e.end),canDomMutate_2_0_8_canDomMutate.flushRecords())}},ListenUntilRemovedAndInitialize:ListenUntilRemovedAndInitialize,getAttributeParts:function(e){var t={},n;return canViewParser_4_1_3_canViewParser.parseAttrs(e,{attrStart:function(e){t[e]="",n=e},attrValue:function(e){t[n]+=e},attrEnd:function(){}}),t},addTextNodeIfNoChildren:function(e){e.firstChild||e.appendChild(e.ownerDocument.createTextNode(""))},makeString:function(e){return null==e?"":""+e}},attr_1=function(e,t,n){new helpers$2.ListenUntilRemovedAndInitialize(n,function(n){canAttributeObservable_2_0_2_behaviors.set(e,t,n)},e,"dom","")},attrs=function(e,t,n,a){if(!canReflect_1_18_0_canReflect.isObservableLike(t)){var r=helpers$2.getAttributeParts(t);for(var o in r)canDomMutate_2_0_8_node.setAttribute.call(e,o,r[o]);return}var i={};new helpers$2.ListenUntilRemovedAndInitialize(t,function(t){var r=helpers$2.getAttributeParts(t),o;for(o in r){var s=r[o],l=i[o];if(s!==l){canDomMutate_2_0_8_node.setAttribute.call(e,o,s);var d=canViewCallbacks_5_0_0_canViewCallbacks.attr(o);d&&d(e,{attributeName:o,scope:n,options:a})}delete i[o]}for(o in i)canDomMutate_2_0_8_node.removeAttribute.call(e,o);i=r},e,"dom","")},viewInsertSymbol=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function makeCommentFragment(e){var t=document$1();return canFragment_1_3_1_canFragment([t.createComment(e),t.createComment("can-end-placeholder")])}var html=function(e,t,n){var a=helpers$2.range.update;if(e.nodeType!==Node.COMMENT_NODE){var r=makeCommentFragment(""),o=r.firstChild;e.parentNode.replaceChild(r,e),e=o}var i=helpers$2.range.create(e,""),s=!1;new helpers$2.ListenUntilRemovedAndInitialize(t,function(e){e&&"function"==typeof e[viewInsertSymbol]&&(e=e[viewInsertSymbol](n));var t="function"==typeof e,r=t?makeCommentFragment(""):canFragment_1_3_1_canFragment(e);t&&e(r.firstChild),!0===s?(helpers$2.range.remove(i),a(i,r)):(helpers$2.range.update(i,r),s=!0)},i.start,"dom","live.html replace::")},onValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offValue"),onPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol=canSymbol_1_6_5_canSymbol.for("can.offPatches"),Patcher=function(e,t){this.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:this.setup.bind(this),onEmpty:this.teardown.bind(this)}),this.observableOrList=e,this.isObservableValue=canReflect_1_18_0_canReflect.isValueLike(this.observableOrList)||canReflect_1_18_0_canReflect.isObservableLike(this.observableOrList),this.priority=this.isObservableValue?canReflect_1_18_0_canReflect.getPriority(e):t||0,this.onList=this.onList.bind(this),this.onPatchesNotify=this.onPatchesNotify.bind(this),this.onPatchesDerive=this.onPatchesDerive.bind(this),this.patches=[]};Patcher.prototype={constructor:Patcher,setup:function(){this.observableOrList[onValueSymbol$3]?(canReflect_1_18_0_canReflect.onValue(this.observableOrList,this.onList,"notify"),this.setupList(canReflect_1_18_0_canReflect.getValue(this.observableOrList))):this.setupList(this.observableOrList)},teardown:function(){this.observableOrList[offValueSymbol$1]&&canReflect_1_18_0_canReflect.offValue(this.observableOrList,this.onList,"notify"),this.currentList&&this.currentList[offPatchesSymbol]&&this.currentList[offPatchesSymbol](this.onPatchesNotify,"notify")},setupList:function(e){this.currentList=e,e&&e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onList:function(e){var t=this.currentList||[];e=e||[],t[offPatchesSymbol]&&t[offPatchesSymbol](this.onPatchesNotify,"notify");var n=list(t,e);this.currentList=e,this.onPatchesNotify(n),e[onPatchesSymbol$1]&&e[onPatchesSymbol$1](this.onPatchesNotify,"notify")},onPatchesNotify:function(e){this.patches.push.apply(this.patches,e),canQueues_1_3_2_canQueues.deriveQueue.enqueue(this.onPatchesDerive,this,[],{priority:this.priority})},onPatchesDerive:function(){var e=this.patches;this.patches=[],canQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]),this.currentList,[e,this.currentList],null,["Apply patches",e])}},canReflect_1_18_0_canReflect.assignSymbols(Patcher.prototype,{"can.onPatches":function(e,t){this.handlers.add([t||"mutate",e])},"can.offPatches":function(e,t){this.handlers.delete([t||"mutate",e])}});var patcher=Patcher,patchSort=function(e){var t=[];if(e.forEach(function(e){"move"===e.type?t.push({patch:e,kind:"move"}):(e.deleteCount&&t.push({type:"splice",index:e.index,deleteCount:e.deleteCount,insert:[]}),e.insert&&e.insert.length&&t.push({type:"splice",index:e.index,deleteCount:0,insert:e.insert}))}),2!==e.length)return e;var n=t[0],a=t[1];if(n.insert&&n.insert.length&&a.deleteCount){var r=n,o=a;if(r.index<o.index)o.index-=r.insert.length;else if(r.index>o.index)r.index-=o.deleteCount;else throw"indexes the same!";return[o,r]}return e};function SetObservable(e,t){this.setter=t,canSimpleObservable_2_5_0_canSimpleObservable.call(this,e)}SetObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),SetObservable.prototype.constructor=SetObservable,SetObservable.prototype.set=function(e){this.setter(e)},canReflect_1_18_0_canReflect.assignSymbols(SetObservable.prototype,{"can.setValue":SetObservable.prototype.set});var setObservable=SetObservable,splice=[].splice,renderAndAddRangeNode=function(e,t,n,a){var r=e.apply(t,n.concat()),o=canFragment_1_3_1_canFragment(r),i=a.createTextNode("");return o.appendChild(i),o};function getFrag(e,t){for(var n=e.ownerDocument.createDocumentFragment(),a,r;t!==e;)a=t,t=a.previousSibling,n.insertBefore(a,r),r=a;return n.insertBefore(t,r),n}var onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");function ListDOMPatcher(e,t,n,a,r){this.patcher=new patcher(t);var o=canReflect_1_18_0_canReflect.getName(t);this.value=t,this.render=n,this.context=a,this.falseyRender=r,this.range=helpers$2.range.create(e,o),this.indexMap=[],this.itemEndNode=[],this.domQueue=[],this.isValueLike=canReflect_1_18_0_canReflect.isValueLike(this.value),this.isObservableLike=canReflect_1_18_0_canReflect.isObservableLike(this.value),this.onPatches=this.onPatches.bind(this),this.processDomQueue=this.processDomQueue.bind(this),this.teardownValueBinding=this.teardownValueBinding.bind(this),this.meta={reasonLog:"live.html add::"+o,element:this.range.start},this.setupValueBinding()}var onPatchesSymbol$2=canSymbol_1_6_5_canSymbol.for("can.onPatches"),offPatchesSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offPatches");ListDOMPatcher.prototype={setupValueBinding:function(){this.teardownNodeRemoved=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this.range.start,this.teardownValueBinding),this.patcher[onPatchesSymbol$2](this.onPatches,"notify"),this.patcher.currentList&&this.patcher.currentList.length?this.add(this.patcher.currentList,0):this.addFalseyIfEmpty()},teardownValueBinding:function(){this.exit=!0,this.teardownNodeRemoved(),this.patcher[offPatchesSymbol$1](this.onPatches,"notify")},onPatches:function(e){if(!this.exit){var t=[];e.forEach(function(e){t.push.apply(t,patchSort([e]))});for(var n=0,a=t.length,r;n<a;n++)r=t[n],"move"===r.type?this.addToDomQueue(this.move,[r.toIndex,r.fromIndex]):(r.deleteCount&&this.addToDomQueue(this.remove,[{length:r.deleteCount},r.index]),r.insert&&r.insert.length&&this.addToDomQueue(this.add,[r.insert,r.index]))}},addToDomQueue:function(e,t){this.domQueue.push({fn:e,args:t}),canQueues_1_3_2_canQueues.domQueue.enqueue(this.processDomQueue,this,[this.domQueue],this.meta)},processDomQueue:function(){this.domQueue.forEach(function(e){var t=e.fn,n=e.args;t.apply(this,n)}.bind(this)),this.domQueue=[]},add:function(e,t){var n=this.range.start.ownerDocument,a=n.createDocumentFragment(),r=[],o=[],s=this.render,l=this.context;e.forEach(function(e,i){var d=new canSimpleObservable_2_5_0_canSimpleObservable(i+t),p=new setObservable(e,function(e){canReflect_1_18_0_canReflect.setKeyValue(this.patcher.currentList,d.get(),e)}.bind(this)),c=renderAndAddRangeNode(s,l,[p,d],n);r.push(c.lastChild),a.appendChild(c),o.push(d)},this),this.indexMap.length||(helpers$2.range.remove(this.range),this.itemEndNode=[]);var d=this.itemEndNode.length,p;if(t===d)p=this.range.end;else if(0===t)p=this.range.start.nextSibling;else if(t<d)p=this.itemEndNode[t-1].nextSibling;else throw new Error("Unable to place item");canDomMutate_2_0_8_node.insertBefore.call(p.parentNode,a,p),splice.apply(this.itemEndNode,[t,0].concat(r)),splice.apply(this.indexMap,[t,0].concat(o));for(var c=t+o.length,u=this.indexMap.length;c<u;c++)this.indexMap[c].set(c)},remove:function(e,t){0>t&&(t=this.indexMap.length+t);var n=e.length,a=t+n-1,r,o;r=0===t?this.range.start:this.itemEndNode[t-1],o=this.itemEndNode[a].nextSibling,this.itemEndNode.splice(t,e.length),r&&o&&helpers$2.range.remove({start:r,end:o});var s=this.indexMap;s.splice(t,e.length);for(var l=t,d=s.length;l<d;l++)s[l].set(l);this.exit||this.addFalseyIfEmpty()},addFalseyIfEmpty:function(){if(this.falseyRender&&0===this.indexMap.length){var e=renderAndAddRangeNode(this.falseyRender,this.currentList,[this.currentList],this.range.start.ownerDocument);helpers$2.range.update(this.range,e)}},move:function(e,t){var n=this.itemEndNode[t],a;a=0<t?this.itemEndNode[t-1].nextSibling:this.range.start.nextSibling;var r=t<e?this.itemEndNode[e].nextSibling:0<e?this.itemEndNode[e-1].nextSibling:this.range.start.nextSibling;var o=getFrag(a,n);r.parentNode.insertBefore(o,r),this.itemEndNode.splice(t,1),this.itemEndNode.splice(e,0,n),++e,++t;var s=this.indexMap;--e,--t;var l=s[t];[].splice.apply(s,[t,1]),[].splice.apply(s,[e,0,l]);var d=Math.min(t,e),p=s.length;for(p;d<p;d++)s[d].set(d)}};var list$1=function(e,t,n,a,r){new ListDOMPatcher(e,t,n,a,r)},text=function(e,t){if(e.nodeType!==Node.TEXT_NODE){var n;n=document.createTextNode(""),e.parentNode.replaceChild(n,e),e=n}new helpers$2.ListenUntilRemovedAndInitialize(t,function(t){e.nodeValue=helpers$2.makeString(t)},e,"dom","")},live={};live.attr=attr_1,live.attrs=attrs,live.html=html,live.list=list$1,live.text=text;var canViewLive_5_0_4_canViewLive=live,noop=function(){},TextSectionBuilder=function(e){e&&(this.filename=e),this.stack=[new TextSection]};canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,utils$1.mixins),canAssign_1_3_3_canAssign(TextSectionBuilder.prototype,{startSection:function(e){var t=new TextSection;this.last().add({process:e,truthy:t}),this.stack.push(t)},endSection:function(){this.stack.pop()},inverse:function(){this.stack.pop();var e=new TextSection;this.last().last().falsey=e,this.stack.push(e)},compile:function(e){var t=this.stack[0].compile();return function(n){var a=new canObservation_4_2_0_canObservation(function(){return t(n)},null,{isObservable:!1});canReflect_1_18_0_canReflect.onValue(a,noop);var r=canReflect_1_18_0_canReflect.getValue(a);canReflect_1_18_0_canReflect.valueHasDependencies(a)?(e.textContentOnly?canViewLive_5_0_4_canViewLive.text(this,a):e.attr?canViewLive_5_0_4_canViewLive.attr(this,e.attr,a):canViewLive_5_0_4_canViewLive.attrs(this,a,n),canReflect_1_18_0_canReflect.offValue(a,noop)):e.textContentOnly?this.nodeValue=r:e.attr?canDomMutate_2_0_8_node.setAttribute.call(this,e.attr,r):canViewLive_5_0_4_canViewLive.attrs(this,r)}}});var passTruthyFalsey=function(e,t,n){return function(a){return e.call(this,a,t,n)}},TextSection=function(){this.values=[]};canAssign_1_3_3_canAssign(TextSection.prototype,{add:function(e){this.values.push(e)},last:function(){return this.values[this.values.length-1]},compile:function(){for(var e=this.values,t=e.length,n=0,a;n<t;n++)a=this.values[n],"object"==typeof a&&(e[n]=passTruthyFalsey(a.process,a.truthy&&a.truthy.compile(),a.falsey&&a.falsey.compile()));return function(n){for(var a="",r=0,o;r<t;r++)o=e[r],a+="string"==typeof o?o:o.call(this,n);return a}}});var text_section=TextSectionBuilder,Arg=function(e,t){this.expr=e,this.modifiers=t||{},this.isCompute=!1};Arg.prototype.value=function(){return this.expr.value.apply(this.expr,arguments)};var arg=Arg,Literal=function(e){this._value=e};Literal.prototype.value=function(){return this._value};var literal=Literal;function getObservableValue_fromDynamicKey_fromObservable(e,t){var n=function(){return canStacheKey_1_4_3_canStacheKey.reads((""+canReflect_1_18_0_canReflect.getValue(e)).replace(/\./g,"\\."))},a=new setter(function(){var e=canStacheKey_1_4_3_canStacheKey.read(canReflect_1_18_0_canReflect.getValue(t),n());return r=e.parentHasKey,e.value},function(e){canStacheKey_1_4_3_canStacheKey.write(canReflect_1_18_0_canReflect.getValue(t),n(),e)}),r;return canObservation_4_2_0_canObservation.temporarilyBind(a),a.initialValue=canObservationRecorder_1_3_1_canObservationRecorder.peekValue(a),a.parentHasKey=r,a}function convertToArgExpression(e){return e instanceof arg||e instanceof literal?e:new arg(e)}function toComputeOrValue(e){return canReflect_1_18_0_canReflect.isObservableLike(e)?canReflect_1_18_0_canReflect.isValueLike(e)&&!1===canReflect_1_18_0_canReflect.valueHasDependencies(e)?canReflect_1_18_0_canReflect.getValue(e):e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}function toCompute(e){return e?e.isComputed?e:e.compute?e.compute:canViewScope_4_13_6_makeComputeLike(e):e}var expressionHelpers={getObservableValue_fromDynamicKey_fromObservable:getObservableValue_fromDynamicKey_fromObservable,convertToArgExpression:convertToArgExpression,toComputeOrValue:toComputeOrValue,toCompute:toCompute},Hashes=function(e){this.hashExprs=e};Hashes.prototype.value=function(){var e={};for(var t in this.hashExprs){var n=expressionHelpers.convertToArgExpression(this.hashExprs[t]),a=n.value.apply(n,arguments);e[t]={call:!n.modifiers||!n.modifiers.compute,value:a}}return new canObservation_4_2_0_canObservation(function(){var t={};for(var n in e)t[n]=e[n].call?canReflect_1_18_0_canReflect.getValue(e[n].value):expressionHelpers.toComputeOrValue(e[n].value);return t})};var hashes=Hashes,Bracket=function(e,t){this.root=t,this.key=e};Bracket.prototype.value=function(e,t){var n=this.root?this.root.value(e,t):e.peek("this");return expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key.value(e,t),n,e,t,{})},Bracket.prototype.closingTag=function(){};var bracket=Bracket,setIdentifier=function(e){this.value=e},sourceTextSymbol=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),isViewSymbol$1=canSymbol_1_6_5_canSymbol.for("can.isView"),Call=function(e,t){this.methodExpr=e,this.argExprs=t.map(expressionHelpers.convertToArgExpression)};Call.prototype.args=function(e,t){for(var n={},a=[],r=0,o=this.argExprs.length,s;r<o;r++)if(s=this.argExprs[r],s.expr instanceof hashes&&canAssign_1_3_3_canAssign(n,s.expr.hashExprs),!("function"==typeof t)||!t(r)){var l=s.value.apply(s,arguments);a.push({call:!s.modifiers||!s.modifiers.compute,value:l})}return function(e){var t=[];0<canReflect_1_18_0_canReflect.size(n)&&(t.hashExprs=n);for(var r=0,o=a.length;r<o;r++)t[r]=e?a[r].value:a[r].call?canReflect_1_18_0_canReflect.getValue(a[r].value):expressionHelpers.toCompute(a[r].value);return t}},Call.prototype.value=function(e,t){var n=this,a=this.methodExpr.value(e,{proxyMethods:!1});canObservation_4_2_0_canObservation.temporarilyBind(a);var r=canReflect_1_18_0_canReflect.getValue(a),o=n.args(e,r&&r.ignoreArgLookup),i=function(n){var r=canReflect_1_18_0_canReflect.getValue(a);if("function"==typeof r){canReflect_1_18_0_canReflect.isObservableLike(r)&&(r=canReflect_1_18_0_canReflect.getValue(r));var i=o(r.isLiveBound);return r.requiresOptionsArgument&&(i.hashExprs&&t&&t.exprData&&(t.exprData.hashExprs=i.hashExprs),void 0!==t&&i.push(t)),!0!==r[isViewSymbol$1]||i[0]instanceof canViewScope_4_13_6_canViewScope||(i[0]=e.getTemplateContext().add(i[0])),arguments.length&&i.unshift(new setIdentifier(n)),r.apply(a.thisArg||e.peek("this"),i)}};if(t&&t.doNotWrapInObservation)return i();var s=new setter(i,i);return s},Call.prototype.closingTag=function(){return this.methodExpr.key};var call$1=Call,Helper=function(e,t,n){this.methodExpr=e,this.argExprs=t,this.hashExprs=n,this.mode=null};Helper.prototype.args=function(){for(var e=[],t=0,n=this.argExprs.length,a;t<n;t++)a=this.argExprs[t],e.push(expressionHelpers.toComputeOrValue(a.value.apply(a,arguments)));return e},Helper.prototype.hash=function(){var e={};for(var t in this.hashExprs){var n=this.hashExprs[t];e[t]=expressionHelpers.toComputeOrValue(n.value.apply(n,arguments))}return e},Helper.prototype.value=function(e,t){var n=this.methodExpr instanceof literal?""+this.methodExpr._value:this.methodExpr.key,a=this,r=e.computeData(n,{proxyMethods:!1}),o=r&&r.initialValue,i=r&&r.thisArg;return"function"==typeof o&&(r=function(){var n=a.args(e),r=canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{hash:a.hash(e),exprData:a});return n.push(r),o.apply(i||e.peek("this"),n)}),r},Helper.prototype.closingTag=function(){return this.methodExpr.key};var helper=Helper,sourceTextSymbol$1=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Lookup=function(e,t,n){this.key=e,this.rootExpr=t,canReflect_1_18_0_canReflect.setKeyValue(this,sourceTextSymbol$1,n)};Lookup.prototype.value=function(e,t){return this.rootExpr?expressionHelpers.getObservableValue_fromDynamicKey_fromObservable(this.key,this.rootExpr.value(e),e,{},{}):e.computeData(this.key,canAssign_1_3_3_canAssign({warnOnMissingKey:!0},t))};var lookup=Lookup,last$1=utils$1.last,sourceTextSymbol$2=canSymbol_1_6_5_canSymbol.for("can-stache.sourceText"),Hash=function(){},keyRegExp=/[\w\.\\\-_@\/\&%]+/,tokensRegExp=/('.*?'|".*?"|=|[\w\.\\\-_@\/*%\$]+|[\(\)]|,|\~|\[|\]\s*|\s*(?=\[))/g,bracketSpaceRegExp=/\]\s+/,literalRegExp=/^('.*?'|".*?"|-?[0-9]+\.?[0-9]*|true|false|null|undefined)$/,isTokenKey=function(e){return keyRegExp.test(e)},testDot=/^[\.@]\w/,isAddingToExpression=function(e){return isTokenKey(e)&&testDot.test(e)},ensureChildren=function(e){return e.children||(e.children=[]),e},Stack=function(){this.root={children:[],type:"Root"},this.current=this.root,this.stack=[this.root]};canAssign_1_3_3_canAssign(Stack.prototype,{top:function(){return last$1(this.stack)},isRootTop:function(){return this.top()===this.root},popTo:function(e){this.popUntil(e),this.pop()},pop:function(){this.isRootTop()||this.stack.pop()},first:function(e){for(var t=this.stack.length-1;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},firstParent:function(e){for(var t=this.stack.length-2;0<t&&-1===e.indexOf(this.stack[t].type);)t--;return this.stack[t]},popUntil:function(e){for(;-1===e.indexOf(this.top().type)&&!this.isRootTop();)this.stack.pop();return this.top()},addTo:function(e,t){var n=this.popUntil(e);ensureChildren(n).children.push(t)},addToAndPush:function(e,t){this.addTo(e,t),this.stack.push(t)},push:function(e){this.stack.push(e)},topLastChild:function(){return last$1(this.top().children)},replaceTopLastChild:function(e){var t=ensureChildren(this.top()).children;return t.pop(),t.push(e),e},replaceTopLastChildAndPush:function(e){this.replaceTopLastChild(e),this.stack.push(e)},replaceTopAndPush:function(e){var t;return this.top()===this.root?t=ensureChildren(this.top()).children:(this.stack.pop(),t=ensureChildren(this.top()).children),t.pop(),t.push(e),this.stack.push(e),e}});var convertKeyToLookup=function(e){var t=e.lastIndexOf("./"),n=e.lastIndexOf(".");if(n>t)return e.substr(0,n)+"@"+e.substr(n+1);var a=-1===t?0:t+2,r=e.charAt(a);return"."===r||"@"===r?e.substr(0,a)+"@"+e.substr(a+1):e.substr(0,a)+"@"+e.substr(a)},convertToAtLookup=function(e){return"Lookup"===e.type&&(canReflect_1_18_0_canReflect.setKeyValue(e,sourceTextSymbol$2,e.key),e.key=convertKeyToLookup(e.key)),e},convertToHelperIfTopIsLookup=function(e){var t=e.top();if(t&&"Lookup"===t.type){var n=e.stack[e.stack.length-2];"Helper"!==n.type&&n&&e.replaceTopAndPush({type:"Helper",method:t})}},expression={toComputeOrValue:expressionHelpers.toComputeOrValue,convertKeyToLookup:convertKeyToLookup,Literal:literal,Lookup:lookup,Arg:arg,Hash:Hash,Hashes:hashes,Call:call$1,Helper:helper,Bracket:bracket,SetIdentifier:setIdentifier,tokenize:function(e){var t=[];return(e.trim()+" ").replace(tokensRegExp,function(e,n){bracketSpaceRegExp.test(n)?(t.push(n[0]),t.push(n.slice(1))):t.push(n)}),t},lookupRules:{default:function(e){return"Helper"===e.type?helper:lookup},method:function(){return lookup}},methodRules:{default:function(e){return"Call"===e.type?call$1:helper},call:function(){return call$1}},parse:function(e,t){t=t||{};var n=this.ast(e);t.lookupRule||(t.lookupRule="default"),"string"==typeof t.lookupRule&&(t.lookupRule=expression.lookupRules[t.lookupRule]),t.methodRule||(t.methodRule="default"),"string"==typeof t.methodRule&&(t.methodRule=expression.methodRules[t.methodRule]);var a=this.hydrateAst(n,t,t.baseMethodType||"Helper");return a},hydrateAst:function(e,t,n,a){var r;if("Lookup"===e.type){var o=t.lookupRule(e,n,a),s=new o(e.key,e.root&&this.hydrateAst(e.root,t,n),e[sourceTextSymbol$2]);return s}if("Literal"===e.type)return new literal(e.value);if("Arg"===e.type)return new arg(this.hydrateAst(e.children[0],t,n,a),{compute:!0});if("Hash"===e.type)throw new Error("");else{if("Hashes"===e.type)return r={},e.children.forEach(function(e){r[e.prop]=this.hydrateAst(e.children[0],t,n,!0)},this),new hashes(r);if("Call"===e.type||"Helper"===e.type){r={};var l=[],d=e.children,p=t.methodRule(e);if(d)for(var c=0,u;c<d.length;c++)u=d[c],"Hashes"===u.type&&"Helper"===e.type&&p!==call$1?u.children.forEach(function(n){r[n.prop]=this.hydrateAst(n.children[0],t,e.type,!0)},this):l.push(this.hydrateAst(u,t,e.type,!0));return new p(this.hydrateAst(e.method,t,e.type),l,r)}if("Bracket"===e.type){var y;return new bracket(this.hydrateAst(e.children[0],t),e.root?this.hydrateAst(e.root,t):void 0,y)}}},ast:function(e){var t=this.tokenize(e);return this.parseAst(t,{index:0})},parseAst:function(e,t){for(var n=new Stack,a,r,o;t.index<e.length;){var i=e[t.index],s=e[t.index+1];if(t.index++,"="===s){a=n.top(),a&&"Lookup"===a.type&&(r=n.firstParent(["Call","Helper","Hash"]),("Call"===r.type||"Root"===r.type)&&(n.popUntil(["Call"]),a=n.top(),n.replaceTopAndPush({type:"Helper",method:"Root"===a.type?last$1(a.children):a}))),r=n.first(["Call","Helper","Hashes","Root"]);var l={type:"Hash",prop:i};"Hashes"===r.type?n.addToAndPush(["Hashes"],l):(n.addToAndPush(["Helper","Call","Root"],{type:"Hashes",children:[l]}),n.push(l)),t.index++}else if(literalRegExp.test(i))convertToHelperIfTopIsLookup(n),r=n.first(["Helper","Call","Hash","Bracket"]),"Hash"===r.type&&r.children&&0<r.children.length?n.addTo(["Helper","Call","Bracket"],{type:"Literal",value:utils$1.jsonParse(i)}):"Bracket"===r.type&&r.children&&0<r.children.length?n.addTo(["Helper","Call","Hash"],{type:"Literal",value:utils$1.jsonParse(i)}):n.addTo(["Helper","Call","Hash","Bracket"],{type:"Literal",value:utils$1.jsonParse(i)});else if(keyRegExp.test(i))o=n.topLastChild(),r=n.first(["Helper","Call","Hash","Bracket"]),o&&("Call"===o.type||"Bracket"===o.type)&&isAddingToExpression(i)?n.replaceTopLastChildAndPush({type:"Lookup",root:o,key:i.slice(1)}):"Bracket"===r.type?r.children&&0<r.children.length?"Helper"===n.first(["Helper","Call","Hash","Arg"]).type&&"."!==i[0]?n.addToAndPush(["Helper"],{type:"Lookup",key:i}):n.replaceTopAndPush({type:"Lookup",key:i.slice(1),root:r}):n.addToAndPush(["Bracket"],{type:"Lookup",key:i}):(convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash","Arg","Bracket"],{type:"Lookup",key:i}));else if("~"===i)convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash"],{type:"Arg",key:i});else if("("===i){if(a=n.top(),o=n.topLastChild(),"Lookup"===a.type)n.replaceTopAndPush({type:"Call",method:convertToAtLookup(a)});else if(o&&"Call"===o.type)n.replaceTopAndPush({type:"Call",method:o});else throw new Error("Unable to understand expression "+e.join(""));}else if(")"===i)n.popTo(["Call"]);else if(","===i){var d=n.first(["Call"]);"Call"===d.type?n.popUntil(["Call"]):n.popUntil(["Hash"])}else if("["!==i)"]"===i?n.pop():" "===i&&n.push(i);else if(a=n.top(),o=n.topLastChild(),o&&("Call"===o.type||"Bracket"===o.type))n.replaceTopLastChildAndPush({type:"Bracket",root:o});else if("Lookup"===a.type||"Bracket"===a.type){var p={type:"Bracket",root:a};n.replaceTopAndPush(p)}else"Call"===a.type?n.addToAndPush(["Call"],{type:"Bracket"}):" "===a?(n.popUntil(["Lookup","Call"]),convertToHelperIfTopIsLookup(n),n.addToAndPush(["Helper","Call","Hash"],{type:"Bracket"})):n.replaceTopAndPush({type:"Bracket"})}return n.root.children[0]}},expression_1=expression,expression$1=expression_1,toDOMSymbol$1=canSymbol_1_6_5_canSymbol.for("can.toDOM");function HelperOptions(e,t,n){this.metadata={rendered:!1},this.stringOnly=n,this.scope=e,this.exprData=t}canDefineLazyValue_1_1_1_defineLazyValue(HelperOptions.prototype,"context",function(){return this.scope.peek("this")});var mustacheLineBreakRegExp=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp=/\s*\{\{--\}\}\s*|\s*(\{\{\{?)-|-(\}\}\}?)\s*/g,k=function(){},viewInsertSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewInsert");function valueShouldBeInsertedAsHTML(e){return null!==e&&"object"==typeof e&&("function"==typeof e[toDOMSymbol$1]||"function"==typeof e[viewInsertSymbol$1]||"number"==typeof e.nodeType)}var core={expression:expression$1,makeEvaluator:function(e,t,n,a,r,o){if("^"===t){var i=a;a=r,r=i}var s=new HelperOptions(e,n,o),l;if(utils$1.createRenderers(s,e,a,r,o),n instanceof expression$1.Call)l=n.value(e,s);else if(n instanceof expression$1.Bracket)l=n.value(e);else if(n instanceof expression$1.Lookup)l=n.value(e);else if(n instanceof expression$1.Literal)l=n.value.bind(n);else if(n instanceof expression$1.Helper&&n.methodExpr instanceof expression$1.Bracket)l=n.methodExpr.value(e,s);else if(l=n.value(e,s),"function"==typeof l)return l;return!t||s.metadata.rendered?l:"#"===t||"^"===t?function(){var t=canReflect_1_18_0_canReflect.getValue(l),n;if(s.metadata.rendered)n=t;else if("string"!=typeof t&&canReflect_1_18_0_canReflect.isListLike(t)){var a=canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isListLike(t);n=canReflect_1_18_0_canReflect.getKeyValue(t,"length")?o?utils$1.getItemsStringContent(t,a,s):canFragment_1_3_1_canFragment(utils$1.getItemsFragContent(t,s,e)):s.inverse(e)}else n=t?s.fn(t||e):s.inverse(e);return s.metadata.rendered=!1,n}:void 0},makeLiveBindingPartialRenderer:function(e){e=e.trim();var t=e.split(/\s+/).shift(),n;return t!==e&&(n=core.expression.parse(e)),function(e){var a=new canObservation_4_2_0_canObservation(function(){var a=t,r=e;if(n&&1===n.argExprs.length){var o=canReflect_1_18_0_canReflect.getValue(n.argExprs[0].value(e));"undefined"==typeof o||(r=e.add(o))}var i=canReflect_1_18_0_canReflect.getKeyValue(r.templateContext.partials,a),s;if(i)s=function(){return i.render?i.render(r):i(r)};else{var l=r.read(a,{isArgument:!0}).value;if(null===l||!l&&"*"===a[0])return canFragment_1_3_1_canFragment("");l&&(a=l),s=function(){if("function"==typeof a)return a(r,{});var e=core.getTemplateById(a);return e?e(r,{}):document$1().createDocumentFragment()}}var d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(s)();return canFragment_1_3_1_canFragment(d)});canViewLive_5_0_4_canViewLive.html(this,a)}},makeStringBranchRenderer:function(e,t){var n=core.expression.parse(t),a=e+t,r=function(t,r,o){var i=t.__cache[a];(e||!i)&&(i=makeEvaluator(t,e,n,r,o,!0),!e&&(t.__cache[a]=i));var s=i[canSymbol_1_6_5_canSymbol.for("can.onValue")],l;return l=s?canReflect_1_18_0_canReflect.getValue(i):i(),null==l?"":11===l.nodeType?l.textContent:""+l};return r.exprData=n,r},makeLiveBindingBranchRenderer:function(e,t,n){var a=core.expression.parse(t),r=function(t,r,o){var i=n.tag,s=makeEvaluator(t,e,a,r,o,i),l=s[canSymbol_1_6_5_canSymbol.for("can.onValue")],d;d=l?s:new canObservation_4_2_0_canObservation(s,null,{isObservable:!1}),canReflect_1_18_0_canReflect.onValue(d,k);var p=canReflect_1_18_0_canReflect.getValue(d);if("function"==typeof p&&!(a instanceof expression$1.Lookup))canObservationRecorder_1_3_1_canObservationRecorder.ignore(p)(this);else if(canReflect_1_18_0_canReflect.valueHasDependencies(d))n.attr?canViewLive_5_0_4_canViewLive.attr(this,n.attr,d):n.tag?canViewLive_5_0_4_canViewLive.attrs(this,d):n.text&&!valueShouldBeInsertedAsHTML(p)?canViewLive_5_0_4_canViewLive.text(this,d):canViewLive_5_0_4_canViewLive.html(this,d);else if(n.attr)canDomMutate_2_0_8_canDomMutate.setAttribute(this,n.attr,p);else if(n.tag)canViewLive_5_0_4_canViewLive.attrs(this,p);else if(n.text&&!valueShouldBeInsertedAsHTML(p))this.nodeValue=helpers$2.makeString(p);else if(null!=p)if("function"==typeof p[viewInsertSymbol$1]){var c=p[viewInsertSymbol$1]({});this.parentNode.replaceChild(c,this)}else this.parentNode.replaceChild(canFragment_1_3_1_canFragment(p,this.ownerDocument),this);canReflect_1_18_0_canReflect.offValue(d,k)};return r.exprData=a,r},splitModeFromExpression:function(e,t){e=e.trim();var n=e.charAt(0);return 0<="#/{&^>!<".indexOf(n)?e=e.substr(1).trim():n=null,"{"===n&&t.node&&(n=null),{mode:n,expression:e}},cleanLineEndings:function(e){return e.replace(mustacheLineBreakRegExp,function(e,t,n,a,r,o,i,s,l,d){o=o||"",t=t||"",n=n||"";var p=splitModeFromExpression(r||l,{});return s||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(n=t+n&&" ",n+a+(0!==d&&i.length?t+"\n":"")):n+a+o+(n.length||0!==d?t+"\n":"")})},cleanWhitespaceControl:function(e){return e.replace(mustacheWhitespaceRegExp,"$1$2")},getTemplateById:function(){}},makeEvaluator=core.makeEvaluator,splitModeFromExpression=core.splitModeFromExpression,mustache_core=core;canGlobals_1_2_2_canGlobalsInstance.define("base-url",function(){var e=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("global"),t=canGlobals_1_2_2_canGlobalsInstance.getKeyValue("document");if(t&&"baseURI"in t)return t.baseURI;if(e.location){var n=e.location.href,a=n.lastIndexOf("/");return-1===a?n:n.substr(0,a)}return"undefined"==typeof process?void 0:process.cwd()});var baseUrl=canGlobals_1_2_2_canGlobalsInstance.makeExport("base-url"),canParseUri_1_2_2_canParseUri=canNamespace_1_0_0_canNamespace.parseURI=function(e){var t=(e+"").replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null},canJoinUris_1_2_0_canJoinUris=canNamespace_1_0_0_canNamespace.joinURIs=function(e,t){return t=canParseUri_1_2_2_canParseUri(t||""),e=canParseUri_1_2_2_canParseUri(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+function(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null};function noop$1(){}var resolveValue=noop$1,evaluateArgs=noop$1,__testing={};function debuggerHelper(){canLog_1_0_2_canLog.warn("Forgotten {{debugger}} helper")}debuggerHelper.requiresOptionsArgument=!0;var Debugger={helper:debuggerHelper,evaluateArgs:evaluateArgs,resolveValue:resolveValue,__testing:__testing},truthyObservable=function(e){return new canObservation_4_2_0_canObservation(function(){var t=canReflect_1_18_0_canReflect.getValue(e);return!!t})};function makeConverter(e){return e=e||{},function(t,n){var a=canReflect_1_18_0_canReflect.toArray(arguments);return t instanceof setIdentifier?"function"==typeof e.set?e.set.apply(this,[t.value].concat(a.slice(1))):n(t.value):"function"==typeof e.get?e.get.apply(this,a):a[0]}}var converter=makeConverter,bindAndRead=function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e};function forOfInteger(e,t,n){for(var a=[],r=0,o;r<e;r++)o={},void 0!==t&&(o[t]=r),a.push(n.fn(n.scope.add({index:r},{special:!0}).addLetContext(o)));return n.stringOnly?a.join(""):a}function forOfObject(e,t,n){var a=[];return canReflect_1_18_0_canReflect.each(e,function(r,o){var i=new keyObservable(e,o.replace(/\./g,"\\.")),s={};void 0!==t&&(s[t]=i),a.push(n.fn(n.scope.add({key:o},{special:!0}).addLetContext(s)))}),n.stringOnly?a.join(""):a}var forHelper=function(e){if(1!==e.exprData.argExprs.length)throw new Error("for(of) broken syntax");var t=e.exprData.argExprs[0].expr,n,a,r;if(t instanceof expression_1.Lookup)r=t.value(e.scope);else if(t instanceof expression_1.Helper){var o=t.argExprs[0];if("of"!==o.key)throw new Error("for(of) broken syntax");n=t.methodExpr.key,a=t.argExprs[1],r=a.value(e.scope)}var i=r,s=[].slice.call(arguments),l=s.pop(),d=bindAndRead(i);if(d&&d===Math.floor(d))return forOfInteger(d,n,e);if(d&&!canReflect_1_18_0_canReflect.isListLike(d))return forOfObject(d,n,e);if(l.stringOnly){var p=[];return canReflect_1_18_0_canReflect.eachIndex(d,function(t,a){var r={};void 0!==n&&(r[n]=t),p.push(e.fn(l.scope.add({index:a},{special:!0}).addLetContext(r)))}),p.join("")}return l.metadata.rendered=!0,function(e){var t=function(e,t){var a={};return void 0!==n&&(a[n]=e),l.fn(l.scope.add({index:t},{special:!0}).addLetContext(a),l.options)};canViewLive_5_0_4_canViewLive.list(e,i,t,l.context,function(){return l.inverse(l.scope,l.options)})}};forHelper.isLiveBound=!0,forHelper.requiresOptionsArgument=!0,forHelper.ignoreArgLookup=function(e){return 0===e};var ForOf=forHelper;function isVariable(e){return!0===e._meta.variable}var letHelper=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){if(e.isSection)return e.fn(e.scope.addLetContext(e.hash));var t=e.scope.getScope(isVariable);if(!t)throw new Error("There is no variable scope!");return canReflect_1_18_0_canReflect.assignMap(t._context,e.hash),document.createTextNode("")}),Let=letHelper,keepNodeSymbol=canSymbol_1_6_5_canSymbol.for("done.keepNode");function portalHelper(e,t){function n(){for(var e=t.fn(t.scope.addLetContext({}),t.options),n=e.firstChild;n;)n[keepNodeSymbol]=!0,n=n.nextSibling;return e}function a(){if(s&&(canReflect_1_18_0_canReflect.offValue(e,o),s=null),l&&d){var t=l.parentNode;t&&(helpers$2.range.remove({start:l,end:d}),canDomMutate_2_0_8_node.removeChild.call(t,l),canDomMutate_2_0_8_node.removeChild.call(t,d),l=d=null)}}function r(){p&&p(),a()}function o(){if(a(),canReflect_1_18_0_canReflect.onValue(e,o),s=canReflect_1_18_0_canReflect.getValue(e),s){l=s.ownerDocument.createComment(i+" contents"),d=s.ownerDocument.createComment("can-end-placeholder"),l[keepNodeSymbol]=!0,d[keepNodeSymbol]=!0,s.appendChild(l),s.appendChild(d);var r=new canObservation_4_2_0_canObservation(n,null,{isObservable:!1});canViewLive_5_0_4_canViewLive.html(l,r)}else t.metadata.rendered=!0}var i="portal("+canReflect_1_18_0_canReflect.getName(e)+")",s,l,d,p;return o(),function(e){var t=e.ownerDocument.createComment(i);return e.parentNode.replaceChild(t,e),p=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(t,r),t}}portalHelper.isLiveBound=!0,portalHelper.requiresOptionsArgument=!0;var Portal=portalHelper,debuggerHelper$1=Debugger.helper,builtInHelpers={},builtInConverters={},converterPackages=new WeakMap,helpersCore={looksLikeOptions:function(e){return e&&"function"==typeof e.fn&&"function"==typeof e.inverse},resolve:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(e):e},resolveHash:function(e){var t={};for(var n in e)t[n]=helpersCore.resolve(e[n]);return t},bindAndRead:function(e){return e&&canReflect_1_18_0_canReflect.isValueLike(e)?(canObservation_4_2_0_canObservation.temporarilyBind(e),canReflect_1_18_0_canReflect.getValue(e)):e},registerHelper:function(e,t){t.requiresOptionsArgument=!0,canStacheHelpers_1_2_0_canStacheHelpers[e]=t},registerHelpers:function(e){var t,n;for(t in e)n=e[t],helpersCore.registerHelper(t,helpersCore.makeSimpleHelper(n))},registerConverter:function(e,t){helpersCore.registerHelper(e,converter(t))},makeSimpleHelper:function(e){return function(){var t=[];return canReflect_1_18_0_canReflect.eachIndex(arguments,function(e){t.push(helpersCore.resolve(e))}),e.apply(this,t)}},addHelper:function(e,t){return"object"==typeof e?helpersCore.registerHelpers(e):helpersCore.registerHelper(e,helpersCore.makeSimpleHelper(t))},addConverter:function(e,t){if("object"==typeof e)return void(converterPackages.has(e)||(converterPackages.set(e,!0),canReflect_1_18_0_canReflect.eachKey(e,function(e,t){helpersCore.addConverter(t,e)})));var n=converter(t);n.isLiveBound=!0,helpersCore.registerHelper(e,n)},addLiveHelper:function(e,t){return t.isLiveBound=!0,helpersCore.registerHelper(e,t)},getHelper:function(e,t){var n=t&&t.getHelper(e);return n||(n=canStacheHelpers_1_2_0_canStacheHelpers[e]),n},__resetHelpers:function(){for(var e in canStacheHelpers_1_2_0_canStacheHelpers)delete canStacheHelpers_1_2_0_canStacheHelpers[e];converterPackages.delete(builtInConverters),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters()},addBuiltInHelpers:function(){canReflect_1_18_0_canReflect.each(builtInHelpers,function(e,t){canStacheHelpers_1_2_0_canStacheHelpers[t]=e})},addBuiltInConverters:function(){helpersCore.addConverter(builtInConverters)},_makeLogicHelper:function(e,t){var n=canAssign_1_3_3_canAssign(function(){function e(){return a?!!t(n):t(n)}var n=Array.prototype.slice.call(arguments,0),a;helpersCore.looksLikeOptions(n[n.length-1])&&(a=n.pop());var r=new canObservation_4_2_0_canObservation(e);return a?r.get()?a.fn():a.inverse():r.get()},{requiresOptionsArgument:!0,isLiveBound:!0});return n}},ifHelper=canAssign_1_3_3_canAssign(function(e,t){var n;return n=e&&canReflect_1_18_0_canReflect.isValueLike(e)?canReflect_1_18_0_canReflect.getValue(new truthyObservable(e)):!!helpersCore.resolve(e),t?n?t.fn(t.scope||this):t.inverse(t.scope||this):!!n},{requiresOptionsArgument:!0,isLiveBound:!0}),isHelper=helpersCore._makeLogicHelper("eq",function(e){for(var t=0,n,a;t<e.length;t++){if(n=helpersCore.resolve(e[t]),n="function"==typeof n?n():n,0<t&&n!==a)return!1;a=n}return!0}),andHelper=helpersCore._makeLogicHelper("and",function(e){if(0===e.length)return!1;for(var t=0,n=e.length,a;t<n;t++)if(a=helpersCore.resolve(e[t]),!a)return a;return a}),orHelper=helpersCore._makeLogicHelper("or",function(e){if(0===e.length)return!1;for(var t=0,n=e.length,a;t<n;t++)if(a=helpersCore.resolve(e[t]),a)return a;return a}),switchHelper=function(e,t){helpersCore.resolve(e);var n=!1,a=function(t,a){if(!n&&helpersCore.resolve(e)===helpersCore.resolve(t))return n=!0,a.fn(a.scope)};a.requiresOptionsArgument=!0;var r=function(e){if(!n)return!e||e.scope.peek("this")};r.requiresOptionsArgument=!0,canReflect_1_18_0_canReflect.assignSymbols(r,{"can.isValueLike":!0,"can.isFunctionLike":!1,"can.getValue":function(){return this(t)}});var o=t.scope.add({case:a,default:r},{notContext:!0});return t.fn(o,t)};switchHelper.requiresOptionsArgument=!0;var domDataHelper=function(e,t){var n=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,n)}},joinBaseHelper=function(){var e=[].slice.call(arguments),t=e.pop(),n=e.map(function(e){var t=helpersCore.resolve(e);return"function"==typeof t?t():t}).join(""),a=canReflect_1_18_0_canReflect.getKeyValue(t.scope.templateContext.helpers,"module"),r=a?a.uri:void 0,o="."===n[0];if(o&&r)return canJoinUris_1_2_0_canJoinUris(r,n);var i="undefined"!=typeof System&&(System.renderingBaseURL||System.baseURL)||baseUrl();return"/"!==n[0]&&"/"!==i[i.length-1]&&(i+="/"),canJoinUris_1_2_0_canJoinUris(i,n)};joinBaseHelper.requiresOptionsArgument=!0;var eachHelper=function(e){var t=[].slice.call(arguments),n=t.pop(),a=n.exprData.hashExprs,r=helpersCore.bindAndRead(e),o,i;if(0<canReflect_1_18_0_canReflect.size(a)&&(o={},canReflect_1_18_0_canReflect.eachKey(a,function(e,t){o[e.key]=t})),(canReflect_1_18_0_canReflect.isObservableLike(r)&&canReflect_1_18_0_canReflect.isListLike(r)||canReflect_1_18_0_canReflect.isListLike(r)&&canReflect_1_18_0_canReflect.isValueLike(e))&&!n.stringOnly)return n.metadata.rendered=!0,function(t){var a=function(e,t){var a={};return 0<canReflect_1_18_0_canReflect.size(o)&&(o.value&&(a[o.value]=e),o.index&&(a[o.index]=t)),n.fn(n.scope.add(a,{notContext:!0}).add({index:t},{special:!0}).add(e),n.options)};canViewLive_5_0_4_canViewLive.list(t,e,a,n.context,function(e){return n.inverse(n.scope.add(e),n.options)})};var s=helpersCore.resolve(e),l;return!!s&&canReflect_1_18_0_canReflect.isListLike(s)?(l=utils$1.getItemsFragContent(s,n,n.scope),n.stringOnly?l.join(""):l):canReflect_1_18_0_canReflect.isObservableLike(s)&&canReflect_1_18_0_canReflect.isMapLike(s)||s instanceof Object?(l=[],canReflect_1_18_0_canReflect.each(s,function(e,t){var a=new keyObservable(s,t);i={},0<canReflect_1_18_0_canReflect.size(o)&&(o.value&&(i[o.value]=a),o.key&&(i[o.key]=t)),l.push(n.fn(n.scope.add(i,{notContext:!0}).add({key:t},{special:!0}).add(a)))}),n.stringOnly?l.join(""):l):void 0};eachHelper.isLiveBound=!0,eachHelper.requiresOptionsArgument=!0,eachHelper.ignoreArgLookup=function(e){return 1===e};var indexHelper=canAssign_1_3_3_canAssign(function(e,t){t||(t=e,e=0);var n=t.scope.peek("scope.index");return""+(("function"==typeof n?n():n)+e)},{requiresOptionsArgument:!0}),withHelper=function(e,t){var n=e;return t?(e=helpersCore.resolve(e),t.hash&&0<canReflect_1_18_0_canReflect.size(t.hash)&&(n=t.scope.add(t.hash,{notContext:!0}).add(n))):(t=e,e=!0,n=t.hash),t.fn(n||{})};withHelper.requiresOptionsArgument=!0;var dataHelper=function(e,t){var n=(helpersCore.looksLikeOptions(t)?t.context:t)||this;return function(t){canDomData_1_0_3_canDomData.set(t,e,n)}},unlessHelper=function(e,t){return t?ifHelper.apply(this,[e,canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{fn:t.inverse,inverse:t.fn})]):!ifHelper.apply(this,[e])};unlessHelper.requiresOptionsArgument=!0,unlessHelper.isLiveBound=!0;var notConverter={get:function(e,t){return helpersCore.looksLikeOptions(t)?canReflect_1_18_0_canReflect.getValue(e)?t.inverse():t.fn():!canReflect_1_18_0_canReflect.getValue(e)},set:function(e,t){canReflect_1_18_0_canReflect.setValue(t,!e)}};canAssign_1_3_3_canAssign(builtInHelpers,{debugger:debuggerHelper$1,each:eachHelper,eachOf:eachHelper,index:indexHelper,if:ifHelper,is:isHelper,eq:isHelper,unless:unlessHelper,with:withHelper,console:console,data:dataHelper,domData:domDataHelper,switch:switchHelper,joinBase:joinBaseHelper,and:andHelper,or:orHelper,let:Let,for:ForOf,portal:Portal}),canAssign_1_3_3_canAssign(builtInConverters,{not:notConverter}),helpersCore.addBuiltInHelpers(),helpersCore.addBuiltInConverters();var core$1=helpersCore,mustacheLineBreakRegExp$1=/(?:(^|\r?\n)(\s*)(\{\{([\s\S]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([\s\S]*)\}\}\}?)/g,mustacheWhitespaceRegExp$1=/(\s*)(\{\{\{?)(-?)([\s\S]*?)(-?)(\}\}\}?)(\s*)/g;function splitModeFromExpression$1(e,t){e=e.trim();var n=e.charAt(0);return 0<="#/{&^>!<".indexOf(n)?e=e.substr(1).trim():n=null,"{"===n&&t.node&&(n=null),{mode:n,expression:e}}function cleanLineEndings(e){return e.replace(mustacheLineBreakRegExp$1,function(e,t,n,a,r,o,i,s,l,d){o=o||"",t=t||"",n=n||"";var p=splitModeFromExpression$1(r||l,{});return s||0<=">{".indexOf(p.mode)?e:0<="^#!/".indexOf(p.mode)?(n=t+n&&" ",n+a+(0!==d&&i.length?t+"\n":"")):n+a+o+(n.length||0!==d?t+"\n":"")})}function whiteSpaceReplacement(e,t,n,a,r,o,i,s){return"-"===a&&(t=""),"-"===o&&(s=""),t+n+r+i+s}function cleanWhitespaceControl(e){return e.replace(mustacheWhitespaceRegExp$1,whiteSpaceReplacement)}var cleanLineEndings_1=cleanLineEndings,cleanWhitespaceControl_1=cleanWhitespaceControl,canStacheAst_1_1_0_controls={cleanLineEndings:cleanLineEndings_1,cleanWhitespaceControl:cleanWhitespaceControl_1},parse=function(e,t){function n(e){m&&(s[m]=g,m=""),y?o.push(g):r.push(g),i.push({specifier:g,loc:{line:e},attributes:l}),l=new Map}1===arguments.length&&(t=arguments[0],e=void 0);var a=t;a=canStacheAst_1_1_0_controls.cleanWhitespaceControl(a),a=canStacheAst_1_1_0_controls.cleanLineEndings(a);var r=[],o=[],i=[],s={},l=new Map,d=!1,p=!1,c=!1,u=!1,y=!1,m="",g="",h=null,f=canViewParser_4_1_3_canViewParser(a,{filename:e,start:function(e,t){"can-import"===e?(u=t,y=!1,d=!0):"can-dynamic-import"===e?(u=t,y=!0,d=!0):d&&(y=!0,d=!1)},attrStart:function(e){h=e,l.set(h,!0),"from"===e?p=!0:("as"==e||"export-as"==e)&&(c=!0)},attrEnd:function(e){"from"===e?p=!1:("as"==e||"export-as"==e)&&(c=!1)},attrValue:function(e){d&&l.set(h,e),p&&d?g=e:c&&d&&(m=e)},end:function(e,t,a){("can-import"===e||"can-dynamic-import"===e)&&u&&n(a)},close:function(e,t,a){("can-import"===e||"can-dynamic-import"===e)&&n(a)},chars:function(e){0<e.trim().length&&(y=!0)},special:function(){y=!0}},!0);return{intermediate:f,program:f,imports:r,dynamicImports:o,importDeclarations:i,ases:s,exports:s}},canStacheAst_1_1_0_canStacheAst={parse:parse},canImportModule_1_2_0_canImportModule=canNamespace_1_0_0_canNamespace.import=function(e,t){return new Promise(function(n,a){try{var r=global_1();"object"==typeof r.System&&isFunction$1(r.System["import"])?r.System["import"](e,{name:t}).then(n,a):r.define&&r.define.amd?r.require([e],function(e){n(e)}):r.require?n(r.require(e)):"undefined"==typeof stealRequire?n():steal.import(e,{name:t}).then(n,a)}catch(e){a(e)}})};function isFunction$1(e){return"function"==typeof e}var getIntermediateAndImports=canStacheAst_1_1_0_canStacheAst.parse,makeRendererConvertScopes=utils$1.makeRendererConvertScopes,last$2=utils$1.last;canViewCallbacks_5_0_0_canViewCallbacks.tag("content")||canViewCallbacks_5_0_0_canViewCallbacks.tag("content",function(e,t){return t.scope});var isViewSymbol$2=canSymbol_1_6_5_canSymbol.for("can.isView"),svgNamespace="http://www.w3.org/2000/svg",xmlnsAttrNamespaceURI$1="http://www.w3.org/2000/xmlns/",xlinkHrefAttrNamespaceURI$1="http://www.w3.org/1999/xlink",namespaces={svg:svgNamespace,g:svgNamespace,defs:svgNamespace,path:svgNamespace,filter:svgNamespace,feMorphology:svgNamespace,feGaussianBlur:svgNamespace,feOffset:svgNamespace,feComposite:svgNamespace,feColorMatrix:svgNamespace,use:svgNamespace},attrsNamespacesURI$1={xmlns:xmlnsAttrNamespaceURI$1,"xlink:href":xlinkHrefAttrNamespaceURI$1},textContentOnlyTag={style:!0,script:!0};function stache(e,t){1===arguments.length&&(t=arguments[0],e=void 0);var n={};"string"==typeof t&&(t=mustache_core.cleanWhitespaceControl(t),t=mustache_core.cleanLineEndings(t));var a=new html_section(e),r={node:null,attr:null,sectionElementStack:[],text:!1,namespaceStack:[],textContentOnly:null},o=function(e,t,a,o){if(">"===t)e.add(mustache_core.makeLiveBindingPartialRenderer(a,s({filename:e.filename,lineNo:o})));else if("/"===t){var i=e.last();"<"===i.startedWith?(n[a]=e.endSubSectionAndReturnRenderer(),e.removeCurrentNode(),e.removeCurrentNode()):e.endSection(),e instanceof html_section&&r.sectionElementStack.pop()}else if("else"===t)e.inverse();else{var l=e instanceof html_section?mustache_core.makeLiveBindingBranchRenderer:mustache_core.makeStringBranchRenderer;if("{"===t||"&"===t)e.add(l(null,a,s({filename:e.filename,lineNo:o})));else if("#"===t||"^"===t||"<"===t){var d=l(t,a,s({filename:e.filename,lineNo:o}));e.startSection(d,a),e.last().startedWith=t,e instanceof html_section&&r.sectionElementStack.push({type:"section"})}else e.add(l(null,a,s({text:!0,filename:e.filename,lineNo:o})))}},i=function(){var e=r.sectionElementStack[r.sectionElementStack.length-1];return!r.sectionElementStack.length||"section"===e.type||"custom"===e.type},s=function(e){var t={tag:r.node&&r.node.tag,attr:r.attr&&r.attr.name,directlyNested:i(),textContentOnly:!!r.textContentOnly};return e?canAssign_1_3_3_canAssign(t,e):t},l=function(e,t){e.attributes||(e.attributes=[]),e.attributes.unshift(t)};canViewParser_4_1_3_canViewParser(t,{filename:e,start:function(e,t){var n=namespaces[e];n&&!t&&r.namespaceStack.push(n),r.node={tag:e,children:[],namespace:n||last$2(r.namespaceStack)}},end:function(t,n){var o=canViewCallbacks_5_0_0_canViewCallbacks.tag(t),s=i();n?(a.add(r.node),o&&l(r.node,function(e){canViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,t,{scope:e,subtemplate:null,templateType:"stache",directlyNested:s})})):(a.push(r.node),r.sectionElementStack.push({type:o?"custom":null,tag:o?null:t,templates:{},directlyNested:s}),o?a.startSubSection():textContentOnlyTag[t]&&(r.textContentOnly=new text_section(e))),r.node=null},close:function(e){var t=namespaces[e];t&&r.namespaceStack.pop();var n=canViewCallbacks_5_0_0_canViewCallbacks.tag(e),o;n&&(o=a.endSubSectionAndReturnRenderer()),textContentOnlyTag[e]&&(a.last().add(r.textContentOnly.compile(s())),r.textContentOnly=null);var i=a.pop();if(n)if("can-template"===e){var d=r.sectionElementStack[r.sectionElementStack.length-2];o&&(d.templates[i.attrs.name]=makeRendererConvertScopes(o)),a.removeCurrentNode()}else{var p=r.sectionElementStack[r.sectionElementStack.length-1];l(i,function(t){canViewCallbacks_5_0_0_canViewCallbacks.tagHandler(this,e,{scope:t,subtemplate:o?makeRendererConvertScopes(o):o,templateType:"stache",templates:p.templates,directlyNested:p.directlyNested})})}r.sectionElementStack.pop()},attrStart:function(e){r.node.section?r.node.section.add(e+"=\""):r.attr={name:e,value:""}},attrEnd:function(e){var t=attrsNamespacesURI$1[e];if(r.node.section)r.node.section.add("\" ");else{r.node.attrs||(r.node.attrs={}),r.node.attrs[r.attr.name]=r.attr.section?r.attr.section.compile(s()):t?{value:r.attr.value,namespaceURI:attrsNamespacesURI$1[e]}:r.attr.value;var n=canViewCallbacks_5_0_0_canViewCallbacks.attr(e);n&&(!r.node.attributes&&(r.node.attributes=[]),r.node.attributes.push(function(t){n(this,{attributeName:e,scope:t})})),r.attr=null}},attrValue:function(e){var t=r.node.section||r.attr.section;t?t.add(e):r.attr.value+=e},chars:function(e){(r.textContentOnly||a).add(e)},special:function(t,n){var i=mustache_core.splitModeFromExpression(t,r),l=i.mode,d=i.expression;if("else"===d){var p;return p=r.attr&&r.attr.section?r.attr.section:r.node&&r.node.section?r.node.section:r.textContentOnly||a,void p.inverse()}if("!"!==l)if(r.node&&r.node.section)o(r.node.section,l,d,n),0===r.node.section.subSectionDepth()&&(r.node.attributes.push(r.node.section.compile(s())),delete r.node.section);else if(r.attr)r.attr.section||(r.attr.section=new text_section(e),r.attr.value&&r.attr.section.add(r.attr.value)),o(r.attr.section,l,d,n);else if(!r.node)o(r.textContentOnly||a,l,d,n);else if(r.node.attributes||(r.node.attributes=[]),!l)r.node.attributes.push(mustache_core.makeLiveBindingBranchRenderer(null,d,s({filename:a.filename,lineNo:n})));else if("#"===l||"^"===l)r.node.section||(r.node.section=new text_section(e)),o(r.node.section,l,d,n);else throw new Error(l+" is currently not supported within a tag.")},comment:function(e){a.add({comment:e})},done:function(){}});var d=a.compile(),p=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,t){!t||t.helpers||t.partials||t.tags||(t={helpers:t}),canReflect_1_18_0_canReflect.eachKey(t&&t.helpers,function(e){e.requiresOptionsArgument=!0});var a=new canViewScope_4_13_6_templateContext(t);if(canReflect_1_18_0_canReflect.eachKey(n,function(e,t){canReflect_1_18_0_canReflect.setKeyValue(a.partials,t,e)}),canReflect_1_18_0_canReflect.setKeyValue(a,"view",p),!(e instanceof canViewScope_4_13_6_canViewScope))e=new canViewScope_4_13_6_canViewScope(a).add(e);else{var r=new canViewScope_4_13_6_canViewScope(a);r._parent=e._parent,e._parent=r}return d(e.addLetContext())});return p[isViewSymbol$2]=!0,p}canAssign_1_3_3_canAssign(stache,core$1),stache.safeString=function(e){return canReflect_1_18_0_canReflect.assignSymbols({},{"can.toDOM":function(){return e}})},stache.async=function(e){var t=getIntermediateAndImports(e),n=t.imports.map(function(e){return canImportModule_1_2_0_canImportModule(e)});return Promise.all(n).then(function(){return stache(t.intermediate)})};var templates={};stache.from=mustache_core.getTemplateById=function(e){if(!templates[e]){var t=document$1().getElementById(e);t&&(templates[e]=stache("#"+e,t.innerHTML))}return templates[e]},stache.registerPartial=function(e,t){templates[e]="string"==typeof t?stache(t):t},stache.addBindings=canViewCallbacks_5_0_0_canViewCallbacks.attrs;var canStache_5_1_1_canStache=canNamespace_1_0_0_canNamespace.stache=stache,viewModelSymbol=canSymbol_1_6_5_canSymbol.for("can.viewModel"),canViewModel_4_0_3_canViewModel=canNamespace_1_0_0_canNamespace.viewModel=function(e,t,n){if("string"==typeof e?e=document$1().querySelector(e):canReflect_1_18_0_canReflect.isListLike(e)&&!e.nodeType&&(e=e[0]),canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t))return void(e[viewModelSymbol]=t);var a=e[viewModelSymbol];switch(a||(a=new canSimpleMap_4_3_3_canSimpleMap,e[viewModelSymbol]=a),arguments.length){case 0:case 1:return a;case 2:return canReflect_1_18_0_canReflect.getKeyValue(a,t);default:return canReflect_1_18_0_canReflect.setKeyValue(a,t,n),e;}},isDomEventTarget$2=util.isDomEventTarget,canEvent={on:function(e,t,n){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.addEventListener(this,e,t,n):canReflect_1_18_0_canReflect.onKeyValue(this,e,t,n)},off:function(e,t,n){isDomEventTarget$2(this)?canDomEvents_1_3_11_canDomEvents.removeEventListener(this,e,t,n):canReflect_1_18_0_canReflect.offKeyValue(this,e,t,n)},one:function a(e,t,n){var a=function(){return canEvent.off.call(this,e,a,n),t.apply(this,arguments)};return canEvent.on.call(this,e,a,n),this}},canAttributeObservable_2_0_2_event=canEvent,isRadioInput=function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},canAttributeObservable_2_0_2_getEventName=function(e,t){var n="change";return isRadioInput(e)&&"checked"===t&&(n="can-attribute-observable-radiochange"),canAttributeObservable_2_0_2_behaviors.findSpecialListener(t)&&(n=t),n};function getRoot(){return document$1().documentElement}function findParentForm(e){for(;e&&!("FORM"===e.nodeName);)e=e.parentNode;return e}function shouldReceiveEventFromRadio(e,t){var n=e.getAttribute("name");return n&&n===t.getAttribute("name")&&findParentForm(e)===findParentForm(t)}function isRadioInput$1(e){return"INPUT"===e.nodeName&&"radio"===e.type}function attachRootListener(e,t){var n=getRoot(),a=function(n){var a=n.target;if(isRadioInput$1(a))for(var r in t){var o={type:r},i=t[r];i.forEach(function(t){shouldReceiveEventFromRadio(a,t)&&e.dispatch(t,o,!1)})}};return e.addEventListener(n,"change",a),a}function detachRootListener(e,t){var n=getRoot();e.removeEventListener(n,"change",t)}var radioChangeEvent={defaultEventType:"radiochange",addEventListener:function(e,t,n){if(!isRadioInput$1(e))throw new Error("Listeners for "+t+" must be radio inputs");var a=radioChangeEvent._eventTypeTrackedRadios;a||(a=radioChangeEvent._eventTypeTrackedRadios={},!radioChangeEvent._rootListener&&(radioChangeEvent._rootListener=attachRootListener(this,a)));var r=radioChangeEvent._eventTypeTrackedRadios[t];r||(r=radioChangeEvent._eventTypeTrackedRadios[t]=new Set),r.add(e),e.addEventListener(t,n)},removeEventListener:function(e,t,n){e.removeEventListener(t,n);var a=radioChangeEvent._eventTypeTrackedRadios;if(a){var r=a[t];if(r&&(r.delete(e),0===r.size)){for(var o in delete a[t],a)if(a.hasOwnProperty(o))return;delete radioChangeEvent._eventTypeTrackedRadios,detachRootListener(this,radioChangeEvent._rootListener),delete radioChangeEvent._rootListener}}}},canEventDomRadiochange_2_2_1_canEventDomRadiochange=canNamespace_1_0_0_canNamespace.domEventRadioChange=radioChangeEvent,onValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$2=canSymbol_1_6_5_canSymbol.for("can.offValue"),onEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.onEmit"),offEmitSymbol$1=canSymbol_1_6_5_canSymbol.for("can.offEmit"),internalRadioChangeEventType="can-attribute-observable-radiochange";canDomEvents_1_3_11_canDomEvents.addEvent(canEventDomRadiochange_2_2_1_canEventDomRadiochange,internalRadioChangeEventType);var isSelect=function(e){return"select"===e.nodeName.toLowerCase()},isMultipleSelect=function(e,t){return isSelect(e)&&"value"===t&&e.multiple},slice$2=Array.prototype.slice;function canUtilAEL(){var e=slice$2.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.addEventListener.apply(null,e)}function canUtilREL(){var e=slice$2.call(arguments,0);return e.unshift(this),canDomEvents_1_3_11_canDomEvents.removeEventListener.apply(null,e)}function AttributeObservable(e,t,n,a){"string"==typeof n&&(a=n,n=void 0),this.el=e,this.bound=!1,this.prop=isMultipleSelect(e,t)?"values":t,this.event=a||canAttributeObservable_2_0_2_getEventName(e,t),this.handler=this.handler.bind(this),a!==void 0&&(this[onValueSymbol$4]=null,this[offValueSymbol$2]=null,this[onEmitSymbol$1]=AttributeObservable.prototype.on,this[offEmitSymbol$1]=AttributeObservable.prototype.off)}AttributeObservable.prototype=Object.create(settable.prototype),canAssign_1_3_3_canAssign(AttributeObservable.prototype,{constructor:AttributeObservable,get:function(){canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this),!this.bound&&canObservation_4_2_0_canObservation.temporarilyBind(this));var e=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop);return"function"==typeof e&&(e=e.bind(this.el)),e},set:function(e){var t=canAttributeObservable_2_0_2_behaviors.setAttrOrProp(this.el,this.prop,e);return t||(this._value=e),e},handler:function(e,t){var n=this._value,a=[];this._value=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop),(t!==void 0||this._value!==n)&&(a=[this.handlers.getNode([]),this,[e,n]],canQueues_1_3_2_canQueues.enqueueByQueue.apply(canQueues_1_3_2_canQueues,a))},onBound:function(){var e=this;e.bound=!0,e._handler=function(t){e.handler(canAttributeObservable_2_0_2_behaviors.get(e.el,e.prop),t)},e.event===internalRadioChangeEventType&&canAttributeObservable_2_0_2_event.on.call(e.el,"change",e._handler);var t=canAttributeObservable_2_0_2_behaviors.findSpecialListener(e.prop);t&&(e._specialDisposal=t.call(e.el,e.prop,e._handler,canUtilAEL)),canAttributeObservable_2_0_2_event.on.call(e.el,e.event,e._handler),this._value=canAttributeObservable_2_0_2_behaviors.get(this.el,this.prop)},onUnbound:function(){var e=this;e.bound=!1,e.event===internalRadioChangeEventType&&canAttributeObservable_2_0_2_event.off.call(e.el,"change",e._handler),e._specialDisposal&&(e._specialDisposal.call(e.el,canUtilREL),e._specialDisposal=null),canAttributeObservable_2_0_2_event.off.call(e.el,e.event,e._handler)},valueHasDependencies:function(){return!0},getValueDependencies:function(){var e=new Map,t=new Set;return t.add(this.prop),e.set(this.el,t),{keyDependencies:e}}}),canReflect_1_18_0_canReflect.assignSymbols(AttributeObservable.prototype,{"can.isMapLike":!1,"can.getValue":AttributeObservable.prototype.get,"can.setValue":AttributeObservable.prototype.set,"can.onValue":AttributeObservable.prototype.on,"can.offValue":AttributeObservable.prototype.off,"can.valueHasDependencies":AttributeObservable.prototype.hasDependencies,"can.getValueDependencies":AttributeObservable.prototype.getValueDependencies});var canAttributeObservable_2_0_2_canAttributeObservable=AttributeObservable,bindings=new Map,onMatchStr="on:",vmMatchStr="vm:",elMatchStr="el:",byMatchStr=":by:",toMatchStr=":to",fromMatchStr=":from",bindMatchStr=":bind",viewModelBindingStr="viewModel",attributeBindingStr="attribute",scopeBindingStr="scope",viewModelOrAttributeBindingStr="viewModelOrAttribute",viewModelSymbol$1=canSymbol_1_6_5_canSymbol.for("can.viewModel"),preventDataBindingsSymbol=canSymbol_1_6_5_canSymbol.for("can.preventDataBindings"),throwOnlyOneTypeOfBindingError=function(){throw new Error("can-stache-bindings - you can not have contextual bindings ( this:from='value' ) and key bindings ( prop:from='value' ) on one element.")},checkBindingState=function(e,t){var n=t.parent.exports&&t.child.source===viewModelBindingStr;if(n){var a=t.child.name;if(n&&("this"===a||"."===a)){if(e.isSettingViewModel||e.isSettingOnViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingViewModel:!0,initialViewModelData:void 0};}else if(e.isSettingViewModel)throwOnlyOneTypeOfBindingError();else return{isSettingOnViewModel:!0,initialViewModelData:e.initialViewModelData}}else return e},getEventBindingData=function(e,t,n){var a=e.substr(onMatchStr.length),r=t&&t[viewModelSymbol$1],o=startsWith.call(a,elMatchStr),i=startsWith.call(a,vmMatchStr),s=-1<a.indexOf(byMatchStr),l="",d,p,c,u;i?(l="vm",a=a.substr(vmMatchStr.length)):o?(l="el",a=a.substr(elMatchStr.length)):!i&&!o&&(s?d=!0:r?i=!0:o=!0);var y;if(s){var m=a.indexOf(byMatchStr);y=a.substr(m+byMatchStr.length),a=a.substr(0,m)}if(c=a,!o)i?(p=r,s&&(p=r.get(y),u=new canViewScope_4_13_6_canViewScope(r).computeData(y))):d&&(p=n,s&&(p=p.get(y),u=n.computeData(y)));else if(s)throw new Error("binding with :by in element scope is not currently supported");else p=t;return{bindingContext:p,bindingContextObservable:u,eventName:c,bindingCode:l}},onKeyValueSymbol$5=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),makeScopeFromEvent=function(e,t,n,a,r,o){var i=o&&o[onKeyValueSymbol$5]!==void 0,s={element:e,event:t,viewModel:n,arguments:i?Array.prototype.slice.call(a,1):a,args:a};return r.scope.add(s,{special:!0})},runEventCallback=function(e,t,n,a,r){canQueues_1_3_2_canQueues.batch.start();var o=[];o=[function(){var t=r.value(a,{doNotWrapInObservation:!0});return t=canReflect_1_18_0_canReflect.isValueLike(t)?canReflect_1_18_0_canReflect.getValue(t):t,"function"==typeof t?t(e):t},null,null,{}],canQueues_1_3_2_canQueues.mutateQueue.enqueue.apply(canQueues_1_3_2_canQueues.mutateQueue,o),canQueues_1_3_2_canQueues.batch.stop()},behaviors={initializeViewModel:function(e,t,n,a){var r=[],o={},s={isSettingOnViewModel:!1,isSettingViewModel:!1,initialViewModelData:t||{}};e.forEach(function(e){e.binding.startParent();var t=e.siblingBindingData;if(s=checkBindingState(s,t),t.parent.exports){var n=t.child.setCompute?canViewScope_4_13_6_makeComputeLike(e.binding.parent):e.binding.parentValue;void 0!==n&&(s.isSettingViewModel?s.initialViewModelData=n:s.initialViewModelData[cleanVMName(t.child.name,a.scope)]=n)}r.push(e.binding.start.bind(e.binding)),o[t.bindingAttributeName]=e.binding.stop.bind(e.binding)});for(var l=n(s.initialViewModelData,0<e.length,s),d=0,p=r.length;d<p;d++)r[d]();return{viewModel:l,onTeardowns:o,bindingsState:s}},viewModel:function(e,t,n,a,r){var o=canAssign_1_3_3_canAssign({},a),i=canAssign_1_3_3_canAssign({element:e,viewModel:void 0},t),s={attributeViewModelBindings:o,alreadyUpdatedChild:!0,favorViewModel:!0},l=[];if(canReflect_1_18_0_canReflect.eachListLike(e.attributes||[],function(e){var t=makeDataBinding(e,i,s);t&&l.push(t)}),!(r&&0===l.length)){var d=behaviors.initializeViewModel(l,a,function(){i.viewModel=n.apply(this,arguments)},i),p=d.onTeardowns,c=d.bindingsState,u={},y;return c.isSettingViewModel||(s.alreadyUpdatedChild=!1,y=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,function(t){var n=t.attributeName,a=e.getAttribute(n);p[n]&&p[n]();var r=u[n]&&u[n].parent.source===attributeBindingStr;if(null!==a||r){var o=makeDataBinding({name:n,value:a},i,s);o&&(o.binding.start(),u[n]=o.siblingBindingData,p[n]=o.binding.stop.bind(o.binding))}})),function(){for(var e in y&&(y(),y=void 0),p)p[e]()}}},data:function(e,t){if(!(!0===e[preventDataBindingsSymbol]||canDomData_1_0_3_canDomData.get(e,"preventDataBindings"))){var n=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){return i||(i=canViewModel_4_0_3_canViewModel(e))}),a={element:e,templateType:t.templateType,scope:t.scope,parentNodeList:t.nodeList,get viewModel(){return n()}},r=makeDataBinding({name:t.attributeName,value:e.getAttribute(t.attributeName)},a,{syncChildWithParent:!1}),o=!1,i,s,l,d;o||(r.binding.start(),o=!0);var p=function(n){var r=n.attributeName,o=e.getAttribute(r);if(r===t.attributeName&&(s&&s(),null!==o)){var i=makeDataBinding({name:r,value:o},a,{syncChildWithParent:!1});i&&(i.binding.start(),s=i.binding.stop.bind(i.binding)),s=i.onTeardown}},c=function(){s&&(s(),s=void 0),d&&(d(),d=void 0),l&&(l(),l=void 0)};s=r.binding.stop.bind(r.binding),l=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,p),d=canDomMutate_2_0_8_canDomMutate.onNodeDisconnected(e,function(){var t=e.ownerDocument,n=t.contains?t:t.documentElement;n&&!1!==n.contains(e)||c()})}},event:function(e,t){function n(e,t){t&&map$1.off.call(t,o,l),e&&(map$1.on.call(e,o,l),y=e)}var a=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(t.attributeName),r,o,i,s;if(-1!==a.indexOf(toMatchStr+":")||-1!==a.indexOf(fromMatchStr+":")||-1!==a.indexOf(bindMatchStr+":"))return this.data(e,t);if(startsWith.call(a,onMatchStr))r=getEventBindingData(a,e,t.scope),o=r.eventName,i=r.bindingContext,s=r.bindingContextObservable;else throw new Error("can-stache-bindings - unsupported event bindings "+a);var l=function(n){var r=e.getAttribute(canAttributeEncoder_1_1_4_canAttributeEncoder.encode(a));if(r){var o=e[viewModelSymbol$1],s=expression_1.parse(r,{lookupRule:function(){return expression_1.Lookup},methodRule:"call"}),l=makeScopeFromEvent(e,n,o,arguments,t,i);if(s instanceof expression_1.Hashes){var d=s.hashExprs,p=Object.keys(d)[0],c=s.hashExprs[p].value(l),u=canReflect_1_18_0_canReflect.isObservableLike(c)&&canReflect_1_18_0_canReflect.isValueLike(c);l.set(p,u?canReflect_1_18_0_canReflect.getValue(c):c)}else if(s instanceof expression_1.Call)runEventCallback(e,n,t,l,s,a,r);else throw new Error("can-stache-bindings: Event bindings must be a call expression. Make sure you have a () in "+t.attributeName+"="+JSON.stringify(r))}},d=function(){i&&map$1.off.call(i,o,l),p&&(p(),p=void 0),c&&(c(),c=void 0),u&&(u(),u=void 0)},p,c,u,y;if(p=canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange(e,function(t){var n=t.attributeName===a,r=!e.getAttribute(a);n&&r&&d()}),c=canDomMutate_2_0_8_canDomMutate.onNodeDisconnected(e,function(){var t=e.ownerDocument,n=t.contains?t:t.documentElement;n&&n.contains(e)||d()}),!i&&s)u=function(){y&&map$1.off.call(y,o,l),canReflect_1_18_0_canReflect.offValue(s,n)},canReflect_1_18_0_canReflect.onValue(s,n);else try{map$1.on.call(i,o,l)}catch(e){if(/Unable to bind/.test(e.message)){var m="can-stache-bindings - Unable to bind \""+o+"\"";throw m+=": \""+o+"\" is a property on a plain object \"",m+=JSON.stringify(i),m+="\". Binding is available with observable objects only.",m+=" For more details check https://canjs.com/doc/can-stache-bindings.html#Callafunctionwhenaneventhappensonavalueinthescope_animation_",new Error(m)}else throw e}}};bindings.set(/[\w\.:]+:to$/,behaviors.data),bindings.set(/[\w\.:]+:from$/,behaviors.data),bindings.set(/[\w\.:]+:bind$/,behaviors.data),bindings.set(/[\w\.:]+:raw$/,behaviors.data),bindings.set(/[\w\.:]+:to:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:from:on:[\w\.:]+/,behaviors.data),bindings.set(/[\w\.:]+:bind:on:[\w\.:]+/,behaviors.data),bindings.set(/on:[\w\.:]+/,behaviors.event);var getObservableFrom={viewModelOrAttribute:function(e,t){var n=t.element[viewModelSymbol$1];return n?this.viewModel.apply(this,arguments):this.attribute.apply(this,arguments)},scope:function(e,t){var n=t.scope,a=e.name,r=e.exports;if(!a)return new canSimpleObservable_2_5_0_canSimpleObservable;if(r||0<=a.indexOf("(")||0<=a.indexOf("=")){var o=expression_1.parse(a,{baseMethodType:"Call"});return o instanceof expression_1.Hashes?new canSimpleObservable_2_5_0_canSimpleObservable(function(){var e=o.hashExprs,t=Object.keys(e)[0],a=o.hashExprs[t].value(n),r=canReflect_1_18_0_canReflect.isObservableLike(a)&&canReflect_1_18_0_canReflect.isValueLike(a);n.set(t,r?canReflect_1_18_0_canReflect.getValue(a):a)}):o.value(n)}var i={};canReflect_1_18_0_canReflect.assignSymbols(i,{"can.getValue":function(){},"can.valueHasDependencies":function(){return!1},"can.setValue":function(e){var t=expression_1.parse(cleanVMName(a,n),{baseMethodType:"Call"}),r=t.value(n);canReflect_1_18_0_canReflect.setValue(r,e)},"can.getWhatIChange":function(){var e=n.getDataForScopeSet(cleanVMName(a,n)),t=new Map,r=new Set;return r.add(e.key),t.set(e.parent,r),{mutate:{keyDependencies:t}}},"can.getName":function(){}});var s=n.getDataForScopeSet(cleanVMName(a,n));return s.parent&&s.key&&canReflectDependencies_1_1_2_canReflectDependencies.addMutatedBy(s.parent,s.key,i),i},viewModel:function(e,t){var n=t.scope,a=e.name,r=e.setCompute,o=cleanVMName(a,n),i="."===a||"this"===a,s=i?[]:canStacheKey_1_4_3_canStacheKey.reads(a),l=new setter(function(){var e=t.viewModel;return canStacheKey_1_4_3_canStacheKey.read(e,s,{}).value},function(e){var n=t.viewModel;if(r){var a=canReflect_1_18_0_canReflect.getKeyValue(n,o);canReflect_1_18_0_canReflect.isObservableLike(a)?canReflect_1_18_0_canReflect.setValue(a,e):canReflect_1_18_0_canReflect.setKeyValue(n,o,new canSimpleObservable_2_5_0_canSimpleObservable(canReflect_1_18_0_canReflect.getValue(e)))}else i?canReflect_1_18_0_canReflect.setValue(n,e):canStacheKey_1_4_3_canStacheKey.write(n,s,e)});return l},attribute:function(e,t){return"this"===e.name?canReflect_1_18_0_canReflect.assignSymbols({},{"can.getValue":function(){return t.element},"can.valueHasDependencies":function(){return!1},"can.getName":function(){}}):new canAttributeObservable_2_0_2_canAttributeObservable(t.element,e.name,{},e.event)}},startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)};function getEventName(e){if(e.special.on!==void 0)return e.tokens[e.special.on+1]}var siblingBindingRules={to:{child:{exports:!0,syncSibling:!1},parent:{exports:!1,syncSibling:!1}},from:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}},bind:{child:{exports:!0,syncSibling:!1},parent:{exports:!0,syncSibling:!0}},raw:{child:{exports:!1,syncSibling:!1},parent:{exports:!0,syncSibling:!1}}},bindingNames=[],special$1={vm:!0,on:!0};canReflect_1_18_0_canReflect.eachKey(siblingBindingRules,function(e,t){bindingNames.push(t),special$1[t]=!0});function tokenize(e){var t=e.split(":"),n={tokens:[],special:{}};return t.forEach(function(e){special$1[e]?n.special[e]=n.tokens.push(e)-1:n.tokens.push(e)}),n}var getChildBindingStr=function(e,t){return 0<=e.indexOf("vm")?viewModelBindingStr:0<=e.indexOf("el")?attributeBindingStr:t?viewModelBindingStr:viewModelOrAttributeBindingStr};function getSiblingBindingData(e,t){var n=canAttributeEncoder_1_1_4_canAttributeEncoder.decode(e.name),a=e.value||"",r=tokenize(n),o,i,s;if(bindingNames.forEach(function(e){if(void 0!==r.special[e]&&0<r.special[e])return i=e,s=r.special[e],!1}),i){var l=getEventName(r),d=!(l&&"bind"!==i);return o={parent:canAssign_1_3_3_canAssign({source:scopeBindingStr,name:r.special.raw?"\""+a+"\"":a},siblingBindingRules[i].parent),child:canAssign_1_3_3_canAssign({source:getChildBindingStr(r.tokens,t&&t.favorViewModel),name:r.tokens[s-1],event:l},siblingBindingRules[i].child),bindingAttributeName:n,initializeValues:d},"~"===a.trim().charAt(0)&&(o.child.setCompute=!0),o}}var makeDataBinding=function(e,t,n){var a=getSiblingBindingData(e,n);if(a){var r=getObservableFrom[a.parent.source](a.parent,t,n),o=getObservableFrom[a.child.source](a.child,t,n,r),i=!!a.child.exports,s=!!a.parent.exports,l={child:o,childToParent:i,cycles:!0===i&&!0===s?0:100,onInitDoNotUpdateChild:n.alreadyUpdatedChild||!1===a.initializeValues,onInitDoNotUpdateParent:!1===a.initializeValues,onInitSetUndefinedParentIfChildIsDefined:!0,parent:r,parentToChild:s,priority:t.parentNodeList?t.parentNodeList.nesting+1:void 0,queue:"dom",sticky:a.parent.syncSibling?"childSticksToParent":void 0,element:t.element},d=new canBind_1_5_1_canBind(l);return{siblingBindingData:a,binding:d}}},cleanVMName=function(e){return e.replace(/@/g,"")},canStacheBindings={behaviors:behaviors,getSiblingBindingData:getSiblingBindingData,bindings:bindings,getObservableFrom:getObservableFrom,makeDataBinding:makeDataBinding};canStacheBindings[canSymbol_1_6_5_canSymbol.for("can.callbackMap")]=bindings;var canStacheBindings_5_0_4_canStacheBindings=canStacheBindings;const rendererSymbol=Symbol.for("can.stacheRenderer"),viewInsertSymbol$2=Symbol.for("can.viewInsert");canStache_5_1_1_canStache.addBindings(canStacheBindings_5_0_4_canStacheBindings);var mixinStacheView=function(e=HTMLElement){class t extends e{render(e,t){super.render&&super.render(e);let n=this.constructor[rendererSymbol];if(!n){const e=this.constructor.view,t=canReflect_1_18_0_canReflect.getName(this.constructor)+"View";n="function"==typeof e?e:canStache_5_1_1_canStache(t,e||""),this.constructor[rendererSymbol]=n}const a=n(new canViewScope_4_13_6_canViewScope(this,null,{viewModel:!0}),t),r=this.viewRoot||this;canDomMutate_2_0_8_node.appendChild.call(r,a)}connect(){super.connect&&super.connect();const e=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(this,()=>{var t=this.ownerDocument,n=t.contains?t:t.documentElement;n&&n.contains(this)||(e(),this.disconnect())})}[viewInsertSymbol$2](){return this}}return t.prototype[Symbol.for("can.preventDataBindings")]=!0,t};const viewModelSymbol$2=Symbol.for("can.viewModel");var mixinViewmodelSymbol=function(e=HTMLElement){class t extends e{}return canDefineLazyValue_1_1_1_defineLazyValue(t.prototype,viewModelSymbol$2,function(){return this}),t};const getValueSymbol$3=Symbol.for("can.getValue"),setValueSymbol$4=Symbol.for("can.setValue"),metaSymbol$7=Symbol.for("can.meta");var mixinBindings=function(e=HTMLElement){return class extends e{bindings(e){void 0===this[metaSymbol$7]&&(this[metaSymbol$7]={});const t={};return canReflect_1_18_0_canReflect.eachKey(e,(e,n)=>{const a=key(this,n);t[n]={parent:e,child:a}}),this[metaSymbol$7]._connectedBindings=t,this}initialize(e){var t=this[metaSymbol$7]&&this[metaSymbol$7]._connectedBindings;t&&(e=e||{},this[metaSymbol$7]._bindings===void 0&&(this[metaSymbol$7]._bindings=[]),canReflect_1_18_0_canReflect.eachKey(t,(t,n)=>{const{child:a,parent:r}=t;var o=null!=r&&!!r[getValueSymbol$3],i=null!=r&&!!r[setValueSymbol$4];if(o||i){var s=new canBind_1_5_1_canBind({child:a,parent:r,queue:"dom",element:this});this[metaSymbol$7]._bindings.push({binding:s,siblingBindingData:{parent:{source:"scope",exports:o},child:{source:"viewModel",exports:i,name:n},bindingAttributeName:n}})}else e[n]=r}),this[metaSymbol$7].other=!0),super.initialize&&super.initialize(e)}render(e,t){const n=this.viewRoot||this;n.innerHTML="",super.render&&super.render(e,t)}disconnect(){delete this[metaSymbol$7]._bindings,super.disconnect&&super.disconnect()}}};const metaSymbol$8=Symbol.for("can.meta"),inSetupSymbol$5=Symbol.for("can.initializing");var mixinInitializeBindings=function(e=HTMLElement){return class extends e{initialize(e){var t=this[metaSymbol$8]&&this[metaSymbol$8]._bindings;if(t&&t.length){const a=this[inSetupSymbol$5];this[inSetupSymbol$5]=!1;const r={element:this};var n=canStacheBindings_5_0_4_canStacheBindings.behaviors.initializeViewModel(t,e,e=>(super.initialize(e),this),r);this[metaSymbol$8]._connectedBindingsTeardown=function(){for(var e in n.onTeardowns)n.onTeardowns[e]()},this[inSetupSymbol$5]=a}else super.initialize&&super.initialize(e)}disconnect(){this[metaSymbol$8]&&this[metaSymbol$8]._connectedBindingsTeardown&&(this[metaSymbol$8]._connectedBindingsTeardown(),this[metaSymbol$8]._connectedBindingsTeardown=null),super.disconnect&&super.disconnect()}}};const{mixins:mixins$6}=mixins,metaSymbol$9=Symbol.for("can.meta");function baseAttributeChangedCallback(){this.attributeChangedCallback!==baseAttributeChangedCallback&&this.attributeChangedCallback.apply(this,arguments)}var mixinBindBehaviour=function(e=HTMLElement){class t extends e{initialize(e){void 0===this[metaSymbol$9]&&(this[metaSymbol$9]={}),void 0===this[metaSymbol$9]._bindings&&(this[metaSymbol$9]._bindings=[]),Object.keys(this.constructor[metaSymbol$9]._uninitializedBindings).forEach(e=>{const t=this.constructor[metaSymbol$9]._uninitializedBindings[e](this);this[metaSymbol$9]._bindings.push({binding:t,siblingBindingData:{parent:{source:"scope",exports:!0},child:{source:"viewModel",exports:!0,name:e},bindingAttributeName:e}})}),super.initialize&&super.initialize(e)}}return Object.defineProperty(t.prototype,"attributeChangedCallback",{value:baseAttributeChangedCallback,writable:!0}),t},initializeObservedAttributes=function(e){Object.defineProperty(e,"observedAttributes",{get(){let e=!1;mixins$6.finalizeClass(this),void 0===this[metaSymbol$9]&&(this[metaSymbol$9]={}),void 0===this[metaSymbol$9]._uninitializedBindings&&(this[metaSymbol$9]._uninitializedBindings={});const t=this.prototype._define&&this.prototype._define.definitions;return t&&Object.keys(t).forEach(n=>{const a=t[n];if("function"==typeof a.bind){const t=a.bind(n,this);this[metaSymbol$9]._uninitializedBindings[n]=t,e=!0}}),e?this.observedAttributes:[]}})};mixinBindBehaviour.initializeObservedAttributes=initializeObservedAttributes;const{initializeObservedAttributes:initializeObservedAttributes$1}=mixinBindBehaviour,{createConstructorFunction:createConstructorFunction$3}=mixins,initializeSymbol=Symbol.for("can.initialize"),teardownHandlersSymbol$1=Symbol.for("can.teardownHandlers"),isViewSymbol$3=Symbol.for("can.isView");function rendererWasCalledWithData(e){return e instanceof canViewScope_4_13_6_canViewScope&&e._parent&&e._parent._context instanceof canViewScope_4_13_6_canViewScope.TemplateContext}function addContext(e,t){function n(n){return rendererWasCalledWithData(n)?e(t.scope.addLetContext(n._context)):e(t.scope.addLetContext(n))}return n[isViewSymbol$3]=!0,n}function DeriveElement(e=HTMLElement){class t extends mixinLifecycleMethods(mixinBindings(mixinBindBehaviour(mixinInitializeBindings(mixinViewmodelSymbol(mixinStacheView(mixinProps(e))))))){[initializeSymbol](e,t){const n=canStacheBindings_5_0_4_canStacheBindings.behaviors.viewModel(e,t,function(n){for(let e in t.templates)n[e]=addContext(t.templates[e],t);return e.render(n),e});e[teardownHandlersSymbol$1]&&e[teardownHandlersSymbol$1].push(n)}}const n=createConstructorFunction$3(t);return initializeObservedAttributes$1(n),n}var canStacheElement=canNamespace_1_0_0_canNamespace.StacheElement=DeriveElement(),Compute$1=function(e){return arguments.length?canReflect_1_18_0_canReflect.setValue(this,e):canReflect_1_18_0_canReflect.getValue(this)},translationHelpers=new WeakMap,makeCompute=function(e){var t=Compute$1.bind(e);return t.on=t.bind=t.addEventListener=function(n,a){var r=translationHelpers.get(a);r||(r=function(e,n){a.call(t,{type:"change"},e,n)},translationHelpers.set(a,r)),canReflect_1_18_0_canReflect.onValue(e,r)},t.off=t.unbind=t.removeEventListener=function(t,n){canReflect_1_18_0_canReflect.offValue(e,translationHelpers.get(n))},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.getValue":function(){return canReflect_1_18_0_canReflect.getValue(e)},"can.setValue":function(t){return canReflect_1_18_0_canReflect.setValue(e,t)},"can.onValue":function(t,n){return canReflect_1_18_0_canReflect.onValue(e,t,n)},"can.offValue":function(t,n){return canReflect_1_18_0_canReflect.offValue(e,t,n)},"can.valueHasDependencies":function(){return canReflect_1_18_0_canReflect.valueHasDependencies(e)},"can.getPriority":function(){return canReflect_1_18_0_canReflect.getPriority(e)},"can.setPriority":function(t){canReflect_1_18_0_canReflect.setPriority(e,t)},"can.isValueLike":!0,"can.isFunctionLike":!1}),t.isComputed=!0,t};function stringify(e){return e&&"object"==typeof e?("serialize"in e?e=e.serialize():"function"==typeof e.slice?e=e.slice():canReflect_1_18_0_canReflect.assign({},e),canReflect_1_18_0_canReflect.eachKey(e,function(t,n){e[n]=stringify(t)})):void 0!==e&&null!==e&&"function"==typeof e.toString&&(e=e.toString()),e}function stringCoercingMapDecorator(e){var t=canSymbol_1_6_5_canSymbol.for("can.route.stringCoercingMapDecorator");if(!e.attr[t]){var n=e.attr;e.attr=function(e){var t="string"==typeof e&&(void 0===this.define||void 0===this.define[e]||!!this.define[e].serialize),a;return a=t?stringify(Array.apply(null,arguments)):arguments,n.apply(this,a)},canReflect_1_18_0_canReflect.setKeyValue(e.attr,t,!0)}return e}var stringCoercingMapDecorator_1=stringCoercingMapDecorator,stringify_1=stringify,stringCoercion={stringCoercingMapDecorator:stringCoercingMapDecorator_1,stringify:stringify_1},stringify$1=stringCoercion.stringify,Stringify={};Stringify[canSymbol_1_6_5_canSymbol.for("can.new")]=function(e){return stringify$1(e)},Stringify[canSymbol_1_6_5_canSymbol.for("can.isMember")]=function(e){return"string"==typeof e};class RouteData extends canObservableObject{static get propertyDefaults(){return{type:Stringify}}}var routedata=RouteData,urlDataObservable=new canSimpleObservable_2_5_0_canSimpleObservable(null);canReflect_1_18_0_canReflect.setName(urlDataObservable,"route.urlData");var bindingProxy={defaultBinding:null,urlDataObservable:urlDataObservable,bindings:{},call:function(){var e=canReflect_1_18_0_canReflect.toArray(arguments),t=e.shift(),n=urlDataObservable.value;if(null===n)throw new Error("there is no current binding!!!");var a=n[0===t.indexOf("can.")?canSymbol_1_6_5_canSymbol.for(t):t];return a.apply?a.apply(n,e):a}},bindingProxy_1=bindingProxy,regexps={curlies:/\{\s*([\w.]+)\s*\}/g,colon:/\:([\w.]+)/g},map$2=function(e,t){var n=[],a;for(var r in a=canReflect_1_18_0_canReflect.assignMap({},e),canReflect_1_18_0_canReflect.eachKey(t,function(r,o){e&&e.hasOwnProperty(o)?t[o]!==e[o]&&n.push({key:o,type:"set",value:r}):n.push({key:o,type:"add",value:r}),delete a[o]}),a)n.push({key:r,type:"delete"});return n};function removeBackslash(e){return e.replace(/\\/g,"")}function wrapQuote(e){return(e+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")}var RouteRegistry={routes:{},register:function(e,t){var n=bindingProxy_1.call("root");n.lastIndexOf("/")===n.length-1&&0===e.indexOf("/")&&(e=e.substr(1));var a;a=regexps.colon.test(e)?regexps.colon:regexps.curlies,t=t||{};for(var r=a.lastIndex=0,o=[],i="",s=bindingProxy_1.call("querySeparator"),l=bindingProxy_1.call("matchSlashes"),d,p;d=a.exec(e);)o.push(d[1]),i+=removeBackslash(e.substring(r,a.lastIndex-d[0].length)),p="\\"+(removeBackslash(e.substr(a.lastIndex,1))||s+(l?"":"|/")),i+="([^"+p+"]"+(t[d[1]]?"*":"+")+")",r=a.lastIndex;return i+=removeBackslash(e.substr(r)),RouteRegistry.routes[e]={test:new RegExp("^"+i+"($|"+wrapQuote(s)+")"),route:e,names:o,defaults:t,length:e.split("/").length}}},register=RouteRegistry,digitTest=/^\d+$/,keyBreaker=/([^\[\]]+)|(\[\])/g,paramTest=/([^?#]*)(#.*)?$/,entityRegex=/%([^0-9a-f][0-9a-f]|[0-9a-f][^0-9a-f]|[^0-9a-f][^0-9a-f])/i,startChars={"#":!0,"?":!0},prep=function(t){!0===startChars[t.charAt(0)]&&(t=t.substr(1)),t=t.replace(/\+/g," ");try{return decodeURIComponent(t)}catch(n){return decodeURIComponent(t.replace(entityRegex,function(e,t){return"%25"+t}))}};function isArrayLikeName(e){return digitTest.test(e)||"[]"===e}function idenity(e){return e}var canDeparam_1_2_3_canDeparam=canNamespace_1_0_0_canNamespace.deparam=function(e,t){t=t||idenity;var n={},a,r;return e&&paramTest.test(e)&&(a=e.split("&"),a.forEach(function(e){var a=e.split("="),o=prep(a.shift()),i=prep(a.join("=")),s=n;if(o){a=o.match(keyBreaker);for(var d=0,p=a.length-1;d<p;d++){var l=a[d],c=a[d+1],u=isArrayLikeName(l)&&s instanceof Array;s[l]||(u?s.push(isArrayLikeName(c)?[]:{}):s[l]=isArrayLikeName(c)?[]:{}),s=u?s[s.length-1]:s[l]}r=a.pop(),isArrayLikeName(r)?s.push(t(i)):s[r]=t(i)}})),n};function decode(e){try{return decodeURIComponent(e)}catch(t){return unescape(e)}}function toURLFragment(e){var t=bindingProxy_1.call("root");return t.lastIndexOf("/")===t.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),e}function canRoute_getRule(e){e=toURLFragment(e);var t={length:-1};if(canReflect_1_18_0_canReflect.eachKey(register.routes,function(n){n.test.test(e)&&n.length>t.length&&(t=n)}),-1<t.length)return t}function canRoute_deparam(e){var t=canRoute_getRule(e),n=bindingProxy_1.call("querySeparator"),a=bindingProxy_1.call("paramsMatcher");if(e=toURLFragment(e),t){var r=e.match(t.test),o=r.shift(),i=e.substr(o.length-(r[r.length-1]===n?1:0)),s=i&&a.test(i)?canDeparam_1_2_3_canDeparam(i.slice(1)):{};return s=canReflect_1_18_0_canReflect.assignDeep(canReflect_1_18_0_canReflect.assignDeep({},t.defaults),s),r.forEach(function(e,a){e&&e!==n&&(s[t.names[a]]=decode(e))}),s}return e.charAt(0)!==n&&(e=n+e),a.test(e)?canDeparam_1_2_3_canDeparam(e.slice(1)):{}}canRoute_deparam.getRule=canRoute_getRule;var deparam_1=canRoute_deparam;function buildParam(e,t,n){if(Array.isArray(t))for(var a=0,r=t.length;a<r;++a){var o=t[a],s="object"==typeof o?"["+a+"]":"[]";buildParam(e+s,o,n)}else if(t&&"object"==typeof t)for(var l in t)buildParam(e+"["+l+"]",t[l],n);else n(e,t)}var canParam_1_1_3_canParam=canNamespace_1_0_0_canNamespace.param=function(e){var t=[],n=function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))};for(var a in e)buildParam(a,e[a],n);return t.join("&").replace(/%20/g,"+")};function matchesData(e,t){var n=0,a={};for(var r in e.defaults)e.defaults[r]===t[r]&&(a[r]=1,n++);for(var o=0;o<e.names.length;o++){if(!t.hasOwnProperty(e.names[o]))return-1;a[e.names[o]]||n++}return n}function getMatchedRoute(e,t){var n=0,a=0,r,o;return delete e.route,canReflect_1_18_0_canReflect.eachKey(e,function(){a++}),canReflect_1_18_0_canReflect.eachKey(register.routes,function(t){if(o=matchesData(t,e),o>n&&(r=t,n=o),o>=a)return!1}),register.routes[t]&&matchesData(register.routes[t],e)===n&&(r=register.routes[t]),r}function paramFromRoute(e,t){var n,a,r,o;return e?(n=canReflect_1_18_0_canReflect.assignMap({},t),o=regexps.colon.test(e.route)?regexps.colon:regexps.curlies,a=e.route.replace(o,function(a,r){return delete n[r],t[r]===e.defaults[r]?"":encodeURIComponent(t[r])}).replace("\\",""),canReflect_1_18_0_canReflect.eachKey(e.defaults,function(e,t){n[t]===e&&delete n[t]}),r=canParam_1_1_3_canParam(n),a+(r?bindingProxy_1.call("querySeparator")+r:"")):0===canReflect_1_18_0_canReflect.size(t)?"":bindingProxy_1.call("querySeparator")+canParam_1_1_3_canParam(t)}function canRoute_param(e,t){return paramFromRoute(getMatchedRoute(e,t),e)}var param_1=canRoute_param;canRoute_param.paramFromRoute=paramFromRoute,canRoute_param.getMatchedRoute=getMatchedRoute;function formatAttributes(e){var t=[];return canReflect_1_18_0_canReflect.eachKey(e,function(e,n){var a="className"===n?"class":n,r="href"===n?e:canString_1_1_0_canString.esc(e);t.push(a+"=\""+r+"\"")}),t.join(" ")}function matchCheck(e,t){for(var n in e){var a=e[n],r=t[n];if(a&&r&&"object"==typeof a&&"object"==typeof t)return matchCheck(a,r);if(a!=r)return!1}return!0}function canRoute_url(e,t){if(t){var n=deparam_1(bindingProxy_1.call("can.getValue"));e=canReflect_1_18_0_canReflect.assignMap(canReflect_1_18_0_canReflect.assignMap({},n),e)}return bindingProxy_1.call("root")+param_1(e)}var urlHelpers={url:canRoute_url,link:function(e,t,n,a){return"<a "+formatAttributes(canReflect_1_18_0_canReflect.assignMap({href:canRoute_url(t,a)},n))+">"+e+"</a>"},isCurrent:function(e,t){var n=bindingProxy_1.call("can.getValue");if(t){var a=deparam_1(n);return matchCheck(e,a)}return n===param_1(e)}},paramsMatcher=/^(?:&[^=]+=[^&]*)+/;function getHash(){var e=location_1();return e.href.split(/#!?/)[1]||""}function HashchangeObservable(){var e=this.dispatchHandlers.bind(this),t=this;this._value="",this.handlers=new canKeyTree_1_2_2_canKeyTree([Object,Array],{onFirst:function(){t._value=getHash(),canDomEvents_1_3_11_canDomEvents.addEventListener(window,"hashchange",e)},onEmpty:function(){canDomEvents_1_3_11_canDomEvents.removeEventListener(window,"hashchange",e)}})}HashchangeObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),HashchangeObservable.constructor=HashchangeObservable,canReflect_1_18_0_canReflect.assign(HashchangeObservable.prototype,{paramsMatcher:paramsMatcher,querySeparator:"&",matchSlashes:!1,root:"#!",dispatchHandlers:function(){var e=this._value;this._value=getHash(),e!==this._value&&canQueues_1_3_2_canQueues.enqueueByQueue(this.handlers.getNode([]),this,[this._value,e])},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),getHash()},set:function(e){var t=location_1();return(e||t.hash)&&(t.hash==="#"+e||(t.hash="!"+e)),e}}),Object.defineProperty(HashchangeObservable.prototype,"value",{get:function(){return canReflect_1_18_0_canReflect.getValue(this)},set:function(e){canReflect_1_18_0_canReflect.setValue(this,e)}}),canReflect_1_18_0_canReflect.assignSymbols(HashchangeObservable.prototype,{"can.getValue":HashchangeObservable.prototype.get,"can.setValue":HashchangeObservable.prototype.set,"can.onValue":HashchangeObservable.prototype.on,"can.offValue":HashchangeObservable.prototype.off,"can.isMapLike":!1,"can.valueHasDependencies":function(){return!0}});var canRouteHash_1_0_2_canRouteHash=HashchangeObservable,funcConstructor=Function;canGlobals_1_2_2_canGlobalsInstance.define("isWebWorker",function(){var e=funcConstructor("return this")();return"undefined"!=typeof WorkerGlobalScope&&e instanceof WorkerGlobalScope});var isWebWorker=canGlobals_1_2_2_canGlobalsInstance.makeExport("isWebWorker"),stringCoercingMapDecorator$1=stringCoercion.stringCoercingMapDecorator,hashchangeObservable=new canRouteHash_1_0_2_canRouteHash;bindingProxy_1.bindings.hashchange=hashchangeObservable,bindingProxy_1.defaultBinding="hashchange",bindingProxy_1.urlDataObservable.value=hashchangeObservable;function canRoute(e,t){return register.register(e,t),canRoute}var currentRuleObservable=new canObservation_4_2_0_canObservation(function(){var e=bindingProxy_1.call("can.getValue");return canRoute.rule(e)}),timer;function updateUrl(){clearTimeout(timer),timer=setTimeout(function(){var e=canReflect_1_18_0_canReflect.serialize(canRoute.data),t=currentRuleObservable.get(),n=param_1.getMatchedRoute(e,t),a=param_1.paramFromRoute(n,e);bindingProxy_1.call("can.setValue",a);var r=canRoute._onStartComplete;r&&(canRoute._onStartComplete=void 0,r())},10)}function updateRouteData(){var e=bindingProxy_1.call("can.getValue");canQueues_1_3_2_canQueues.batch.start();var t=canRoute.deparam(e);delete t.route,canReflect_1_18_0_canReflect.update(canRoute.data,t),canQueues_1_3_2_canQueues.batch.stop()}Object.defineProperty(canRoute,"routes",{get:function(){return register.routes},set:function(e){return register.routes=e}}),Object.defineProperty(canRoute,"defaultBinding",{get:function(){return bindingProxy_1.defaultBinding},set:function(e){bindingProxy_1.defaultBinding=e;var t=bindingProxy_1.bindings[bindingProxy_1.defaultBinding];t&&(bindingProxy_1.urlDataObservable.value=t)}}),Object.defineProperty(canRoute,"urlData",{get:function(){return bindingProxy_1.urlDataObservable.value},set:function(e){canRoute._teardown(),bindingProxy_1.urlDataObservable.value=e}}),canReflect_1_18_0_canReflect.assignMap(canRoute,{param:param_1,deparam:deparam_1,map:function(e){canRoute.data=e},start:function(e){if(canRoute.data instanceof routedata){var t=canRoute.data,n=function(e,n){var a=e[n],r=null==a?canType_1_1_5_canType.maybeConvert(String):canType_1_1_5_canType.maybeConvert(a.constructor);canReflect_1_18_0_canReflect.defineInstanceKey(t.constructor,n,{type:r})};canReflect_1_18_0_canReflect.eachKey(canRoute.routes,function(e){canReflect_1_18_0_canReflect.eachIndex(e.names,function(t){n(e.defaults,t)}),canReflect_1_18_0_canReflect.eachKey(e.defaults,function(t,a){n(e.defaults,a)})})}if(!0!==e&&(canRoute._setup(),isBrowserWindow()||isWebWorker())){var a=bindingProxy_1.call("can.getValue");canQueues_1_3_2_canQueues.batch.start();var r=canRoute.deparam(a);delete r.route,canReflect_1_18_0_canReflect.assign(canRoute.data,r),canQueues_1_3_2_canQueues.batch.stop(),updateUrl()}return canRoute},url:urlHelpers.url,link:urlHelpers.link,isCurrent:urlHelpers.isCurrent,bindings:bindingProxy_1.bindings,_setup:function(){if(!canRoute._canBinding){var e={parent:bindingProxy_1.urlDataObservable.value,setParent:updateUrl,child:canRoute.serializedObservation,setChild:updateRouteData,onInitDoNotUpdateChild:!0,cycles:1,queue:"notify"};canRoute._canBinding=new canBind_1_5_1_canBind(e),canRoute._canBinding.start()}},_teardown:function(){canRoute._canBinding&&(canRoute._canBinding.stop(),canRoute._canBinding=null),clearTimeout(timer)},stop:function(){return this._teardown(),canRoute},currentRule:makeCompute(currentRuleObservable),register:register.register,rule:function(e){var t=deparam_1.getRule(e);if(t)return t.route}});var bindToCanRouteData=function(e,t){return canRoute.data[e]?canRoute.data[e].apply(canRoute.data,t):canRoute.data.addEventListener.apply(canRoute.data,t)};["addEventListener","removeEventListener","bind","unbind","on","off"].forEach(function(e){canRoute[e]=function(t,n){return"__url"===t?bindingProxy_1.call("can.onValue",n):bindToCanRouteData(e,arguments)}}),["delegate","undelegate","removeAttr","compute","_get","___get","each"].forEach(function(e){canRoute[e]=function(){return bindToCanRouteData(e,arguments)}});var routeData,serializedObservation,serializedCompute;function setRouteData(e){return routeData=e,routeData}Object.defineProperty(canRoute,"serializedObservation",{get:function(){return serializedObservation||(serializedObservation=new canObservation_4_2_0_canObservation(function(){return canReflect_1_18_0_canReflect.serialize(canRoute.data)})),serializedObservation}}),Object.defineProperty(canRoute,"serializedCompute",{get:function(){return serializedCompute||(serializedCompute=makeCompute(canRoute.serializedObservation)),serializedCompute}});var viewModelSymbol$3=canSymbol_1_6_5_canSymbol.for("can.viewModel");Object.defineProperty(canRoute,"data",{get:function(){return routeData?routeData:setRouteData(new routedata)},set:function(e){canReflect_1_18_0_canReflect.isConstructorLike(e)&&(e=new e),e&&e[viewModelSymbol$3]!==void 0&&(e=e[viewModelSymbol$3]),"attr"in e?setRouteData(stringCoercingMapDecorator$1(e)):setRouteData(e)}}),canRoute.attr=function(e,t){return console.warn("can-route: can-route.attr is deprecated. Use methods on can-route.data instead."),"attr"in canRoute.data?canRoute.data.attr.apply(canRoute.data,arguments):1<arguments.length?(canReflect_1_18_0_canReflect.setKeyValue(canRoute.data,e,t),canRoute.data):"object"==typeof e?(canReflect_1_18_0_canReflect.assignDeep(canRoute.data,e),canRoute.data):1===arguments.length?canReflect_1_18_0_canReflect.getKeyValue(canRoute.data,e):canReflect_1_18_0_canReflect.unwrap(canRoute.data)},canReflect_1_18_0_canReflect.setKeyValue(canRoute,canSymbol_1_6_5_canSymbol.for("can.isFunctionLike"),!1),canRoute.matched=canRoute.currentRule,canRoute.current=canRoute.isCurrent;var canRoute_5_0_2_canRoute=canNamespace_1_0_0_canNamespace.route=canRoute,looksLikeOptions=core$1.looksLikeOptions,calculateArgs=function(){var e,t,n;return canReflect_1_18_0_canReflect.eachIndex(arguments,function(a){"boolean"==typeof a?t=a:a&&"object"==typeof a&&(looksLikeOptions(a)?n=a:e=core$1.resolveHash(a))}),!e&&n&&(e=core$1.resolveHash(n.hash)),{finalParams:e||{},finalMerge:t,optionsArg:n}},routeUrl=function(){var e=calculateArgs.apply(this,arguments);return canRoute_5_0_2_canRoute.url(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0)};core$1.registerHelper("routeUrl",routeUrl);var routeCurrent=function(){var e=calculateArgs.apply(this,arguments),t=canRoute_5_0_2_canRoute.isCurrent(e.finalParams,"boolean"==typeof e.finalMerge?e.finalMerge:void 0);return e.optionsArg&&!(e.optionsArg instanceof expression_1.Call)?t?e.optionsArg.fn():e.optionsArg.inverse():t};routeCurrent.callAsMethod=!0,core$1.registerHelper("routeCurrent",routeCurrent);var canStacheRouteHelpers_2_0_0_canStacheRouteHelpers={routeUrl:routeUrl,routeCurrent:routeCurrent},sub=function(e,t,n){var a=[];return e=e||"",a.push(e.replace(canKey_1_2_1_utils.strReplacer,function(e,r){var o=get_1(t,r);return!0===n&&_delete(t,r),void 0===o||null===o?(a=null,""):!canReflect_1_18_0_canReflect.isPrimitive(o)&&a?(a.push(o),""):""+o})),null===a?a:1>=a.length?a[0]:a},addSerializeToThis=function(e){return canReflect_1_18_0_canReflect.assignSymbols(e,{"can.serialize":function(){return this}})},set$2;function reverseArgs(e){return function(t,n){return e.call(this,n,t)}}var setComparisonsSymbol=canSymbol_1_6_5_canSymbol.for("can.setComparisons");function addComparators(e,t,n){var a=e[setComparisonsSymbol];e[setComparisonsSymbol]||(a=e[setComparisonsSymbol]=new Map);var r=a.get(e);r||(r=new Map,a.set(e,r));var o=r.get(t);if(o)for(var i in n)o.hasOwnProperty(i)&&console.warn("Overwriting "+e.name+" "+i+" "+t.name+" comparitor"),o[i]=n[i];else r.set(t,n)}function Identity(){}var typeMap={number:Identity,string:Identity,undefined:Identity,boolean:Identity},get$1={};["intersection","difference","union"].forEach(function(e){get$1[e]=function(t,n,a){if(a===set$2.UNIVERSAL){if("intersection"===e)return n;if("union"===e)return set$2.UNIVERSAL;if("difference"===e)return set$2.EMPTY}if(n===set$2.UNIVERSAL){if("intersection"===e)return n;if("union"===e)return set$2.UNIVERSAL}if(t&&t[e]){var r=t[e](n,a);return void 0===r&&!0===t.undefinedIsEmptySet?set$2.EMPTY:r}throw new Error("Unable to perform "+e+" between "+set$2.getType(n).name+" and "+set$2.getType(a).name)}}),set$2={UNIVERSAL:canReflect_1_18_0_canReflect.assignSymbols({name:"UNIVERSAL"},{"can.serialize":function(){return this},"can.isMember":function(){return!0}}),EMPTY:canReflect_1_18_0_canReflect.assignSymbols({name:"EMPTY"},{"can.serialize":function(){return this},"can.isMember":function(){return!1}}),UNDEFINABLE:addSerializeToThis({name:"UNDEFINABLE"}),UNKNOWABLE:addSerializeToThis({name:"UNKNOWABLE"}),Identity:Identity,isSpecial:function(e){return e===set$2.UNIVERSAL||e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE},isDefinedAndHasMembers:function(e){return!(e===set$2.EMPTY||e===set$2.UNDEFINABLE||e===set$2.UNKNOWABLE)&&!!e},getType:function(e){return e===set$2.UNIVERSAL?set$2.UNIVERSAL:e===set$2.EMPTY?set$2.EMPTY:e===set$2.UNKNOWABLE?set$2.UNKNOWABLE:null===e?Identity:typeMap.hasOwnProperty(typeof e)?typeMap[typeof e]:e.constructor},ownAndMemberValue:function(e,t){if(null!=e||null!=t){var n=null==e?e:e.valueOf(),a=null==t?t:t.valueOf();return null==e||null==t?{own:n,member:a}:((null==n||n.constructor!==a.constructor)&&(a=new e.constructor(a).valueOf()),{own:n,member:a})}return{own:t,member:e}},getComparisons:function(e,t){var n=e[setComparisonsSymbol];if(n){var a=n.get(e);if(a)return a.get(t)}},hasComparisons:function(e){return!!e[setComparisonsSymbol]},defineComparison:function(e,t,n){if(addComparators(e,t,n),e!==t){var a={};for(var r in n)"difference"!=r&&(a[r]=reverseArgs(n[r]));addComparators(t,e,a)}},isSubset:function(e,t){if(e===t)return!0;var n=set$2.getType(e),a=set$2.getType(t),r=set$2.getComparisons(n,a);if(r){var o=get$1.intersection(r,e,t),i=get$1.difference(r,e,t);return o===set$2.UNKNOWABLE||i===set$2.UNKNOWABLE?void 0:o!==set$2.EMPTY&&i===set$2.EMPTY}throw new Error("Unable to perform subset comparison between "+n.name+" and "+a.name)},isProperSubset:function(e,t){return set$2.isSubset(e,t)&&!set$2.isEqual(e,t)},isEqual:function(e,t){if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var n=set$2.isSpecial(e),a=set$2.isSpecial(t);if(n&&a)return n===a;var r=set$2.getType(e),o=set$2.getType(t);if(e===t)return!0;var i=set$2.getComparisons(r,o),s=set$2.getComparisons(o,r);if(i&&s){var l=get$1.intersection(i,e,t),d=get$1.difference(i,e,t);if(l!==set$2.EMPTY&&d===set$2.EMPTY){var p=get$1.intersection(s,t,e),c=get$1.difference(s,t,e);return p!==set$2.EMPTY&&c===set$2.EMPTY}return!1}var u=set$2.ownAndMemberValue(e,t);if(canReflect_1_18_0_canReflect.isPrimitive(u.own)&&canReflect_1_18_0_canReflect.isPrimitive(u.member))return u.own===u.member;throw new Error("Unable to perform equal comparison between "+r.name+" and "+o.name)},union:function(e,t){if(e===set$2.UNIVERSAL||t===set$2.UNIVERSAL)return set$2.UNIVERSAL;if(e===set$2.EMPTY)return t;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var n=set$2.getType(e),a=set$2.getType(t),r=set$2.getComparisons(n,a);return get$1.union(r,e,t)},intersection:function(e,t){if(e===set$2.UNIVERSAL)return t;if(t===set$2.UNIVERSAL)return e;if(e===set$2.EMPTY||t===set$2.EMPTY)return set$2.EMPTY;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var n=set$2.getType(e),a=set$2.getType(t),r=set$2.getComparisons(n,a);if(r)return get$1.intersection(r,e,t);throw new Error("Unable to perform intersection comparison between "+n.name+" and "+a.name)},difference:function(e,t){if(e===set$2.EMPTY)return set$2.EMPTY;if(t===set$2.EMPTY)return e;if(e===set$2.UNKNOWABLE||t===set$2.UNKNOWABLE)return set$2.UNKNOWABLE;var n=set$2.getType(e),a=set$2.getType(t),r=set$2.getComparisons(n,a);if(r)return get$1.difference(r,e,t);throw new Error("Unable to perform difference comparison between "+n.name+" and "+a.name)},indexWithEqual:function(e,t){for(var n=0,a=e.length;n<a;n++)if(set$2.isEqual(e[n],t))return n;return-1}};function identityIntersection(e,t){return e===t?e:set$2.EMPTY}function identityDifference(e,t){return e===t?set$2.EMPTY:e}function identityUnion(e,t){return e===t?e:set$2.UNDEFINABLE}var identityComparitor={intersection:identityIntersection,difference:identityDifference,union:identityUnion};set$2.defineComparison(Identity,Identity,identityComparitor),set$2.defineComparison(set$2.UNIVERSAL,set$2.UNIVERSAL,identityComparitor);var set_1$1=set$2,replacer=/\{([^\}]+)\}/g,canFixture_3_1_7_dataFromUrl=function(e,t){if(!e)return{};var n=[],a=e.replace(".","\\.").replace("?","\\?"),r=new RegExp(a.replace(replacer,function(e,t){return n.push(t),"([^/]+)"})+"$").exec(t),o={};return r?(r.shift(),n.forEach(function(e){o[e]=r.shift()}),o):null};function getValue(e){return null==e?e:e.valueOf()}var arrayUnionIntersectionDifference=function(e,t){var n=new Set,a=[],r=[],o=e.slice(0);return e.forEach(function(e){n.add(getValue(e)),r.push(e)}),t.forEach(function(e){if(n.has(getValue(e))){a.push(e);var t=set_1$1.indexWithEqual(o,e);-1!==t&&o.splice(t,1)}else r.push(e)}),{intersection:a,union:r,difference:o}};function isMemberThatUsesTestOnValues(e){return this.constructor.test(this.values,e)}var isMemberThatUsesTestOnValues_1=isMemberThatUsesTestOnValues,comparisonsCommon={isMemberThatUsesTestOnValues:isMemberThatUsesTestOnValues_1},types={};function NotIdentity(e){this.value=e}var Identity$1=set_1$1.Identity;set_1$1.defineComparison(set_1$1.UNIVERSAL,Identity$1,{difference:function(e,t){return new NotIdentity(t)}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,NotIdentity,{difference:function(e,t){return t.value}}),set_1$1.defineComparison(NotIdentity,NotIdentity,{}),set_1$1.defineComparison(NotIdentity,Identity$1,{union:function(e,t){if(set_1$1.isEqual(e.value,t))return set_1$1.UNIVERSAL;throw new Error("Not,Identity Union is not filled out")},intersection:function(e,t){return set_1$1.isEqual(!e.value,t)?t:set_1$1.EMPTY},difference:function(e,t){return set_1$1.isEqual(e.value,t)?e:set_1$1.UNDEFINABLE}}),set_1$1.defineComparison(Identity$1,NotIdentity,{difference:function(e,t){return set_1$1.isEqual(e,t.value)?e:set_1$1.UNDEFINABLE}}),NotIdentity.prototype.isMember=function(e){if(this.value&&"function"==typeof this.value.isMember)return!this.value.isMember(e);var t=set_1$1.ownAndMemberValue(this.value,e);return t.own!==t.member};var valuesNot=types.Not=NotIdentity,comparisons={All:function(e){this.values=e}};comparisons.All.prototype.isMember=comparisonsCommon.isMemberThatUsesTestOnValues;var is=comparisons;comparisons.All.test=function(e,t){return e.every(function(e){return t.some(function(t){var n=set_1$1.ownAndMemberValue(e,t);return n.own===n.member})})};function makeThrowCannotCompare(e,t,n){return function(){throw new Error("can-query-logic: Cannot perform "+e+" between "+t+" and "+n)}}function throwComparatorAllTypes(e,t){return{union:makeThrowCannotCompare("union",e,t),difference:makeThrowCannotCompare("difference",e,t),intersection:makeThrowCannotCompare("intersection",e,t)}}function throwComparatorDifference(e,t){return{difference:makeThrowCannotCompare("difference",e,t)}}var comparators={UNIVERSAL_All:{difference:function(e,t){return new valuesNot(t)}},All_UNIVERSAL:{difference:function(){return set_1$1.EMPTY}},All_All:{union:function(e,t){return new is.Or([e,t])}},In_All:throwComparatorDifference("In","All"),All_In:throwComparatorAllTypes("All","In"),NotIn_All:throwComparatorDifference("NotIn","All"),All_NotIn:throwComparatorAllTypes("All","NotIn"),GreaterThan_All:throwComparatorDifference("GreaterThan","All"),All_GreaterThan:throwComparatorAllTypes("All","GreaterThan"),GreaterThanEqual_All:throwComparatorDifference("GreaterThanEqual","All"),All_GreaterThanEqual:throwComparatorAllTypes("All","GreaterThanEqual"),LessThan_All:throwComparatorDifference("LessThan","All"),All_LessThan:throwComparatorAllTypes("All","LessThan"),LessThanEqual_All:throwComparatorDifference("LessThanEqual","All"),All_LessThanEqual:throwComparatorAllTypes("All","LessThanEqual"),All_And:throwComparatorDifference("All","And"),And_All:throwComparatorAllTypes("And","All"),All_Or:throwComparatorDifference("All","Or"),Or_All:throwComparatorAllTypes("Or","All")},comparisons_1=comparisons,comparators_1=comparators,arrayComparisons={comparisons:comparisons_1,comparators:comparators_1},isMemberSymbol$2=canSymbol_1_6_5_canSymbol.for("can.isMember"),comparisons$1=canReflect_1_18_0_canReflect.assign(arrayComparisons.comparisons,{In:function(e){this.values=e},NotIn:function(e){this.values=e},GreaterThan:function(e){this.value=e},GreaterThanEqual:function(e){this.value=e},LessThan:function(e){this.value=e},LessThanEqual:function(e){this.value=e},And:function(e){this.values=e},Or:function(e){this.values=e}});comparisons$1.Or.prototype.orValues=function(){return this.values},comparisons$1.In.test=function(e,t){return e.some(function(e){var n=set_1$1.ownAndMemberValue(e,t);return n.own===n.member})},comparisons$1.NotIn.test=function(e,t){return!comparisons$1.In.test(e,t)},comparisons$1.NotIn.testValue=function(e,t){return!comparisons$1.In.testValue(e,t)};function nullIsFalse(e){return function(t,n){return null!=t&&null!=n&&e(t,n)}}function nullIsFalseTwoIsOk(e){return function(t,n){return!(t!==n)||null!=t&&null!=n&&e(t,n)}}comparisons$1.GreaterThan.test=nullIsFalse(function(e,t){return e>t}),comparisons$1.GreaterThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e>=t}),comparisons$1.LessThan.test=nullIsFalse(function(e,t){return e<t}),comparisons$1.LessThanEqual.test=nullIsFalseTwoIsOk(function(e,t){return e<=t});function isMemberThatUsesTest(e){var t=set_1$1.ownAndMemberValue(this.value,e);return this.constructor.test(t.member,t.own)}[comparisons$1.GreaterThan,comparisons$1.GreaterThanEqual,comparisons$1.LessThan,comparisons$1.LessThanEqual,comparisons$1.LessThan].forEach(function(e){e.prototype.isMember=isMemberThatUsesTest}),[comparisons$1.In,comparisons$1.NotIn].forEach(function(e){e.prototype.isMember=comparisonsCommon.isMemberThatUsesTestOnValues}),comparisons$1.And.prototype.isMember=function(e){return this.values.every(function(t){return t.isMember(e)})},comparisons$1.Or.prototype.isMember=function(e){return this.values.some(function(t){return t.isMember(e)})},Object.keys(comparisons$1).forEach(function(e){comparisons$1[e].prototype[isMemberSymbol$2]=comparisons$1[e].prototype.isMember});var is$1=comparisons$1;function makeNot(e){return{test:function(t,n){return!e.test(t,n)}}}function makeEnum(e,t,n){return function(r,a){var o=arrayUnionIntersectionDifference(r.values,a.values);return o[e].length?new t(o[e]):n||set_1$1.EMPTY}}function swapArgs(e){return function(t,n){return e(n,t)}}function makeSecondValue(e,t){return function(n,a){return new e(a[t||"value"])}}function returnBiggerValue(e,t){return e.value<t.value?t:e}function returnSmallerValue(e,t){return e.value>t.value?t:e}function makeAndIf(e,t){return function(n,a){return e.test(n.value,a.value)?makeAnd([n,new t(a.value)]):set_1$1.EMPTY}}function make_InIfEqual_else_andIf(e,t){var n=makeAndIf(e,t);return function(e,t){return e.value===t.value?new is$1.In([e.value]):n(e,t)}}function make_filterFirstValueAgainstSecond(e,t,n){return function(a,r){var o=a.values.filter(function(t){return e.test(r,t)});return o.length?new t(o):n||set_1$1.EMPTY}}var isMemberTest={test:function(e,t){return e.isMember(t)}};function isOr(e){return e instanceof is$1.Or}function isAnd(e){return e instanceof is$1.And}function isAndOrOr(e){return isAnd(e)||isOr(e)}function combineFilterFirstValuesAgainstSecond(e){return function(t,n){var a=t.values.filter(function(t){return e.values.test(n,t)}),r;return r=e.complement?set_1$1.difference(set_1$1.UNIVERSAL,n):e.with?new e.with(n.value):n,a.length?e.combinedUsing([new e.arePut(a),r]):r}}function makeOrUnless(e,t){return function(n,a){return e.test(n.value,a.value)?t||set_1$1.UNIVERSAL:makeOr([n,a])}}function makeAndUnless(e,t){return function(n,a){return e.test(n.value,a.value)?t||set_1$1.EMPTY:makeAnd([n,a])}}function makeComplementSecondArgIf(e){return function(t,n){return e.test(t.value,n.value)?set_1$1.difference(set_1$1.UNIVERSAL,n):t}}function makeAnd(e){return comparisons$1.And?new comparisons$1.And(e):set_1$1.UNDEFINABLE}function makeOr(e){return comparisons$1.Or?new comparisons$1.Or(e):set_1$1.UNDEFINABLE}function combineValueWithRangeCheck(e,t,n){var a=new n(t.value),r=e.values.filter(function(e){return!a.isMember(e)});return r.length?r.length<e.values.length?makeOr([new is$1.In(r),a]):makeOr([e,t]):a}function makeOrWithInAndRange(e,t){if(t instanceof is$1.Or){var n=makeOrWithInAndRange(e,t.values[0]);if(!(n instanceof is$1.Or))return set_1$1.union(n,t.values[1]);var a=makeOrWithInAndRange(e,t.values[1]);return a instanceof is$1.Or?makeOr([e,t]):set_1$1.union(a,t.values[0])}return t instanceof is$1.GreaterThan?combineValueWithRangeCheck(e,t,is$1.GreaterThanEqual):t instanceof is$1.LessThan?combineValueWithRangeCheck(e,t,is$1.LessThanEqual):makeOr([e,t])}var In_RANGE={union:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is$1.In,combinedUsing:function(e){return makeOrWithInAndRange(e[0],e[1])}}),intersection:make_filterFirstValueAgainstSecond(isMemberTest,is$1.In,set_1$1.EMPTY),difference:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is$1.In,set_1$1.EMPTY)},RANGE_IN={difference:swapArgs(combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is$1.NotIn,combinedUsing:makeAnd}))},NotIn_RANGE=function(){return{union:make_filterFirstValueAgainstSecond(makeNot(isMemberTest),is$1.NotIn,set_1$1.UNIVERSAL),intersection:combineFilterFirstValuesAgainstSecond({values:isMemberTest,arePut:is$1.NotIn,combinedUsing:makeAnd}),difference:combineFilterFirstValuesAgainstSecond({values:makeNot(isMemberTest),arePut:is$1.NotIn,combinedUsing:makeAnd,complement:!0})}},RANGE_NotIn={difference:swapArgs(make_filterFirstValueAgainstSecond(isMemberTest,is$1.In,set_1$1.EMPTY))},RANGE_And_Union=function(e,t){var n=set_1$1.union(e,t.values[0]),a=set_1$1.union(e,t.values[1]);return isAndOrOr(n)||isAndOrOr(a)?new is$1.Or([e,t]):set_1$1.intersection(n,a)},RANGE_And_Intersection=function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.intersection(e,n),o=set_1$1.intersection(e,a);return r===set_1$1.EMPTY||o===set_1$1.EMPTY?set_1$1.EMPTY:isAndOrOr(r)?isAndOrOr(o)?new is$1.And([e,t]):new set_1$1.intersection(o,n):new set_1$1.intersection(r,a)},RANGE_And_Difference=function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.difference(e,n),o=set_1$1.difference(e,a);return r===set_1$1.EMPTY?o:o===set_1$1.EMPTY?r:new is$1.Or([r,o])},And_RANGE_Difference=function(e,t){var n=e.values[0],a=e.values[1],r=set_1$1.difference(n,t),o=set_1$1.difference(a,t);return set_1$1.intersection(r,o)},RANGE_Or={union:function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.union(e,n);if(!isAndOrOr(r))return set_1$1.union(r,a);var o=set_1$1.union(e,a);return isAndOrOr(o)?new is$1.Or([e,t]):set_1$1.union(n,o)},intersection:function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.intersection(e,n),o=set_1$1.intersection(e,a);return r===set_1$1.EMPTY?o:o===set_1$1.EMPTY?r:set_1$1.union(r,o)},difference:function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.difference(e,n),o=set_1$1.difference(e,a);return set_1$1.intersection(r,o)}},Or_RANGE={difference:function(e,t){var n=e.values[0],a=e.values[1],r=set_1$1.difference(n,t),o=set_1$1.difference(a,t);return set_1$1.union(r,o)}},comparators$1=canReflect_1_18_0_canReflect.assign(arrayComparisons.comparators,{In_In:{union:makeEnum("union",is$1.In),intersection:makeEnum("intersection",is$1.In),difference:makeEnum("difference",is$1.In)},UNIVERSAL_In:{difference:makeSecondValue(is$1.NotIn,"values")},In_NotIn:{union:swapArgs(makeEnum("difference",is$1.NotIn,set_1$1.UNIVERSAL)),intersection:makeEnum("difference",is$1.In),difference:makeEnum("intersection",is$1.In)},NotIn_In:{difference:makeEnum("union",is$1.NotIn)},In_GreaterThan:In_RANGE,GreaterThan_In:RANGE_IN,In_GreaterThanEqual:In_RANGE,GreaterThanEqual_In:RANGE_IN,In_LessThan:In_RANGE,LessThan_In:RANGE_IN,In_LessThanEqual:In_RANGE,LessThanEqual_In:RANGE_IN,In_And:In_RANGE,And_In:RANGE_IN,In_Or:In_RANGE,Or_In:RANGE_IN,NotIn_NotIn:{union:makeEnum("intersection",is$1.NotIn,set_1$1.UNIVERSAL),intersection:makeEnum("union",is$1.NotIn),difference:makeEnum("difference",is$1.In)},UNIVERSAL_NotIn:{difference:makeSecondValue(is$1.In,"values")},NotIn_GreaterThan:NotIn_RANGE(),GreaterThan_NotIn:RANGE_NotIn,NotIn_GreaterThanEqual:NotIn_RANGE(),GreaterThanEqual_NotIn:RANGE_NotIn,NotIn_LessThan:NotIn_RANGE(),LessThan_NotIn:RANGE_NotIn,NotIn_LessThanEqual:NotIn_RANGE(),LessThanEqual_NotIn:RANGE_NotIn,NotIn_And:NotIn_RANGE(),And_NotIn:RANGE_NotIn,NotIn_Or:NotIn_RANGE(),Or_NotIn:RANGE_NotIn,GreaterThan_GreaterThan:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThanEqual)},UNIVERSAL_GreaterThan:{difference:makeSecondValue(is$1.LessThanEqual)},GreaterThan_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThan)},GreaterThanEqual_GreaterThan:{difference:make_InIfEqual_else_andIf(is$1.LessThan,is$1.LessThanEqual)},GreaterThan_LessThan:{union:function(){var e=makeOrUnless(is$1.LessThan);return function(t,n){return comparisons$1.In.test([t.value],n.value)?new is$1.NotIn([t.value]):e(t,n)}}(),intersection:makeAndUnless(is$1.GreaterThan),difference:makeComplementSecondArgIf(is$1.LessThan)},LessThan_GreaterThan:{difference:makeComplementSecondArgIf(is$1.GreaterThan)},GreaterThan_LessThanEqual:{union:makeOrUnless(is$1.LessThanEqual),intersection:makeAndUnless(is$1.GreaterThanEqual),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThanEqual_GreaterThan:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThan:{difference:And_RANGE_Difference},GreaterThan_Or:RANGE_Or,Or_GreaterThan:Or_RANGE,GreaterThanEqual_GreaterThanEqual:{union:returnSmallerValue,intersection:returnBiggerValue,difference:makeAndIf(is$1.LessThan,is$1.LessThan)},UNIVERSAL_GreaterThanEqual:{difference:makeSecondValue(is$1.LessThan)},GreaterThanEqual_LessThan:{union:makeOrUnless(is$1.LessThanEqual),intersection:makeAndUnless(is$1.GreaterThanEqual),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThan_GreaterThanEqual:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThanEqual_LessThanEqual:{union:makeOrUnless(is$1.LessThanEqual),intersection:function(){var e=makeAndUnless(is$1.GreaterThan);return function(t,n){var a=new is$1.In([t.value]);return a.isMember(n.value)?a:e(t,n)}}(),difference:makeComplementSecondArgIf(is$1.LessThanEqual)},LessThanEqual_GreaterThanEqual:{difference:makeComplementSecondArgIf(is$1.GreaterThanEqual)},GreaterThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_GreaterThanEqual:{difference:And_RANGE_Difference},GreaterThanEqual_Or:RANGE_Or,Or_GreaterThanEqual:Or_RANGE,LessThan_LessThan:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is$1.GreaterThan,is$1.GreaterThanEqual)},UNIVERSAL_LessThan:{difference:makeSecondValue(is$1.GreaterThanEqual)},LessThan_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:makeAndIf(is$1.GreaterThan,is$1.GreaterThan)},LessThanEqual_LessThan:{difference:make_InIfEqual_else_andIf(is$1.GreaterThanEqual,is$1.GreaterThanEqual)},LessThan_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThan:{difference:And_RANGE_Difference},LessThan_Or:RANGE_Or,Or_LessThan:Or_RANGE,LessThanEqual_LessThanEqual:{union:returnBiggerValue,intersection:returnSmallerValue,difference:function(e,t){return e.value>=t.value?makeAnd([e,new is$1.GreaterThan(t.value)]):set_1$1.EMPTY}},UNIVERSAL_LessThanEqual:{difference:makeSecondValue(is$1.GreaterThan)},LessThanEqual_And:{union:RANGE_And_Union,intersection:RANGE_And_Intersection,difference:RANGE_And_Difference},And_LessThanEqual:{difference:And_RANGE_Difference},LessThanEqual_Or:RANGE_Or,Or_LessThanEqual:Or_RANGE,And_And:{union:function(e,t){var n=set_1$1.union(e,t.values[0]),a=set_1$1.union(e,t.values[1]);return(isAndOrOr(n)||isAndOrOr(a))&&(n=set_1$1.union(t,e.values[0]),a=set_1$1.union(t,e.values[1])),isAndOrOr(n)||isAndOrOr(a)?new is$1.Or([e,t]):set_1$1.intersection(n,a)},intersection:function(e,t){var n=set_1$1.intersection(e.values[0],t.values[0]),a=set_1$1.intersection(e.values[1],t.values[1]);return isAndOrOr(n)&&isAndOrOr(a)?(n=set_1$1.intersection(e.values[0],t.values[1]),a=set_1$1.intersection(e.values[1],t.values[0]),isAndOrOr(n)&&isAndOrOr(a)?new is$1.And([e,t]):set_1$1.intersection(n,a)):set_1$1.intersection(n,a)},difference:function(){return function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.union(n,a)}}()},And_Or:{union:function(e,t){var n=set_1$1.union(e.values[0],t),a=set_1$1.union(e.values[1],t);return isAndOrOr(n)&&isAndOrOr(a)?new is$1.Or([e,t]):set_1$1.intersection(n,a)},intersection:function(e,t){var n=set_1$1.intersection(e,t.values[0]),a=set_1$1.intersection(e,t.values[1]);return isOr(n)||isOr(a)?new is$1.And([e,t]):set_1$1.union(n,a)},difference:function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(n,a)}},Or_And:{difference:function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.union(n,a)}},UNIVERSAL_And:{difference:function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.union(n,a)}},Or_Or:{union:function(e,t){var n=set_1$1.union(e.values[0],t.values[0]),a=set_1$1.union(e.values[1],t.values[1]);return isAndOrOr(n)&&isAndOrOr(a)?(n=set_1$1.union(e.values[0],t.values[1]),a=set_1$1.union(e.values[1],t.values[0]),isAndOrOr(n)&&isAndOrOr(a)?new is$1.Or([e,t]):set_1$1.union(n,a)):set_1$1.union(n,a)},intersection:function(e,t){var n=t.values[0],a=t.values[1],r=set_1$1.intersection(e,n),o=set_1$1.intersection(e,a);return isOr(r)&&isOr(o)?(r=set_1$1.union(t,e.values[0]),o=set_1$1.union(t,e.values[1]),isOr(r)&&isOr(o)?new is$1.Or([e,t]):set_1$1.union(r,o)):set_1$1.union(r,o)},difference:function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(n,a)}},UNIVERSAL_Or:{difference:function(e,t){var n=set_1$1.difference(e,t.values[0]),a=set_1$1.difference(e,t.values[1]);return set_1$1.intersection(n,a)}}}),names=Object.keys(comparisons$1);names.forEach(function(e,t){comparators$1[e+"_"+e]?set_1$1.defineComparison(comparisons$1[e],comparisons$1[e],comparators$1[e+"_"+e]):console.warn("no "+e+"_"+e),comparators$1["UNIVERSAL_"+e]?set_1$1.defineComparison(set_1$1.UNIVERSAL,comparisons$1[e],comparators$1["UNIVERSAL_"+e]):console.warn("no UNIVERSAL_"+e);for(var n=t+1,a;n<names.length;n++)a=names[n],comparators$1[e+"_"+a]?set_1$1.defineComparison(comparisons$1[e],comparisons$1[a],comparators$1[e+"_"+a]):console.warn("no "+e+"_"+a),comparators$1[a+"_"+e]?set_1$1.defineComparison(comparisons$1[a],comparisons$1[e],comparators$1[a+"_"+e]):console.warn("no "+a+"_"+e)});var comparisons_1$1=comparisons$1,makeRealNumberRangeInclusive=function(e,t){function n(n,a){this.start=0<arguments.length?+n:e,this.end=1<arguments.length?+a:t,this.range=new comparisons_1$1.And([new comparisons_1$1.GreaterThanEqual(this.start),new comparisons_1$1.LessThanEqual(this.end)])}function a(e){return set_1$1.isSubset(l.range,e.range)}function r(e){var t={};if(e.values.forEach(function(e){e instanceof comparisons_1$1.GreaterThanEqual&&(t.start=e.value),e instanceof comparisons_1$1.GreaterThan&&(t.start=e.value+1),e instanceof comparisons_1$1.LessThanEqual&&(t.end=e.value),e instanceof comparisons_1$1.LessThan&&(t.end=e.value-1)}),"start"in t&&"end"in t)return new n(t.start,t.end)}function o(e){var t;if(e instanceof comparisons_1$1.And&&(t=r(e)),e instanceof comparisons_1$1.Or){var o=r(e.values[0]),i=r(e.values[1]);if(o&&i){var s=o.range.values,l=i.range.values;if(s[1].value+1===l[0].value)t=new n(s[0].value,l[1].value);else if(l[1].value+1===s[0].value)t=new n(l[0].value,s[1].value);else return set_1$1.UNDEFINABLE}else return set_1$1.UNDEFINABLE}return t&&a(t)?set_1$1.UNIVERSAL:t}function i(e,t){var n=o(set_1$1.intersection(e.range,t.range));return n?n:set_1$1.EMPTY}function s(e,t){var n=o(set_1$1.difference(e.range,t.range));return n?n:set_1$1.EMPTY}var l=new n(e,t);return set_1$1.defineComparison(n,n,{union:function(e,t){var n=o(set_1$1.union(e.range,t.range));return n?n:set_1$1.EMPTY},intersection:i,difference:s}),set_1$1.defineComparison(set_1$1.UNIVERSAL,n,{difference:function(e,t){return a(t)?set_1$1.EMPTY:s(l,t)}}),n};function ValuesOr(e){this.values=e}ValuesOr.prototype.isMember=function(e){return this.values.some(function(t){return t&&t.isMember?t.isMember(e):t===e})},set_1$1.defineComparison(set_1$1.UNIVERSAL,ValuesOr,{difference:function(){return set_1$1.UNDEFINABLE}});var valuesOr=types.ValuesOr=ValuesOr;function ValuesAnd(e){this.values=e}ValuesAnd.prototype.isMember=function(e){return this.values.every(function(t){return t&&t.isMember?t.isMember(e):t===e})},set_1$1.defineComparison(set_1$1.UNIVERSAL,ValuesAnd,{difference:function(){return set_1$1.UNDEFINABLE}});var valuesAnd=types.ValuesAnd=ValuesAnd;function KeysAnd(e){var t=this.values={};canReflect_1_18_0_canReflect.eachKey(e,function(e,n){t[n]=canReflect_1_18_0_canReflect.isPlainObject(e)&&!set_1$1.isSpecial(e)?new KeysAnd(e):e})}var isMemberSymbol$3=canSymbol_1_6_5_canSymbol.for("can.isMember");KeysAnd.prototype.isMember=function(e,t,n){var a=!0,r=n?n+".":"";return canReflect_1_18_0_canReflect.eachKey(this.values,function(n,o){var i=n&&(n[isMemberSymbol$3]||n.isMember);i?!i.call(n,get_1(e,o),t||e,r+o)&&(a=!1):n!==get_1(e,o)&&(a=!1)}),a};function checkIfUniversalAndReturnUniversal(e){return set_1$1.isEqual(e,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:e}var MISSING={};function eachInUnique(e,t,n,a,r){var o=canAssign_1_3_3_canAssign({},n),i;for(var s in e){if(i=t(s,e[s],s in n?n[s]:MISSING,e,n),void 0!==i)return i;delete o[s]}for(s in o)if(i=a(s,MISSING,n[s],e,n),void 0!==i)return i;return r}function keyDiff(e,t){var n=arrayUnionIntersectionDifference(Object.keys(e),Object.keys(t));return{aOnlyKeys:n.difference,aAndBKeys:n.intersection,bOnlyKeys:arrayUnionIntersectionDifference(Object.keys(t),Object.keys(e)).difference}}function notEmpty(e){return e!==set_1$1.EMPTY}function difference(e,t){var n=e.values,a=t.values,r=keyDiff(n,a),o=r.aOnlyKeys,i=r.aAndBKeys,s=r.bOnlyKeys,l={},d={},p={};i.forEach(function(e){var t=set_1$1.difference(n[e],a[e]);if(t===set_1$1.EMPTY)l[e]=n[e];else{var r=set_1$1.intersection(n[e],a[e]),o=r!==set_1$1.EMPTY;o?d[e]={difference:t,intersection:r}:p[e]=n[e]}});var c=Object.keys(d),u;if(1===c.length&&(u={},u[c[0]]=d[c[0]].difference),Object.keys(p).length)return e;if(0===o.length&&0===s.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_3_canAssign(l,u),new KeysAnd(l)):set_1$1.EMPTY;if(0<o.length&&0===s.length)return 1<c.length?set_1$1.UNDEFINABLE:1===c.length?(canAssign_1_3_3_canAssign(l,u),o.forEach(function(e){l[e]=n[e]}),new KeysAnd(l)):set_1$1.EMPTY;if(0===o.length&&0<s.length){if(1<c.length)return set_1$1.UNDEFINABLE;var y;if(1===c.length){var m=c[0];y=canAssign_1_3_3_canAssign({},l),y[m]=d[m].difference,l[m]=d[m].intersection}var g=s.map(function(e){var t=canAssign_1_3_3_canAssign({},l),n=t[e]=set_1$1.difference(set_1$1.UNIVERSAL,a[e]);return n===set_1$1.EMPTY?n:new KeysAnd(t)}).filter(notEmpty);return y&&g.push(new KeysAnd(y)),1<g.length?new types.ValuesOr(g):1===g.length?g[0]:set_1$1.EMPTY}if(0<o.length&&0<s.length){if(c.length)throw new Error("Can't handle any productable keys right now");if(o.forEach(function(e){l[e]=n[e]}),1===s.length){var h=s[0],f=canAssign_1_3_3_canAssign({},l);return f[h]=set_1$1.difference(set_1$1.UNIVERSAL,a[h]),new KeysAnd(f)}return set_1$1.UNDEFINABLE}}set_1$1.defineComparison(KeysAnd,KeysAnd,{union:function(e,t){var n=keyDiff(e.values,t.values),a=[],r={};n.aAndBKeys.forEach(function(n){set_1$1.isEqual(e.values[n],t.values[n])?r[n]=e.values[n]:a.push(n)});var o={},i={};if(a.forEach(function(n){o[n]=e.values[n],i[n]=t.values[n]}),!n.aOnlyKeys.length&&!n.bOnlyKeys.length){if(1===a.length){var s=a[0],l=r[s]=set_1$1.union(e.values[s],t.values[s]);return 1===canReflect_1_18_0_canReflect.size(r)&&set_1$1.isEqual(l,set_1$1.UNIVERSAL)?set_1$1.UNIVERSAL:new KeysAnd(r)}if(0===a.length)return e}if(0===a.length){if(0<n.aOnlyKeys.length&&0===n.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(t);if(0===n.aOnlyKeys.length&&0<n.bOnlyKeys.length)return checkIfUniversalAndReturnUniversal(e)}return 0<n.aOnlyKeys.length&&0===n.bOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(o),new KeysAnd(i))?t:0<n.bOnlyKeys.length&&0===n.aOnlyKeys.length&&set_1$1.isSubset(new KeysAnd(i),new KeysAnd(o))?e:new types.ValuesOr([e,t])},intersection:function(e,t){var n=e.values,a=t.values,r=!1,o={};return eachInUnique(n,function(e,t,n){o[e]=n===MISSING?t:set_1$1.intersection(t,n),o[e]===set_1$1.EMPTY&&(r=!0)},a,function(e,t,n){o[e]=n,o[e]===set_1$1.EMPTY&&(r=!0)}),r?set_1$1.EMPTY:new KeysAnd(o)},difference:difference}),set_1$1.defineComparison(set_1$1.UNIVERSAL,KeysAnd,{difference:function(e,t){return difference({values:{}},t)}});var keysAnd=types.KeysAnd=KeysAnd,andOrNot={KeysAnd:keysAnd,ValuesOr:valuesOr,ValuesNot:valuesNot,ValuesAnd:valuesAnd},typeNumber={undefined:0,null:1,number:3,string:4,object:5,boolean:6},getTypeNumber=function(e){var t=typeof e;return null===e&&(t="null"),typeNumber[t]},typeCompare={$gt:function(e,t){return getTypeNumber(e)>getTypeNumber(t)},$lt:function(e,t){return getTypeNumber(e)<getTypeNumber(t)}},defaultCompare={$gt:function(e,t){return null==e||null==t?typeCompare.$gt(e,t):e>t},$lt:function(e,t){return null==e||null==t?typeCompare.$gt(e,t):e<t}},helpers$3={uniqueConcat:function(e,t,n){var a=new Set;return e.concat(t).filter(function(e){var t=n(e);return!a.has(t)&&(a.add(t),!0)})},getIdentityIndex:function(e,t,n,a,r){var o=canReflect_1_18_0_canReflect.getIdentity(n,r),i=t[a];if(0===e(n,i)&&o===canReflect_1_18_0_canReflect.getIdentity(i,r))return a;var s=this.getIdentityIndexByDirection(e,t,n,a+1,1,r),l;return s.index?s.index:(l=this.getIdentityIndexByDirection(e,t,n,a-1,-1,r),void 0===l.index?s.lastIndex:l.index)},getIdentityIndexByDirection:function(e,t,n,a,r,o){for(var i=a,s=canReflect_1_18_0_canReflect.getIdentity(n,o);0<=i&&i<t.length;){var l=t[i],d=e(n,l);if(!(0===d))return{lastIndex:i-r};else if(s===canReflect_1_18_0_canReflect.getIdentity(l,o))return{index:i};i+=r}return{lastIndex:i-r}},getIndex:function(e,t,n,a){if(t&&t.length){if(-1===e(n,t[0]))return 0;if(1===e(n,t[t.length-1]))return t.length;for(var r=0,o=t.length;r<o;){var i=r+o>>>1,s=t[i],l=e(n,s);if(0===l)return this.getIdentityIndex(e,t,n,i,a);-1===l?o=i:r=i+1}return o}},sortData:function(e){return"-"===e[0]?{prop:e.slice(1),desc:!0}:{prop:e,desc:!1}},defaultCompare:defaultCompare,typeCompare:typeCompare,sorter:function(e,t){var n=helpers$3.sortData(e),a;return a=t&&t[n.prop]?t[n.prop]:defaultCompare,function(e,t){var r=canReflect_1_18_0_canReflect.getKeyValue(e,n.prop),o=canReflect_1_18_0_canReflect.getKeyValue(t,n.prop),i;return n.desc&&(i=r,r=o,o=i),a.$lt(r,o)?-1:a.$gt(r,o)?1:0}},valueHydrator:function(e){if(canReflect_1_18_0_canReflect.isBuiltIn(e))return e;throw new Error("can-query-logic doesn't support comparison operator: "+JSON.stringify(e))}},helpers_1$3=helpers$3,KeysAnd$1=andOrNot.KeysAnd,Or=andOrNot.ValuesOr,Not=andOrNot.ValuesNot,And=andOrNot.ValuesAnd,RecordRange=makeRealNumberRangeInclusive(0,1/0);function makeSort(e,t){function n(t){this.key=t,this.schema=e,this.compare=helpers_1$3.sorter(t,r)}var a=e.keys,r={};return canReflect_1_18_0_canReflect.eachKey(a,function(e,n){r[n]={$gt:function(a,r){if(null==a||null==r)return helpers_1$3.typeCompare.$gt(a,r);var o=t({$gt:r},n,e,helpers_1$3.valueHydrator),i=t({$eq:a},n,e,helpers_1$3.valueHydrator);return set_1$1.isEqual(set_1$1.union(o,i),o)},$lt:function(a,r){if(null==a||null==r)return helpers_1$3.typeCompare.$lt(a,r);var o=t({$lt:r},n,e,helpers_1$3.valueHydrator),i=t({$eq:a},n,e,helpers_1$3.valueHydrator);return set_1$1.isEqual(set_1$1.union(o,i),o)}}}),set_1$1.defineComparison(n,n,{intersection:function(e,t){return e.key===t.key?e:set_1$1.EMPTY},difference:function(e,t){return e.key===t.key?set_1$1.EMPTY:e},union:function(e,t){return e.key===t.key?e:set_1$1.UNDEFINABLE}}),n}var DefaultSort=makeSort({keys:{},identity:["id"]});function BasicQuery(e){canAssign_1_3_3_canAssign(this,e),this.filter||(this.filter=set_1$1.UNIVERSAL),this.page||(this.page=new RecordRange),this.sort||(this.sort="id"),"string"==typeof this.sort&&(this.sort=new DefaultSort(this.sort))}BasicQuery.KeysAnd=KeysAnd$1,BasicQuery.Or=Or,BasicQuery.Not=Not,BasicQuery.And=And,BasicQuery.RecordRange=RecordRange,BasicQuery.makeSort=makeSort,canReflect_1_18_0_canReflect.assignMap(BasicQuery.prototype,{count:function(){return this.page.end-this.page.start+1},sortData:function(e){return e.slice(0).sort(this.sort.compare)},filterMembersAndGetCount:function(e,t){var n;if(!t)t=new BasicQuery;else if(n=set_1$1.isEqual(t.page,set_1$1.UNIVERSAL),n&&!set_1$1.isEqual(t.filter,set_1$1.UNIVERSAL)&&!set_1$1.isSubset(this,t))throw new Error("can-query-logic: Unable to get members from a set that is not a superset of the current set.");var a=e.filter(function(e){return this.filter.isMember(e)},this),r=a.length;r&&this.sort.key!==t.sort.key&&(a=this.sortData(a));var o=set_1$1.isEqual(this.page,set_1$1.UNIVERSAL);if(null==n&&(n=set_1$1.isEqual(t.page,set_1$1.UNIVERSAL)),n)return o?{data:a,count:r}:{data:a.slice(this.page.start,this.page.end+1),count:r};if(this.sort.key===t.sort.key&&set_1$1.isEqual(t.filter,this.filter))return{data:a.slice(this.page.start-t.page.start,this.page.end-t.page.start+1),count:r};throw new Error("can-query-logic: Unable to get members from the parent set for this subset.")},filterFrom:function(e,t){return this.filterMembersAndGetCount(e,t).data},merge:function(e,t,n,a){var r=set_1$1.union(this,e);if(r!==set_1$1.UNDEFINABLE){var o=helpers_1$3.uniqueConcat(t,n,a);return r.sortData(o)}},index:function(e,t){var n=helpers_1$3.sortData(this.sort.key);return canReflect_1_18_0_canReflect.hasOwnKey(e,n.prop)?helpers_1$3.getIndex(this.sort.compare,t,e,this.sort.schema):void 0},isMember:function(e){return this.filter.isMember(e)},removePagination:function(){this.page=new RecordRange}});var CLAUSE_TYPES=["filter","page","sort"];function getDifferentClauseTypes(e,t){var n=[];return CLAUSE_TYPES.forEach(function(a){set_1$1.isEqual(e[a],t[a])||n.push(a)}),n}function isSubset(e,t,n){return!!n[e+"FilterIsSubset"]&&(!!n[t+"PageIsUniversal"]||n[e+"PageIsSubset"]&&n.sortIsEqual)}function MetaInformation(e,t){this.queryA=e,this.queryB=t}canReflect_1_18_0_canReflect.eachKey({pageIsEqual:function(){return set_1$1.isEqual(this.queryA.page,this.queryB.page)},aPageIsUniversal:function(){return set_1$1.isEqual(this.queryA.page,set_1$1.UNIVERSAL)},bPageIsUniversal:function(){return set_1$1.isEqual(this.queryB.page,set_1$1.UNIVERSAL)},pagesAreUniversal:function(){return this.pageIsEqual&&this.aPageIsUniversal},sortIsEqual:function(){return this.queryA.sort.key===this.queryB.sort.key},aFilterIsSubset:function(){return set_1$1.isSubset(this.queryA.filter,this.queryB.filter)},bFilterIsSubset:function(){return set_1$1.isSubset(this.queryB.filter,this.queryA.filter)},aPageIsSubset:function(){return set_1$1.isSubset(this.queryA.page,this.queryB.page)},bPageIsSubset:function(){return set_1$1.isSubset(this.queryB.page,this.queryA.page)},filterIsEqual:function(){return set_1$1.isEqual(this.queryA.filter,this.queryB.filter)},aIsSubset:function(){return isSubset("a","b",this)},bIsSubset:function(){return isSubset("b","a",this)}},function(e,t){canDefineLazyValue_1_1_1_defineLazyValue(MetaInformation.prototype,t,e)});function metaInformation(e,t){var n=new MetaInformation(e,t);return n}set_1$1.defineComparison(BasicQuery,BasicQuery,{union:function(e,t){var n=metaInformation(e,t),a=set_1$1.union(e.filter,t.filter);if(n.pagesAreUniversal)return new BasicQuery({filter:a,sort:n.sortIsEqual?e.sort.key:void 0});if(n.filterIsEqual)return n.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.union(e.page,t.page)}):n.aIsSubset?t:n.bIsSubset?e:set_1$1.UNDEFINABLE;throw new Error("different filters, non-universal pages")},intersection:function(e,t){var n=metaInformation(e,t);if(n.pagesAreUniversal){var a=set_1$1.intersection(e.filter,t.filter);return set_1$1.isDefinedAndHasMembers(a)?new BasicQuery({filter:a,sort:n.sortIsEqual?e.sort.key:void 0}):a}return set_1$1.intersection(e.filter,t.filter)===set_1$1.EMPTY?set_1$1.EMPTY:n.filterIsEqual?n.sortIsEqual?new BasicQuery({filter:e.filter,sort:e.sort.key,page:set_1$1.intersection(e.page,t.page)}):n.aIsSubset?e:n.bIsSubset?t:set_1$1.UNKNOWABLE:n.aIsSubset?e:n.bIsSubset?t:set_1$1.UNDEFINABLE},difference:function(e,t){var n=getDifferentClauseTypes(e,t),a=metaInformation(e,t),r;if(1<n.length)return a.aIsSubset?set_1$1.EMPTY:a.pagesAreUniversal?new BasicQuery({filter:set_1$1.difference(e.filter,t.filter),sort:e.sort.key}):set_1$1.UNDEFINABLE;switch(r=n[0]){case void 0:return set_1$1.EMPTY;case"sort":return a.pagesAreUniversal?set_1$1.EMPTY:set_1$1.UNKNOWABLE;break;case"page":case"filter":{var o=set_1$1.difference(e[r],t[r]);if(set_1$1.isSpecial(o))return o;var i={filter:e.filter,page:e.page,sort:e.sort.key};return i[r]=o,new BasicQuery(i)}}}});var basicQuery=BasicQuery,Serializer=function(e){var t=this.serializers=new Map;e&&e.forEach(function(e){var n=e[0],a=e[1];t.set(n,a)}),this.serialize=this.serialize.bind(this)};Serializer.prototype.add=function(e){canReflect_1_18_0_canReflect.assign(this.serializers,e instanceof Serializer?e.serializers:e)},Serializer.prototype.serialize=function(e){if(!e)return e;var t=e.constructor,n=this.serializers.get(t);return n?n(e,this.serialize):canReflect_1_18_0_canReflect.serialize(e)};var serializer=Serializer;function makeNew(e){return function(t){return new e(t)}}var hydrateMap={};function addHydrateFrom(e,t){hydrateMap[e]=function(n,a){return t(a?a(n[e]):n[e])},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}function addHydrateFromValues(e,t){hydrateMap[e]=function(n,a){var r=n[e];return a&&(r=r.map(function(e){return a(e)})),t(r)},Object.defineProperty(hydrateMap[e],"name",{value:"hydrate "+e,writable:!0})}addHydrateFrom("$eq",function(e){return new comparisons_1$1.In([e])}),addHydrateFrom("$ne",function(e){return new comparisons_1$1.NotIn([e])}),addHydrateFrom("$gt",makeNew(comparisons_1$1.GreaterThan)),addHydrateFrom("$gte",makeNew(comparisons_1$1.GreaterThanEqual)),addHydrateFromValues("$in",makeNew(comparisons_1$1.In)),addHydrateFrom("$lt",makeNew(comparisons_1$1.LessThan)),addHydrateFrom("$lte",makeNew(comparisons_1$1.LessThanEqual)),addHydrateFromValues("$all",makeNew(comparisons_1$1.All));var oppositeTypeMap={LessThan:{Type:comparisons_1$1.GreaterThanEqual,prop:"value"},LessThanEqual:{Type:comparisons_1$1.GreaterThan,prop:"value"},GreaterThan:{Type:comparisons_1$1.LessThanEqual,prop:"value"},GreaterThanEqual:{Type:comparisons_1$1.LessThan,prop:"value"},In:{Type:comparisons_1$1.NotIn,prop:"values"},NotIn:{Type:comparisons_1$1.In,prop:"values"}};hydrateMap.$not=function(e,t){var n=hydrateValue(e.$not,t),a=n.constructor.name||n.constructor.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];if(oppositeTypeMap[a]){var r=oppositeTypeMap[a],o=r.Type,i=r.prop;return new o(n[i])}return new valuesNot(n)},addHydrateFromValues("$nin",makeNew(comparisons_1$1.NotIn));var serializer$1=new serializer([[comparisons_1$1.In,function(e,t){return 1===e.values.length?t(e.values[0]):{$in:e.values.map(t)}}],[comparisons_1$1.NotIn,function(e,t){return 1===e.values.length?{$ne:t(e.values[0])}:{$nin:e.values.map(t)}}],[comparisons_1$1.GreaterThan,function(e,t){return{$gt:t(e.value)}}],[comparisons_1$1.GreaterThanEqual,function(e,t){return{$gte:t(e.value)}}],[comparisons_1$1.LessThan,function(e,t){return{$lt:t(e.value)}}],[comparisons_1$1.LessThanEqual,function(e,t){return{$lte:t(e.value)}}],[comparisons_1$1.And,function(e,t){var n={};return e.values.forEach(function(e){canReflect_1_18_0_canReflect.assignMap(n,t(e))}),n}],[comparisons_1$1.All,function(e,t){return{$all:t(e.values)}}]]);function hydrateValue(e,t){if(t||(t=function(){throw new Error("can-query-logic doesn't recognize operator: "+JSON.stringify(e))}),Array.isArray(e))return new comparisons_1$1.In(e.map(function(e){return t(e)}));if(e&&"object"==typeof e){var n=Object.keys(e),a=n.every(function(e){return hydrateMap[e]});if(a){var r=n.map(function(n){var a={};a[n]=e[n];var r=hydrateMap[n];return r(a,t)});return 1<r.length?new comparisons_1$1.And(r):r[0]}return t(e)}return new comparisons_1$1.In([t(e)])}var comparisons$2={hydrate:hydrateValue,serializer:serializer$1},schemaHelpers_1=schemaHelpers={isRangedType:function(e){return e&&canReflect_1_18_0_canReflect.isConstructorLike(e)&&!set_1$1.hasComparisons(e)&&!e[canSymbol_1_6_5_canSymbol.for("can.SetType")]&&e.prototype.valueOf&&e.prototype.valueOf!==Object.prototype.valueOf},categorizeOrValues:function(e){var t={primitives:[],valueOfTypes:[],others:[]};return e.forEach(function(e){canReflect_1_18_0_canReflect.isPrimitive(e)?t.primitives.push(e):schemaHelpers.isRangedType(e)?t.valueOfTypes.push(e):t.others.push(e)}),t}},comparisonSetTypeSymbol=canSymbol_1_6_5_canSymbol.for("can.ComparisonSetType"),isMemberSymbol$4=canSymbol_1_6_5_canSymbol.for("can.isMember"),schemaHelpers;function splitByRangeAndEnum(e,t){var n;if(t instanceof comparisons_1$1.And){var a=t.values.map(function(t){return splitByRangeAndEnum(e,t)});return a.reduce(function(e,t){return{range:set_1$1.intersection(e.range,t.range),enum:set_1$1.intersection(e.enum,t.enum)}},{range:set_1$1.UNIVERSAL,enum:e})}if(t instanceof comparisons_1$1.In){var r=t.values.filter(function(t){return e.isMember(t)});if(r.length){var o=t.values.slice(0);return canReflect_1_18_0_canReflect.removeValues(o,r),{enum:new comparisons_1$1.In(r),range:o.length?new comparisons_1$1.In(o):set_1$1.EMPTY}}return{enum:set_1$1.EMPTY,range:t}}if(t instanceof comparisons_1$1.NotIn){n=set_1$1.intersection(e,t);var i=t.values.filter(function(t){return!e.isMember(t)});return{range:i.length?new comparisons_1$1.NotIn(i):set_1$1.UNIVERSAL,enum:n}}return{enum:set_1$1.EMPTY,range:t}}function makeMaybe(e,t){function n(e){var t=splitByRangeAndEnum(a,e.range);if(this.range=t.range||set_1$1.EMPTY,this.enum=e.enum?t.enum===set_1$1.EMPTY?e.enum:set_1$1.union(t.enum,e.enum):t.enum,this.enum===set_1$1.EMPTY&&this.range===set_1$1.EMPTY)return set_1$1.EMPTY}var a=new comparisons_1$1.In(e);return n.prototype.orValues=function(){var e=[];return this.range!==set_1$1.EMPTY&&e.push(this.range),this.enum!==set_1$1.EMPTY&&e.push(this.enum),e},n.prototype[isMemberSymbol$4]=function(){var e=this.range[isMemberSymbol$4]||this.range.isMember,t=this.enum[isMemberSymbol$4]||this.enum.isMember;return e.apply(this.range,arguments)||t.apply(this.enum,arguments)},set_1$1.defineComparison(n,n,{union:function(e,t){var a=set_1$1.union(e.enum,t.enum),r=set_1$1.union(e.range,t.range);return new n({enum:a,range:r})},difference:function(e,t){var a=set_1$1.difference(e.enum,t.enum),r=set_1$1.difference(e.range,t.range);return new n({enum:a,range:r})},intersection:function(e,t){var a=set_1$1.intersection(e.enum,t.enum),r=set_1$1.intersection(e.range,t.range);return new n({enum:a,range:r})}}),n.inValues=e,set_1$1.defineComparison(set_1$1.UNIVERSAL,n,{difference:function(e,t){var r,o;if(t.range===set_1$1.UNIVERSAL)return new n({range:t.range,enum:set_1$1.difference(a,t.enum)});if(t.enum===set_1$1.EMPTY){var i=set_1$1.difference(set_1$1.UNIVERSAL,t.range),s=set_1$1.difference(a,t.range),l=set_1$1.difference(s,i);return new n({range:i,enum:l})}return r=set_1$1.difference(e,t.range),o=set_1$1.difference(a,t.enum),new n({enum:o,range:r})}}),t=t||function(e){return e},n.hydrate=function(e,a){return new n({range:a(e,t)})},n}makeMaybe.canMakeMaybeSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e);if(t&&"Or"===t.type){var n=schemaHelpers_1.categorizeOrValues(t.values);return 1===n.valueOfTypes.length&&n.valueOfTypes.length+n.primitives.length===t.values.length}return!1},makeMaybe.makeMaybeSetTypes=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e),n=schemaHelpers_1.categorizeOrValues(t.values),a;return e[comparisonSetTypeSymbol]?a=e[comparisonSetTypeSymbol]:(a=function(t){this.value=canReflect_1_18_0_canReflect.new(e,t)},a.prototype.valueOf=function(){return this.value},canReflect_1_18_0_canReflect.assignSymbols(a.prototype,{"can.serialize":function(){return this.value}})),{Maybe:makeMaybe(n.primitives,function(e){return new a(e)}),ComparisonSetType:a}};var makeMaybe_1=makeMaybe,setTypeSymbol=canSymbol_1_6_5_canSymbol.for("can.SetType"),isMemberSymbol$5=canSymbol_1_6_5_canSymbol.for("can.isMember"),newSymbol$2=canSymbol_1_6_5_canSymbol.for("can.new");function makeEnumSetType(e,t){function n(e){var n=Array.isArray(e)?e:[e];this.values=t?n.map(t):n}canReflect_1_18_0_canReflect.assignSymbols(n.prototype,{"can.serialize":function(){return 1===this.values.length?this.values[0]:this.values}}),n.prototype[isMemberSymbol$5]=function(e){return this.values.some(function(t){return set_1$1.isEqual(t,e)})},n.UNIVERSAL=new n(e);var a=function(e,t){var a=arrayUnionIntersectionDifference(e.values,t.values);return a.difference.length?new n(a.difference):set_1$1.EMPTY};return set_1$1.defineComparison(n,n,{union:function(e,t){var a=arrayUnionIntersectionDifference(e.values,t.values);return a.union.length?new n(a.union):set_1$1.EMPTY},intersection:function(e,t){var a=arrayUnionIntersectionDifference(e.values,t.values);return a.intersection.length?new n(a.intersection):set_1$1.EMPTY},difference:a}),set_1$1.defineComparison(n,set_1$1.UNIVERSAL,{difference:function(t){return a(t,{values:e.slice(0)})}}),set_1$1.defineComparison(set_1$1.UNIVERSAL,n,{difference:function(t,n){return a({values:e.slice(0)},n)}}),n}function makeEnum$1(e,t,n){var a=makeEnumSetType(t,n);return e[setTypeSymbol]=a,e[isMemberSymbol$5]=function(e){return t.some(function(t){return set_1$1.isEqual(t,e)})},a}makeEnum$1.canMakeEnumSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e);if(t&&"Or"===t.type){var n=schemaHelpers_1.categorizeOrValues(t.values);return n.primitives.length===t.values.length}return!1},makeEnum$1.makeEnumSetType=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e),n=schemaHelpers_1.categorizeOrValues(t.values),a=e[newSymbol$2]?e[newSymbol$2].bind(e):void 0;return makeEnumSetType(n.primitives,a)};var makeEnum_1=makeEnum$1,setTypeSymbol$1=canSymbol_1_6_5_canSymbol.for("can.SetType"),schemaSymbol=canSymbol_1_6_5_canSymbol.for("can.getSchema"),defaultQuery=new basicQuery({});function getSchemaProperties(e){var t=e.constructor;if(t&&t[schemaSymbol]){var n=t[schemaSymbol]();return n.keys||{}}return{}}function hydrateFilter(e,t,n){var a=e&&"object"==typeof e;return a&&"$or"in e?hydrateOrs(e.$or,t,n):a&&"$and"in e?hydrateAnds(e.$and,t,n):hydrateAndValues(e,t,n)}var setTypeMap=new WeakMap;function hydrateAndValue(e,t,n,a){if(n){var r=n[setTypeSymbol$1];return r?r.hydrate?r.hydrate(e,comparisons$2.hydrate):set_1$1.hasComparisons(r)?new r(e):comparisons$2.hydrate(e,function(e){return new r(e)}):makeEnum_1.canMakeEnumSetType(n)?(setTypeMap.has(n)||setTypeMap.set(n,makeEnum_1.makeEnumSetType(n)),r=setTypeMap.get(n),new r(e)):makeMaybe_1.canMakeMaybeSetType(n)?(setTypeMap.has(n)||setTypeMap.set(n,makeMaybe_1.makeMaybeSetTypes(n)),r=setTypeMap.get(n).Maybe,r.hydrate(e,comparisons$2.hydrate)):comparisons$2.hydrate(e,a)}return comparisons$2.hydrate(e,a)}function hydrateAndValues(e,t,n){function a(e){if(e){if(Array.isArray(e))return e.map(n);if(canReflect_1_18_0_canReflect.isPlainObject(e))return hydrateAndValues(e,getSchemaProperties(e))}return n?n(e):e}t=t||{};var r={};return canReflect_1_18_0_canReflect.eachKey(e,function(e,n){r[n]=hydrateAndValue(e,n,t[n],a)}),new basicQuery.KeysAnd(r)}function combineAnds(e){var t=Object.keys(e[0].values),n={},a=new comparisons_1$1.In(t);t.map(function(e){n[e]=[]});var r=e.every(function(e){return!!set_1$1.isEqual(a,new comparisons_1$1.In(Object.keys(e.values)))&&(canReflect_1_18_0_canReflect.eachKey(e.values,function(e,t){n[t].push(e)}),!0)});if(r){var o=[];if(t.forEach(function(e){var t=n[e].reduce(function(e,t){if(!1===t)return!1;if(void 0===t)return e;var n=set_1$1.isEqual(e,t);return!!n&&e});t||o.push(e)}),1===o.length){var i=o[0],s=n[i].reduce(function(e,t){return set_1$1.union(e,t)},set_1$1.EMPTY),l={};return t.map(function(e){l[e]=n[e][0]}),l[i]=s,new basicQuery.KeysAnd(l)}}}function hydrateOrs(e,t,n){var a=e.map(function(e){return hydrateAndValues(e,t,n)}),r=combineAnds(a);return r?r:new basicQuery.Or(a)}function hydrateAnds(e,t,n){var a=e.map(function(e){return hydrateAndValues(e,t,n)});return new basicQuery.And(a)}function recursivelyAddOrs(e,t,n,a){t.orValues().forEach(function(t){if("function"==typeof t.orValues)recursivelyAddOrs(e,t,n,a);else{var r={};r[a]=n(t),e.push(r)}})}var basicQuery$1=function(e){var t=e.identity&&e.identity[0],n=e.keys,a=[[basicQuery.Or,function(e,t){return e.values.map(function(e){return t(e)})}],[basicQuery.And,function(e,t){return{$and:e.values.map(function(e){return t(e)})}}],[basicQuery.Not,function(e,t){return{$not:t(e.value)}}],[basicQuery.KeysAnd,function(e,t){var n=[],a={};return canReflect_1_18_0_canReflect.eachKey(e.values,function(e,r){"function"==typeof e.orValues?recursivelyAddOrs(n,e,t,r):a[r]=t(e)}),n.length?1===n.length?n[0]:{$or:n.map(function(e){return canReflect_1_18_0_canReflect.assign(canReflect_1_18_0_canReflect.serialize(a),e)})}:a}],[basicQuery.RecordRange,function(e){return{start:e.start,end:e.end}}],[basicQuery,function(e,n){var a=set_1$1.isEqual(e.filter,set_1$1.UNIVERSAL)?{}:n(e.filter),r={};return 0!==canReflect_1_18_0_canReflect.size(a)&&(r.filter=a),set_1$1.isEqual(e.page,defaultQuery.page)||(r.page={start:e.page.start},e.page.end!==defaultQuery.page.end&&(r.page.end=e.page.end)),e.sort.key!==t&&(r.sort=e.sort.key),r}]],r=basicQuery.makeSort(e,hydrateAndValue),o=new serializer(a);return o.add(comparisons$2.serializer),{hydrate:function(e){var a=canReflect_1_18_0_canReflect.serialize(e.filter),o=hydrateFilter(a,n,helpers_1$3.valueHydrator),i={filter:o};return e.page&&(i.page=new basicQuery.RecordRange(e.page.start,e.page.end)),i.sort=e.sort?new r(e.sort):new r(t),new basicQuery(i)},serializer:o}},schemaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getSchema"),newSymbol$3=canSymbol_1_6_5_canSymbol.for("can.new");function QueryLogic(e,t){e=e||{};var n=t&&t.toQuery,a=t&&t.toParams,r;r=e[schemaSymbol$1]?e[schemaSymbol$1]():e;var o=r.identity&&r.identity[0];o||(r.identity=["id"]);var i=basicQuery$1(r),s,l;s=n?function(e){return i.hydrate(n(e))}:i.hydrate,l=a?function(e){return a(i.serializer.serialize(e))}:i.serializer.serialize,this.hydrate=s,this.serialize=l,this.schema=r}function makeNewSet(e){return function(t,n){var a=this.hydrate(t),r=this.hydrate(n),o=set_1$1[e](a,r);return this.serialize(o)}}function makeReturnValue(e){return function(t,n){var a=this.hydrate(t),r=this.hydrate(n);return set_1$1[e](a,r)}}for(var prop in canReflect_1_18_0_canReflect.assignSymbols(QueryLogic.prototype,{"can.getSchema":function(){return this.schema}}),canReflect_1_18_0_canReflect.assign(QueryLogic.prototype,{union:makeNewSet("union"),difference:makeNewSet("difference"),intersection:makeNewSet("intersection"),isEqual:makeReturnValue("isEqual"),isProperSubset:makeReturnValue("isProperSubset"),isSubset:makeReturnValue("isSubset"),isSpecial:set_1$1.isSpecial,isDefinedAndHasMembers:set_1$1.isDefinedAndHasMembers,count:function(e){var t=this.hydrate(e);return t.page.end-t.page.start+1},identityKeys:function(){return this.schema.identity},filterMembers:function(e,t,n){var a=this.hydrate(e);if(3<=arguments.length){var r=this.hydrate(t);return a.filterFrom(n,r)}return a.filterFrom(t)},filterMembersAndGetCount:function(e,t,n){var a=this.hydrate(e),r=this.hydrate(t);return a.filterMembersAndGetCount(n,r)},unionMembers:function(e,t,n,a){var r=this.hydrate(e),o=this.hydrate(t),i=this.schema;return r.merge(o,n,a,function(e){return canReflect_1_18_0_canReflect.getIdentity(e,i)})},isMember:function(e,t){return this.hydrate(e).isMember(t)},memberIdentity:function(e){return canReflect_1_18_0_canReflect.getIdentity(e,this.schema)},index:function(e,t,n){return this.hydrate(e).index(n,t)},insert:function(e,t,n){var a=this.index(e,t,n);void 0===a&&(a=t.length);var r=t.slice(0);return r.splice(a,0,n),r},isPaginated:function(e){var t=this.hydrate(e);return!set_1$1.isEqual(t.page,set_1$1.UNIVERSAL)},removePagination:function(e){var t=this.hydrate(e);return t.removePagination(),this.serialize(t)}}),set_1$1)void 0===QueryLogic[prop]&&(QueryLogic[prop]=set_1$1[prop]);QueryLogic.makeEnum=function(e){var t=function(){};return t[newSymbol$3]=function(e){return e},makeEnum_1(t,e),t},QueryLogic.KeysAnd=basicQuery.KeysAnd,QueryLogic.ValuesOr=basicQuery.Or,QueryLogic.In=comparisons_1$1.In,QueryLogic.NotIn=comparisons_1$1.NotIn,QueryLogic.GreaterThan=comparisons_1$1.GreaterThan,QueryLogic.GreaterThanEqual=comparisons_1$1.GreaterThanEqual,QueryLogic.LessThan=comparisons_1$1.LessThan,QueryLogic.LessThanEqual=comparisons_1$1.LessThanEqual,QueryLogic.ValueAnd=comparisons_1$1.And,QueryLogic.ValueOr=comparisons_1$1.Or;var canQueryLogic_1_2_2_canQueryLogic=QueryLogic;function deepMatches(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t))return e.every(function(e,n){return deepMatches(e,t[n])});if(e&&t&&canReflect_1_18_0_canReflect.isPlainObject(e)&&canReflect_1_18_0_canReflect.isPlainObject(t)){for(var n in e){if(!t.hasOwnProperty(n))return!1;if(!deepMatches(e[n],t[n]))return!1}return!0}return!1}function removeFixtureAndXHR(e){if(e.fixture||e.xhr||e.data){var t=canReflect_1_18_0_canReflect.serialize(e);return delete t.fixture,delete t.xhr,delete t.data,t}return e}function identityIntersection$1(e,t){return e.value===t.value?e:set_1$1.EMPTY}function identityDifference$1(e,t){return e.value===t.value?set_1$1.EMPTY:e}function identityUnion$1(e,t){return e.value===t.value?e:set_1$1.UNDEFINABLE}var identityComparitor$1={intersection:identityIntersection$1,difference:identityDifference$1,union:identityUnion$1};function makeComparatorType(e){var t=function(){},n=function(e){this.value=e};return n.prototype.isMember=function(t,n,a){return e(this.value,t,n,a)},canReflect_1_18_0_canReflect.assignSymbols(t,{"can.SetType":n}),set_1$1.defineComparison(n,n,identityComparitor$1),set_1$1.defineComparison(set_1$1.UNIVERSAL,n,{difference:function(){return set_1$1.UNDEFINABLE}}),t}function quickEqual(e,t){var n=e.data,a=t.data;if(n&&a&&!deepMatches(n,a))return!1;var r=new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(removeFixtureAndXHR(e)),o=new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(removeFixtureAndXHR(t));return set_1$1.isEqual(r,o)}function quickSubset(e,t){return set_1$1.isSubset(new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(e),new canQueryLogic_1_2_2_canQueryLogic.KeysAnd(t))}var types$1={};canReflect_1_18_0_canReflect.eachKey({IsEmptyOrNull:function(e,t){return!(null!=e||0!==canReflect_1_18_0_canReflect.size(t))||null==t&&0===canReflect_1_18_0_canReflect.size(e)||quickEqual(e,t)},isEmptyOrSubset:function(e,t){return!(null!=e||0!==canReflect_1_18_0_canReflect.size(t))||null==t&&0===canReflect_1_18_0_canReflect.size(e)||quickSubset(e,t)},TemplateUrl:function(e,t){return!!canFixture_3_1_7_dataFromUrl(e,t)},StringIgnoreCase:function(e,t){return t&&e?e.toLowerCase()===t.toLowerCase():t===e},Ignore:function(){return!0}},function(e,t){types$1[t]=makeComparatorType(e)});var schema$1={identity:["id"],keys:{url:types$1.TemplateUrl,fixture:types$1.Ignore,xhr:types$1.Ignore,type:types$1.StringIgnoreCase,method:types$1.StringIgnoreCase,helpers:types$1.Ignore,headers:types$1.IsEmptyOrNull,data:types$1.IsEmptyOrSubset}},query=new canQueryLogic_1_2_2_canQueryLogic(schema$1),canFixture_3_1_7_matches={fixture:quickEqual,request:function(e,t){return query.isMember({filter:t},e)},matches:function(e,t,n){return n?this.fixture(e,t):this.request(e,t)},makeComparatorType:makeComparatorType};function getItems(e){return Array.isArray(e)?e:e.data}function indexOf$1(e,t,n){for(var a=canReflect_1_18_0_canReflect.getSchema(n),r=0;r<e.length;r++)if(t===canReflect_1_18_0_canReflect.getIdentity(e[r],a))return r;return-1}function makeSimpleStore(e){e.constructor=makeSimpleStore;var t=Object.create(e);return canReflect_1_18_0_canReflect.assignMap(t,{getRecordFromParams:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);return this.getRecord(t)},log:function(){this._log=!0},getSets:function(){return this.getQueries()},getQueries:function(){return Promise.resolve(this.getQueriesSync())},getQueriesSync:function(){return this.getQueryDataSync().map(function(e){return e.query})},getListData:function(e){e=e||{};var t=this.getListDataSync(e);return t?Promise.resolve(t):Promise.reject({title:"no data",status:"404",detail:"No data available for this query.\nAvailable queries: "+JSON.stringify(this.getQueriesSync())})},getPaginatedListDataSync:function(e){var t=this.getAllRecords(),n=this.queryLogic.removePagination(e.query),a=this.queryLogic.filterMembersAndGetCount(n,{},t),r=indexOf$1(a.data,e.startIdentity,this.queryLogic),o=a.data.slice(r,r+this.queryLogic.count(e.query));return{count:a.data.length,data:o}},getListDataSync:function(e){for(var t=this.getQueryDataSync(),n=this.queryLogic.isPaginated(e),a=0,r,o;a<t.length;a++)o=t[a].query,this.queryLogic.isSubset(e,o)&&(r=t[a]);var s=this.getAllRecords();if(n&&this.queryLogic.isPaginated(r.query)){var l=this.getPaginatedListDataSync(r);return this.queryLogic.filterMembersAndGetCount(e,r.query,l.data)}var d=this.queryLogic.filterMembersAndGetCount(e,{},s);return d&&d.count?d:r?{count:0,data:[]}:void 0},updateListData:function(e,t){var n=this.getQueryDataSync();t=t||{};var a=canReflect_1_18_0_canReflect.serialize(e),r=getItems(a);this.updateRecordsSync(r);var o=this.queryLogic.isPaginated(t),s=r.length?canReflect_1_18_0_canReflect.getIdentity(r[0],this.queryLogic.schema):void 0;if(o){for(var l=0;l<n.length;l++){var d=n[l].query,p=this.queryLogic.union(d,t);if(this.queryLogic.isDefinedAndHasMembers(p)){var c=this.getPaginatedListDataSync(n[l]),u=this.queryLogic.unionMembers(d,t,c.data,r);return s=canReflect_1_18_0_canReflect.getIdentity(u[0],this.queryLogic.schema),n[l]={query:p,startIdentity:s},this.updateQueryDataSync(n),Promise.resolve()}}return n.push({query:t,startIdentity:s}),this.updateQueryDataSync(n),Promise.resolve()}var y=this.getAllRecords(),m=this.queryLogic.filterMembers(t,y);if(m.length){var g=new Map;m.forEach(function(e){g.set(canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema),e)},this),r.forEach(function(e){g.delete(canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema))},this),this.destroyRecords(canReflect_1_18_0_canReflect.toArray(g))}var h=this.getQueryDataSync(),f=h.filter(function(e){return!this.queryLogic.isSubset(e.query,t)},this),b=f.filter(function(e){return this.queryLogic.isSubset(t,e.query)},this);return b.length?this.updateQueryDataSync(f):this.updateQueryDataSync(f.concat([{query:t,startIdentity:s}])),Promise.resolve()},getData:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,canReflect_1_18_0_canReflect.getSchema(this.queryLogic)),n=this.getRecord(t);return n?Promise.resolve(n):Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})},createData:function(e){return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},this.getRecordFromParams(e)))},updateData:function(e){if(this.errorOnMissingRecord&&!this.getRecordFromParams(e)){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);return Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."})}return this.updateRecordsSync([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},this.getRecordFromParams(e)))},destroyData:function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema),n=this.getRecordFromParams(e);return this.errorOnMissingRecord&&!n?Promise.reject({title:"no data",status:"404",detail:"No record with matching identity ("+t+")."}):(this.destroyRecords([e]),Promise.resolve(canReflect_1_18_0_canReflect.assignMap({},n||e)))}})}var canMemoryStore_1_0_3_makeSimpleStore=makeSimpleStore,canMemoryStore_1_0_3_canMemoryStore=canNamespace_1_0_0_canNamespace.memoryStore=function t(e){e.constructor=t;var n=Object.create(canMemoryStore_1_0_3_makeSimpleStore(e));return canReflect_1_18_0_canReflect.assignMap(n,{clear:function(){this._instances={},this._queryData=[]},_queryData:[],updateQueryDataSync:function(e){this._queryData=e},getQueryDataSync:function(){return this._queryData},_instances:{},getRecord:function(e){return this._instances[e]},getAllRecords:function(){var e=[];for(var t in this._instances)e.push(this._instances[t]);return e},destroyRecords:function(e){canReflect_1_18_0_canReflect.eachIndex(e,function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);delete this._instances[t]},this)},updateRecordsSync:function(e){e.forEach(function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);this._instances[t]=e},this)}}),n},connectToConnection=function(e,t){return function(n,a){this.connection[e](t.call(this,n.data)).then(function(e){a(e)},function(e){a(parseInt(e.status,10),e)})}},makeMakeItems=function(e,t){var n=Math.max;return function(){var a=[],r=0,o="number";return e.forEach(function(e){a.push(canReflect_1_18_0_canReflect.serialize(e));var i=typeof e[t];"number"==i?r=n(e[t],r):o=i}),{maxId:r,items:a,idType:o}}},stringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}},Store=function(e,t,n){var a=e.queryLogic.schema,r=a.identity[0],o=a.keys;for(var i in o&&o[r]||console.warn("No type specified for identity key. Going to convert strings to reasonable type."),this.connection=e,this.makeItems=t,this.idProp=n,this.reset(),Store.prototype)this[i]=this[i].bind(this)},doNotConvert=function(e){return e};function typeConvert(e){var t=this.connection.queryLogic.schema,n=this.idType,a=t.identity[0],r=t.keys;r&&r[a]||(r={},r[a]=function(e){return"string"===n?""+e:"string"==typeof e?stringToAny(e):e});var o={};return canReflect_1_18_0_canReflect.eachKey(e,function(e,t){o[t]=r[t]?canReflect_1_18_0_canReflect.serialize(canReflect_1_18_0_canReflect.convert(e,r[t])):e}),o}canReflect_1_18_0_canReflect.assignMap(Store.prototype,{getListData:connectToConnection("getListData",doNotConvert),getData:connectToConnection("getData",typeConvert),createData:function(e,t){var n=this.idProp;e.data[n]=++this.maxId,this.connection.createData(typeConvert.call(this,e.data)).then(function(e){t(e)},function(e){t(403,e)})},createInstance:function(e){var t=this.idProp;return t in e||(e[t]=++this.maxId),this.connection.createData(e)},updateData:connectToConnection("updateData",typeConvert),updateInstance:function(e){return this.connection.updateData(e)},destroyInstance:function(e){return this.connection.destroyData(e)},destroyData:connectToConnection("destroyData",typeConvert),reset:function(e){e&&(this.makeItems=makeMakeItems(e,this.idProp));var t=this.makeItems();this.maxId=t.maxId,this.idType=t.idType,this.connection.updateListData(t.items,{})},get:function(e){var t=this.connection.queryLogic.memberIdentity(e);return this.connection.getRecord(t)},getList:function(e){return this.connection.getListDataSync(e)}});function looksLikeAQueryLogic(e){return e&&"identityKeys"in e}Store.make=function(e,t,n){var a=Math.max,r,o;"number"==typeof e?(n?!looksLikeAQueryLogic(n)&&(n=new canQueryLogic_1_2_2_canQueryLogic(n)):n=new canQueryLogic_1_2_2_canQueryLogic({}),o=n.identityKeys()[0]||"id",r=function(){for(var n=[],r=0,s=0,l;s<e;s++)l=t(s,n),l[o]||(l[o]=s),r=a(l[o],r),n.push(l);return{maxId:r,items:n}}):Array.isArray(e)&&(n=t,n?!looksLikeAQueryLogic(n)&&(n=new canQueryLogic_1_2_2_canQueryLogic(n)):n=new canQueryLogic_1_2_2_canQueryLogic({}),o=n.identityKeys()[0]||"id",r=makeMakeItems(e,o));var i=canMemoryStore_1_0_3_canMemoryStore({queryLogic:n,errorOnMissingRecord:!0});return new Store(i,r,o)};var canFixture_3_1_7_store=Store,canFixture_3_1_7_core=createCommonjsModule(function(e,t){function n(e){return e&&(e.getData||e.getListData)}function a(e){var t=e.match(/(GET|POST|PUT|DELETE|PATCH) (.+)/i);if(!t)return[void 0,e];var n=t[1],a=t[2];return[n,a]}function r(e){var t=e.match(/\{(.*)\}/),n=t&&2===t.length;if(n)return t[1]}function o(e,t){if(t=t||r(e),!t)return[void 0,e];var n=new RegExp("\\/\\{"+t+"\\}.*"),a=n.test(e),o=a?e.replace(n,""):e,i=a?e:e.trim()+"/{"+t+"}";return[i,o]}function i(e,t){var n={},r=a(e),i=r[0],s=r[1],l=o(s,t.idProp),d=l[0],c=l[1];if(i){var u=["fixture(\""+e+"\", fixture) must use a store method, not a store directly."];if(d){var y=p.item[i];if(y){n[i+" "+d]=t[y];u.push("Replace with fixture(\""+i+" "+d+"\", fixture."+y+") for items.")}}var m=p.list[i];if(m){n[i+" "+c]=t[m];u.push("Replace with fixture(\""+i+" "+c+"\", fixture."+m+") for lists.")}var g=u.join(" ");dev.warn(g)}else{var h=p.item;for(var f in h){var b=h[f];n[f+" "+d]=t[b]}var v=p.list;for(var _ in v){var S=v[_];n[_+" "+c]=t[S]}}return n}function s(e){var t=a(e),n=t[0],r=t[1];return n?{type:n,url:r}:{url:r}}function l(e,n,a){var r=t.index(n,!0),o;if(-1<r&&(o=d.splice(r,1)),null==a)return o;if("object"==typeof a){var i=a;a=function(){return i}}return n.fixture=a,d.unshift(n),o}var d=[];t.fixtures=d;var p={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};t.add=function(e,a){if(void 0===a){var r=[];if(Array.isArray(e))canReflect_1_18_0_canReflect.eachIndex(e,function(e){var n=e.fixture;return e=canReflect_1_18_0_canReflect.assignMap({},e),delete e.fixture,t.add(e,n)});else return canReflect_1_18_0_canReflect.eachKey(e,function(e,n){r=r.concat(t.add(n,e))}),r}return n(a)?(e=i(e,a),t.add(e)):("string"==typeof e&&(e=s(e)),l(d,e,a))};var c=t.add;c.on=!0,c.delay=10,t.callDynamicFixture=function(e,n,a){e.data=n.data;var r=function(){var n=t.extractResponse.apply(e,arguments);return a.apply(this,n)},o=function(){var t=n.fixture(e,r,e.headers,n);canReflect_1_18_0_canReflect.isPromise(t)?t.then(function(e){e!==void 0&&r(200,e)}):t!==void 0&&r(200,t)};return e.async?setTimeout(o,c.delay):(o(),null)},t.index=function(e,t){for(var n=0;n<d.length;n++)if(canFixture_3_1_7_matches.matches(e,d[n],t))return n;return-1},t.get=function(e){if(c.on){var n=t.index(e,!0);-1===n&&(n=t.index(e,!1));var a=0<=n?canReflect_1_18_0_canReflect.assignMap({},d[n]):void 0;if(a){var r=a.fixture,o=canFixture_3_1_7_dataFromUrl(a.url,e.url);if("string"==typeof a.fixture)o&&(r=sub(r,o)),a.url=r,a.data=null,a.type="GET",a.error||(a.error=function(e,t,n){throw"fixtures.js Error "+t+" "+n});else if(canReflect_1_18_0_canReflect.isPlainObject(e.data)||null==e.data){var i=canReflect_1_18_0_canReflect.assignMap({},e.data||{});a.data=canReflect_1_18_0_canReflect.assignMap(i,o)}else a.data=e.data}return a}},t.matches=canFixture_3_1_7_matches,t.extractResponse=function(e,t,n,a){return"number"!=typeof e&&(n=t,t=e,e=200),"string"==typeof n&&(a=n,n={}),[e,t,n,a]}}),canFixture_3_1_7_core_1=canFixture_3_1_7_core.fixtures,canFixture_3_1_7_core_2=canFixture_3_1_7_core.add,canFixture_3_1_7_core_3=canFixture_3_1_7_core.callDynamicFixture,canFixture_3_1_7_core_4=canFixture_3_1_7_core.index,canFixture_3_1_7_core_5=canFixture_3_1_7_core.get,canFixture_3_1_7_core_6=canFixture_3_1_7_core.matches,canFixture_3_1_7_core_7=canFixture_3_1_7_core.extractResponse,XHR=XMLHttpRequest,GLOBAL="undefined"==typeof commonjsGlobal?window:commonjsGlobal,props$2=["type","url","async","response","responseText","responseType","responseXML","responseURL","status","statusText","readyState"],events=["abort","error","load","loadend","loadstart","progress","readystatechange"];(function(){var e=new XHR;for(var t in e)0===t.indexOf("on")?-1===events.indexOf(t.substr(2))&&events.push(t.substr(2)):-1===props$2.indexOf(t)&&"function"!=typeof e[t]&&props$2.push(t)})();function callEvents(e,t){for(var n=e.__events[t]||[],a=0,r=n.length,o;a<r;a++)o=n[a],o.call(e)}function defineNonEnumerable$2(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}GLOBAL.XMLHttpRequest=function(){var e=this,t=new XHR;defineNonEnumerable$2(this,"_xhr",t),defineNonEnumerable$2(this,"_requestHeaders",{}),defineNonEnumerable$2(this,"__events",{}),events.forEach(function(n){t["on"+n]=function(){if(callEvents(e,n),e["on"+n])return e["on"+n].apply(e,arguments)}}),this.onload=null},GLOBAL.XMLHttpRequest._XHR=XHR,canReflect_1_18_0_canReflect.assignMap(XMLHttpRequest.prototype,{setRequestHeader:function(e,t){this._requestHeaders[e]=t},open:function(e,t,n){this.type=e,this.url=t,this.async=!1!==n},getAllResponseHeaders:function(){return this._xhr.getAllResponseHeaders.apply(this._xhr,arguments)},addEventListener:function(e,t){var n=this.__events[e]=this.__events[e]||[];n.push(t)},removeEventListener:function(e,t){var n=this.__events[e]=this.__events[e]||[],a=n.indexOf(t);0<=a&&n.splice(a,1)},setDisableHeaderCheck:function(e){this._disableHeaderCheck=!!e},getResponseHeader:function(e){return this._xhr.getResponseHeader(e)},abort:function(){var e=this._xhr;return void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),e.open(this.type,this.url,!1!==this.async),e.send()),e.abort()},send:function(e){var t=this.type.toLowerCase()||"get",n={url:this.url,data:e,headers:this._requestHeaders,type:t,method:t,async:this.async,xhr:this};if((n.data||"get"!==n.type)&&"delete"!==n.type||(n.data=canDeparam_1_2_3_canDeparam(n.url.split("?")[1]),n.url=n.url.split("?")[0]),"string"==typeof n.data)try{n.data=JSON.parse(n.data)}catch(t){n.data=canDeparam_1_2_3_canDeparam(n.data)}var a=canFixture_3_1_7_core.get(n),r=this;if(a&&"function"==typeof a.fixture)return void(this.timeoutId=canFixture_3_1_7_core.callDynamicFixture(n,a,function(e,t,n,a){t="string"==typeof t?t:JSON.stringify(t),r._xhr={open:function(){},send:function(){},abort:function(){},getResponseHeader:function(){}},canReflect_1_18_0_canReflect.assignMap(r,{readyState:4,status:e});200<=e&&300>e||304===e?canReflect_1_18_0_canReflect.assignMap(r,{statusText:a||"OK",responseText:t}):canReflect_1_18_0_canReflect.assignMap(r,{statusText:a||"error",responseText:t}),r.getAllResponseHeaders=function(){var e=[];return canReflect_1_18_0_canReflect.eachKey(n||{},function(t,n){Array.prototype.push.apply(e,[n,": ",t,"\r\n"])}),e.join("")},r.onreadystatechange&&r.onreadystatechange({target:r}),callEvents(r,"progress"),r.onprogress&&r.onprogress(),callEvents(r,"load"),r.onload&&r.onload(),callEvents(r,"loadend"),r.onloadend&&r.onloadend()}));var o=function(){return r._xhr.open(r._xhr.type,r._xhr.url,r._xhr.async),r._requestHeaders&&Object.keys(r._requestHeaders).forEach(function(e){r._xhr.setRequestHeader(e,r._requestHeaders[e])}),r._xhr.send(e)};return a&&"number"==typeof a.fixture?(canLog_1_0_2_canLog.log("can-fixture: "+n.url+" => delay "+a.fixture+"ms"),void(this.timeoutId=setTimeout(o,a.fixture))):(a&&(canLog_1_0_2_canLog.log("can-fixture: "+n.url+" => "+a.url),canReflect_1_18_0_canReflect.assignMap(r,a)),o())}}),props$2.forEach(function(e){Object.defineProperty(XMLHttpRequest.prototype,e,{get:function(){return this._xhr[e]},set:function(t){try{this._xhr[e]=t}catch(t){}}})});var fixture=canFixture_3_1_7_core.add,noop$2=function(){};canReflect_1_18_0_canReflect.assignMap(fixture,{rand:function a(e,t,n){var r=Math.floor;if("number"==typeof e)return"number"==typeof t?e+r(Math.random()*(t-e+1)):r(Math.random()*(e+1));var o=e.slice(0);t===void 0?(t=1,n=o.length):n===void 0&&(n=t);for(var s=[],l=t+Math.round(a(n-t)),d=0;d<l;d++){var p=a(o.length-1),c=o.splice(p,1)[0];s.push(c)}return s},xhr:function(e){return canReflect_1_18_0_canReflect.assignMap({},{abort:noop$2,getAllResponseHeaders:function(){return""},getResponseHeader:function(){return""},open:noop$2,overrideMimeType:noop$2,readyState:4,responseText:"",responseXML:null,send:noop$2,setRequestHeader:noop$2,status:200,statusText:"OK"},e)},store:canFixture_3_1_7_store.make,fixtures:canFixture_3_1_7_core.fixtures}),"undefined"!=typeof window&&"function"!=typeof commonjsRequire.resolve&&(window.fixture=function(){return dev.warn("You are using the global fixture. Make sure you import can-fixture."),fixture.apply(this,arguments)});var canFixture_3_1_7_fixture=canNamespace_1_0_0_canNamespace.fixture=fixture,behaviorsMap={};function behavior(e,t){"string"!=typeof e&&(t=e,e=void 0);var n=function(n){var a=function(){};Object.defineProperty(a,"name",{value:e,configurable:!0}),a.prototype=n;var r=new a,o="function"==typeof t?t.apply(r,arguments):t;for(var i in o)o.hasOwnProperty(i)?Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(o,i)):r[i]=o[i];return r.__behaviorName=e,r};return e&&(n.behaviorName=e,behaviorsMap[e]=n),n.isBehavior=!0,n}behavior.map=behaviorsMap;var canConnect_4_0_2_behavior=behavior,behavior$1=canConnect_4_0_2_behavior,connect=function(e,t){e=e.map(function(e,t){var n=-1;return"string"==typeof e?(n=connect.order.indexOf(e),e=e.map[e]):e.isBehavior?n=connect.order.indexOf(e.behaviorName):e=connect.behavior(e),{originalIndex:t,sortedIndex:n,behavior:e}}),e.sort(function(e,t){return~e.sortedIndex&&~t.sortedIndex?e.sortedIndex-t.sortedIndex:e.originalIndex-t.originalIndex}),e=e.map(function(e){return e.behavior});var n=connect.base(connect.behavior("options",function(){return t})());return e.forEach(function(e){n=e(n)}),n.init&&n.init(),n};connect.order=["data/localstorage-cache","data/url","data/parse","cache-requests","data/combine-requests","constructor","constructor/store","can/map","can/ref","fall-through-cache","data/worker","real-time","data/callbacks-cache","data/callbacks","constructor/callbacks-once"],connect.behavior=behavior$1;var canConnect_4_0_2_connect=connect,base=canConnect_4_0_2_behavior("base",function(e){var t;return{id:function(e){if(this.queryLogic)return canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);if(this.idProp)return e[this.idProp];throw new Error("can-connect/base/base - Please add a queryLogic option.")},listQuery:function(e){return e[this.listQueryProp]},listQueryProp:canSymbol_1_6_5_canSymbol.for("can.listQuery"),init:function(){},get queryLogic(){if(t)return t;return e.queryLogic?e.queryLogic:e.algebra?e.algebra:void 0},set queryLogic(e){t=e}}});canConnect_4_0_2_connect.base=base;var canConnect_4_0_2_canConnect=canNamespace_1_0_0_canNamespace.connect=canConnect_4_0_2_connect,assign$1=canReflect_1_18_0_canReflect.assignMap,WeakReferenceMap=function(){this.set={}};assign$1(WeakReferenceMap.prototype,{has:function(e){return!!this.set[e]},addReference:function(e,t,n){if("undefined"==typeof e)throw new Error("can-connect: You must provide a key to store a value in a WeakReferenceMap");var a=this.set[e];a||(a=this.set[e]={item:t,referenceCount:0,key:e}),a.referenceCount+=n||1},referenceCount:function(e){var t=this.set[e];if(t)return t.referenceCount},deleteReference:function(e){var t=this.set[e];t&&(t.referenceCount--,0===t.referenceCount&&delete this.set[e])},get:function(e){var t=this.set[e];if(t)return t.item},forEach:function(e){for(var t in this.set)e(this.set[t].item,t)}});var weakReferenceMap=WeakReferenceMap,updateDeepExceptIdentity=function(e,t,n){if(n||(n=canReflect_1_18_0_canReflect.getSchema(e)),!n)throw new Error("can-diff/update-except-id is unable to update without a schema.");n.identity.forEach(function(n){var a=canReflect_1_18_0_canReflect.getKeyValue(e,n);void 0!==a&&canReflect_1_18_0_canReflect.setKeyValue(t,n,a)}),canReflect_1_18_0_canReflect.updateDeep(e,t)},idMerge=function(e,t,n,a){var r=list(e,t,function(e,t){return n(e)===n(t)});r.forEach(function(t){canReflect_1_18_0_canReflect.splice(e,t.index,t.deleteCount,t.insert.map(a))})},makeArray=canReflect_1_18_0_canReflect.toArray,assign$2=canReflect_1_18_0_canReflect.assignMap,constructor_1=canConnect_4_0_2_behavior("constructor",function(){var e={cidStore:new weakReferenceMap,_cid:0,get:function(e){var t=this;return this.getData(e).then(function(e){return t.hydrateInstance(e)})},getList:function(e){e=e||{};var t=this;return this.getListData(e).then(function(n){return t.hydrateList(n,e)})},hydrateList:function(e,t){Array.isArray(e)&&(e={data:e});for(var n=[],a=0;a<e.data.length;a++)n.push(this.hydrateInstance(e.data[a]));if(e.data=n,this.list)return this.list(e,t);var r=e.data.slice(0);return r[this.listQueryProp||"__listQuery"]=t,copyMetadata(e,r),r},hydrateInstance:function(e){return this.instance?this.instance(e):assign$2({},e)},save:function(e){var t=this.serializeInstance(e),n=this.id(e),a=this;if(void 0===n){var r=this._cid++;return this.cidStore.addReference(r,e),this.createData(t,r).then(function(t){return void 0!==t&&a.createdInstance(e,t),a.cidStore.deleteReference(r,e),e})}return this.updateData(t).then(function(t){return void 0!==t&&a.updatedInstance(e,t),e})},destroy:function(e){var t=this.serializeInstance(e),n=this,a=this.id(e);return void 0===a?(this.destroyedInstance(e,{}),Promise.resolve(e)):this.destroyData(t).then(function(t){return void 0!==t&&n.destroyedInstance(e,t),e})},createdInstance:function(e,t){assign$2(e,t)},updatedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},updatedList:function(e,t){for(var n=[],a=0;a<t.data.length;a++)n.push(this.hydrateInstance(t.data[a]));idMerge(e,n,this.id.bind(this),this.hydrateInstance.bind(this)),copyMetadata(t,e)},destroyedInstance:function(e,t){updateDeepExceptIdentity(e,t,this.queryLogic.schema)},serializeInstance:function(e){return assign$2({},e)},serializeList:function(e){var t=this;return makeArray(e).map(function(e){return t.serializeInstance(e)})},isNew:function(e){var t=this.id(e);return!(t||0===t)}};return e});function copyMetadata(e,t){for(var n in e)"data"!=n&&("function"==typeof t.set?t.set(n,e[n]):"function"==typeof t.attr?t.attr(n,e[n]):t[n]=e[n])}var assignDeepExceptIdentity=function(e,t,n){if(n||(n=canReflect_1_18_0_canReflect.getSchema(e)),!n)throw new Error("can-diff/update-except-id is unable to update without a schema.");n.identity.forEach(function(n){var a=canReflect_1_18_0_canReflect.getKeyValue(e,n);void 0!==a&&canReflect_1_18_0_canReflect.setKeyValue(t,n,a)}),canReflect_1_18_0_canReflect.assignDeep(e,t)};function smartMerge(e,t){return t=canReflect_1_18_0_canReflect.serialize(t),canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)?mergeList(e,t):mergeMap(e,t),e}function mergeMap(e,t){canReflect_1_18_0_canReflect.eachKey(e,function(n,a){if(!canReflect_1_18_0_canReflect.hasKey(t,a))return void canReflect_1_18_0_canReflect.deleteKeyValue(e,a);var r=canReflect_1_18_0_canReflect.getKeyValue(t,a);if(canReflect_1_18_0_canReflect.deleteKeyValue(t,a),canReflect_1_18_0_canReflect.isPrimitive(n))return void canReflect_1_18_0_canReflect.setKeyValue(e,a,r);var o=Array.isArray(r),i=canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(n);if(i&&o)mergeList(n,r);else if(!o&&!i&&canReflect_1_18_0_canReflect.isMapLike(n)&&canReflect_1_18_0_canReflect.isPlainObject(r)){var s=canReflect_1_18_0_canReflect.getSchema(n);if(s&&s.identity&&s.identity.length){var l=canReflect_1_18_0_canReflect.getIdentity(n,s);if(null!=l&&l===canReflect_1_18_0_canReflect.getIdentity(r,s))return void mergeMap(n,r)}canReflect_1_18_0_canReflect.setKeyValue(e,a,canReflect_1_18_0_canReflect.new(n.constructor,r))}else canReflect_1_18_0_canReflect.setKeyValue(e,a,r)}),canReflect_1_18_0_canReflect.eachKey(t,function(t,n){canReflect_1_18_0_canReflect.setKeyValue(e,n,t)})}function mergeList(e,t){var n=canReflect_1_18_0_canReflect.getSchema(e),a,r;n&&(a=n.values),a&&(r=canReflect_1_18_0_canReflect.getSchema(a)),!r&&0<canReflect_1_18_0_canReflect.size(e)&&(r=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0)));var o=r&&r.identity&&r.identity.length?function(e,t){var n=canReflect_1_18_0_canReflect.getIdentity(e,r),a=canReflect_1_18_0_canReflect.getIdentity(t,r),o=n===a;return o&&mergeMap(e,t),o}:function(e,t){var n=e===t;return n&&!canReflect_1_18_0_canReflect.isPrimitive(e)&&mergeMap(e,t),n};var i=list(e,t,o),s=a?canReflect_1_18_0_canReflect.new.bind(canReflect_1_18_0_canReflect,a):function(e){return e};return i.length?void i.forEach(function(t){applyPatch(e,t,s)}):e}function applyPatch(e,t,n){var a=n&&t.insert.map(function(e){return n(e)})||t.insert,r=[t.index,t.deleteCount].concat(a);return e.splice.apply(e,r),e}smartMerge.applyPatch=applyPatch;var mergeDeep=smartMerge,each$1=canReflect_1_18_0_canReflect.each,isPlainObject$1=canReflect_1_18_0_canReflect.isPlainObject,getNameSymbol$1=canSymbol_1_6_5_canSymbol.for("can.getName");function smartMergeExceptIdentity(e,t,n){if(n||(n=canReflect_1_18_0_canReflect.getSchema(e)),!n)throw new Error("can-connect/can/map/ is unable to update without a schema.");n.identity.forEach(function(n){var a=canReflect_1_18_0_canReflect.getKeyValue(e,n);void 0!==a&&canReflect_1_18_0_canReflect.setKeyValue(t,n,a)}),mergeDeep(e,t)}var canMapBehavior=canConnect_4_0_2_behavior("can/map",function(e){var t={init:function(){if(!this.Map)if(this.ObjectType)this.Map=this.ObjectType;else throw new Error("can-connect/can/map/map must be configured with a Map or ObjectType type");this[getNameSymbol$1]||(this[getNameSymbol$1]=function(){return this.name?"Connection{"+this.name+"}":this.Map?"Connection{"+canReflect_1_18_0_canReflect.getName(this.Map)+"}":"string"==typeof this.url?"Connection{"+this.url+"}":"Connection{}"}),this.List=this.List||this.ArrayType||this.Map.List;var t=!!this.List;t||Object.defineProperty(this,"List",{get:function(){throw new Error("can-connect/can/map/map - "+canReflect_1_18_0_canReflect.getName(this)+" should be configured with an ArrayType or List type.")}}),overwrite(this,this.Map,mapOverwrites),t&&overwrite(this,this.List,listOverwrites),this.queryLogic||(this.queryLogic=new canQueryLogic_1_2_2_canQueryLogic(this.Map));var n=this;if(this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")]){var a=function(e,t){var a=t?"addInstanceReference":"deleteInstanceReference";n[a]&&n[a](e)};this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")](a)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the Map type");if(t)if(this.List[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")]){var r=function(e,t){var a=t?"addListReference":"deleteListReference";n[a]&&n[a](e)};this.List[canSymbol_1_6_5_canSymbol.for("can.onInstanceBoundChange")](r)}else console.warn("can-connect/can/map is unable to listen to onInstanceBoundChange on the List type");this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstancePatches")]?this.Map[canSymbol_1_6_5_canSymbol.for("can.onInstancePatches")](function(e,t){t.forEach(function(t){("add"===t.type||"set"===t.type)&&t.key===n.idProp&&e[canSymbol_1_6_5_canSymbol.for("can.isBound")]()&&n.addInstanceReference(e)})}):console.warn("can-connect/can/map is unable to listen to onInstancePatches on the Map type"),e.init.apply(this,arguments)},serializeInstance:function(e){return canReflect_1_18_0_canReflect.serialize(e)},serializeList:function(e){return canReflect_1_18_0_canReflect.serialize(e)},instance:function(e){var t=this.Map;return new t(e)},list:function(e,t){var n=this.List||this.Map&&this.Map.List,a=canReflect_1_18_0_canReflect.new(n,e.data);return canReflect_1_18_0_canReflect.eachKey(e,function(e,t){"data"!==t&&canReflect_1_18_0_canReflect.setKeyValue(a,t,e)}),a[this.listQueryProp]=t,a},updatedList:function(){canQueues_1_3_2_canQueues.batch.start();canQueues_1_3_2_canQueues.mutateQueue.enqueue(e.updatedList,this,arguments,{}),canQueues_1_3_2_canQueues.batch.stop()},save:function(t){canReflect_1_18_0_canReflect.setKeyValue(t,"_saving",!0);var n=function(){canReflect_1_18_0_canReflect.setKeyValue(t,"_saving",!1)},a=e.save.apply(this,arguments);return a.then(n,n),a},destroy:function(t){canReflect_1_18_0_canReflect.setKeyValue(t,"_destroying",!0);var n=function(){canReflect_1_18_0_canReflect.setKeyValue(t,"_destroying",!1)},a=e.destroy.apply(this,arguments);return a.then(n,n),a}};return each$1(["created","updated","destroyed"],function(e){t[e+"Instance"]=function(t,n){n&&"object"==typeof n&&("destroyed"===e&&0===canReflect_1_18_0_canReflect.size(n)||(this.constructor.removeAttr?updateDeepExceptIdentity(t,n,this.queryLogic.schema):this.updateInstanceWithAssignDeep?assignDeepExceptIdentity(t,n,this.queryLogic.schema):smartMergeExceptIdentity(t,n,this.queryLogic.schema))),"created"===e&&this.moveCreatedInstanceToInstanceStore&&this.moveCreatedInstanceToInstanceStore(t),canMapBehavior.callbackInstanceEvents(e,t)}}),t});canMapBehavior.callbackInstanceEvents=function(e,t){var n=t.constructor;canQueues_1_3_2_canQueues.batch.start(),map$1.dispatch.call(t,{type:e,target:t}),map$1.dispatch.call(n,e,[t]),canQueues_1_3_2_canQueues.batch.stop()};var mapOverwrites={static:{getList:function(e,t){return function(e){return t.getList(e)}},findAll:function(e,t){return function(e){return t.getList(e)}},get:function(e,t){return function(e){return t.get(e)}},findOne:function(e,t){return function(e){return t.get(e)}}},prototype:{isNew:function(e,t){return function(){return t.isNew(this)}},isSaving:function(){return function(){return!!canReflect_1_18_0_canReflect.getKeyValue(this,"_saving")}},isDestroying:function(){return function(){return!!canReflect_1_18_0_canReflect.getKeyValue(this,"_destroying")}},save:function(e,t){return function(e,n){var a=t.save(this);return a.then(e,n),a}},destroy:function(e,t){return function(e,n){var a=t.destroy(this);return a.then(e,n),a}}},properties:{_saving:{enumerable:!1,value:!1,configurable:!0,writable:!0},_destroying:{enumerable:!1,value:!1,configurable:!0,writable:!0}}},listOverwrites={static:{_bubbleRule:function(e){return function(t,n){var a=e(t,n);return a.push("destroyed"),a}}},prototype:{setup:function(e,t){return function(n){isPlainObject$1(n)&&!Array.isArray(n)?(this[t.listQueryProp]=n,e.apply(this),this.replace(canReflect_1_18_0_canReflect.isPromise(n)?n:t.getList(n))):e.apply(this,arguments)}}},properties:{}},overwrite=function(e,t,n){for(var a in n.properties)canReflect_1_18_0_canReflect.defineInstanceKey(t,a,n.properties[a]);for(a in n.prototype)t.prototype[a]=n.prototype[a](t.prototype[a],e);if(n.static)for(a in n.static)t[a]=n.static[a](t[a],e)},map$3=canMapBehavior,assign$3=canReflect_1_18_0_canReflect.assignMap,WeakReferenceSet=function(){this.set=[]};assign$3(WeakReferenceSet.prototype,{has:function(e){return-1!==this._getIndex(e)},addReference:function(e,t){var n=this._getIndex(e),a=this.set[n];a||(a={item:e,referenceCount:0},this.set.push(a)),a.referenceCount+=t||1},deleteReference:function(e){var t=this._getIndex(e),n=this.set[t];n&&(n.referenceCount--,0===n.referenceCount&&this.set.splice(t,1))},delete:function(e){var t=this._getIndex(e);-1!==t&&this.set.splice(t,1)},get:function(e){var t=this.set[this._getIndex(e)];if(t)return t.item},referenceCount:function(e){var t=this.set[this._getIndex(e)];if(t)return t.referenceCount},_getIndex:function(e){var t;return this.set.every(function(n,a){return n.item!==e||(t=a,!1)}),void 0===t?-1:t},forEach:function(e){return this.set.forEach(e)}});var weakReferenceSet=WeakReferenceSet,sortedSetJson=function(e){return null==e?e:JSON.stringify(canReflect_1_18_0_canReflect.cloneKeySort(e))},store=createCommonjsModule(function(e){var t=0,n=null,a={increment:function(){t++,clearTimeout(n)},decrement:function(){t--,0===t&&(n=setTimeout(function(){a.dispatch("end")},e.exports.requestCleanupDelay)),0>t&&(t=0)},count:function(){return t}};map$1(a);var r=canConnect_4_0_2_canConnect.behavior("constructor/store",function(e){var t={instanceStore:new weakReferenceMap,newInstanceStore:new weakReferenceSet,listStore:new weakReferenceMap,init:function(){e.init&&e.init.apply(this,arguments),this.hasOwnProperty("_requestInstances")||(this._requestInstances={}),this.hasOwnProperty("_requestLists")||(this._requestLists={}),a.on("end",function(){for(var e in this._requestInstances)this.instanceStore.deleteReference(e);for(e in this._requestInstances={},this._requestLists)this.listStore.deleteReference(e),this._requestLists[e].forEach(this.deleteInstanceReference.bind(this));this._requestLists={}}.bind(this))},_finishedRequest:function(){a.decrement(this)},addInstanceReference:function(e,t){var n=t||this.id(e);n===void 0?this.newInstanceStore.addReference(e):this.instanceStore.addReference(n,e)},createdInstance:function(t){e.createdInstance.apply(this,arguments),this.moveCreatedInstanceToInstanceStore(t)},moveCreatedInstanceToInstanceStore:function(e){var t=this.id(e);if(this.newInstanceStore.has(e)&&t!==void 0){var n=this.newInstanceStore.referenceCount(e);this.newInstanceStore.delete(e),this.instanceStore.addReference(t,e,n)}},addInstanceMetaData:function(e,t,n){var a=this.instanceStore.set[this.id(e)];a&&(a[t]=n)},getInstanceMetaData:function(e,t){var n=this.instanceStore.set[this.id(e)];if(n)return n[t]},deleteInstanceMetaData:function(e,t){var n=this.instanceStore.set[this.id(e)];delete n[t]},deleteInstanceReference:function(e){var t=this.id(e);t===void 0?this.newInstanceStore.deleteReference(e):this.instanceStore.deleteReference(this.id(e),e)},addListReference:function(e,t){var n=sortedSetJson(t||this.listQuery(e));n&&(this.listStore.addReference(n,e),e.forEach(function(e){this.addInstanceReference(e)}.bind(this)))},deleteListReference:function(e,t){var n=sortedSetJson(t||this.listQuery(e));n&&(this.listStore.deleteReference(n,e),e.forEach(this.deleteInstanceReference.bind(this)))},hydratedInstance:function(e){if(0<a.count()){var t=this.id(e);this._requestInstances[t]||(this.addInstanceReference(e),this._requestInstances[t]=e)}},hydrateInstance:function(t){var n=this.id(t);if((n||0===n)&&this.instanceStore.has(n)){var a=this.instanceStore.get(n);return this.updatedInstance(a,t),a}var r=e.hydrateInstance.call(this,t);return this.hydratedInstance(r),r},hydratedList:function(e,t){if(0<a.count()){var n=sortedSetJson(t||this.listQuery(e));n&&!this._requestLists[n]&&(this.addListReference(e,t),this._requestLists[n]=e)}},hydrateList:function(t,n){n=n||this.listQuery(t);var a=sortedSetJson(n);if(a&&this.listStore.has(a)){var r=this.listStore.get(a);return this.updatedList(r,t,n),r}var o=e.hydrateList.call(this,t,n);return this.hydratedList(o,n),o},getList:function(t){var n=this;a.increment(this);var r=e.getList.call(this,t);return r.then(function(){n._finishedRequest()},function(){n._finishedRequest()}),r},get:function(t){var n=this;a.increment(this);var r=e.get.call(this,t);return r.then(function(){n._finishedRequest()},function(){n._finishedRequest()}),r},save:function(t){var n=this;a.increment(this);var r=!this.isNew(t);r&&this.addInstanceReference(t);var o=e.save.call(this,t);return o.then(function(){r&&n.deleteInstanceReference(t),n._finishedRequest()},function(){n._finishedRequest()}),o},destroy:function(t){var n=this;this.addInstanceReference(t),a.increment(this);var r=e.destroy.call(this,t);return r.then(function(e){n._finishedRequest(),n.deleteInstanceReference(e)},function(){n._finishedRequest()}),r},updatedList:function(t,n,a){var r=t.slice(0);n.data||"number"!=typeof n.length||(n={data:n}),e.updatedList?(e.updatedList.call(this,t,n,a),t.forEach(function(e){this.addInstanceReference(e)}.bind(this))):n.data&&n.data.forEach(function(e){this.addInstanceReference(e)}.bind(this)),r.forEach(this.deleteInstanceReference.bind(this))}};return t});r.requests=a,r.requestCleanupDelay=10,e.exports=r}),each$2=canReflect_1_18_0_canReflect.each,pairs={getListData:"gotListData",createData:"createdData",updateData:"updatedData",destroyData:"destroyedData"},dataCallbackBehavior=canConnect_4_0_2_canConnect.behavior("data/callbacks",function(e){var t={};return each$2(pairs,function(n,a){t[a]=function(t,r){var o=this;return e[a].call(this,t).then(function(e){return o[n]?o[n].call(o,e,t,r):e})}}),t}),callbacks=dataCallbackBehavior,each$3=canReflect_1_18_0_canReflect.each,parse$1=canConnect_4_0_2_behavior("data/parse",function(e){var t={parseListData:function(t){e.parseListData&&(t=e.parseListData.apply(this,arguments));var n;if(Array.isArray(t))n={data:t};else{var a=this.parseListProp||"data";if(t.data=get_1(t,a),n=t,"data"!==a&&delete t[a],!Array.isArray(n.data))throw new Error("Could not get any raw data while converting using .parseListData")}for(var r=[],o=0;o<n.data.length;o++)r.push(this.parseInstanceData(n.data[o]));return n.data=r,n},parseInstanceData:function(t){return e.parseInstanceData&&(t=e.parseInstanceData.apply(this,arguments)||t),this.parseInstanceProp?get_1(t,this.parseInstanceProp)||t:t}};return each$3(pairs$1,function(n,a){t[a]=function(t){var r=this;return e[a].call(this,t).then(function(){return r[n].apply(r,arguments)})}}),t}),pairs$1={getListData:"parseListData",getData:"parseInstanceData",createData:"parseInstanceData",updateData:"parseInstanceData",destroyData:"parseInstanceData"},xhrs=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],_xhrf=null,originUrl=canParseUri_1_2_2_canParseUri(global_1().location.href),globalSettings={},makeXhr=function(){if(null!=_xhrf)return _xhrf();for(var e=0,t=xhrs.length;e<t;e++)try{var n=xhrs[e],a=n();if(null!=a)return _xhrf=n,a}catch(t){continue}return function(){}},contentTypes={json:"application/json",form:"application/x-www-form-urlencoded"},_xhrResp=function(t,n){try{var a=n.dataType||t.getResponseHeader("Content-Type").split(";")[0];return a&&(t.responseText||t.responseXML)?"text/xml"===a||"xml"===a?t.responseXML:"text/json"===a||"application/json"===a||"text/javascript"===a||"application/javascript"===a||"application/x-javascript"===a||"json"===a?t.responseText&&JSON.parse(t.responseText):t.responseText:t}catch(n){return t}};function ajax(t){function e(){l||a.send(m)}var a=makeXhr(),r=0,i={},s=new Promise(function(e,t){i.resolve=e,i.reject=t}),l=!1,d,p,c;s.abort=function(){l=!0,a.abort()},t=[{userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,dataType:"json"},globalSettings,t].reduce(function(e,t){return canReflect_1_18_0_canReflect.assignDeep(e,t)});var u=!1!==t.async;if(t.contentType||(t.contentType="GET"===t.type.toUpperCase()?contentTypes.form:contentTypes.json),null==t.crossDomain)try{c=canParseUri_1_2_2_canParseUri(t.url),t.crossDomain=!!(c.protocol&&c.protocol!==originUrl.protocol||c.host&&c.host!==originUrl.host)}catch(n){t.crossDomain=!0}t.timeout&&(d=setTimeout(function(){a.abort(),t.timeoutFn&&t.timeoutFn(t.url)},t.timeout)),a.onreadystatechange=function(){try{4===a.readyState?(d&&clearTimeout(d),300>a.status?t.success&&t.success(_xhrResp(a,t)):t.error&&t.error(a,a.status,a.statusText),t.complete&&t.complete(a,a.statusText),200<=a.status&&300>a.status?i.resolve(_xhrResp(a,t)):i.reject(_xhrResp(a,t))):t.progress&&t.progress(++r)}catch(t){i.reject(t)}};var y=t.url,m=null,g=t.type.toUpperCase(),h=t.contentType===contentTypes.json,b="POST"===g||"PUT"===g;!b&&t.data&&(y+="?"+(h?JSON.stringify(t.data):canParam_1_1_3_canParam(t.data))),a.open(g,y,u);var v=t.crossDomain&&-1!==["GET","POST","HEAD"].indexOf(g);if(p="undefined"!=typeof FormData&&t.data instanceof FormData,b?p?m=t.data:h&&!v?(m="object"==typeof t.data?JSON.stringify(t.data):t.data,a.setRequestHeader("Content-Type","application/json")):(m=canParam_1_1_3_canParam(t.data),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):a.setRequestHeader("Content-Type",t.contentType),v||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.xhrFields)for(var _ in t.xhrFields)a[_]=t.xhrFields[_];if(t.beforeSend){var f=t.beforeSend.call(t,a,t);if(canReflect_1_18_0_canReflect.isPromise(f))return f.then(e).catch(i.reject),s}return e(),s}var canAjax_2_4_6_canAjax=canNamespace_1_0_0_canNamespace.ajax=ajax,ajaxSetup=function(e){globalSettings=e||{}};canAjax_2_4_6_canAjax.ajaxSetup=ajaxSetup;var methodMapping={item:{GET:"getData",PUT:"updateData",DELETE:"destroyData"},list:{GET:"getListData",POST:"createData"}};function inferIdProp(e){var t=e.match(/\{(.*)\}/),n=t&&2===t.length;if(n)return t[1]}function getItemAndListUrls(e,t){t=t||inferIdProp(e)||"id";var n=new RegExp("\\/\\{"+t+"\\}.*"),a=n.test(e),r=a?e.replace(n,""):e,o=a?e:e.trim()+"/{"+t+"}";return{item:o,list:r}}var canMakeRest_0_1_4_canMakeRest=function(e,t){var n={};return canReflect_1_18_0_canReflect.eachKey(getItemAndListUrls(e,t),function(e,t){canReflect_1_18_0_canReflect.eachKey(methodMapping[t],function(t,a){n[t]={method:a,url:e}})}),n},makePromise=function(e){return e&&"function"==typeof e.then&&!canReflect_1_18_0_canReflect.isPromise(e)?new Promise(function(t,n){e.then(t,n)}):e},defaultRest=canMakeRest_0_1_4_canMakeRest("/resource/{id}"),urlBehavior=canConnect_4_0_2_behavior("data/url",function(e){var t={};return canReflect_1_18_0_canReflect.eachKey(defaultRest,function(n,a){t[a]=function(t){var r=methodMetaData[a],o;if("object"==typeof this.url){if(o=this.url.beforeSend,"function"==typeof this.url[a])return makePromise(this.url[a](t));if(this.url[a]){var i=makeAjax(this.url[a],t,n.method,this.ajax||canAjax_2_4_6_canAjax,findContentType(this.url,n.method),r,o);return makePromise(i)}}var s="string"==typeof this.url?this.url:this.url.resource;if(s){var l=canReflect_1_18_0_canReflect.getSchema(this.queryLogic).identity,d=s.replace(/\/+$/,""),p=canMakeRest_0_1_4_canMakeRest(d,l[0])[a];return makePromise(makeAjax(p.url,t,p.method,this.ajax||canAjax_2_4_6_canAjax,findContentType(this.url,p.method),r,o))}return e[name].call(this,t)}}),t}),methodMetaData={getListData:{},getData:{},createData:{},updateData:{},destroyData:{includeData:!1}},findContentType=function(e,t){if("object"==typeof e&&e.contentType){var n="application/x-www-form-urlencoded"===e.contentType||"application/json"===e.contentType;if(n)return e.contentType}return"GET"===t?"application/x-www-form-urlencoded":"application/json"};function urlParamEncoder(e,t){return encodeURIComponent(t)}var makeAjax=function(e,t,n,a,r,o,i){var s={};if("string"==typeof e){var l=e.split(/\s+/);s.url=l.pop(),l.length&&(s.type=l.pop())}else canReflect_1_18_0_canReflect.assignMap(s,e);return s.data="object"!=typeof t||Array.isArray(t)?t:canReflect_1_18_0_canReflect.assignMap(s.data||{},t),s.url=replaceWith(s.url,s.data,urlParamEncoder,!0),s.contentType=r,!1===o.includeData&&delete s.data,a(canReflect_1_18_0_canReflect.assignMap({type:n||"post",dataType:"json",beforeSend:i},s))},url=urlBehavior,indexByIdentity=function(e,t,n){var a=canReflect_1_18_0_canReflect.size(e);if(!n&&0<a&&(n=canReflect_1_18_0_canReflect.getSchema(e[0])),n||(n=canReflect_1_18_0_canReflect.getSchema(t)),!n)throw new Error("No schema to use to get identity.");for(var r=canReflect_1_18_0_canReflect.getIdentity(t,n),o=0,s;o<a;o++)if(s=canReflect_1_18_0_canReflect.getIdentity(e[o],n),r===s)return o;return-1},spliceSymbol=canSymbol_1_6_5_canSymbol.for("can.splice");function updateList(e,t,n,a){-1===n?-1!==a&&canReflect_1_18_0_canReflect.splice(e,a,0,[t()]):-1===a?canReflect_1_18_0_canReflect.splice(e,n,1,[]):a!==n&&(n<a?(canReflect_1_18_0_canReflect.splice(e,a,0,[t()]),canReflect_1_18_0_canReflect.splice(e,n,1,[])):(canReflect_1_18_0_canReflect.splice(e,n,1,[]),canReflect_1_18_0_canReflect.splice(e,a,0,[t()])))}function updateListWithItem(e,t,n,a,r,o){if(-1===n||a!==n+1&&a!==n)if(void 0!==e[spliceSymbol])updateList(e,function(){return r.hydrateInstance(t)},n,a);else{var i=r.serializeList(e);updateList(i,function(){return t},n,a),r.updatedList(e,{data:i},o)}}var realTime=canConnect_4_0_2_canConnect.behavior("real-time",function(e){var t=Promise.resolve(),n;return n={createData:function(){var n=e.createData.apply(this,arguments),a=n.catch(function(){return""});return t=Promise.all([t,a]),n},createInstance:function(e){var n=this;return new Promise(function(a){t.then(function(){setTimeout(function(){var t=n.id(e),r=n.instanceStore.get(t),o;r?a(n.updateInstance(e)):(r=n.hydrateInstance(e),o=n.serializeInstance(r),n.addInstanceReference(r),Promise.resolve(n.createdData(e,o)).then(function(){n.deleteInstanceReference(r),a(r)}))},1)})})},createdData:function(e,t,n){var a;return a=void 0===n?this.instanceStore.get(this.id(e)):this.cidStore.get(n),this.addInstanceReference(a,this.id(e)),this.createdInstance(a,e),create.call(this,this.serializeInstance(a)),void this.deleteInstanceReference(a)},updatedData:function(e,t){var n=this.instanceStore.get(this.id(t));return this.updatedInstance(n,e),void update$1.call(this,this.serializeInstance(n))},updateInstance:function(e){var t=this.id(e),n=this.instanceStore.get(t);n||(n=this.hydrateInstance(e)),this.addInstanceReference(n);var a=this.serializeInstance(n),r=this;return Promise.resolve(this.updatedData(e,a)).then(function(){return r.deleteInstanceReference(n),n})},destroyedData:function(e,t){var n=this.id(t||e),a=this.instanceStore.get(n);a||(a=this.hydrateInstance(e));var r=this.serializeInstance(a);return this.destroyedInstance(a,e),void destroy.call(this,r)},destroyInstance:function(e){var t=this.id(e),n=this.instanceStore.get(t);n||(n=this.hydrateInstance(e)),this.addInstanceReference(n);var a=this.serializeInstance(n),r=this;return Promise.resolve(this.destroyedData(e,a)).then(function(){return r.deleteInstanceReference(n),n})}},n}),create=function(e){var t=this;this.listStore.forEach(function(n,a){var r=JSON.parse(a),o=indexByIdentity(n,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var i=t.queryLogic.index(r,n,e);updateListWithItem(n,e,o,i,t,r)}})},update$1=function(e){var t=this;this.listStore.forEach(function(n,a){var r=JSON.parse(a),o=indexByIdentity(n,e,t.queryLogic.schema);if(t.queryLogic.isMember(r,e)){var i=t.queryLogic.index(r,n,e);updateListWithItem(n,e,o,i,t,r)}else-1!==o&&updateListWithItem(n,e,o,-1,t,r)})},destroy=function(e){var t=this;this.listStore.forEach(function(n,a){var r=JSON.parse(a),o=indexByIdentity(n,e,t.queryLogic.schema);-1!==o&&updateListWithItem(n,e,o,-1,t,r)})},forEach=[].forEach,callbacks$1=["createdInstance","updatedInstance","destroyedInstance"],callbacksOnceBehavior=canConnect_4_0_2_canConnect.behavior("constructor/callbacks-once",function(e){var t={};return forEach.call(callbacks$1,function(n){t[n]=function(t,a){var r=this.getInstanceMetaData(t,"last-data-"+n),o=sortedSetJson(a);if(r!==o){var i=e[n].apply(this,arguments);return this.addInstanceMetaData(t,"last-data-"+n,o),i}}}),t}),callbacksOnce=callbacksOnceBehavior;function realtimeRestModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.ObjectType&&(t.ObjectType=class extends canObservableObject{}),"undefined"==typeof t.ArrayType&&(t.ArrayType=class extends canObservableArray{static get items(){return canType_1_1_5_canType.convert(t.ObjectType)}});return canConnect_4_0_2_canConnect([constructor_1,map$3,store,callbacks,parse$1,url,realTime,callbacksOnce],t)}var canRealtimeRestModel_2_0_0_canRealtimeRestModel=canNamespace_1_0_0_canNamespace.realtimeRestModel=realtimeRestModel;function restModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.ObjectType&&(t.ObjectType=class extends canObservableObject{}),"undefined"==typeof t.ArrayType&&(t.ArrayType=class extends canObservableArray{static get items(){return canType_1_1_5_canType.convert(t.ObjectType)}});var n=[base,url,parse$1,constructor_1,map$3].reduce(function(e,t){return t(e)},t);return n.init(),n}var canRestModel_2_0_0_canRestModel=canNamespace_1_0_0_canNamespace.restModel=restModel,getItems$1=function(e){return Array.isArray(e)?e:e.data},forEach$1=Array.prototype.forEach,cacheRequestsBehaviour=canConnect_4_0_2_canConnect.behavior("cache-requests",function(e){return{getDiff:function(e,t){var n=this,a;return forEach$1.call(t,function(t){var r=n.queryLogic.difference(e,t),o;if(n.queryLogic.isDefinedAndHasMembers(r)){var i=n.queryLogic.intersection(e,t);o={needed:r,cached:!!n.queryLogic.isDefinedAndHasMembers(i)&&i,count:n.queryLogic.count(r)}}else n.queryLogic.isSubset(e,t)&&(o={cached:e,count:0});o&&(!a||o.count<a.count)&&(a=o)}),a?{needed:a.needed,cached:a.cached}:{needed:e}},unionMembers:function(e,t,n,a){return{data:this.queryLogic.unionMembers(t.needed,t.cached,getItems$1(n),getItems$1(a))}},getListData:function(t){t=t||{};var n=this;return this.cacheConnection.getSets(t).then(function(a){var r=n.getDiff(t,a);if(!r.needed)return n.cacheConnection.getListData(r.cached);if(!r.cached)return e.getListData(r.needed).then(function(e){return n.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})});var o=n.cacheConnection.getListData(r.cached),i=e.getListData(r.needed),s=i.then(function(e){return n.cacheConnection.updateListData(getItems$1(e),r.needed).then(function(){return e})}),l=Promise.all([o,i]).then(function(e){var a=e[0],o=e[1];return n.unionMembers(t,r,o,a)});return Promise.all([l,s]).then(function(e){return e[0]})})}}}),cacheRequests=cacheRequestsBehaviour,assign$4=canReflect_1_18_0_canReflect.assignMap,each$4=canReflect_1_18_0_canReflect.each,pairs$2={createdData:"createData",updatedData:"updateData",destroyedData:"destroyData"},callbackCache=canConnect_4_0_2_canConnect.behavior("data/callbacks-cache",function(e){var t={};return each$4(pairs$2,function(n,a){t[a]=function(t,r,o){return this.cacheConnection[n](assign$4(assign$4({},r),t)),e[a]?e[a].call(this,t,r,o):t}}),t}),callbacksCache=callbackCache,deferred=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},forEach$2=[].forEach,combineRequests=canConnect_4_0_2_canConnect.behavior("data/combine-requests",function(e){var t;return{unionPendingRequests:function(e){var t=this;e.sort(function(e,n){return t.queryLogic.isSubset(e.set,n.set)?1:t.queryLogic.isSubset(n.set,e.set)?-1:0});var n=[],a;return doubleLoop(e,{start:function(e){a={set:e.set,pendingRequests:[e]},n.push(a)},iterate:function(e){var n=t.queryLogic.union(a.set,e.set);if(t.queryLogic.isDefinedAndHasMembers(n))return a.set=n,a.pendingRequests.push(e),!0}}),Promise.resolve(n)},time:1,getListData:function(n){n=n||{};var a=this;t||(t=[],setTimeout(function(){var n=a.unionPendingRequests(t);t=null,n.then(function(t){forEach$2.call(t,function(t){var n=canReflect_1_18_0_canReflect.serialize(t.set);e.getListData(n).then(function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.resolve(e):forEach$2.call(t.pendingRequests,function(n){n.deferred.resolve({data:a.queryLogic.filterMembers(n.set,t.set,getItems$1(e))})})},function(e){1===t.pendingRequests.length?t.pendingRequests[0].deferred.reject(e):forEach$2.call(t.pendingRequests,function(t){t.deferred.reject(e)})})})})},this.time||1));var r=deferred();return t.push({deferred:r,set:n}),r.promise}}}),combineRequests_1=combineRequests,doubleLoop=function(e,t){for(var n=0;n<e.length;){t.start(e[n]);for(var a=n+1;a<e.length;)!0===t.iterate(e[a])?e.splice(a,1):a++;n++}},canLocalStore_1_0_1_canLocalStore=canNamespace_1_0_0_canNamespace.localStore=function t(e){e.constructor=t;var n=Object.create(canMemoryStore_1_0_3_makeSimpleStore(e));return canReflect_1_18_0_canReflect.assignMap(n,{clear:function(){return localStorage.removeItem(this.name+"/queries"),localStorage.removeItem(this.name+"/records"),this._recordsMap=null,Promise.resolve()},updateQueryDataSync:function(e){localStorage.setItem(this.name+"/queries",JSON.stringify(e))},getQueryDataSync:function(){return JSON.parse(localStorage.getItem(this.name+"/queries"))||[]},getRecord:function(e){return this._recordsMap||this.getAllRecords(),this._recordsMap[e]},getAllRecords:function(){if(!this.cacheLocalStorageReads||!this._recordsMap){var e=JSON.parse(localStorage.getItem(this.name+"/records"))||{};this._recordsMap=e}var t=[];for(var n in this._recordsMap)t.push(this._recordsMap[n]);return t},destroyRecords:function(e){this._recordsMap||this.getAllRecords(),canReflect_1_18_0_canReflect.eachIndex(e,function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);delete this._recordsMap[t]},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))},updateRecordsSync:function(e){this._recordsMap||this.getAllRecords(),e.forEach(function(e){var t=canReflect_1_18_0_canReflect.getIdentity(e,this.queryLogic.schema);this._recordsMap[t]=e},this),localStorage.setItem(this.name+"/records",JSON.stringify(this._recordsMap))}}),n},localstorageCache=canLocalStore_1_0_1_canLocalStore,memoryCache=canMemoryStore_1_0_3_canMemoryStore,fallThroughCache=canConnect_4_0_2_canConnect.behavior("fall-through-cache",function(e){return{hydrateList:function(t,n){n=n||this.listQuery(t);var a=sortedSetJson(n),r=e.hydrateList.call(this,t,n);return this._getHydrateListCallbacks[a]&&(this._getHydrateListCallbacks[a].shift()(r),!this._getHydrateListCallbacks[a].length&&delete this._getHydrateListCallbacks[a]),r},_getHydrateListCallbacks:{},_getHydrateList:function(e,t){var n=sortedSetJson(e);this._getHydrateListCallbacks[n]||(this._getHydrateListCallbacks[n]=[]),this._getHydrateListCallbacks[n].push(t)},getListData:function(t){t=t||{};var n=this;return this.cacheConnection.getListData(t).then(function(a){return n._getHydrateList(t,function(a){n.addListReference(a,t),setTimeout(function(){e.getListData.call(n,t).then(function(e){n.cacheConnection.updateListData(e,t),n.updatedList(a,e,t),n.deleteListReference(a,t)},function(t){canLog_1_0_2_canLog.log("REJECTED",t)})},1)}),a},function(){var a=e.getListData.call(n,t);return a.then(function(e){n.cacheConnection.updateListData(e,t)}),a})},hydrateInstance:function(t){var n=this.id(t),a=e.hydrateInstance.apply(this,arguments);return this._getMakeInstanceCallbacks[n]&&(this._getMakeInstanceCallbacks[n].shift()(a),!this._getMakeInstanceCallbacks[n].length&&delete this._getMakeInstanceCallbacks[n]),a},_getMakeInstanceCallbacks:{},_getMakeInstance:function(e,t){this._getMakeInstanceCallbacks[e]||(this._getMakeInstanceCallbacks[e]=[]),this._getMakeInstanceCallbacks[e].push(t)},getData:function(t){var n=this;return this.cacheConnection.getData(t).then(function(a){return n._getMakeInstance(n.id(a)||n.id(t),function(a){n.addInstanceReference(a),setTimeout(function(){e.getData.call(n,t).then(function(e){n.cacheConnection.updateData(e),n.updatedInstance(a,e),n.deleteInstanceReference(a)},function(t){canLog_1_0_2_canLog.log("REJECTED",t)})},1)}),a},function(){var a=e.getData.call(n,t);return a.then(function(e){n.cacheConnection.updateData(e)}),a})}}}),fallThroughCache_1=fallThroughCache,canStringToAny_1_2_1_canStringToAny=function(e){switch(e){case"NaN":case"Infinity":return+e;case"null":return null;case"undefined":return;case"true":case"false":return"true"===e;default:var t=+e;return isNaN(t)?e:t;}};function toBoolean(e){return null==e?e:!!("false"!==e&&"0"!==e&&e)}var maybeBoolean=canReflect_1_18_0_canReflect.assignSymbols(toBoolean,{"can.new":toBoolean,"can.getSchema":function(){return{type:"Or",values:[!0,!1,void 0,null]}},"can.getName":function(){return"MaybeBoolean"},"can.isMember":function(e){return null==e||"boolean"==typeof e}});function toDate(e){var t=typeof e;return"string"==t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"===t?new Date(e):e}function DateStringSet(e){this.setValue=e;var t=toDate(e);this.value=null==t?t:t.getTime()}DateStringSet.prototype.valueOf=function(){return this.value},canReflect_1_18_0_canReflect.assignSymbols(DateStringSet.prototype,{"can.serialize":function(){return this.setValue}});var maybeDate=canReflect_1_18_0_canReflect.assignSymbols(toDate,{"can.new":toDate,"can.getSchema":function(){return{type:"Or",values:[Date,void 0,null]}},"can.ComparisonSetType":DateStringSet,"can.getName":function(){return"MaybeDate"},"can.isMember":function(e){return null==e||e instanceof Date}});function toNumber(e){return null==e?e:+e}var maybeNumber=canReflect_1_18_0_canReflect.assignSymbols(toNumber,{"can.new":toNumber,"can.getSchema":function(){return{type:"Or",values:[Number,void 0,null]}},"can.getName":function(){return"MaybeNumber"},"can.isMember":function(e){return null==e||"number"==typeof e}});function toString$2(e){return null==e?e:""+e}var maybeString=canReflect_1_18_0_canReflect.assignSymbols(toString$2,{"can.new":toString$2,"can.getSchema":function(){return{type:"Or",values:[String,void 0,null]}},"can.getName":function(){return"MaybeString"},"can.isMember":function(e){return null==e||"string"==typeof e}}),newSymbol$4=canSymbol_1_6_5_canSymbol.for("can.new"),serializeSymbol$1=canSymbol_1_6_5_canSymbol.for("can.serialize"),inSetupSymbol$6=canSymbol_1_6_5_canSymbol.for("can.initializing"),eventsProto$1,define$1,make$1,makeDefinition$1,getDefinitionsAndMethods$1,getDefinitionOrMethod$1;function isDefineType$1(e){return e&&(!0===e.canDefineType||e[newSymbol$4])}var peek$4=canObservationRecorder_1_3_1_canObservationRecorder.ignore(canReflect_1_18_0_canReflect.getValue.bind(canReflect_1_18_0_canReflect)),Object_defineNamedPrototypeProperty$1=Object.defineProperty;function defineConfigurableAndNotEnumerable$1(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}function eachPropertyDescriptor$1(e,t){for(var n in e)e.hasOwnProperty(n)&&t.call(e,n,Object.getOwnPropertyDescriptor(e,n))}function getEveryPropertyAndSymbol$1(e){var t=Object.getOwnPropertyNames(e),n="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(e):[];return t.concat(n)}function cleanUpDefinition(e,t){t.value!==void 0&&("function"!=typeof t.value||0===t.value.length)&&(t.default=t.value,delete t.value),t.Value!==void 0&&(t.Default=t.Value,delete t.Value)}function isValueResolver(e){return"function"==typeof e.value&&e.value.length}var canDefine_2_8_0_canDefine=define$1=canNamespace_1_0_0_canNamespace.define=function(e,t,n){var a=Object.create(n?n.dataInitializers:null),r=Object.create(n?n.computedInitializers:null),o=getDefinitionsAndMethods$1(t,n,e),i;if(o.dataInitializers=a,o.computedInitializers=r,canReflect_1_18_0_canReflect.eachKey(o.definitions,function(t,n){define$1.property(e,n,t,a,r,o.defaultDefinition)}),e.hasOwnProperty("_data"))for(i in a)canDefineLazyValue_1_1_1_defineLazyValue(e._data,i,a[i].bind(e),!0);else canDefineLazyValue_1_1_1_defineLazyValue(e,"_data",function(){var e=this,t={};for(var n in a)canDefineLazyValue_1_1_1_defineLazyValue(t,n,a[n].bind(e),!0);return t});if(e.hasOwnProperty("_computed"))for(i in r)canDefineLazyValue_1_1_1_defineLazyValue(e._computed,i,r[i].bind(e));else canDefineLazyValue_1_1_1_defineLazyValue(e,"_computed",function(){var e=this,t=Object.create(null);for(var n in r)canDefineLazyValue_1_1_1_defineLazyValue(t,n,r[n].bind(e));return t});getEveryPropertyAndSymbol$1(eventsProto$1).forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:eventsProto$1[t],configurable:!0,writable:!0})}),Object.defineProperty(e,"_define",{enumerable:!1,value:o,configurable:!0,writable:!0});var s=canSymbol_1_6_5_canSymbol.iterator||canSymbol_1_6_5_canSymbol.for("iterator");return e[s]||defineConfigurableAndNotEnumerable$1(e,s,function(){return new define$1.Iterator(this)}),o},onlyType$1=function(e){for(var t in e)if("type"!=t)return!1;return!0};define$1.extensions=function(){},define$1.property=function(e,t,n,a,r,o){var i=define$1.extensions.apply(this,arguments);i&&(n=makeDefinition$1(t,i,o||{},e));var s=n.type;if(s&&onlyType$1(n)&&s===define$1.types["*"])return void Object_defineNamedPrototypeProperty$1(e,t,{get:make$1.get.data(t),set:make$1.set.events(t,make$1.get.data(t),make$1.set.data(t),make$1.eventType.data(t)),enumerable:!0,configurable:!0});n.type=s;var l=n.get||isValueResolver(n)?"computed":"data",d=make$1.read[l](t),p=make$1.get[l](t),c=make$1.set[l](t),u=function(e){return e},y;n.Type&&(u=make$1.set.Type(t,n.Type,u)),s&&(u=make$1.set.type(t,s,u));var m=make$1.set.events(t,d,c,make$1.eventType[l](t));isValueResolver(n)?r[t]=make$1.valueResolver(t,n,u):(n.default!==void 0||n.Default!==void 0)&&(y=canObservationRecorder_1_3_1_canObservationRecorder.ignore(make$1.get.defaultValue(t,n,u,m))),n.get?r[t]=make$1.compute(t,n.get,y):y&&(a[t]=y),n.get&&n.set?(c=make$1.set.setter(t,n.set,make$1.read.lastSet(t),c,!0),0===n.get.length):n.set?c=make$1.set.setter(t,n.set,d,m,!1):"data"===l?c=m:n.get&&1>n.get.length&&(c=function(){}),s&&(c=make$1.set.type(t,s,c)),n.Type&&(c=make$1.set.Type(t,n.Type,c)),Object_defineNamedPrototypeProperty$1(e,t,{get:p,set:c,enumerable:"serialize"in n?!!n.serialize:!n.get,configurable:!0})},define$1.makeDefineInstanceKey=function(e){e[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")]=function(t,n){var a=this.prototype._define;"object"==typeof n&&cleanUpDefinition(t,n,!1,this);var r=getDefinitionOrMethod$1(t,n,a.defaultDefinition,this);r&&"object"==typeof r?(define$1.property(e.prototype,t,r,a.dataInitializers,a.computedInitializers,a.defaultDefinition),a.definitions[t]=r):a.methods[t]=r,this.prototype.dispatch({action:"can.keys",type:"can.keys",target:this.prototype})}},define$1.Constructor=function(e,t){var n=function(e){Object.defineProperty(this,inSetupSymbol$6,{configurable:!0,enumerable:!1,value:!0,writable:!0}),define$1.setup.call(this,e,t),this[inSetupSymbol$6]=!1},a=define$1(n.prototype,e);return type$1(n),define$1.makeDefineInstanceKey(n,a),n},make$1={computeObj:function(e,t,n){var a={oldValue:void 0,compute:n,count:0,handler:function(n){var r=a.oldValue;a.oldValue=n,e.dispatch({action:"set",key:"prop",target:e,value:n,oldValue:r,type:t},[n,r])}};return a},valueResolver:function(e,t,n){var a=make$1.get.defaultValue(e,t,n);return function(){var n=this,r=a.call(this),o=make$1.computeObj(n,e,new resolver(t.value,n,r));return o}},compute:function(e,t,n){return function(){var a=this,r=n&&n.call(this),o,i;return o=0===t.length?new canObservation_4_2_0_canObservation(t,a):1===t.length?new settable(t,a,r):new async(t,a,r),i=make$1.computeObj(a,e,o),i}},set:{data:function(e){return function(t){this._data[e]=t}},computed:function(e){return function(t){canReflect_1_18_0_canReflect.setValue(this._computed[e].compute,t)}},events:function(e,t,n){return function(a){if(this[inSetupSymbol$6])n.call(this,a);else{var r=t.call(this);if(a===r)return;var o;n.call(this,a),o={patches:[{type:"set",key:e,value:a}],target:this,action:"set",value:a,oldValue:r,key:e,type:e},this.dispatch(o,[a,r])}}},setter:function(e,t,n,a,r){return function(e){var o=this;canQueues_1_3_2_canQueues.batch.start();var i=!1,s=n.call(this),l=t.call(this,e,function(e){a.call(o,e),i=!0},s);if(i)canQueues_1_3_2_canQueues.batch.stop();else if(r){if(void 0!==l)s!==l&&a.call(this,l),canQueues_1_3_2_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_2_canQueues.batch.stop();if(1===t.length)canQueues_1_3_2_canQueues.batch.stop();else return void canQueues_1_3_2_canQueues.batch.stop()}}else if(void 0!==l)a.call(this,l),canQueues_1_3_2_canQueues.batch.stop();else{if(0===t.length)return a.call(this,e),void canQueues_1_3_2_canQueues.batch.stop();if(1===t.length)a.call(this,void 0),canQueues_1_3_2_canQueues.batch.stop();else return void canQueues_1_3_2_canQueues.batch.stop()}}},type:function(e,t,n){function a(a){return n.call(this,t.call(this,a,e))}return isDefineType$1(t)?t.canDefineType?a:function(e){return n.call(this,canReflect_1_18_0_canReflect.convert(e,t))}:"object"==typeof t?make$1.set.Type(e,t,n):a},Type:function(e,t,n){return Array.isArray(t)&&define$1.DefineList?t=define$1.DefineList.extend({"#":t[0]}):"object"==typeof t&&(define$1.DefineMap?t=define$1.DefineMap.extend(t):t=define$1.Constructor(t)),function(e){return e instanceof t||null==e?n.call(this,e):n.call(this,new t(e))}}},eventType:{data:function(e){return function(t,n){return n!==void 0||this._data.hasOwnProperty(e)?"set":"add"}},computed:function(){return function(){return"set"}}},read:{data:function(e){return function(){return this._data[e]}},computed:function(e){return function(){return canReflect_1_18_0_canReflect.getValue(this._computed[e].compute)}},lastSet:function(e){return function(){var t=this._computed[e].compute;if(t.lastSetValue)return canReflect_1_18_0_canReflect.getValue(t.lastSetValue)}}},get:{defaultValue:function(e,t,n,a){return function(){var r=t.default;if(r!==void 0)"function"==typeof r&&(r=r.call(this)),r=n.call(this,r);else{var o=t.Default;o&&(r=n.call(this,new o))}if(t.set){var i=!0,s=make$1.set.setter(e,t.set,function(){},function(e){i?l=e:a.call(this,e)},t.get),l;return s.call(this,r),i=!1,l}return r}},data:function(e){return function(){return this[inSetupSymbol$6]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this._data[e]}},computed:function(e){return function(){var t=this._computed[e].compute;return canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),!canReflect_1_18_0_canReflect.isBound(t)&&canObservation_4_2_0_canObservation.temporarilyBind(t)),peek$4(t)}}}},define$1.behaviors=["get","set","value","Value","type","Type","serialize"];var addBehaviorToDefinition$1=function(e,t,n){if("enumerable"===t)e.serialize=!!n;else if("type"===t){var a=n;"string"==typeof a&&(a=define$1.types[a],"object"==typeof a&&!isDefineType$1(a)&&(canAssign_1_3_3_canAssign(e,a),a=a[t])),"undefined"!=typeof a&&(e[t]=a)}else e[t]=n};makeDefinition$1=function(e,t,n,a){var r={};if(canReflect_1_18_0_canReflect.eachKey(t,function(e,t){addBehaviorToDefinition$1(r,t,e)}),canReflect_1_18_0_canReflect.eachKey(n,function(e,t){void 0===r[t]&&"type"!==t&&"Type"!==t&&(r[t]=e)}),t.Type){var o=t.Type,i=o[serializeSymbol$1];i&&(r.serialize=function(e){return i.call(e)}),o[newSymbol$4]&&(r.type=o,delete r.Type)}if("string"!=typeof t.type){if(!r.type&&!r.Type){var s=canReflect_1_18_0_canReflect.assignMap({},n);r=canReflect_1_18_0_canReflect.assignMap(s,r)}0===canReflect_1_18_0_canReflect.size(r)&&(r.type=define$1.types["*"])}return cleanUpDefinition(e,r,!0,a),r},getDefinitionOrMethod$1=function(e,t,n,a){var r;return"string"==typeof t?r={type:t}:t&&(t[serializeSymbol$1]||t[newSymbol$4])?r={Type:t}:"function"==typeof t?canReflect_1_18_0_canReflect.isConstructorLike(t)&&(r={Type:t}):Array.isArray(t)?r={Type:t}:canReflect_1_18_0_canReflect.isPlainObject(t)&&(r=t),r?makeDefinition$1(e,r,n,a):t},getDefinitionsAndMethods$1=function(e,t,n){var a=Object.create(t?t.definitions:null),r={},o=e["*"],i;return o?(delete e["*"],i=getDefinitionOrMethod$1("*",o,{})):i=Object.create(null),eachPropertyDescriptor$1(e,function(e,t){var o;if(o=t.get||t.set?{get:t.get,set:t.set}:t.value,"constructor"===e)return void(r[e]=o);var s=getDefinitionOrMethod$1(e,o,i,n);s&&"object"==typeof s&&0<canReflect_1_18_0_canReflect.size(s)?a[e]=s:"function"==typeof s&&(r[e]=s)}),o&&defineConfigurableAndNotEnumerable$1(e,"*",o),{definitions:a,methods:r,defaultDefinition:i}},eventsProto$1=map$1({});function setupComputed$1(e,t){var n=e._computed&&e._computed[t];n&&n.compute&&(n.count?n.count++:(n.count=1,canReflect_1_18_0_canReflect.onValue(n.compute,n.handler,"notify"),n.oldValue=peek$4(n.compute)))}function teardownComputed$1(e,t){var n=e._computed&&e._computed[t];n&&(1===n.count?(n.count=0,canReflect_1_18_0_canReflect.offValue(n.compute,n.handler,"notify")):n.count--)}var canMetaSymbol$1=canSymbol_1_6_5_canSymbol.for("can.meta");canAssign_1_3_3_canAssign(eventsProto$1,{_eventSetup:function(){},_eventTeardown:function(){},addEventListener:function(e){return setupComputed$1(this,e),map$1.addEventListener.apply(this,arguments)},removeEventListener:function(e){return teardownComputed$1(this,e),map$1.removeEventListener.apply(this,arguments)}}),eventsProto$1.on=eventsProto$1.bind=eventsProto$1.addEventListener,eventsProto$1.off=eventsProto$1.unbind=eventsProto$1.removeEventListener;var onKeyValueSymbol$6=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.offKeyValue");canReflect_1_18_0_canReflect.assignSymbols(eventsProto$1,{"can.onKeyValue":function(e){return setupComputed$1(this,e),map$1[onKeyValueSymbol$6].apply(this,arguments)},"can.offKeyValue":function(e){return teardownComputed$1(this,e),map$1[offKeyValueSymbol$4].apply(this,arguments)}}),delete eventsProto$1.one,define$1.setup=function(e){Object.defineProperty(this,"constructor",{value:this.constructor,enumerable:!1,writable:!1}),Object.defineProperty(this,canMetaSymbol$1,{value:Object.create(null),enumerable:!1,writable:!1});var t=this._define.definitions,n=Object.create(null),a=this;canReflect_1_18_0_canReflect.eachKey(e,function(e,n){t[n]===void 0?define$1.expando(a,n,e):a[n]=e}),0<canReflect_1_18_0_canReflect.size(n)&&defineConfigurableAndNotEnumerable$1(this,"_instanceDefinitions",n)};var returnFirstArg$1=function(e){return e};define$1.expando=function(e,t,n){if(define$1._specialKeys[t])return!0;var a=e._define.definitions;if(!(a&&a[t])){var r=e._instanceDefinitions;if(!r){if(Object.isSealed(e))return;Object.defineProperty(e,"_instanceDefinitions",{configurable:!0,enumerable:!1,writable:!0,value:{}}),r=e._instanceDefinitions}if(!r[t]){var o=e._define.defaultDefinition||{type:define$1.types.observable};return define$1.property(e,t,o,{},{}),e._data[t]=o.type?define$1.make.set.type(t,o.type,returnFirstArg$1).call(e,n):o.Type&&canReflect_1_18_0_canReflect.isConstructorLike(o.Type)?define$1.make.set.Type(t,o.Type,returnFirstArg$1).call(e,n):define$1.types.observable(n),r[t]=o,e[inSetupSymbol$6]||(canQueues_1_3_2_canQueues.batch.start(),e.dispatch({action:"can.keys",target:e,type:"can.keys"}),Object.prototype.hasOwnProperty.call(e._data,t)?e.dispatch({action:"add",target:e,value:e._data[t],oldValue:void 0,key:t,type:t,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]):e.dispatch({type:"set",target:e,patches:[{type:"add",key:t,value:e._data[t]}]},[e._data[t],void 0]),canQueues_1_3_2_canQueues.batch.stop()),!0}}},define$1.replaceWith=canDefineLazyValue_1_1_1_defineLazyValue,define$1.eventsProto=eventsProto$1,define$1.defineConfigurableAndNotEnumerable=defineConfigurableAndNotEnumerable$1,define$1.make=make$1,define$1.getDefinitionOrMethod=getDefinitionOrMethod$1,define$1._specialKeys={_data:!0,_computed:!0};var simpleGetterSetters$1={};define$1.makeSimpleGetterSetter=function(e){if(simpleGetterSetters$1[e]===void 0){var t=make$1.set.events(e,make$1.get.data(e),make$1.set.data(e),make$1.eventType.data(e));simpleGetterSetters$1[e]={get:make$1.get.data(e),set:function(e){return t.call(this,define$1.types.observable(e))},enumerable:!0,configurable:!0}}return simpleGetterSetters$1[e]},define$1.Iterator=function(e){this.obj=e,this.definitions=Object.keys(e._define.definitions),this.instanceDefinitions=e._instanceDefinitions?Object.keys(e._instanceDefinitions):Object.keys(e),this.hasGet="function"==typeof e.get},define$1.Iterator.prototype.next=function(){var e;if(this.definitions.length){e=this.definitions.shift();var t=this.obj._define.definitions[e];if(t.get)return this.next()}else if(this.instanceDefinitions.length)e=this.instanceDefinitions.shift();else return{value:void 0,done:!0};return{value:[e,this.hasGet?this.obj.get(e):this.obj[e]],done:!1}};function isObservableValue(e){return canReflect_1_18_0_canReflect.isValueLike(e)&&canReflect_1_18_0_canReflect.isObservableLike(e)}define$1.types={date:maybeDate,number:maybeNumber,boolean:maybeBoolean,observable:function(e){return Array.isArray(e)&&define$1.DefineList?e=new define$1.DefineList(e):canReflect_1_18_0_canReflect.isPlainObject(e)&&define$1.DefineMap&&(e=new define$1.DefineMap(e)),e},stringOrObservable:function(e){return Array.isArray(e)?new define$1.DefaultList(e):canReflect_1_18_0_canReflect.isPlainObject(e)?new define$1.DefaultMap(e):canReflect_1_18_0_canReflect.convert(e,define$1.types.string)},htmlbool:function(e){return""===e||!!canStringToAny_1_2_1_canStringToAny(e)},"*":function(e){return e},any:function(e){return e},string:maybeString,compute:{set:function(e,t,n,a){return isObservableValue(e)?e:isObservableValue(a)?(canReflect_1_18_0_canReflect.setValue(a,e),a):e},get:function(e){return isObservableValue(e)?canReflect_1_18_0_canReflect.getValue(e):e}}},define$1.updateSchemaKeys=function(e,t){for(var n in t){var a=t[n];!1!==a.serialize&&(e.keys[n]=a.Type?a.Type:a.type?a.type:function(e){return e},!0===t[n].identity&&e.identity.push(n))}return e};var makeRef=function(e){var t=canReflect_1_18_0_canReflect.getSchema(e.queryLogic).identity[0],n=function(){return function(a,r){"object"==typeof a&&(r=a,a=r[t]);var o=n.store.get(a);return o?(r&&!o._value&&(r instanceof e.Map?o._value=r:o._value=e.hydrateInstance(r)),o):void(this[t]=a,r&&(r instanceof e.Map?this._value=r:this._value=e.hydrateInstance(r)),0<store.requests.count()&&!n._requestInstances[a]&&(n.store.addReference(a,this),n._requestInstances[a]=this))}}();n.store=new weakReferenceMap,n._requestInstances={},n.type=function(e){return e&&"object"!=typeof e?new n(e):new n(e[t],e)};var a={promise:{get:function(){if(this._value)return Promise.resolve(this._value);var n={};return n[t]=this[t],e.Map.get(n)}},_state:{get:function(e,t){return t&&this.promise.then(function(){t("resolved")},function(){t("rejected")}),"pending"}},value:{get:function(e,t){return this._value?this._value:void(t&&this.promise.then(function(e){t(e)}))}},reason:{get:function(e,t){this._value||this.promise.catch(function(e){t(e)})}}};a[t]={type:"*",set:function(){this._value=void 0}},canDefine_2_8_0_canDefine(n.prototype,a),n.prototype.unobservedId=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){return this[t]}),n.prototype.isResolved=function(){return!!this._value||"resolved"===this._state},n.prototype.isRejected=function(){return"rejected"===this._state},n.prototype.isPending=function(){return!this._value&&("resolved"!==this._state||"rejected"!==this._state)},n.prototype.serialize=function(){return this[t]},canReflect_1_18_0_canReflect.assignSymbols(n.prototype,{"can.serialize":n.prototype.serialize,"can.getName":function(){return canReflect_1_18_0_canReflect.getName(this.constructor)+"{"+this[t]+"}"}});var r=n.prototype._eventSetup;n.prototype._eventSetup=function(){return n.store.addReference(this.unobservedId(),this),r.apply(this,arguments)};var o=n.prototype._eventTeardown;return n.prototype._eventTeardown=function(){return n.store.deleteReference(this.unobservedId(),this),o.apply(this,arguments)},store.requests.on("end",function(){for(var e in n._requestInstances)n.store.deleteReference(e);n._requestInstances={}}),n},ref=canConnect_4_0_2_canConnect.behavior("can/ref",function(e){return{init:function(){e.init.apply(this,arguments),this.Map.Ref=makeRef(this)}}}),$$1=global_1().$;canConnect_4_0_2_canConnect.superMap=function(e){var t=[constructor_1,map$3,ref,store,callbacks,combineRequests_1,parse$1,url,realTime,callbacksOnce];return"undefined"!=typeof localStorage&&(!e.cacheConnection&&(e.cacheConnection=canConnect_4_0_2_canConnect([localstorageCache],{name:e.name+"Cache",idProp:e.idProp,queryLogic:e.queryLogic})),t.push(callbacksCache,fallThroughCache_1)),$$1&&$$1.ajax&&(e.ajax=$$1.ajax),canConnect_4_0_2_canConnect(t,e)};var superMap=canConnect_4_0_2_canConnect.superMap,$$2=global_1().$;canConnect_4_0_2_canConnect.baseMap=function(e){return $$2&&$$2.ajax&&(e.ajax=$$2.ajax),canConnect_4_0_2_canConnect([constructor_1,map$3,ref,store,callbacks,parse$1,url,realTime,callbacksOnce],e)};var baseMap=canConnect_4_0_2_canConnect.baseMap;canConnect_4_0_2_canConnect.cacheRequests=cacheRequests,canConnect_4_0_2_canConnect.constructor=constructor_1,canConnect_4_0_2_canConnect.constructorCallbacksOnce=callbacksOnce,canConnect_4_0_2_canConnect.constructorStore=store,canConnect_4_0_2_canConnect.dataCallbacks=callbacks,canConnect_4_0_2_canConnect.dataCallbacksCache=callbacksCache,canConnect_4_0_2_canConnect.dataCombineRequests=combineRequests_1,canConnect_4_0_2_canConnect.dataLocalStorageCache=localstorageCache,canConnect_4_0_2_canConnect.dataMemoryCache=memoryCache,canConnect_4_0_2_canConnect.dataParse=parse$1,canConnect_4_0_2_canConnect.dataUrl=url,canConnect_4_0_2_canConnect.fallThroughCache=fallThroughCache_1,canConnect_4_0_2_canConnect.realTime=realTime,canConnect_4_0_2_canConnect.canMap=map$3,canConnect_4_0_2_canConnect.superMap=superMap,canConnect_4_0_2_canConnect.baseMap=baseMap;var canConnect_4_0_2_all=canConnect_4_0_2_canConnect,methodsToOverwrite=["pushState","replaceState"],dispatchSymbol$3=canSymbol_1_6_5_canSymbol.for("can.dispatch");function cleanRoot(){var e=location_1(),t=e.protocol+"//"+e.host,n=bindingProxy_1.call("root"),a=n.indexOf(t);return 0===a?n.substr(t.length):n}function getCurrentUrl(){var e=cleanRoot(),t=location_1(),n=t.pathname+t.search,a=n.indexOf(e);return n.substr(a+e.length)}function PushstateObservable(){this.replaceStateOnceKeys=[],this.replaceStateKeys=[],this.dispatchHandlers=this.dispatchHandlers.bind(this),this.anchorClickHandler=function(e){var t=PushstateObservable.prototype.shouldCallPushState.call(this,this,e);t&&PushstateObservable.prototype.anchorClickHandler.call(this,this,e)},this.keepHash=!0}PushstateObservable.prototype=Object.create(canSimpleObservable_2_5_0_canSimpleObservable.prototype),PushstateObservable.constructor=PushstateObservable,canReflect_1_18_0_canReflect.assign(PushstateObservable.prototype,{root:"/",matchSlashes:!1,paramsMatcher:/^\?(?:[^=]+=[^&]*&)*[^=]+=[^&]*/,querySeparator:"?",dispatchHandlers:function(){var e=this._value;this._value=getCurrentUrl(),e!==this._value&&this[dispatchSymbol$3](this._value,e)},shouldCallPushState:function(e,t){if(t.isDefaultPrevented?!t.isDefaultPrevented():!0!==t.defaultPrevented){if("javascript://"===e.href)return;if("_blank"===e.target)return;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return;var n=e.host||window.location.host;if(window.location.host===n){var a=cleanRoot(),r,o,i;if(e instanceof HTMLAnchorElement?(r=e.pathname,o=e.href,i=r+e.search):"http://www.w3.org/1999/xlink"===e.namespaceURI&&(r=o=e.getAttributeNS("http://www.w3.org/1999/xlink","href"),i=o),void 0!==r&&0===r.indexOf(a)){var s=i.substr(a.length);if(void 0!==canRoute_5_0_2_canRoute.rule(s)){0<=o.indexOf("#")&&(this.keepHash=!0);var l=window.location.pathname+window.location.search,d=i!==l||e.hash===window.location.hash;return d&&t.preventDefault&&t.preventDefault(),!0}return!1}}}},anchorClickHandler:function(e){var t=e.href?e.href:e.getAttributeNS("http://www.w3.org/1999/xlink","href");window.history.pushState(null,null,t)},onBound:function(){if(!isNode()){var e=document$1(),t=global_1();this._value=getCurrentUrl(),canDomEvents_1_3_11_canDomEvents.addDelegateListener(e.documentElement,"click","a",this.anchorClickHandler);var n=this.originalMethods={},a=this.dispatchHandlers;canReflect_1_18_0_canReflect.eachKey(methodsToOverwrite,function(e){this.originalMethods[e]=t.history[e],t.history[e]=function(r,o,i){var s=0===i.indexOf("http"),l=location_1(),d=l.search+l.hash;(!s&&i!==l.pathname+d||s&&i!==l.href+d)&&(n[e].apply(t.history,arguments),a())}},this),canDomEvents_1_3_11_canDomEvents.addEventListener(t,"popstate",this.dispatchHandlers)}},onUnbound:function(){if(!isNode()){var e=document$1(),t=global_1();canDomEvents_1_3_11_canDomEvents.removeDelegateListener(e.documentElement,"click","a",this.anchorClickHandler),canReflect_1_18_0_canReflect.eachKey(methodsToOverwrite,function(e){t.history[e]=this.originalMethods[e]},this),canDomEvents_1_3_11_canDomEvents.removeEventListener(t,"popstate",this.dispatchHandlers)}},get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this),getCurrentUrl()},set:function(e){var t=canRoute_5_0_2_canRoute.deparam(e),n=canRoute_5_0_2_canRoute.deparam(getCurrentUrl()),a="pushState",r={};this.keepHash&&-1===e.indexOf("#")&&window.location.hash&&(e+=window.location.hash),map$2(n,t).forEach(function(e){return r[e.key]=!0}),this.replaceStateKeys.length&&this.replaceStateKeys.forEach(function(e){r[e]&&(a="replaceState")}),this.replaceStateOnceKeys.length&&this.replaceStateOnceKeys.forEach(function(e,t,n){r[e]&&(a="replaceState",n.splice(t,1))}),window.history[a](null,null,bindingProxy_1.call("root")+e)},replaceStateOn:function(){canReflect_1_18_0_canReflect.addValues(this.replaceStateKeys,canReflect_1_18_0_canReflect.toArray(arguments))},replaceStateOnce:function(){canReflect_1_18_0_canReflect.addValues(this.replaceStateOnceKeys,canReflect_1_18_0_canReflect.toArray(arguments))},replaceStateOff:function(){canReflect_1_18_0_canReflect.removeValues(this.replaceStateKeys,canReflect_1_18_0_canReflect.toArray(arguments)),canReflect_1_18_0_canReflect.removeValues(this.replaceStateOnceKeys,canReflect_1_18_0_canReflect.toArray(arguments))}}),canReflect_1_18_0_canReflect.assignSymbols(PushstateObservable.prototype,{"can.getValue":PushstateObservable.prototype.get,"can.setValue":PushstateObservable.prototype.set});var canRoutePushstate_6_0_0_canRoutePushstate=PushstateObservable;function shouldCheckSet(e,t,n){return"set"===e.type&&t&&n&&"object"==typeof t&&"object"==typeof n}function makeIdentityFromMapSchema$1(e){if(e.identity&&e.identity.length)return function(t,n){var a=canReflect_1_18_0_canReflect.getIdentity(t,e),r=canReflect_1_18_0_canReflect.getIdentity(n,e);return a===r}}function makeDiffListIdentityComparison(e,t,n,r){var o=canReflect_1_18_0_canReflect.getSchema(e),i=canReflect_1_18_0_canReflect.size(e),s,l;return null!=o&&null!=o.values&&(s=canReflect_1_18_0_canReflect.getSchema(o.values)),null==s&&0<i&&(s=canReflect_1_18_0_canReflect.getSchema(canReflect_1_18_0_canReflect.getKeyValue(e,0))),s&&(l=makeIdentityFromMapSchema$1(s)),function(e,t,a){if(canReflect_1_18_0_canReflect.isPrimitive(e))return e===t;if(canReflect_1_18_0_canReflect.isPrimitive(t))return e===t;if(l&&l(e,t)){var o=diffDeep(e,t,n?n+"."+a:""+a);return r.push.apply(r,o),!0}return 0===diffDeep(e,t).length}}function diffDeep(e,t,n){if(e&&canReflect_1_18_0_canReflect.isMoreListLikeThanMapLike(e)){var a=[],r=makeDiffListIdentityComparison(e,t,n,a),o=list(e,t,r).map(function(e){return n&&(e.key=n),e});return a.concat(o)}n=n?n+".":"";var i=map$2(e,t),s=[];return i.forEach(function(a){var r=a.key;a.key=n+a.key;var o=e&&canReflect_1_18_0_canReflect.getKeyValue(e,r),i=t&&canReflect_1_18_0_canReflect.getKeyValue(t,r);if(shouldCheckSet(a,o,i)){var l=diffDeep(o,i,a.key);s.push.apply(s,l)}else s.push(a)}),s}var deep=diffDeep,diff={deep:deep,list:list,map:map$2,mergeDeep:mergeDeep,Patcher:patcher},canDiff_1_5_0_canDiff=canNamespace_1_0_0_canNamespace.diff=diff;function makeMap$2(e){var t={},n=e.split(",");return n.forEach(function(e){t[e]=!0}),t}var canMakeMap_1_2_2_canMakeMap=makeMap$2,addJqueryEvents=canNamespace_1_0_0_canNamespace.addJQueryEvents=function(e){var t=e.event.special,n=[];for(var a in t)if(!canDomEvents_1_3_11_canDomEvents._eventRegistry.has(a)){var r={defaultEventType:a,addEventListener:function(e,t,n){$(e).on(t,n)},removeEventListener:function(e,t,n){$(e).off(t,n)}},o=canDomEvents_1_3_11_canDomEvents.addEvent(r);n.push(o)}return function(){n.forEach(function(e){e()})}};function makeMutationEvent(e,t,n){var a=new Map;return{_subscriptions:a,defaultEventType:e,addEventListener:function(e,r,o){var i=this.dispatch,s=a.get(e);s||(s={removeListener:null,listeners:new Set},a.set(e,s)),0===s.listeners.size&&(s.removeListener=t(e,function(t){var a={type:r};for(var o in t)a[o]=t[o];i(e,a,!1!==n)})),s.listeners.add(o),e.addEventListener(r,o)},removeEventListener:function(e,t,n){e.removeEventListener(t,n);var r=a.get(e);r&&(r.listeners["delete"](n),0===r.listeners.size&&(r.removeListener(),a["delete"](e)))}}}var events$1=canNamespace_1_0_0_canNamespace.domMutateDomEvents={attributes:makeMutationEvent("attributes",canDomMutate_2_0_8_canDomMutate.onNodeAttributeChange),inserted:makeMutationEvent("inserted",canDomMutate_2_0_8_canDomMutate.onNodeConnected,!1),removed:makeMutationEvent("removed",canDomMutate_2_0_8_canDomMutate.onNodeDisconnected)},canDomMutate_2_0_8_domEvents=canNamespace_1_0_0_canNamespace.domMutateDomEvents=events$1;function flatten(e){return e.reduce(function(e,t){return e.concat(t)},[])}function makeInterfaceValidator(e){var t=flatten(e);return function(e){var n=t.reduce(function(t,n){return n in e?t:t.concat(n)},[]);return n.length?{message:"missing expected properties",related:n}:void 0}}var canValidateInterface_1_0_3_index=makeInterfaceValidator,warned=!1,proxyNamespace=function(e){return new Proxy(e,{get:function(e,t){return warned||(console.warn("Warning: use of 'can' global should be for debugging purposes only."),warned=!0),e[t]}})},onValueSymbol$5=canSymbol_1_6_5_canSymbol.for("can.onValue"),offValueSymbol$3=canSymbol_1_6_5_canSymbol.for("can.offValue"),onKeyValueSymbol$7=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol$5=canSymbol_1_6_5_canSymbol.for("can.offKeyValue"),noop$3=function(){};function isFunction$2(e){return"function"==typeof e}function withKey(e,t,n){var a;return isFunction$2(e[onKeyValueSymbol$7])&&canReflect_1_18_0_canReflect.onKeyValue(e,t,noop$3),a=n(e,t),isFunction$2(e[offKeyValueSymbol$5])&&canReflect_1_18_0_canReflect.offKeyValue(e,t,noop$3),a}function withoutKey(e,t){var n;return isFunction$2(e[onValueSymbol$5])&&canReflect_1_18_0_canReflect.onValue(e,noop$3),n=t(e),isFunction$2(e[offValueSymbol$3])&&canReflect_1_18_0_canReflect.offValue(e,noop$3),n}var temporarilyBind$1=function(e){return function(t,n){var a=2===arguments.length;return a?withKey(t,n,e):withoutKey(t,e)}};function Graph(){this.nodes=[],this.arrows=new Map,this.arrowsMeta=new Map}Graph.prototype.addNode=function(e){this.nodes.push(e),this.arrows.set(e,new Set)},Graph.prototype.addArrow=function(e,t,n){var a=this;a.arrows.get(e).add(t),n&&addArrowMeta(a,e,t,n)},Graph.prototype.hasArrow=function(e,t){return this.getNeighbors(e).has(t)},Graph.prototype.getArrowMeta=function(e,t){return this.arrowsMeta.get(e)&&this.arrowsMeta.get(e).get(t)},Graph.prototype.setArrowMeta=function(e,t,n){addArrowMeta(this,e,t,n)},Graph.prototype.getNeighbors=function(e){return this.arrows.get(e)},Graph.prototype.findNode=function(e){var t=null,n=this,a,r;for(a=0;a<n.nodes.length;a++)if(r=n.nodes[a],e(r)){t=r;break}return t},Graph.prototype.bfs=function(e){var t=this,n=t.nodes[0],a=[n],r=new Map;for(r.set(n,!0);a.length;)n=a.shift(),e(n),t.arrows.get(n).forEach(function(e){r.has(e)||(a.push(e),r.set(e,!0))})},Graph.prototype.dfs=function(e){for(var t=this,n=t.nodes[0],a=[n],r=new Map;a.length;)n=a.pop(),e(n),r.has(n)||(r.set(n,!0),t.arrows.get(n).forEach(function(e){a.push(e)}))},Graph.prototype.reverse=function(){var e=this,t=new Graph;return e.nodes.forEach(t.addNode.bind(t)),e.nodes.forEach(function(n){e.getNeighbors(n).forEach(function(a){var r=e.getArrowMeta(n,a);t.addArrow(a,n,r)})}),t};function addArrowMeta(e,t,n,a){var r=e.arrowsMeta.get(t);if(r){var o=r.get(n);o||(o={}),r.set(n,canAssign_1_3_3_canAssign(o,a))}else r=new Map,r.set(n,a),e.arrowsMeta.set(t,r)}var graph=Graph,makeNode=function(e,t){var n=2===arguments.length,a={obj:e,name:canReflect_1_18_0_canReflect.getName(e),value:n?canReflect_1_18_0_canReflect.getKeyValue(e,t):canReflect_1_18_0_canReflect.getValue(e)};return n&&(a.key=t),a},getGraph=function(e,t){var n=0,a=new graph,r=2===arguments.length,o=function(e,t,n,r){switch(e){case"whatIChange":a.addArrow(t,n,r);break;case"whatChangesMe":a.addArrow(n,t,r);break;default:throw new Error("Unknown direction value: ",r.direction);}},i=function(e,t,n){canReflect_1_18_0_canReflect.eachKey(e.keyDependencies||{},function(e,a){canReflect_1_18_0_canReflect.each(e,function(e){n(a,t,e)})})},s=function(e,t,n){canReflect_1_18_0_canReflect.eachIndex(e.valueDependencies||[],function(e){n(e,t)})},l=function l(e,t,r){var d=3===arguments.length,p=a.findNode(function(t){return d?t.obj===e&&t.key===r:t.obj===e});if(p)return t.parent&&o(t.direction,t.parent,p,{kind:t.kind,direction:t.direction}),a;n+=1,p=d?makeNode(e,r):makeNode(e),p.order=n,a.addNode(p),t.parent&&o(t.direction,t.parent,p,{kind:t.kind,direction:t.direction});var c=d?canReflectDependencies_1_1_2_canReflectDependencies.getDependencyDataOf(e,r):canReflectDependencies_1_1_2_canReflectDependencies.getDependencyDataOf(e),u;return c&&c.whatIChange&&(u={direction:"whatIChange",parent:p},canReflect_1_18_0_canReflect.eachKey(c.whatIChange,function(e,t){u.kind=t,i(e,u,l),s(e,u,l)})),c&&c.whatChangesMe&&(u={direction:"whatChangesMe",parent:p},canReflect_1_18_0_canReflect.eachKey(c.whatChangesMe,function(e,t){u.kind=t,i(e,u,l),s(e,u,l)})),a};return r?l(e,{},t):l(e,{})},formatGraph=function(e){var t=new Map;e.nodes.forEach(function(e,n){t.set(e,n+1)});var n=e.nodes.map(function(e){return{shape:"box",id:t.get(e),label:canReflect_1_18_0_canReflect.getName(e.obj)+(e.key?"."+e.key:"")}}),a=function(e){return{derive:{arrows:"to"},mutate:{arrows:"to",dashes:!0}}[e.kind]},r=new Map,o=[];return e.nodes.forEach(function(n){var i=function(n){if(!r.has(n)){r.set(n,!0);var s=e.arrows.get(n),l=t.get(n);s.forEach(function(r){var s=t.get(r),d=e.arrowsMeta.get(n).get(r);o.push(canAssign_1_3_3_canAssign({from:l,to:s},a(d))),i(r)})}};i(n)}),{nodes:n,edges:o}},quoteString$1=function(e){return"string"==typeof e?JSON.stringify(e):e},logData=function t(e){var n=e.node,a=[n.name,"key"in n?"."+n.key:""];console.group(a.join("")),console.log("value  ",quoteString$1(n.value)),console.log("object ",n.obj),e.derive.length&&(console.group("DERIVED FROM"),canReflect_1_18_0_canReflect.eachIndex(e.derive,t),console.groupEnd()),e.mutations.length&&(console.group("MUTATED BY"),canReflect_1_18_0_canReflect.eachIndex(e.mutations,t),console.groupEnd()),e.twoWay.length&&(console.group("TWO WAY"),canReflect_1_18_0_canReflect.eachIndex(e.twoWay,t),console.groupEnd()),console.groupEnd()},labelCycles=function(e){var t=new Map,n=new graph;e.nodes.forEach(function(e){n.addNode(e)});return function r(a){t.set(a,!0),e.getNeighbors(a).forEach(function(o){if(t.has(o)){var i=e.hasArrow(a,o);i&&n.addArrow(o,a,{kind:"twoWay"})}else n.addArrow(a,o,e.getArrowMeta(a,o)),r(o)})}(e.nodes[0]),n},isDisconnected=function(e){return!e.derive.length&&!e.mutations.length&&!e.twoWay.length},getData=function(e,t){var n=new Map,a=labelCycles("whatChangesMe"===t?e.reverse():e),r=function t(e){var r={node:e,derive:[],mutations:[],twoWay:[]};return n.set(e,!0),a.getNeighbors(e).forEach(function(o){var i=a.getArrowMeta(e,o);if(!n.has(o))switch(i.kind){case"twoWay":r.twoWay.push(t(o));break;case"derive":r.derive.push(t(o));break;case"mutate":r.mutations.push(t(o));break;default:throw new Error("Unknow meta.kind value: ",i.kind);}}),r}(a.nodes[0]);return isDisconnected(r)?null:r},whatIChange=function(e,t){var n=2===arguments.length,a=getData(n?getGraph(e,t):getGraph(e),"whatIChange");a&&logData(a)},whatChangesMe=function(e,t){var n=2===arguments.length,a=getData(n?getGraph(e,t):getGraph(e),"whatChangesMe");a&&logData(a)},getWhatIChange$1=function(e,t){var n=2===arguments.length;return getData(n?getGraph(e,t):getGraph(e),"whatIChange")},getWhatChangesMe$1=function(e,t){var n=2===arguments.length;return getData(n?getGraph(e,t):getGraph(e),"whatChangesMe")},global$2=canGlobals_1_2_2_canGlobals.getKeyValue("global"),devtoolsRegistrationComplete=!1;function registerWithDevtools(){if(!devtoolsRegistrationComplete){var e={Observation:canObservation_4_2_0_canObservation,Reflect:canReflect_1_18_0_canReflect,Symbol:canSymbol_1_6_5_canSymbol,formatGraph:canNamespace_1_0_0_canNamespace.debug.formatGraph,getGraph:canNamespace_1_0_0_canNamespace.debug.getGraph,mergeDeep:mergeDeep,queues:canQueues_1_3_2_canQueues};global$2.__CANJS_DEVTOOLS__?global$2.__CANJS_DEVTOOLS__.register(e):Object.defineProperty(global$2,"__CANJS_DEVTOOLS__",{set:function(t){Object.defineProperty(global$2,"__CANJS_DEVTOOLS__",{value:t}),t.register(e)},configurable:!0}),devtoolsRegistrationComplete=!0}}var canDebug_2_0_7_canDebug=function(){return canNamespace_1_0_0_canNamespace.debug={formatGraph:temporarilyBind$1(formatGraph),getGraph:temporarilyBind$1(getGraph),getWhatIChange:temporarilyBind$1(getWhatIChange$1),getWhatChangesMe:temporarilyBind$1(getWhatChangesMe$1),logWhatIChange:temporarilyBind$1(whatIChange),logWhatChangesMe:temporarilyBind$1(whatChangesMe)},registerWithDevtools(),global$2.can="undefined"==typeof Proxy?canNamespace_1_0_0_canNamespace:proxyNamespace(canNamespace_1_0_0_canNamespace),canNamespace_1_0_0_canNamespace.debug},canDefineBackup_2_1_2_canDefineBackup=createCommonjsModule(function(e,t){function n(e){var t=o.get(e);return t||(t=new canSimpleObservable_2_5_0_canSimpleObservable,o.set(e,t)),t}var a=function(e,t){var n={};for(var a in e)n[a]="object"!=typeof e[a]||null===e[a]||e[a]instanceof Date?e[a]:t[a];return n},r=function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!1,configurable:!0,writable:!0,value:t[n]})},o=new WeakMap;e.exports=t=function(e){return r(e.prototype,{backup:function(){var e=n(this);return canReflect_1_18_0_canReflect.setValue(e,this.serialize()),this},isDirty:function(e){var t=n(this),a=canReflect_1_18_0_canReflect.getValue(t);if(!a)return!1;var r=this.serialize(),o;return o=e?deep(r,a):map$2(r,a).filter(function(e){if("set"!==e.type)return!0;var t=r[e.key],n=a[e.key];return!(t&&n&&"object"==typeof t&&"object"==typeof n)}),o.length},restore:function(e){var t=n(this),r=canReflect_1_18_0_canReflect.getValue(t),o=e?r:a(r,this);if(this.isDirty(e))for(var i in o)this[i]=o[i];return this}}),e}}),canDefineStream_1_1_1_canDefineStream=function(e){return function(t){["toStream","toStreamFromProperty","toStreamFromEvent"].forEach(function(n){t.prototype[n]=function(){return e[n].apply(e,[this].concat([].slice.call(arguments)))}}),t.prototype.stream=t.prototype.toStream;var n=t.prototype._define.definitions,a=t.prototype._define.dataInitializers,r=t.prototype._define.computedInitializers;canReflect_1_18_0_canReflect.eachKey(n,function(n,o){var i=n.stream;if(i){var s=canAssign_1_3_3_canAssign({default:function(){return e.toCompute(i,this)}},canDefine_2_8_0_canDefine.types.compute);canDefine_2_8_0_canDefine.property(t.prototype,o,s,a,r)}})}},kefir=createCommonjsModule(function(e,t){var n=Math.min,a=Math.max;/*! Kefir.js v3.8.8
 *  https://github.com/kefirjs/kefir
 */(function(e,n){n(t)})(commonjsGlobal,function(r){function o(e){var t=function(){};return t.prototype=e,new t}function s(e){var t=arguments.length,n,a;for(n=1;n<t;n++)for(a in arguments[n])e[a]=arguments[n][a];return e}function l(e,t){var n=arguments.length,a;for(e.prototype=o(t.prototype),e.prototype.constructor=e,a=2;a<n;a++)s(e.prototype,arguments[a]);return e}function d(e,t){var n,a,r,o;if(0===e.length)return t;if(0===t.length)return e;for(o=0,n=Array(e.length+t.length),a=e.length,r=0;r<a;r++,o++)n[o]=e[r];for(a=t.length,r=0;r<a;r++,o++)n[o]=t[r];return n}function p(e,t){var n=e.length,a;for(a=0;a<n;a++)if(e[a]===t)return a;return-1}function c(e,t){var n=e.length,a;for(a=0;a<n;a++)if(t(e[a]))return a;return-1}function u(e){var t=e.length,n=Array(t),a;for(a=0;a<t;a++)n[a]=e[a];return n}function y(e,t){var n=e.length,a,r,o;if(0<=t&&t<n){if(1===n)return[];for(a=Array(n-1),r=0,o=0;r<n;r++)r!==t&&(a[o]=e[r],o++);return a}return e}function m(e,t){var n=e.length,a=Array(n),r;for(r=0;r<n;r++)a[r]=t(e[r]);return a}function g(e,t){var n=e.length,a;for(a=0;a<n;a++)t(e[a])}function h(e,t){var n=e.length,a;for(a=0;a<n;a++)e[a]=t}function b(e,t){return-1!==p(e,t)}function v(e,t,a){var r=n(a,e.length+1),o=e.length-r+1,s=Array(r),l;for(l=o;l<r;l++)s[l-o]=e[l];return s[r-1]=t,s}function _(e,t,n){e==="any"?t(n):e===n.type&&(e==="value"||e==="error"?t(n.value):t())}function k(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function E(){this._dispatcher=new k,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function L(){E.call(this)}function V(){E.call(this),this._currentEvent=null}function x(){return gt}function C(e){function t(e,t){var n=this;L.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return n._onTick()},this._init(t)}return l(t,L,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){L.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}function D(e,t){return new ht(e,{x:t})}function w(e,t){return new S(e,{x:t})}function I(e,t){return 0===t.length?x():new ft(e,{xs:t})}function T(e,t){return new bt(e,{fn:t})}function M(t){function n(e){return t._emitValue(e),t._active}function a(n){return t._emit(n.type,n.value),t._active}return{value:n,error:function(e){return t._emitError(e),t._active},end:function(){return t._emitEnd(),t._active},event:a,emit:n,emitEvent:a}}function A(e,t){return new vt(e,{fn:t})}function O(e){L.call(this),this._fn=e,this._unsubscribe=null}function N(e){return new O(e)}function K(e){var t=!1;return N(function(n){t||(e(function(e){n.emit(e),n.end()}),t=!0)}).setName("fromCallback")}function R(e){var t=!1;return N(function(n){t||(e(function(e,t){e?n.error(e):n.emit(t),n.end()}),t=!0)}).setName("fromNodeCallback")}function q(e,t){return 0===t?function(){return e()}:1===t?function(t){return e(t[0])}:2===t?function(t){return e(t[0],t[1])}:3===t?function(t){return e(t[0],t[1],t[2])}:4===t?function(t){return e(t[0],t[1],t[2],t[3])}:function(t){return e.apply(null,t)}}function z(e,t,n){var a=n?n.length:0;return null==t?0===a?e():1===a?e(n[0]):2===a?e(n[0],n[1]):3===a?e(n[0],n[1],n[2]):4===a?e(n[0],n[1],n[2],n[3]):e.apply(null,n):0===a?e.call(t):e.apply(t,n)}function B(e,t,n){return N(function(a){var r=n?function(){a.emit(z(n,this,arguments))}:function(e){a.emit(e)};return e(r),function(){return t(r)}}).setName("fromSubUnsub")}function H(e,t,n){for(var a=void 0,r=void 0,o=0;o<_t.length;o++)if("function"==typeof e[_t[o][0]]&&"function"==typeof e[_t[o][1]]){a=_t[o][0],r=_t[o][1];break}if(a===void 0)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return B(function(n){return e[a](t,n)},function(n){return e[r](t,n)},n).setName("fromEvents")}function j(e){this._currentEvent={type:"value",value:e,current:!0}}function i(e){return new j(e)}function P(e){this._currentEvent={type:"error",value:e,current:!0}}function U(e){return new P(e)}function F(e,t){return function(n,a){var r=this;e.call(this),this._source=n,this._name=n._name+"."+t,this._init(a),this._$handleAny=function(e){return r._handleAny(e)}}}function G(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case"value":return this._handleValue(e.value);case"error":return this._handleError(e.value);case"end":return this._handleEnd();}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function Q(e,t){var n=F(L,e);return l(n,L,G(L),t),n}function W(e,t){var n=F(V,e);return l(n,V,G(V),t),n}function Y(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new St(e,{fn:t})}function X(e){return new kt(e)}function J(e){var t=!1,n=N(function(n){if(!t){var a=function(e){n.emit(e),n.end()},r=function(e){n.error(e),n.end()},o=e.then(a,r);o&&"function"==typeof o.done&&o.done(),t=!0}});return Y(n,null).setName("fromPromise")}function Z(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}function ee(e){var t=e.Symbol,n;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}function te(e){var t=e[xt]?e[xt]():e;return N(function(e){var n=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return n.unsubscribe?function(){n.unsubscribe()}:n}).setName("fromESObservable")}function ne(e){this._observable=e.takeErrors(1)}function ae(){return new ne(this)}function re(e,t,n){for(var a in e)e.hasOwnProperty(a)&&(t.push(a),n.push(e[a]))}function oe(e){for(var t=void 0,n=0;n<e.length;n++)void 0!==e[n]&&(void 0===t||t.index<e[n].index)&&(t=e[n]);return t.error}function ie(e,t,n){var a=this;L.call(this),this._activeCount=e.length,this._sources=d(e,t),this._combinator=n,this._aliveCount=0,this._latestValues=Array(this._sources.length),this._latestErrors=Array(this._sources.length),h(this._latestValues,pt),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var r=function(e){a._$handlers.push(function(t){return a._handleAny(e,t)})},o=0;o<this._sources.length;o++)r(o)}function se(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return n=n?q(n,e.length+t.length):function(e){return e},0===e.length?x():new ie(e,t,n)}function le(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var a=[],r=[],o=[];re(e,a,r),re(t,a,o);return 0===r.length?x():new ie(r,o,function(e){for(var t={},r=e.length-1;0<=r;r--)t[a[r]]=e[r];return n?n(t):t})}function de(e,t,n){return"function"==typeof t&&(n=t,t=void 0),Array.isArray(e)?se(e,t,n):le(e,t,n)}function pe(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:It;return new(e._ofSameType(wt,Pt))(e,{fn:t})}function ce(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Ot;return new(e._ofSameType(Mt,At))(e,{fn:t})}function ue(e,t){return new(e._ofSameType(Kt,Rt))(e,{n:t})}function ye(e,t){return new(e._ofSameType(zt,Bt))(e,{n:t})}function me(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Ut;return new(e._ofSameType($t,jt))(e,{fn:t})}function ge(e){return new(e._ofSameType(Gt,Qt))(e)}function he(e,t){return new(e._ofSameType(Yt,Xt))(e,{n:t})}function fe(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:tn;return new(e._ofSameType(Zt,en))(e,{fn:t})}function be(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:on;return new(e._ofSameType(an,rn))(e,{fn:t})}function ve(e,t){return[e,t]}function _e(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pt;return new(e._ofSameType(ln,dn))(e,{fn:t||ve,seed:n})}function Se(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:pt;return new pn(e,{fn:t,seed:n})}function ke(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:un;return new cn(e,{fn:t})}function Ee(e,t){return new(e._ofSameType(gn,hn))(e,{wait:t})}function Le(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=n.leading,r=n.trailing;return new(e._ofSameType(vn,_n))(e,{wait:t,leading:!(a!==void 0)||a,trailing:!(r!==void 0)||r})}function Ve(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=n.immediate;return new(e._ofSameType(kn,En))(e,{wait:t,immediate:a!==void 0&&a})}function xe(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Cn;return new(e._ofSameType(Vn,xn))(e,{fn:t})}function Ce(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:In;return new(e._ofSameType(wn,Pn))(e,{fn:t})}function De(e){return new(e._ofSameType(Mn,An))(e)}function we(e){return new(e._ofSameType(Nn,Kn))(e)}function Pe(e){return new(e._ofSameType(qn,zn))(e)}function Ie(e,t){return new(e._ofSameType(Hn,$n))(e,{fn:t})}function Te(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return new(e._ofSameType(Un,Fn))(e,{min:n,max:t})}function Me(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=n.flushOnEnd;return new(e._ofSameType(Qn,Wn))(e,{fn:t||Yn,flushOnEnd:!(a!==void 0)||a})}function Ae(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=n.flushOnEnd;return new(e._ofSameType(Jn,Zn))(e,{count:t,flushOnEnd:!(a!==void 0)||a})}function Oe(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},r=a.flushOnEnd;return new(e._ofSameType(ta,na))(e,{wait:t,count:n,flushOnEnd:!(r!==void 0)||r})}function Ne(e){return{"@@transducer/step":function(t,n){return e._emitValue(n),null},"@@transducer/result":function(){return e._emitEnd(),null}}}function Ke(e,t){return new(e._ofSameType(ra,oa))(e,{transducer:t})}function Re(e,t){return new(e._ofSameType(sa,la))(e,{fn:t})}function qe(e,t){var n=this;L.call(this),this._buffers=m(e,function(e){return da(e)?u(e):[]}),this._sources=m(e,function(e){return da(e)?x():e}),this._combinator=t?q(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var a=function(e){n._$handlers.push(function(t){return n._handleAny(e,t)})},r=0;r<this._sources.length;r++)a(r)}function ze(e,t){return 0===e.length?x():new qe(e,t)}function Be(){var e=this,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=t.queueLim,a=n===void 0?0:n,r=t.concurLim,o=r===void 0?-1:r,i=t.drop,s=i===void 0?"new":i;L.call(this),this._queueLim=0>a?-1:a,this._concurLim=0>o?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function He(e){Be.call(this),this._addAll(e),this._initialised=!0}function $e(e){return 0===e.length?x():new He(e)}function je(e){var t=this;L.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}function Ue(e){return ca(function(t){return!!(e.length>t)&&e[t]}).setName("concat")}function Fe(){Be.call(this)}function Ge(e,t,n){var a=this;Be.call(this,n),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return a._handleMain(e)}}function Qe(e,t){Ge.call(this,e,t)}function We(e,t){return function(n,a,r){var o=this;e.call(this),this._primary=n,this._secondary=a,this._name=n._name+"."+t,this._lastSecondary=pt,this._$handleSecondaryAny=function(e){return o._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return o._handlePrimaryAny(e)},this._init(r)}}function Ye(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case"value":return this._handlePrimaryValue(e.value);case"error":return this._handlePrimaryError(e.value);case"end":return this._handlePrimaryEnd(e.value);}},_handleSecondaryAny:function(e){switch(e.type){case"value":return this._handleSecondaryValue(e.value);case"error":return this._handleSecondaryError(e.value);case"end":this._handleSecondaryEnd(e.value),this._removeSecondary();}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function Xe(e,t){var n=We(L,e);return l(n,L,Ye(L),t),n}function Je(e,t){var n=We(V,e);return l(n,V,Ye(V),t),n}function Ze(e,t){return new(e._ofSameType(ya,ma))(e,t)}function et(e,t,n){var a=n?function(e,t){return n(t,e)}:ga;return de([t],[e],a).setName(e,"sampledBy")}function tt(e,t){return new(e._ofSameType(fa,ba))(e,t)}function nt(e,t){return new(e._ofSameType(_a,Sa))(e,t)}function at(e,t,n){return new(e._ofSameType(Ea,La))(e,t,n)}function rt(e,t,n){return new(e._ofSameType(xa,Ca))(e,t,n)}function ot(e,t){var n=$e([pe(e,f),pe(t,Da)]);return n=be(n),n=Y(n,Da),n.setName(e,"awaiting")}function it(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Ia;return new(e._ofSameType(wa,Pa))(e,{fn:t})}function st(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Oa;return new(e._ofSameType(Ma,Aa))(e,{fn:t})}function lt(e){return new(e._ofSameType(Ka,Ra))(e)}function dt(e){if(za&&console&&"function"==typeof console.warn){console.warn(e,"\nHere is an Error object for you containing the call stack:",new Error)}}var pt=["<nothing>"],ct="end",ut="value",yt="error",mt="any";s(k.prototype,{add:function(e,t){return this._items=d(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var n=c(this._items,function(n){return n.type===e&&n.fn===t});return 0!==this._inLoop&&-1!==n&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[n])),this._items=y(this._items,n),this._items.length},addSpy:function(e){return this._spies=d(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=y(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,n=this._spies;null!==this._spies&&t<n.length;t++)n[t](e);for(var a=0,r=this._items;a<r.length&&!(null===this._items);a++)null!==this._removedItems&&b(this._removedItems,r[a])||_(r[a].type,r[a].fn,e);this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),s(E.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){return e===ut?this._emitValue(t):e===yt?this._emitError(t):e===ct?this._emitEnd():void 0},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:ut,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:yt,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:ct}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):_(e,t,{type:ct}),this},_off:function(e,t){if(this._alive){var n=this._dispatcher.remove(e,t);0===n&&this._setActive(!1)}return this},onValue:function(e){return this._on(ut,e)},onError:function(e){return this._on(yt,e)},onEnd:function(e){return this._on(ct,e)},onAny:function(e){return this._on(mt,e)},offValue:function(e){return this._off(ut,e)},offError:function(e){return this._off(yt,e)},offEnd:function(e){return this._off(ct,e)},offAny:function(e){return this._off(mt,e)},observe:function(e,t,n){var a=this,r=!1,o=e&&"function"!=typeof e?e:{value:e,error:t,end:n},i=function(e){e.type===ct&&(r=!0),e.type===ut&&o.value?o.value(e.value):e.type===yt&&o.error?o.error(e.value):e.type===ct&&o.end&&o.end(e.value)};return this.onAny(i),{unsubscribe:function(){r||(a.offAny(i),r=!0)},get closed(){return r}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,n=function(n){var a="<"+n.type+(t?":current":"")+">";n.type===ct?console.log(e,a):console.log(e,a,n.value)};return this._alive&&(!this._logHandlers&&(this._logHandlers=[]),this._logHandlers.push({name:e,handler:n})),t=!0,this.onAny(n),t=!1,this},offLog:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.toString();if(this._logHandlers){var t=c(this._logHandlers,function(t){return t.name===e});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var n="<"+t.type+">";t.type===ct?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(!this._spyHandlers&&(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.toString();if(this._spyHandlers){var t=c(this._spyHandlers,function(t){return t.name===e});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),E.prototype.toString=function(){return"["+this._name+"]"},l(L,E,{_name:"stream",getType:function(){return"stream"}}),l(V,E,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:ut,value:e},!this._activating&&this._dispatcher.dispatch({type:ut,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:yt,value:e},!this._activating&&this._dispatcher.dispatch({type:yt,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,!this._activating&&this._dispatcher.dispatch({type:ct}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&_(e,t,this._currentEvent),this._alive||_(e,t,{type:ct}),this},getType:function(){return"property"}});var gt=new L;gt._emitEnd(),gt._name="never";var ht=C({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}}),S=C({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}}),ft=C({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=u(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}}),bt=C({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}}),vt=C({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=M(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){var e=this._fn;e(this._emitter)}});l(O,L,{_name:"stream",_onActivation:function(){var e=this._fn,t=e(M(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){L.prototype._clear.call(this),this._fn=null}});var _t=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];l(j,V,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),l(P,V,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var St=W("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}}),kt=Q("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}}),Et=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:Z(),n=null;return new t(function(t,a){e.onAny(function(e){e.type===ct&&null!==n?((n.type===ut?t:a)(n.value),n=null):n=e})})},Lt;Lt="undefined"==typeof self?"undefined"==typeof window?"undefined"==typeof commonjsGlobal?e:commonjsGlobal:window:self;var Vt=ee(Lt),xt=Vt.default?Vt.default:Vt;s(ne.prototype,{subscribe:function(e,t,n){var a=this,r="function"==typeof e?{next:e,error:t,complete:n}:e,o=function(e){e.type===ct&&(i=!0),e.type===ut&&r.next?r.next(e.value):e.type===yt&&r.error?r.error(e.value):e.type===ct&&r.complete&&r.complete(e.value)};this._observable.onAny(o);var i=!1,s={unsubscribe:function(){i=!0,a._observable.offAny(o)},get closed(){return i}};return s}}),ne.prototype[xt]=function(){return this},l(ie,L,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,n=this._latestValues.length,a=Array(n),r=Array(n),o=0;o<n;o++)a[o]=this._latestValues[o],r[o]=this._latestErrors[o],a[o]===pt&&(e=!1),void 0!==r[o]&&(t=!0);if(e){var s=this._combinator;this._emitValue(s(a))}t&&this._emitError(oe(r))},_handleAny:function(e,t){t.type===ut||t.type===yt?(t.type===ut&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===yt&&(this._latestValues[e]=pt,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){L.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var Ct=Object.freeze({Observable:{empty:function(){return x()},concat:function(e,t){return e.merge(t)},of:function(e){return i(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,n){return n.mapErrors(e).map(t)},ap:function(e,t){return de([e,t],function(e,t){return e(t)})},chain:function(e,t){return t.flatMap(e)}}}),Dt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},wt=Q("map",Dt),Pt=W("map",Dt),It=function(e){return e},Tt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;t(e)&&this._emitValue(e)}},Mt=Q("filter",Tt),At=W("filter",Tt),Ot=function(e){return e},Nt={_init:function(e){var t=e.n;this._n=t,0>=t&&this._emitEnd()},_handleValue:function(e){0===this._n||(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},Kt=Q("take",Nt),Rt=W("take",Nt),qt={_init:function(e){var t=e.n;this._n=t,0>=t&&this._emitEnd()},_handleError:function(e){0===this._n||(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},zt=Q("takeErrors",qt),Bt=W("takeErrors",qt),Ht={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;t(e)?this._emitValue(e):this._emitEnd()}},$t=Q("takeWhile",Ht),jt=W("takeWhile",Ht),Ut=function(e){return e},Ft={_init:function(){this._lastValue=pt},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==pt&&this._emitValue(this._lastValue),this._emitEnd()}},Gt=Q("last",Ft),Qt=W("last",Ft),Wt={_init:function(e){var t=e.n;this._n=a(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Yt=Q("skip",Wt),Xt=W("skip",Wt),Jt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Zt=Q("skipWhile",Jt),en=W("skipWhile",Jt),tn=function(e){return e},nn={_init:function(e){var t=e.fn;this._fn=t,this._prev=pt},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==pt&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},an=Q("skipDuplicates",nn),rn=W("skipDuplicates",nn),on=function(e,t){return e===t},sn={_init:function(e){var t=e.fn,n=e.seed;this._fn=t,this._prev=n},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==pt){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},ln=Q("diff",sn),dn=W("diff",sn),pn=W("scan",{_init:function(e){var t=e.fn,n=e.seed;this._fn=t,this._seed=n,n!==pt&&this._emitValue(n)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===yt?this._emitValue(this._seed===pt?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}}),cn=Q("flatten",{_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=this._fn,n=t(e),a=0;a<n.length;a++)this._emitValue(n[a])}}),un=function(e){return e},yn={},mn={_init:function(e){var t=this,n=e.wait;this._wait=a(0,n),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===yn?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(yn),setTimeout(this._$shiftBuff,this._wait))}},gn=Q("delay",mn),hn=W("delay",mn),fn=Date.now?function(){return Date.now()}:function(){return new Date().getTime()},bn={_init:function(e){var t=this,n=e.wait,r=e.leading,o=e.trailing;this._wait=a(0,n),this._leading=r,this._trailing=o,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=fn();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var n=this._wait-(t-this._lastCallTime);0>=n?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,n))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?fn():0,this._endLater&&this._emitEnd()}},vn=Q("throttle",bn),_n=W("throttle",bn),Sn={_init:function(e){var t=this,n=e.wait,r=e.immediate;this._wait=a(0,n),this._immediate=r,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=fn(),this._immediate&&!this._timeoutId&&this._emitValue(e),!this._timeoutId&&(this._timeoutId=setTimeout(this._$later,this._wait)),!this._immediate&&(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=fn()-this._lastAttempt;if(e<this._wait&&0<=e)this._timeoutId=setTimeout(this._$later,this._wait-e);else{if(this._timeoutId=null,!this._immediate){var t=this._laterValue;this._laterValue=null,this._emitValue(t)}this._endLater&&this._emitEnd()}}},kn=Q("debounce",Sn),En=W("debounce",Sn),Ln={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},Vn=Q("mapErrors",Ln),xn=W("mapErrors",Ln),Cn=function(e){return e},Dn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;t(e)&&this._emitError(e)}},wn=Q("filterErrors",Dn),Pn=W("filterErrors",Dn),In=function(e){return e},Tn={_handleValue:function(){}},Mn=Q("ignoreValues",Tn),An=W("ignoreValues",Tn),On={_handleError:function(){}},Nn=Q("ignoreErrors",On),Kn=W("ignoreErrors",On),Rn={_handleEnd:function(){}},qn=Q("ignoreEnd",Rn),zn=W("ignoreEnd",Rn),Bn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},Hn=Q("beforeEnd",Bn),$n=W("beforeEnd",Bn),jn={_init:function(e){var t=e.min,n=e.max;this._max=n,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=v(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},Un=Q("slidingWindow",jn),Fn=W("slidingWindow",jn),Gn={_init:function(e){var t=e.fn,n=e.flushOnEnd;this._fn=t,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e);var t=this._fn;t(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Qn=Q("bufferWhile",Gn),Wn=W("bufferWhile",Gn),Yn=function(e){return e},Xn={_init:function(e){var t=e.count,n=e.flushOnEnd;this._count=t,this._flushOnEnd=n,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Jn=Q("bufferWithCount",Xn),Zn=W("bufferWithCount",Xn),ea={_init:function(e){var t=this,n=e.wait,a=e.count,r=e.flushOnEnd;this._wait=n,this._count=a,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},ta=Q("bufferWithTimeOrCount",ea),na=W("bufferWithTimeOrCount",ea),aa={_init:function(e){var t=e.transducer;this._xform=t(Ne(this))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},ra=Q("transduce",aa),oa=W("transduce",aa),ia={_init:function(e){var t=e.fn;this._handler=t,this._emitter=M(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},sa=Q("withHandler",ia),la=W("withHandler",ia),da=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};l(qe,L,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var n=this._combinator;this._emitValue(n(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===ut&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===yt&&this._emitError(t.value),t.type===ct&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){L.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var pa=function(e){return e};l(Be,L,{_name:"abstractPool",_add:function(e,t){t=t||pa,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;g(e,function(e){return t._add(e)})},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=d(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0===this._queue.length?0===this._curSources.length&&this._onEmpty():this._pullQueue()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive?(this._curSources=d(this._curSources,[e]),this._active&&this._subToEnd(e)):0===this._queue.length?0===this._curSources.length&&this._onEmpty():this._pullQueue()}else this._curSources=d(this._curSources,[e])},_subToEnd:function(e){var t=this,n=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:n}),e.onEnd(n)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=c(this._$endHandlers,function(t){return t.obs===e});-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===ut?this._emitValue(e.value):e.type===yt&&this._emitError(e.value)},_removeQueue:function(e){var t=p(this._queue,e);return this._queue=y(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=p(this._curSources,e);return this._curSources=y(this._curSources,t),-1!==t&&(0===this._queue.length?0===this._curSources.length&&this._onEmpty():this._pullQueue()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=u(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){L.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),l(He,Be,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),l(je,L,{_name:"repeat",_handleAny:function(e){e.type===ct?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){L.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var ca=function(e){return new je(e)};l(Fe,Be,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),l(Ge,Be,{_onActivation:function(){Be.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Be.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){if(e.type===ut){var t=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value;t||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===yt&&this._emitError(e.value),e.type===ct&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Be.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),l(Qe,Ge,{_handleMain:function(e){if(e.type===yt){var t=this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value;t||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===ut&&this._emitValue(e.value),e.type===ct&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var ua={_handlePrimaryValue:function(e){this._lastSecondary!==pt&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==pt&&this._lastSecondary||this._emitEnd()}},ya=Xe("filterBy",ua),ma=Je("filterBy",ua),ga=function(e,t){return t},ha={_handlePrimaryValue:function(e){this._lastSecondary!==pt&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===pt&&this._emitEnd()}},fa=Xe("skipUntilBy",ha),ba=Je("skipUntilBy",ha),va={_handleSecondaryValue:function(){this._emitEnd()}},_a=Xe("takeUntilBy",va),Sa=Je("takeUntilBy",va),ka={_init:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.flushOnEnd;this._buff=[],this._flushOnEnd=!(t!==void 0)||t},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},Ea=Xe("bufferBy",ka),La=Je("bufferBy",ka),Va={_init:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.flushOnEnd,n=e.flushOnChange;this._buff=[],this._flushOnEnd=!(t!==void 0)||t,this._flushOnChange=n!==void 0&&n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===pt||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){!this._flushOnEnd&&(this._lastSecondary===pt||this._lastSecondary)&&this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},xa=Xe("bufferWhileBy",Va),Ca=Je("bufferWhileBy",Va),Da=function(){return!1},f=function(){return!0},t={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn,n=t(e);n.convert?this._emitError(n.error):this._emitValue(e)}},wa=Q("valuesToErrors",t),Pa=W("valuesToErrors",t),Ia=function(e){return{convert:!0,error:e}},Ta={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn,n=t(e);n.convert?this._emitValue(n.value):this._emitError(e)}},Ma=Q("errorsToValues",Ta),Aa=W("errorsToValues",Ta),Oa=function(e){return{convert:!0,value:e}},Na={_handleError:function(e){this._emitError(e),this._emitEnd()}},Ka=Q("endOnError",Na),Ra=W("endOnError",Na);E.prototype.toProperty=function(e){return Y(this,e)},E.prototype.changes=function(){return X(this)},E.prototype.toPromise=function(e){return Et(this,e)},E.prototype.toESObservable=ae,E.prototype[xt]=ae,E.prototype.map=function(e){return pe(this,e)},E.prototype.filter=function(e){return ce(this,e)},E.prototype.take=function(e){return ue(this,e)},E.prototype.takeErrors=function(e){return ye(this,e)},E.prototype.takeWhile=function(e){return me(this,e)},E.prototype.last=function(){return ge(this)},E.prototype.skip=function(e){return he(this,e)},E.prototype.skipWhile=function(e){return fe(this,e)},E.prototype.skipDuplicates=function(e){return be(this,e)},E.prototype.diff=function(e,t){return _e(this,e,t)},E.prototype.scan=function(e,t){return Se(this,e,t)},E.prototype.flatten=function(e){return ke(this,e)},E.prototype.delay=function(e){return Ee(this,e)},E.prototype.throttle=function(e,t){return Le(this,e,t)},E.prototype.debounce=function(e,t){return Ve(this,e,t)},E.prototype.mapErrors=function(e){return xe(this,e)},E.prototype.filterErrors=function(e){return Ce(this,e)},E.prototype.ignoreValues=function(){return De(this)},E.prototype.ignoreErrors=function(){return we(this)},E.prototype.ignoreEnd=function(){return Pe(this)},E.prototype.beforeEnd=function(e){return Ie(this,e)},E.prototype.slidingWindow=function(e,t){return Te(this,e,t)},E.prototype.bufferWhile=function(e,t){return Me(this,e,t)},E.prototype.bufferWithCount=function(e,t){return Ae(this,e,t)},E.prototype.bufferWithTimeOrCount=function(e,t,n){return Oe(this,e,t,n)},E.prototype.transduce=function(e){return Ke(this,e)},E.prototype.withHandler=function(e){return Re(this,e)},E.prototype.thru=function(e){return e(this)},E.prototype.combine=function(e,t){return de([this,e],t)},E.prototype.zip=function(e,t){return ze([this,e],t)},E.prototype.merge=function(e){return $e([this,e])},E.prototype.concat=function(e){return Ue([this,e])};var qa=function(){return new Fe};E.prototype.flatMap=function(e){return new Ge(this,e).setName(this,"flatMap")},E.prototype.flatMapLatest=function(e){return new Ge(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},E.prototype.flatMapFirst=function(e){return new Ge(this,e,{concurLim:1}).setName(this,"flatMapFirst")},E.prototype.flatMapConcat=function(e){return new Ge(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},E.prototype.flatMapConcurLimit=function(e,t){return new Ge(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},E.prototype.flatMapErrors=function(e){return new Qe(this,e).setName(this,"flatMapErrors")},E.prototype.filterBy=function(e){return Ze(this,e)},E.prototype.sampledBy=function(e,t){return et(this,e,t)},E.prototype.skipUntilBy=function(e){return tt(this,e)},E.prototype.takeUntilBy=function(e){return nt(this,e)},E.prototype.bufferBy=function(e,t){return at(this,e,t)},E.prototype.bufferWhileBy=function(e,t){return rt(this,e,t)};var za=!0;E.prototype.awaiting=function(e){return dt("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),ot(this,e)},E.prototype.valuesToErrors=function(e){return dt("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),it(this,e)},E.prototype.errorsToValues=function(e){return dt("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),st(this,e)},E.prototype.endOnError=function(){return dt("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),lt(this)};var Ba={Observable:E,Stream:L,Property:V,never:x,later:D,interval:w,sequentially:I,fromPoll:T,withInterval:A,fromCallback:K,fromNodeCallback:R,fromEvents:H,stream:N,constant:i,constantError:U,fromPromise:J,fromESObservable:te,combine:de,zip:ze,merge:$e,concat:Ue,Pool:Fe,pool:qa,repeat:ca,staticLand:Ct};Ba.Kefir=Ba,r.dissableDeprecationWarnings=function(){za=!1},r.Kefir=Ba,r.Observable=E,r.Stream=L,r.Property=V,r.never=x,r.later=D,r.interval=w,r.sequentially=I,r.fromPoll=T,r.withInterval=A,r.fromCallback=K,r.fromNodeCallback=R,r.fromEvents=H,r.stream=N,r.constant=i,r.constantError=U,r.fromPromise=J,r.fromESObservable=te,r.combine=de,r.zip=ze,r.merge=$e,r.concat=Ue,r.Pool=Fe,r.pool=qa,r.repeat=ca,r.staticLand=Ct,r["default"]=Ba,Object.defineProperty(r,"__esModule",{value:!0})})}),require$$0=unwrapExports(kefir),Kefir=require$$0,metaSymbol$10=canSymbol_1_6_5_canSymbol.for("can.meta"),onKeyValueSymbol$8=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),offKeyValueSymbol$6=canSymbol_1_6_5_canSymbol.for("can.offKeyValue"),keyNames={value:{on:"onValue",off:"offValue",handler:"onValueHandler",handlers:"onValueHandlers"},error:{on:"onError",off:"offError",handler:"onErrorHandler",handlers:"onErrorHandlers"}};function ensureMeta$4(e){var t=e[metaSymbol$10];return t||(t={},canReflect_1_18_0_canReflect.setKeyValue(e,metaSymbol$10,t)),t}function getCurrentValue(e,t){if(e._currentEvent&&e._currentEvent.type===t)return e._currentEvent.value;var n=keyNames[t];if(!n)return e[t];var a=function(e){r=e},r;return e[n.on](a),e[n.off](a),r}Kefir&&(Object.isExtensible&&!Object.isExtensible(Kefir)&&(Kefir=Kefir.Kefir),Kefir.Observable.prototype._eventSetup=function(){var e=this,t=ensureMeta$4(e);t.bound=!0,t.onValueHandler=function(n){var a=t.value;t.value=n,n!==a&&map$1.dispatch.call(e,{type:"value"},[n,a])},t.onErrorHandler=function(n){var a=t.error;t.error=n,map$1.dispatch.call(e,{type:"error"},[n,a])},e.onValue(t.onValueHandler),e.onError(t.onErrorHandler)},Kefir.Observable.prototype._eventTeardown=function(){var e=this,t=ensureMeta$4(e);t.bound=!1,e.offValue(t.onValueHandler),e.offError(t.onErrorHandler)},canReflect_1_18_0_canReflect.assignSymbols(Kefir.Observable.prototype,{"can.onKeyValue":function(){return map$1[onKeyValueSymbol$8].apply(this,arguments)},"can.offKeyValue":function(){return map$1[offKeyValueSymbol$6].apply(this,arguments)},"can.getKeyValue":function(e){var t=this,n=ensureMeta$4(t);if(!keyNames[e])return t[e];if(canObservationRecorder_1_3_1_canObservationRecorder.add(t,e),n.bound)return n[e];var a=getCurrentValue(t,e);return n[e]=a,a},"can.getValueDependencies":function(){var e=this,t;if(null==e._source?null!=e._sources&&(t=e._sources):t=[e._source],null!=t)return{valueDependencies:new Set(t)}}}),Kefir.emitterProperty=function(){var e=!1,t=Kefir.stream(function(t){return a=t,e&&a.value(r),function(){a=void 0}}),n=t.toProperty(function(){return r}),a,r;return n.emitter={value:function(t){return a?a.emit(t):void(e=!0,r=t)},error:function(e){if(a)return a.error(e)}},n.emitter.emit=n.emitter.value,canReflect_1_18_0_canReflect.assignSymbols(n,{"can.setKeyValue":function(e,t){this.emitter[e](t)},"can.hasKey":function(e){return e in this.emitter}}),n});var canKefir_1_1_4_canKefir=Kefir,canCompute_4_1_1_protoCompute=createCommonjsModule(function(e,t){var n=function(){for(var e=[],t=0,n=arguments.length;t<n;t++)e[t]=arguments[t];var a=typeof e[1];if("function"==typeof e[0])this._setupGetterSetterFn(e[0],e[1],e[2],e[3]);else if(!(e[1]!==void 0))this._setupSimpleValue(e[0]);else if("string"===a||"number"===a){var r=canReflect_1_18_0_canReflect.isObservableLike(e[0])&&canReflect_1_18_0_canReflect.isListLike(e[0]),o=canReflect_1_18_0_canReflect.isObservableLike(e[0])&&canReflect_1_18_0_canReflect.isMapLike(e[0]);if(o||r){var s=e[0],l=e[1],d=function(e){return arguments.length?void canStacheKey_1_4_3_canStacheKey.set(s,l,e):(r&&canStacheKey_1_4_3_canStacheKey.get(s,"length"),canStacheKey_1_4_3_canStacheKey.get(s,""+l))};this._setupGetterSetterFn(d,e[1],e[2],e[3])}else this._setupProperty(e[0],e[1],e[2])}else"function"===a?this._setupSetter(e[0],e[1],e[2]):e[1]&&e[1].fn?this._setupAsyncCompute(e[0],e[1]):this._setupSettings(e[0],e[1]);this._args=e,this._primaryDepth=0,this.isComputed=!0},a=function(e,t,n,a){t!==n&&(t===t||n===n)&&e.dispatch({type:"change",batchNum:a},[t,n])},r=function(e,t,n){var a=new canObservation_4_2_0_canObservation(t,n,e),r=e.updater.bind(e);return e.observation=a,{_on:function(){canReflect_1_18_0_canReflect.onValue(a,r,"notify"),e.value=a.hasOwnProperty("_value")?a._value:a.value},_off:function(){canReflect_1_18_0_canReflect.offValue(a,r,"notify")},getDepth:function(){return a.getDepth()}}};map$1(n.prototype),canAssign_1_3_3_canAssign(n.prototype,{setPrimaryDepth:function(e){this._primaryDepth=e},_setupGetterSetterFn:function(e,t,n){this._set=t?e.bind(t):e,this._get=t?e.bind(t):e,this._canObserve=!1!==n;var a=r(this,e,t||this);canAssign_1_3_3_canAssign(this,a)},_setupProperty:function(e,t,n){var a=this,r;r=function(){a.updater(a._get(),a.value)},this._get=function(){return get_1(e,t)},this._set=function(n){var a=t.split("."),r=a.pop();if(a.length){var o=get_1(e,a.join("."));o[r]=n}else e[t]=n},this._on=function(){map$1.on.call(e,n||t,r),this.value=this._get()},this._off=function(){return map$1.off.call(e,n||t,r)}},_setupSetter:function(e,t,n){this.value=e,this._set=t,canAssign_1_3_3_canAssign(this,n)},_setupSettings:function(e,t){if(this.value=e,this._set=t.set||this._set,this._get=t.get||this._get,!t.__selfUpdater){var n=this,a=this.updater;this.updater=function(){a.call(n,n._get(),n.value)}}this._on=t.on?t.on:this._on,this._off=t.off?t.off:this._off},_setupAsyncCompute:function(e,t){var a=this,o=t.fn,i;if(this.value=e,this._setUpdates=!0,this.lastSetValue=new n(e),this._set=function(e){return e===a.lastSetValue.get()?this.value:a.lastSetValue.set(e)},this._get=function(){return o.call(t.context,a.lastSetValue.get())},0===o.length)i=r(this,o,t.context);else if(1===o.length)i=r(this,function(){return o.call(t.context,a.lastSetValue.get())},t);else{var s=this.updater,l=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e){s.call(a,e,a.value)});this.updater=function(e){s.call(a,e,a.value)},i=r(this,function(){var e=o.call(t.context,a.lastSetValue.get(),l);return void 0===e?this.value:e},this)}canAssign_1_3_3_canAssign(this,i)},_setupSimpleValue:function(e){this.value=e},_eventSetup:canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(){this.bound=!0,this._on(this.updater)}),_eventTeardown:function(){this._off(this.updater),this.bound=!1},clone:function(e){return e&&"function"==typeof this._args[0]?this._args[1]=e:e&&(this._args[2]=e),new n(this._args[0],this._args[1],this._args[2],this._args[3])},_on:function(){},_off:function(){},get:function(){var e=canObservationRecorder_1_3_1_canObservationRecorder.isRecording();return e&&!1!==this._canObserve&&(canObservationRecorder_1_3_1_canObservationRecorder.add(this,"change"),!this.bound&&n.temporarilyBind(this)),this.bound?this.observation?this.observation.get():this.value:this._get()},_get:function(){return this.value},set:function(e){var t=this.value,n=this._set(e,t);return this._setUpdates?this.value:this.hasDependencies?this._get():(this.updater(void 0===n?this._get():n,t),this.value)},_set:function(e){return this.value=e},updater:function(e,t,n){this.value=e;var r=this.observation;r&&(r.hasOwnProperty("_value")?r._value=e:r.value=e),a(this,e,t,n)},toFunction:function(){return this._computeFn.bind(this)},_computeFn:function(e){return arguments.length?this.set(e):this.get()}}),n.prototype.on=n.prototype.bind=n.prototype.addEventListener,n.prototype.off=n.prototype.unbind=n.prototype.removeEventListener;var o=function(){return this.observation&&this.observation.hasDependencies()};Object.defineProperty(n.prototype,"hasDependencies",{get:o}),n.temporarilyBind=canObservation_4_2_0_canObservation.temporarilyBind,n.async=function(e,t,a){return new n(e,{fn:t,context:a})},n.truthy=function(e){return new n(function(){var t=e.get();return"function"==typeof t&&(t=t.get()),!!t})},canReflect_1_18_0_canReflect.assignSymbols(n.prototype,{"can.isValueLike":!0,"can.isMapLike":!1,"can.isListLike":!1,"can.setValue":n.prototype.set,"can.getValue":n.prototype.get,"can.valueHasDependencies":o,"can.onValue":function(e,t){function n(t,n,a){e(n,a)}canSingleReference_1_3_0_canSingleReference.set(e,this,n),this.addEventListener("change",n,t)},"can.offValue":function(e,t){this.removeEventListener("change",canSingleReference_1_3_0_canSingleReference.getAndDelete(e,this),t)},"can.getValueDependencies":function(){var e;return this.observation&&(e={valueDependencies:new Set([this.observation])}),e}}),e.exports=t=n}),canOnValueSymbol=canSymbol_1_6_5_canSymbol.for("can.onValue"),canOffValueSymbol=canSymbol_1_6_5_canSymbol.for("can.offValue"),canGetValue=canSymbol_1_6_5_canSymbol.for("can.getValue"),canSetValue=canSymbol_1_6_5_canSymbol.for("can.setValue"),isValueLike$1=canSymbol_1_6_5_canSymbol.for("can.isValueLike"),isMapLike$1=canSymbol_1_6_5_canSymbol.for("can.isMapLike"),isListLike$2=canSymbol_1_6_5_canSymbol.for("can.isListLike"),isFunctionLike$1=canSymbol_1_6_5_canSymbol.for("can.isFunctionLike"),canValueHasDependencies=canSymbol_1_6_5_canSymbol.for("can.valueHasDependencies"),canGetValueDependencies=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies"),addEventListener=function(e,t){var n=this,a;return t&&(a=function(){t.apply(n,arguments)},canSingleReference_1_3_0_canSingleReference.set(t,this,a)),n.computeInstance.addEventListener(e,a)},removeEventListener=function(e,t){var n=[];return"undefined"!=typeof e&&(n.push(e),"undefined"!=typeof t&&n.push(canSingleReference_1_3_0_canSingleReference.getAndDelete(t,this))),this.computeInstance.removeEventListener.apply(this.computeInstance,n)},onValue=function(e,t){return this.computeInstance[canOnValueSymbol](e,t)},offValue=function(e,t){return this.computeInstance[canOffValueSymbol](e,t)},getValue$1=function(){return this.computeInstance.get()},setValue=function(e){return this.computeInstance.set(e)},hasDependencies=function(){return this.computeInstance.hasDependencies},getDependencies=function(){return this.computeInstance[canGetValueDependencies]()},COMPUTE=function(e,t,n,a){function r(e){return arguments.length?r.computeInstance.set(e):r.computeInstance.get()}return r.computeInstance=new canCompute_4_1_1_protoCompute(e,t,n,a),r.on=r.bind=r.addEventListener=addEventListener,r.off=r.unbind=r.removeEventListener=removeEventListener,r.isComputed=r.computeInstance.isComputed,r.clone=function(n){return"function"==typeof e&&(t=n),COMPUTE(e,t,n,a)},getSet.set(r,canOnValueSymbol,onValue),getSet.set(r,canOffValueSymbol,offValue),getSet.set(r,canGetValue,getValue$1),getSet.set(r,canSetValue,setValue),getSet.set(r,isValueLike$1,!0),getSet.set(r,isMapLike$1,!1),getSet.set(r,isListLike$2,!1),getSet.set(r,isFunctionLike$1,!1),getSet.set(r,canValueHasDependencies,hasDependencies),getSet.set(r,canGetValueDependencies,getDependencies),r};COMPUTE.truthy=function(e){return COMPUTE(function(){var t=e();return!!t})},COMPUTE.async=function(e,t,n){return COMPUTE(e,{fn:t,context:n})},COMPUTE.temporarilyBind=canCompute_4_1_1_protoCompute.temporarilyBind;var canCompute_4_1_1_canCompute=canNamespace_1_0_0_canNamespace.compute=COMPUTE,toComputeFromEvent=function(e,t){var n,a;return canCompute_4_1_1_canCompute(void 0,{on:function(r){n=function(e){a=canAssign_1_3_3_canAssign({args:[].slice.call(arguments,1)},e),r()},e.on(t,n)},off:function(){e.off(t,n),a=void 0},get:function(){return a}})},STREAM=function(e){var t=function(){if(1===arguments.length)return e.toStream(arguments[0]);if(1<arguments.length){var t=arguments[0],a=arguments[1].trim();if(-1===a.indexOf(" "))return 0===a.indexOf(".")?n.toStreamFromProperty(t,a.slice(1)):n.toStreamFromEvent(t,a);var r=a.split(" ");return n.toStreamFromEvent(t,r[0].slice(1),r[1])}},n;return n=t,n.toStream=n,n.toStreamFromProperty=function(t,n){return e.toStream(canCompute_4_1_1_canCompute(t,n))},n.toStreamFromEvent=function(){var t=arguments[0],n,a,r,o;if(2===arguments.length)return o=toComputeFromEvent(t,arguments[1]),e.toStream(o);a=arguments[1],n=arguments[2],r=t[a];var i=canCompute_4_1_1_canCompute(t,a),s,l;o=canCompute_4_1_1_canCompute(void 0,{on:function(e){s=function(t,n){r=n,e(r)},l=function(e,t,a){a.off(n,s),t.on(n,s)},i.on("change",l),i().on(n,s)},off:function(){i().off(n,s),i.off("change",l)},get:function(){return r},set:function(){throw new Error("can-stream: you can't set this type of compute")}});var d=e.toStream(o);return d},n.toCompute=function(){var t=canReflect_1_18_0_canReflect.toArray(arguments);return e.toCompute.apply(this,t)},n};STREAM.toComputeFromEvent=toComputeFromEvent;var canStream_1_1_1_canStream=canNamespace_1_0_0_canNamespace.stream=STREAM,canStreamKefir_1_2_1_canStreamKefir=createCommonjsModule(function(e){var t=canSymbol_1_6_5_canSymbol.for("can.getValueDependencies"),n=canSymbol_1_6_5_canSymbol.for("can.getKeyDependencies"),a={};a.toStream=function(e){var n=canKefir_1_1_4_canKefir.stream(function(t){var n=function(e,n){t.emit(n)};e.on("change",n);var a=e();return void 0!==a&&t.emit(a),function(){e.off("change",n)}});return n[t]=function(){return{valueDependencies:new Set([e])}},n},a.toCompute=function(e,t){var a=canKefir_1_1_4_canKefir.stream(function(t){s=t,void 0!==p&&s.emit(p)}),r=e.call(t,a),o=canCompute_4_1_1_canCompute(void 0,{get:function(){return l},set:function(e){return s?s.emit(e):p=e,e},on:function(e){d=function(t){l=t,e()},r.onValue(d)},off:function(){r.offValue(d)}}),i=o.computeInstance,s,l,d,p;return i[n]=function(e){if("change"===e)return{valueDependencies:new Set([r])}},o},canNamespace_1_0_0_canNamespace.streamKefir||(e.exports=canNamespace_1_0_0_canNamespace.streamKefir=canStream_1_1_1_canStream(a))}),canDefineStreamKefir_1_1_1_canDefineStreamKefir=canNamespace_1_0_0_canNamespace.defineStreamKefir=canDefineStream_1_1_1_canDefineStream(canStreamKefir_1_2_1_canStreamKefir),Symbols={metaSymbol:canSymbol_1_6_5_canSymbol.for("can.meta"),patchesSymbol:"can.patches",keysSymbol:"can.keys"},ObservableStore={proxiedObjects:new WeakMap,proxies:new WeakSet},metaSymbol$11=canSymbol_1_6_5_canSymbol.for("can.meta"),classTest=/^\s*class\s+/,helpers$4={assignEverything:function(e,t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e},isBuiltInButNotArrayOrPlainObjectOrElement:function(e){return!(e instanceof global_1().Element)&&helpers$4.isBuiltInButNotArrayOrPlainObject(e)},isBuiltInButNotArrayOrPlainObject:function(e){if(Array.isArray(e))return!1;if("function"==typeof e){var t=e.toString();return!!(0<t.indexOf("[native code]"))}var n=Object.prototype.toString.call(e);return"[object Object]"!==n&&-1!==n.indexOf("[object ")},inheritsFromArray:function(e){var t=e;do{if(Array.isArray(t))return!0;t=Object.getPrototypeOf(t)}while(t);return!1},isClass:function(e){return"function"==typeof e&&classTest.test(e.toString())},supportsClass:function(){try{return eval("\"use strict\"; class A{};"),!0}catch(t){return!1}}(),makeSimpleExtender:function(e){return function(t,n,a){var r=function(){var t=this,n=e.apply(this,arguments);return t.init&&(n[metaSymbol$11].preventSideEffects++,t.init.apply(n,arguments),n[metaSymbol$11].preventSideEffects--),n};return helpers$4.assignEverything(r,e),helpers$4.assignEverything(r,n||{}),r.extend=helpers$4.makeSimpleExtender(r),r.prototype=Object.create(e.prototype),helpers$4.assignEverything(r.prototype,a||{}),r.prototype.constructor=r,r}},assignNonEnumerable:function(e,t,n){return Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}},Helpers=helpers$4,ComputedHelpers=createCommonjsModule(function(e){function t(e,t,n){this.instance=e,this.prop=t,this.observation=n,this.forward=this.forward.bind(this)}function n(e,n){var o=e[a],i=o.target,s=i[r];if(void 0!==s){var l=s[n];if(void 0!==l)return void 0===o.computedKeys[n]&&(o.computedKeys[n]=new t(e,n,l(e,n))),o.computedKeys[n]}}var a=canSymbol_1_6_5_canSymbol.for("can.meta"),r=canSymbol_1_6_5_canSymbol.for("can.computedPropertyDefinitions"),o=canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),i=canSymbol_1_6_5_canSymbol.for("can.offKeyValue");t.prototype.bind=function(){this.bindingCount++,1===this.bindingCount&&this.observation.on(this.forward,"notify")},t.prototype.unbind=function(){this.bindingCount--,0===this.bindingCount&&this.observation.off(this.forward,"notify")},t.prototype.forward=function(e,t){map$1.dispatch.call(this.instance,{type:this.prop,target:this.instance},[e,t])},t.prototype.bindingCount=0;var s=e.exports={get:function(e,t){var a=n(e,t);if(void 0!==a)return canObservationRecorder_1_3_1_canObservationRecorder.add(e,t.toString()),0===a.bindingCount&&canObservationRecorder_1_3_1_canObservationRecorder.isRecording()&&canObservation_4_2_0_canObservation.temporarilyBind(a.observation),{value:canReflect_1_18_0_canReflect.getValue(a.observation)}},set:function(e,t,a){var r=n(e,t);return void 0!==r&&(canReflect_1_18_0_canReflect.setValue(r.observation,a),!0)},bind:function(e,t){var a=n(e,t);void 0===a||a.bind()},unbind:function(e,t){var a=n(e,t);void 0===a||a.unbind()},addKeyDependencies:function(e){var t=e[o],a=e[i];canReflect_1_18_0_canReflect.assignSymbols(e,{"can.onKeyValue":function(e){return s.bind(this,e),t.apply(this,arguments)},"can.offKeyValue":function(e){return s.unbind(this,e),a.apply(this,arguments)},"can.getKeyDependencies":function(e){var t=n(this,e);return void 0===t?void 0:{valueDependencies:new Set([t.observation])}}})},addMethodsAndSymbols:function(e){e.prototype.addEventListener=function(e,t,n){return s.bind(this,e),map$1.addEventListener.call(this,e,t,n)},e.prototype.removeEventListener=function(e,t,n){return s.unbind(this,e),map$1.removeEventListener.call(this,e,t,n)}},ensureDefinition:function(e){if(!e.hasOwnProperty(r)){var t=e[r],n=e[r]=Object.create(t||null);Object.getOwnPropertyNames(e).forEach(function(t){if("constructor"!==t){var a=Object.getOwnPropertyDescriptor(e,t);if(void 0!==a.get){var r=a.get;n[t]=function(e){return new canObservation_4_2_0_canObservation(r,e)}}}})}return e[r]}}}),ComputedHelpers_1=ComputedHelpers.get,ComputedHelpers_2=ComputedHelpers.set,ComputedHelpers_3=ComputedHelpers.bind,ComputedHelpers_4=ComputedHelpers.unbind,ComputedHelpers_5=ComputedHelpers.addKeyDependencies,ComputedHelpers_6=ComputedHelpers.addMethodsAndSymbols,ComputedHelpers_7=ComputedHelpers.ensureDefinition,hasOwn$1=Object.prototype.hasOwnProperty,isSymbolLike$2=canReflect_1_18_0_canReflect.isSymbolLike,proxyKeys$1=Object.create(null);Object.getOwnPropertySymbols(map$1).forEach(function(e){Helpers.assignNonEnumerable(proxyKeys$1,e,map$1[e])}),ComputedHelpers.addKeyDependencies(proxyKeys$1);var makeObject={observable:function(e,t){void 0===t.shouldRecordObservation&&(t.shouldRecordObservation=makeObject.shouldRecordObservationOnOwnAndMissingKeys);var n={target:e,proxyKeys:void 0===t.proxyKeys?Object.create(makeObject.proxyKeys()):t.proxyKeys,computedKeys:Object.create(null),options:t,preventSideEffects:0};Helpers.assignNonEnumerable(n.proxyKeys,Symbols.metaSymbol,n);var a={get:makeObject.get.bind(n),set:makeObject.set.bind(n),ownKeys:makeObject.ownKeys.bind(n),deleteProperty:makeObject.deleteProperty.bind(n),getOwnPropertyDescriptor:makeObject.getOwnPropertyDescriptor.bind(n),meta:n};return t.getPrototypeOf&&(a.getPrototypeOf=t.getPrototypeOf),n.proxy=new Proxy(e,a),map$1.addHandlers(n.proxy,n),n.proxy},proxyKeys:function(){return proxyKeys$1},get:function(e,t,n){var a=this.proxyKeys[t];if(void 0!==a)return a;if(isSymbolLike$2(t))return e[t];var r=ComputedHelpers.get(n,t);if(void 0!==r)return r.value;var o=makeObject.getKeyInfo(e,t,n,this),i=o.targetValue;return o.valueIsInvariant||(i=makeObject.getValueFromStore(t,i,this)),this.options.shouldRecordObservation(o,this)&&canObservationRecorder_1_3_1_canObservationRecorder.add(this.proxy,t.toString()),o.parentObservableGetCalledOn&&canObservationRecorder_1_3_1_canObservationRecorder.add(o.parentObservableGetCalledOn,t.toString()),i},set:function(e,t,n,a){if(a!==this.proxy&&!0!==this.options.proxiedPrototype)return makeObject.setKey(a,t,n,this);var r=ComputedHelpers.set(a,t,n);return!(!0!==r)||(n=makeObject.getValueToSet(t,n,this),makeObject.setValueAndOnChange(t,n,this,function(e,t,n,a,r){var o={type:e,patches:[{key:e,type:a?"set":"add",value:t}],keyChanged:a?void 0:e};map$1.dispatch.call(n.proxy,o,[t,r])}),!0)},deleteProperty:function(e,t){var n=this.target[t],a=delete this.target[t];if(a&&0===this.preventSideEffects&&n!==void 0){map$1.dispatch.call(this.proxy,{type:t,patches:[{key:t,type:"delete"}],keyChanged:t},[void 0,n])}return a},ownKeys:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this.proxy,Symbols.keysSymbol),Object.getOwnPropertyNames(this.target).concat(Object.getOwnPropertySymbols(this.target)).concat(Object.getOwnPropertySymbols(this.proxyKeys))},getOwnPropertyDescriptor:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!n&&t in this.proxyKeys?Object.getOwnPropertyDescriptor(this.proxyKeys,t):n},getKeyInfo:function(e,t,n,a){var r=Object.getOwnPropertyDescriptor(e,t),o={key:t,descriptor:r,targetHasOwnKey:!!r,getCalledOnParent:n!==a.proxy,protoHasKey:!1,valueIsInvariant:!1,targetValue:void 0,isAccessor:!1};return!0===o.getCalledOnParent&&(o.parentObservableGetCalledOn=ObservableStore.proxiedObjects.get(n)),void 0===r?(o.targetValue=a.target[t],o.protoHasKey=void 0!==o.targetValue||t in e):(o.valueIsInvariant=!1===r.writable,void 0===r.get?o.targetValue=r.value:(o.targetValue=r.get.call(o.parentObservableGetCalledOn||n),o.isAccessor=!0)),o},shouldRecordObservationOnOwnAndMissingKeys:function(e,t){return 0===t.preventSideEffects&&!e.isAccessor&&(e.targetHasOwnKey||!e.protoHasKey&&!Object.isSealed(t.target))},setKey:function(e,t,n){return Object.defineProperty(e,t,{value:n,configurable:!0,enumerable:!0,writable:!0}),!0},getValueToSet:function(e,t,n){return!canReflect_1_18_0_canReflect.isSymbolLike(e)&&n.handlers.getNode([e])?makeObject.getValueFromStore(e,t,n):t},getValueFromStore:function(e,t,n){return canReflect_1_18_0_canReflect.isPrimitive(t)||canReflect_1_18_0_canReflect.isObservableLike(t)||ObservableStore.proxies.has(t)||(ObservableStore.proxiedObjects.has(t)?t=ObservableStore.proxiedObjects.get(t):!Helpers.isBuiltInButNotArrayOrPlainObject(t)&&(t=n.options.observe(t))),t},setValueAndOnChange:function(e,t,n,a){var r=hasOwn$1.call(n.target,e),o=Object.getOwnPropertyDescriptor(n.target,e),i,s;o&&o.set?o.set.call(n.proxy,t):(i=n.target[e],s=i!==t,s&&(n.target[e]=t,0===n.preventSideEffects&&a(e,t,n,r,i)))}},MakeObject=makeObject,isSymbolLike$3=canReflect_1_18_0_canReflect.isSymbolLike,isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function didLengthChangeCauseDeletions(e,t,n){return"length"===e&&t<n}var mutateMethods$2={push:function(e,t){return[{index:e.length-t.length,deleteCount:0,insert:t,type:"splice"}]},pop:function(e){return[{index:e.length,deleteCount:1,insert:[],type:"splice"}]},shift:function(){return[{index:0,deleteCount:1,insert:[],type:"splice"}]},unshift:function(e,t){return[{index:0,deleteCount:0,insert:t,type:"splice"}]},splice:function(e,t){return[{index:t[0],deleteCount:t[1],insert:t.slice(2),type:"splice"}]},sort:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]},reverse:function(e){return[{index:0,deleteCount:e.length,insert:e,type:"splice"}]}};canReflect_1_18_0_canReflect.eachKey(mutateMethods$2,function(e,t){var n=Array.prototype[t],a=function(){var t=this[Symbols.metaSymbol],a=0===t.preventSideEffects,r=t.target.length;t.preventSideEffects++;var o=n.apply(t.target,arguments),i=e(t.target,Array.from(arguments),r);if(!0==a){map$1.dispatch.call(t.proxy,{type:"length",patches:i},[t.target.length,r])}return t.preventSideEffects--,o};ObservableStore.proxiedObjects.set(n,a),ObservableStore.proxies.add(a)}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){var t=Array.prototype[e];if(!ObservableStore.proxiedObjects.has(t)&&"constructor"!==e&&"function"==typeof t){var n=function(){canObservationRecorder_1_3_1_canObservationRecorder.add(this,Symbols.patchesSymbol);var e=this[Symbols.metaSymbol];e.preventSideEffects++;var n=t.apply(this,arguments);return e.preventSideEffects--,e.options.observe(n)};ObservableStore.proxiedObjects.set(t,n),ObservableStore.proxies.add(n)}});var proxyKeys$2=Helpers.assignEverything(Object.create(null),MakeObject.proxyKeys()),makeArray$1={observable:function(e,t){void 0===t.shouldRecordObservation&&(t.shouldRecordObservation=MakeObject.shouldRecordObservationOnOwnAndMissingKeys);var n={target:e,proxyKeys:void 0===t.proxyKeys?Object.create(makeArray$1.proxyKeys()):t.proxyKeys,computedKeys:Object.create(null),options:t,preventSideEffects:0};return n.proxyKeys[Symbols.metaSymbol]=n,n.proxy=new Proxy(e,{get:MakeObject.get.bind(n),set:makeArray$1.set.bind(n),ownKeys:MakeObject.ownKeys.bind(n),deleteProperty:MakeObject.deleteProperty.bind(n),meta:n}),map$1.addHandlers(n.proxy,n),n.proxy},proxyKeys:function(){return proxyKeys$2},set:function(e,t,n,a){if(a!==this.proxy)return MakeObject.setKey(a,t,n,this);var r=ComputedHelpers.set(a,t,n);if(!0===r)return!0;n=MakeObject.getValueToSet(t,n,this);var o=e.length;return MakeObject.setValueAndOnChange(t,n,this,function(t,n,a,r,i){var s=[{key:t,type:r?"set":"add",value:n}],l=!isSymbolLike$3(t)&&+t;isInteger(l)&&(!r&&l>o?s.push({index:o,deleteCount:0,insert:e.slice(o),type:"splice"}):s.push.apply(s,mutateMethods$2.splice(e,[l,1,n]))),didLengthChangeCauseDeletions(t,n,i,a)&&s.push({index:n,deleteCount:i-n,insert:[],type:"splice"});var d={type:t,patches:s,keyChanged:r?void 0:t};map$1.dispatch.call(a.proxy,d,[n,i])}),!0}},MakeArray=makeArray$1,makeObserve={observe:function(e){if(canReflect_1_18_0_canReflect.isPrimitive(e))return e;var t=ObservableStore.proxiedObjects.get(e);return t?t:ObservableStore.proxies.has(e)?e:Helpers.isBuiltInButNotArrayOrPlainObjectOrElement(e)?e:(t="function"==typeof e?makeObserve.function(e):Helpers.inheritsFromArray(e)?makeObserve.array(e):e instanceof global_1().Element?makeObserve.prototype(e):makeObserve.object(e),ObservableStore.proxiedObjects.set(e,t),ObservableStore.proxies.add(t),t)},object:null,array:null,function:null},MakeObserve=makeObserve,proxyKeys$3=Helpers.assignEverything(Object.create(null),MakeObject.proxyKeys());type$1(proxyKeys$3),canReflect_1_18_0_canReflect.assignSymbols(proxyKeys$3,{"can.defineInstanceKey":function(e,t){this[Symbols.metaSymbol].definitions[e]=t}});var makeFunction={observable:function(e,t){void 0===t.shouldRecordObservation&&(t.shouldRecordObservation=MakeObject.shouldRecordObservationOnOwnAndMissingKeys);var n=Object.create(makeFunction.proxyKeys()),a={target:e,proxyKeys:n,computedKeys:Object.create(null),options:t,definitions:{},isClass:Helpers.isClass(e),preventSideEffects:0};if(n[Symbols.metaSymbol]=a,a.proxy=new Proxy(e,{get:MakeObject.get.bind(a),set:MakeObject.set.bind(a),ownKeys:MakeObject.ownKeys.bind(a),deleteProperty:MakeObject.deleteProperty.bind(a),construct:makeFunction.construct.bind(a),apply:makeFunction.apply.bind(a),meta:a}),map$1.addHandlers(a.proxy,a),type$1.addHandlers(a.proxy,a),ObservableStore.proxiedObjects.set(e,a.proxy),ObservableStore.proxies.add(a.proxy),a.target.prototype&&a.target.prototype.constructor===a.target){var r=MakeObject.observable(a.target.prototype,{getPrototypeOf:function(){return a.target.prototype},observe:MakeObserve.observe});ObservableStore.proxiedObjects.set(a.target.prototype,r),ObservableStore.proxies.add(r);var o=a.proxy.prototype;o.constructor=a.proxy}return a.proxy},construct:function(e,t,n){var a,r;if(this.isClass){for(r in a=Reflect.construct(e,t,n),this.definitions)Object.defineProperty(a,r,this.definitions[r]);return this.options.observe(a)}for(r in a=Object.create(this.proxy.prototype),this.definitions)Object.defineProperty(a,r,this.definitions[r]);var o=this.options.observe(a);o[Symbols.metaSymbol].preventSideEffects++;var i=e.apply(o,t);return o[Symbols.metaSymbol].preventSideEffects--,i?i:o},apply:function(e,t,n){var a=this.target.apply(t,n);return this.options.observe(a)},proxyKeys:function(){return proxyKeys$3}},MakeFunction=makeFunction,isSymbolLike$4=canReflect_1_18_0_canReflect.isSymbolLike,proxyMetaSymbol=canSymbol_1_6_5_canSymbol.for("can.proxyMeta");function getMetadata(e,t){if(e.hasOwnProperty(proxyMetaSymbol))return e[proxyMetaSymbol];void 0===t.shouldRecordObservation&&(t.shouldRecordObservation=MakeObject.shouldRecordObservationOnOwnAndMissingKeys),t.proxiedPrototype=!0;var n={target:MakeObject.observable({},t),proxyKeys:void 0===t.proxyKeys?Object.create(MakeObject.proxyKeys()):t.proxyKeys,computedKeys:Object.create(null),options:t,preventSideEffects:0,proxy:e};return Helpers.assignNonEnumerable(n.proxyKeys,Symbols.metaSymbol,n),map$1.addHandlers(n.proxy,n),e[proxyMetaSymbol]=n,n}var makePrototype={observable:function(e,t){var n=new Proxy(e,{set:function(e,n,a,r){if(isSymbolLike$4(n)||n in e)return Reflect.set(e,n,a,r);var o=getMetadata(r,t);return MakeObject.set.call(o,e,n,a,r)},get:function(e,n,a){if(n in e)return Reflect.get(e,n,a);var r=getMetadata(a,t);return MakeObject.get.call(r,e,n,a)}});return n}},MakePrototype=makePrototype,TypeHelpers=createCommonjsModule(function(e){var t=canSymbol_1_6_5_canSymbol.for("can.meta"),n=canSymbol_1_6_5_canSymbol.for("can.typeDefinitions"),a=e.exports={ensureDefinition:function(e){var t=e[n];if(!t){var a=e[n];t=e[n]=Object.create(a||null)}return t},addMethodsAndSymbols:function(e){canReflect_1_18_0_canReflect.assignSymbols(e,{"can.defineInstanceKey":function(e,t){a.ensureDefinition(this.prototype)[e]=t},"can.dispatchInstanceBoundChange":function(e,n){var a=this[t];if(a){var r=a.lifecycleHandlers;r&&canQueues_1_3_2_canQueues.enqueueByQueue(r.getNode([]),this,[e,n])}}})},shouldRecordObservationOnAllKeysExceptFunctionsOnProto:function(e,t){return 0===t.preventSideEffects&&!e.isAccessor&&(e.targetHasOwnKey||!e.protoHasKey&&!Object.isSealed(t.target)||e.protoHasKey&&"function"!=typeof targetValue)}}}),TypeHelpers_1=TypeHelpers.ensureDefinition,TypeHelpers_2=TypeHelpers.addMethodsAndSymbols,TypeHelpers_3=TypeHelpers.shouldRecordObservationOnAllKeysExceptFunctionsOnProto,definitionsSymbol=canSymbol_1_6_5_canSymbol.for("can.typeDefinitions"),proxyKeys$4=Helpers.assignEverything({},MakeObject.proxyKeys());ComputedHelpers.addKeyDependencies(proxyKeys$4);var ObserveObject=function(e){var t=Object.getPrototypeOf(this);ComputedHelpers.ensureDefinition(t),TypeHelpers.ensureDefinition(t);var n=this,a=t[definitionsSymbol]||{};for(var r in a)Object.defineProperty(n,r,a[r]);void 0!==e&&canReflect_1_18_0_canReflect.assign(n,e);var o=Object.create(proxyKeys$4);o.constructor=this.constructor;var i=MakeObject.observable(n,{observe:MakeObserve.observe,proxyKeys:o,shouldRecordObservation:TypeHelpers.shouldRecordObservationOnAllKeysExceptFunctionsOnProto});return ObservableStore.proxiedObjects.set(n,i),ObservableStore.proxies.add(i),i};map$1(ObserveObject.prototype),type$1(ObserveObject),ComputedHelpers.addMethodsAndSymbols(ObserveObject),TypeHelpers.addMethodsAndSymbols(ObserveObject),ObserveObject.extend=Helpers.makeSimpleExtender(ObserveObject);var object=ObserveObject,definitionsSymbol$1=canSymbol_1_6_5_canSymbol.for("can.typeDefinitions"),proxyKeys$5=Helpers.assignEverything({},MakeArray.proxyKeys()),ObserveArray;{var ObserveArray=function(e){var t=Object.getPrototypeOf(this);ComputedHelpers.ensureDefinition(t),TypeHelpers.ensureDefinition(t);var n=this,a=t[definitionsSymbol$1]||{};for(var r in a)Object.defineProperty(n,r,a[r]);this.push.apply(this,e||[]);var o=Object.create(proxyKeys$5);o.constructor=this.constructor;var i=MakeArray.observable(n,{observe:MakeObserve.observe,proxyKeys:o,shouldRecordObservation:TypeHelpers.shouldRecordObservationOnAllKeysExceptFunctionsOnProto});return ObservableStore.proxiedObjects.set(n,i),ObservableStore.proxies.add(i),i};ObserveArray.prototype=Object.create(Array.prototype)}map$1(ObserveArray.prototype),type$1(ObserveArray),ComputedHelpers.addMethodsAndSymbols(ObserveArray),TypeHelpers.addMethodsAndSymbols(ObserveArray),ObserveArray.extend=Helpers.makeSimpleExtender(ObserveArray);var array=ObserveArray;function defineProperty(e,t,n){ComputedHelpers.ensureDefinition(e)[t]=n}function asyncBase(e){return function(t,n,a){if(a.get!==void 0){var r=a.get;return defineProperty(t,n,function(t){return new async(function(t,n){if(!n)return e.default;var a=r.call(this,!0);if(canReflect_1_18_0_canReflect.isPromise(a))return a.then(n),e.default},t,e.default)})}if(void 0!==a.value){var o=a.value;return defineProperty(t,n,function(t){return new async(function(e,t){return o.call(this,t)},t,e.default)})}}}function resolverBase(){return function(e,t,n){if(n.value!==void 0){var a=n.value;return defineProperty(e,t,function(e){return new resolver(a,e)})}}}function optionalConfig(e){return function(t){return 3===arguments.length?e({}).apply(null,arguments):e(t)}}var decorators={async:optionalConfig(asyncBase),resolver:optionalConfig(resolverBase)},canObserve_2_3_2_canObserve=createCommonjsModule(function(e){for(var t in MakeObserve.object=function(e){return MakeObject.observable(e,MakeObserve)},MakeObserve.prototype=function(e){return MakePrototype.observable(e,MakeObserve)},MakeObserve.array=function(e){return MakeArray.observable(e,MakeObserve)},MakeObserve.function=function(e){return MakeFunction.observable(e,MakeObserve)},MakeObserve.observe.Object=object,MakeObserve.observe.Array=array,e.exports=MakeObserve.observe,e.exports.defineProperty=function(e,t,n){ComputedHelpers.ensureDefinition(e)[t]=n},decorators)e.exports[t]=decorators[t]}),canObserve_2_3_2_canObserve_1=canObserve_2_3_2_canObserve.defineProperty,canMapCompat_1_1_1_canMapCompat=createCommonjsModule(function(e,t){function n(e,t){var n=e.prototype,a="function"==typeof n.attr;if(a)return e;return n.attr=function(e,n){!0===t&&canLog_1_0_2_canLog.warn("can-map-compat is intended for migrating away from can-map. Remove all uses of .attr() to remove this warning.");var a=typeof e,r=arguments.length;return 0===r?canReflect_1_18_0_canReflect.unwrap(this):"string"!==a&&"number"!==a?(!0===n?canReflect_1_18_0_canReflect.updateDeep(this,e):canReflect_1_18_0_canReflect.assignDeep(this,e),this):1===r?canKey_1_2_1_canKey.get(this,e):(canKey_1_2_1_canKey.set(this,e,n),this)},n.removeAttr=function(e){var t=canReflect_1_18_0_canReflect.getKeyValue(this,e);return canReflect_1_18_0_canReflect.deleteKeyValue(this,e),t},e}t=e.exports=function(e){return n(e,!0)},t.makeCompat=n}),canMapCompat_1_1_1_canMapCompat_1=canMapCompat_1_1_1_canMapCompat.makeCompat;canStache_5_1_1_canStache.addBindings(canStacheBindings_5_0_4_canStacheBindings);var shouldPop=!1;canStache_5_1_1_canStache("{{echo(args(1))}}")({echo:function(){},args:function(){shouldPop=1<arguments.length}}),canStache_5_1_1_canStache.registerConverter("boolean-to-inList",{get:function(e,t){return!!t&&-1!==t.indexOf(e)},set:function(e,t,n){if(n)if(!e){var a=n.indexOf(t);-1!==a&&n.splice(a,1)}else n.push(t)}});var converters={"string-to-any":{get:function(e){return""+canReflect_1_18_0_canReflect.getValue(e)},set:function(e,t){var n=canStringToAny_1_2_1_canStringToAny(e);canReflect_1_18_0_canReflect.setValue(t,n)}},"index-to-selected":{get:function(e,t){var n=canReflect_1_18_0_canReflect.getValue(e),a=canReflect_1_18_0_canReflect.getValue(t).indexOf(n);return a},set:function(e,t,n){var a=canReflect_1_18_0_canReflect.getValue(n)[e];canReflect_1_18_0_canReflect.setValue(t,a)}},"selected-to-index":{get:function(e,t){var n=canReflect_1_18_0_canReflect.getValue(e),a=canReflect_1_18_0_canReflect.getValue(t),r=a[n];return r},set:function(e,t,n){var a=canReflect_1_18_0_canReflect.getValue(n).indexOf(e);canReflect_1_18_0_canReflect.setValue(t,a)}},"either-or":{get:function(e,t,n){var a=canReflect_1_18_0_canReflect.getValue(e),r=canReflect_1_18_0_canReflect.getValue(t),o=canReflect_1_18_0_canReflect.getValue(n),i=r===a;return i||o===a?i:void 0},set:function(e,t,n,a){var r=e?canReflect_1_18_0_canReflect.getValue(n):canReflect_1_18_0_canReflect.getValue(a);canReflect_1_18_0_canReflect.setValue(t,r)}},equal:{get:function(){var e=canReflect_1_18_0_canReflect.toArray(arguments);if(shouldPop&&e.pop(),1<e.length){var t=canReflect_1_18_0_canReflect.getValue(e.pop());return e.every(function(e){var n=canReflect_1_18_0_canReflect.getValue(e);return n===t})}},set:function(){var e=canReflect_1_18_0_canReflect.toArray(arguments);if(shouldPop&&e.pop(),2<e.length){var t=e.shift(),n=canReflect_1_18_0_canReflect.getValue(e.pop());if(t)for(var a=0;a<e.length;a++)canReflect_1_18_0_canReflect.setValue(e[a],n)}}}};canStache_5_1_1_canStache.addConverter(converters),canStacheHelpers_1_2_0_canStacheHelpers.not||canStache_5_1_1_canStache.addConverter("not",{get:function(e){return!canReflect_1_18_0_canReflect.getValue(e)},set:function(e,t){canReflect_1_18_0_canReflect.setValue(t,!e)}});var canStacheConverters_5_0_0_canStacheConverters=converters,camelize=canString_1_1_0_canString.camelize,ignoreAttributesRegExp=/^(dataViewId|class|id|type|src|style)$/i,typeMatch=/\s*text\/(stache)\s*/;function isIn(e,t){for(;e.parentNode;)if(e=e.parentNode,e.nodeName.toLowerCase()===t.toLowerCase())return!0}function setAttr(e,t,n){var a=camelize(t);if(!ignoreAttributesRegExp.test(a)){var r=e.getAttribute(t);canReflect_1_18_0_canReflect.hasKey(n,a)||canReflect_1_18_0_canReflect.defineInstanceKey(n.constructor,a,typeof r),canReflect_1_18_0_canReflect.setKeyValue(n,a,r)}}function insertAfter(e,t){e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}function render(e,t,n){var a=e(t);isIn(n,"head")?document.body.appendChild(a):"script"===n.nodeName.toLowerCase()?insertAfter(n,a):(insertAfter(n,a),n.parentNode.removeChild(n))}function setupScope(e){var t=canViewModel_4_0_3_canViewModel(e);return canReflect_1_18_0_canReflect.each(e.attributes||[],function(n){setAttr(e,n.name,t)}),canDomEvents_1_3_11_canDomEvents.addEventListener(e,"attributes",function(n){setAttr(e,n.attributeName,t)}),t}var promise$1=new Promise(function(e,t){function n(){var n=[];canReflect_1_18_0_canReflect.each(document.querySelectorAll("[can-autorender]"),function(e){e.style.display="none";var t=e.innerHTML||e.text,a=e.getAttribute("type"),r=a.match(typeMatch),o=r&&r[1];n.push(canImportModule_1_2_0_canImportModule("can-"+o).then(function(n){if(n.async)return n.async(t).then(function(t){render(t,setupScope(e),e)});var a=n(t);render(a,setupScope(e),e)}))}),Promise.all(n).then(e,t)}"complete"===document.readyState?n():canDomEvents_1_3_11_canDomEvents.addEventListener(window,"load",n)}),canViewAutorender_6_0_0_canViewAutorender=canNamespace_1_0_0_canNamespace.autorender=function(e,t){return promise$1.then(e,t)},canDefine_2_8_0_ensureMeta=function(e){var t=canSymbol_1_6_5_canSymbol.for("can.meta"),n=e[t];return n||(n={},canReflect_1_18_0_canReflect.setKeyValue(e,t,n)),n},defineHelpers$1={defineExpando:canDefine_2_8_0_canDefine.expando,reflectSerialize:function(e){var t=this._define.definitions,n=this._define.defaultDefinition;return this.forEach(function(a,r){var o=t[r];a=o&&"function"==typeof o.serialize?o.serialize.call(this,a,r):n&&"function"==typeof n.serialize?n.serialize.call(this,a,r):canReflect_1_18_0_canReflect.serialize(a),void 0!==a&&(e[r]=a)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){void 0!==t&&(e[n]=canReflect_1_18_0_canReflect.unwrap(t))}),e},log:function(e){var t=this,n=function(e){return"string"==typeof e?JSON.stringify(e):e},a=canDefine_2_8_0_ensureMeta(t),r=a.allowedLogKeysSet||new Set;a.allowedLogKeysSet=r,e&&r.add(e),a._log=function(a,o){var i=a.type;"can.onPatches"===i||e&&!r.has(i)||"can.keys"===i||e&&!r.has(i)||("add"===i||"remove"===i?dev.log(canReflect_1_18_0_canReflect.getName(t),"\n how   ",n(i),"\n what  ",n(o[0]),"\n index ",n(o[1])):dev.log(canReflect_1_18_0_canReflect.getName(t),"\n key ",n(i),"\n is  ",n(o[0]),"\n was ",n(o[1])))}},deleteKey:function(e){var t=this._instanceDefinitions;if(t&&Object.prototype.hasOwnProperty.call(t,e)&&!Object.isSealed(this)){delete t[e],canQueues_1_3_2_canQueues.batch.start(),this.dispatch({action:"can.keys",type:"can.keys",target:this});var n=this._data[e];n!==void 0&&(delete this._data[e],this.dispatch({action:"delete",key:e,value:void 0,oldValue:n,type:e,target:this,patches:[{type:"delete",key:e}]},[void 0,n])),canQueues_1_3_2_canQueues.batch.stop()}else this.set(e,void 0);return this}},defineHelpers_1$1=defineHelpers$1,make$2=canDefine_2_8_0_canDefine.make,splice$1=[].splice,runningNative=!1,identity=function(e){return e},localOnPatchesSymbol$1="can.patches",makeFilterCallback=function(e){return function(t){for(var n in e)if(t[n]!==e[n])return!1;return!0}},onKeyValue=canDefine_2_8_0_canDefine.eventsProto[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")],offKeyValue=canDefine_2_8_0_canDefine.eventsProto[canSymbol_1_6_5_canSymbol.for("can.offKeyValue")],getSchemaSymbol$2=canSymbol_1_6_5_canSymbol.for("can.getSchema"),inSetupSymbol$7=canSymbol_1_6_5_canSymbol.for("can.initializing");function getSchema(){var e=this.prototype._define.definitions,t={type:"list",keys:{}};return t=canDefine_2_8_0_canDefine.updateSchemaKeys(t,e),t.keys["#"]&&(t.values=e["#"].Type,delete t.keys["#"]),t}var DefineList=canConstruct_3_5_6_canConstruct.extend("DefineList",{setup:function(e){if(DefineList){type$1(this);var t=this.prototype,n=canDefine_2_8_0_canDefine(t,t,e.prototype._define);canDefine_2_8_0_canDefine.makeDefineInstanceKey(this,n);var a=n.definitions["#"]||n.defaultDefinition;a&&(a.Type?this.prototype.__type=make$2.set.Type("*",a.Type,identity):a.type&&(this.prototype.__type=make$2.set.type("*",a.type,identity))),this[getSchemaSymbol$2]=getSchema}}},{setup:function(e){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{length:{type:"number"},_length:{type:"number"}}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_8_0_canDefine.setup.call(this,{},!1),Object.defineProperty(this,"_length",{enumerable:!1,configurable:!0,writable:!0,value:0}),e&&this.splice.apply(this,[0,0].concat(canReflect_1_18_0_canReflect.toArray(e)))},__type:canDefine_2_8_0_canDefine.types.observable,_triggerChange:function(e,t,n,a){var r=+e;if(!isNaN(r)){var o=this._define.definitions["#"],i,s;"add"===t?(o&&"function"==typeof o.added&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(o.added).call(this,n,r),i=[{type:"splice",insert:n,index:r,deleteCount:0}],s={type:t,action:"splice",insert:n,index:r,deleteCount:0,patches:i},this.dispatch(s,[n,r])):"remove"===t?(o&&"function"==typeof o.removed&&canObservationRecorder_1_3_1_canObservationRecorder.ignore(o.removed).call(this,a,r),i=[{type:"splice",index:r,deleteCount:a.length}],s={type:t,patches:i,action:"splice",index:r,deleteCount:a.length,target:this},this.dispatch(s,[a,r])):this.dispatch(t,[n,r])}else this.dispatch({type:""+e,target:this},[n,a])},get:function(e){return arguments.length?(isNaN(e)?canObservationRecorder_1_3_1_canObservationRecorder.add(this,e):canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),this[e]):canReflect_1_18_0_canReflect.unwrap(this,Map)},set:function(e,t){if("object"==typeof e)canReflect_1_18_0_canReflect.isListLike(e)?t?this.replace(e):canReflect_1_18_0_canReflect.assignList(this,e):canReflect_1_18_0_canReflect.assignMap(this,e);else if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e){if("number"==typeof e&&e>this._length-1){var n=Array(e+1-this._length);return n[n.length-1]=t,this.push.apply(this,n),n}this.splice(e,1,t)}else{var a=defineHelpers_1$1.defineExpando(this,e,t);a||(this[e]=t)}return this},assign:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.assignList(this,e):canReflect_1_18_0_canReflect.assignMap(this,e),this},update:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateList(this,e):canReflect_1_18_0_canReflect.updateMap(this,e),this},assignDeep:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.assignDeepList(this,e):canReflect_1_18_0_canReflect.assignDeepMap(this,e),this},updateDeep:function(e){return canReflect_1_18_0_canReflect.isListLike(e)?canReflect_1_18_0_canReflect.updateDeepList(this,e):canReflect_1_18_0_canReflect.updateDeepMap(this,e),this},_items:function(){var e=[];return this._each(function(t){e.push(t)}),e},_each:function(e){for(var t=0,n=this._length;t<n;t++)e(this[t],t)},splice:function(e,t){var n=canReflect_1_18_0_canReflect.toArray(arguments),a=[],r=2<n.length,o=this._length,s,l,d;for(e=e||0,s=0,l=n.length-2;s<l;s++)d=s+2,n[d]=this.__type(n[d],d),a.push(n[d]),this[s+e]!==n[d]&&(r=!1);if(r&&this._length<=a.length)return a;void 0===t&&(t=n[1]=this._length-e),runningNative=!0;var p=splice$1.apply(this,n);return runningNative=!1,canQueues_1_3_2_canQueues.batch.start(),0<t&&this._triggerChange(""+e,"remove",void 0,p),2<n.length&&this._triggerChange(""+e,"add",a,p),this.dispatch("length",[this._length,o]),canQueues_1_3_2_canQueues.batch.stop(),p},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)}});for(var prop$1 in canDefine_2_8_0_canDefine.eventsProto)Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop$1],writable:!0});var eventsProtoSymbols="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_8_0_canDefine.eventsProto):[canSymbol_1_6_5_canSymbol.for("can.onKeyValue"),canSymbol_1_6_5_canSymbol.for("can.offKeyValue")];eventsProtoSymbols.forEach(function(e){Object.defineProperty(DefineList.prototype,e,{configurable:!0,enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[e],writable:!0})});var getArgs=function(e){return e[0]&&Array.isArray(e[0])?e[0]:canReflect_1_18_0_canReflect.toArray(e)};for(var prop$1 in canReflect_1_18_0_canReflect.eachKey({push:"length",unshift:0},function(e,t){var n=[][t];DefineList.prototype[t]=function(){for(var t=[],a=e?this._length:0,r=arguments.length,o,s;r--;)s=arguments[r],t[r]=this.__type(s,r);return runningNative=!0,o=n.apply(this,t),runningNative=!1,(!this.comparator||t.length)&&(canQueues_1_3_2_canQueues.batch.start(),this._triggerChange(""+a,"add",t,void 0),this.dispatch("length",[this._length,a]),canQueues_1_3_2_canQueues.batch.stop()),o}}),canReflect_1_18_0_canReflect.eachKey({pop:"length",shift:0},function(e,t){var n=[][t];DefineList.prototype[t]=function(){if(this._length){var t=getArgs(arguments),a=e&&this._length?this._length-1:0,r=this._length?this._length:0,o;return runningNative=!0,o=n.apply(this,t),runningNative=!1,canQueues_1_3_2_canQueues.batch.start(),this._triggerChange(""+a,"remove",void 0,[o]),this.dispatch("length",[this._length,r]),canQueues_1_3_2_canQueues.batch.stop(),o}}}),canReflect_1_18_0_canReflect.eachKey({map:3,filter:3,reduce:4,reduceRight:4,every:3,some:3},function(e,t){DefineList.prototype[t]=function(){var n=this,a=[].slice.call(arguments,0),r=a[0],o=a[e-1]||n;"object"==typeof r&&(r=makeFilterCallback(r)),a[0]=function(){var t=[].slice.call(arguments,0);return t[e-3]=n.get(t[e-2]),r.apply(o,t)};var i=Array.prototype[t].apply(this,a);return"map"===t?new DefineList(i):"filter"===t?new n.constructor(i):i}}),canAssign_1_3_3_canAssign(DefineList.prototype,{includes:function(){var e=Array.prototype.includes;return e?function(){return e.apply(this,arguments)}:function(){throw new Error("DefineList.prototype.includes must have Array.prototype.includes available. Please add a polyfill to this environment.")}}(),indexOf:function(e,t){for(var n=t||0,a=this.length;n<a;n++)if(this.get(n)===e)return n;return-1},lastIndexOf:function(e,t){t="undefined"==typeof t?this.length-1:t;for(var n=t;0<=n;n--)if(this.get(n)===e)return n;return-1},join:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),[].join.apply(this,arguments)},reverse:function(){var e=[].reverse.call(this._items());return this.replace(e)},slice:function(){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length");var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var e=[];return canReflect_1_18_0_canReflect.eachIndex(arguments,function(t){if(canReflect_1_18_0_canReflect.isListLike(t)){var n=Array.isArray(t)?t:canReflect_1_18_0_canReflect.toArray(t);n.forEach(function(t){e.push(this.__type(t))},this)}else e.push(this.__type(t))},this),new this.constructor(Array.prototype.concat.apply(canReflect_1_18_0_canReflect.toArray(this),e))},forEach:function(e,t){for(var n=0,a=this.length,r;n<a&&(r=this.get(n),!1!==e.call(t||r,r,n,this));n++);return this},replace:function(e){var t=list(this,e);canQueues_1_3_2_canQueues.batch.start();for(var n=0,a=t.length;n<a;n++)this.splice.apply(this,[t[n].index,t[n].deleteCount].concat(t[n].insert));return canQueues_1_3_2_canQueues.batch.stop(),this},sort:function(e){var t=Array.prototype.slice.call(this);return Array.prototype.sort.call(t,e),this.splice.apply(this,[0,t.length].concat(t)),this}}),canDefine_2_8_0_canDefine.eventsProto)DefineList[prop$1]=canDefine_2_8_0_canDefine.eventsProto[prop$1],Object.defineProperty(DefineList.prototype,prop$1,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop$1],writable:!0});Object.defineProperty(DefineList.prototype,"length",{get:function(){return this[inSetupSymbol$7]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),this._length},set:function(e){if(runningNative)return void(this._length=e);if(!(null==e||isNaN(+e)||e===this._length))if(e>this._length-1){var t=Array(e-this._length);this.push.apply(this,t)}else this.splice(e)},enumerable:!0}),DefineList.prototype.attr=function(e,t){return canLog_1_0_2_canLog.warn("DefineMap::attr shouldn't be called"),0===arguments.length?this.get():e&&"object"==typeof e?this.set.apply(this,arguments):1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.item=function(e,t){return 1===arguments.length?this.get(e):this.set(e,t)},DefineList.prototype.items=function(){return canLog_1_0_2_canLog.warn("DefineList::get should should be used instead of DefineList::items"),this.get()};var defineListProto={"can.isMoreListLikeThanMapLike":!0,"can.isMapLike":!0,"can.isListLike":!0,"can.isValueLike":!1,"can.getKeyValue":DefineList.prototype.get,"can.setKeyValue":DefineList.prototype.set,"can.onKeyValue":function(e,t,n){var a;return isNaN(e)?onKeyValue.apply(this,arguments):(a=function(){t(this[e])},canSingleReference_1_3_0_canSingleReference.set(t,this,a,e),onKeyValue.call(this,"length",a,n))},"can.offKeyValue":function(e,t,n){var a;return isNaN(e)?offKeyValue.apply(this,arguments):(a=canSingleReference_1_3_0_canSingleReference.getAndDelete(t,this,e),offKeyValue.call(this,"length",a,n))},"can.deleteKeyValue":function(e){if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e)this.splice(e,1);else{if("length"===e||"_length"===e)return;this.set(e,void 0)}return this},"can.assignDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignList(this,e),canQueues_1_3_2_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),this.replace(e),canQueues_1_3_2_canQueues.batch.stop()},"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set,t.valueDependencies.add(this._computed[e].compute)),t},"can.splice":function(e,t,n){this.splice.apply(this,[e,t].concat(n))},"can.onPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")](localOnPatchesSymbol$1,e,t)},"can.offPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.offKeyValue")](localOnPatchesSymbol$1,e,t)}};canReflect_1_18_0_canReflect.assignSymbols(DefineList.prototype,defineListProto),canReflect_1_18_0_canReflect.setKeyValue(DefineList.prototype,canSymbol_1_6_5_canSymbol.iterator,function(){var e=-1;return"number"!=typeof this.length&&(this.length=0),{next:function(){return e++,{value:this[e],done:e>=this.length}}.bind(this)}}),canDefine_2_8_0_canDefine.DefineList=DefineList;var list$2=canNamespace_1_0_0_canNamespace.DefineList=DefineList,keysForDefinition$1=function(e){var t=[];for(var n in e){var a=e[n];("object"!=typeof a||("serialize"in a?!!a.serialize:!a.get))&&t.push(n)}return t};function assign$5(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function update$2(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function assignDeep$1(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function updateDeep$1(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateDeepMap(this,e||{}),canQueues_1_3_2_canQueues.batch.stop()}function setKeyValue$1(e,t){var n=defineHelpers_1$1.defineExpando(this,e,t);n||(this[e]=t)}function getKeyValue$1(e){var t=this[e];return void 0!==t||e in this||Object.isSealed(this)?t:(canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this[e])}var getSchemaSymbol$3=canSymbol_1_6_5_canSymbol.for("can.getSchema");function getSchema$1(){var e=this.prototype._define,t=e?e.definitions:{};return canDefine_2_8_0_canDefine.updateSchemaKeys({type:"map",identity:[],keys:{}},t)}var sealedSetup=function(e){canDefine_2_8_0_canDefine.setup.call(this,e||{},this.constructor.seal)},DefineMap=canConstruct_3_5_6_canConstruct.extend("DefineMap",{setup:function(e){var t=this.prototype,n;if(DefineMap){var a=canDefine_2_8_0_canDefine(t,t,e.prototype._define);for(n in canDefine_2_8_0_canDefine.makeDefineInstanceKey(this,a),type$1(this),DefineMap.prototype)canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,n,t[n]);t.setup===DefineMap.prototype.setup&&canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,"setup",sealedSetup);var r=Object.getOwnPropertyDescriptor(t,"_computed").get;Object.defineProperty(t,"_computed",{configurable:!0,enumerable:!1,get:function(){return this===t?void 0:r.call(this,arguments)}})}else for(n in t)canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,n,t[n]);canDefine_2_8_0_canDefine.defineConfigurableAndNotEnumerable(t,"constructor",this),this[getSchemaSymbol$3]=getSchema$1}},{setup:function(e,t){this._define||(Object.defineProperty(this,"_define",{enumerable:!1,value:{definitions:{}}}),Object.defineProperty(this,"_data",{enumerable:!1,value:{}})),canDefine_2_8_0_canDefine.setup.call(this,e||{},!0===t)},get:function(e){return e?getKeyValue$1.call(this,e):canReflect_1_18_0_canReflect.unwrap(this,Map)},set:function(e,t){return"object"==typeof e?!0===t?updateDeep$1.call(this,e):assignDeep$1.call(this,e):setKeyValue$1.call(this,e,t),this},assignDeep:function(e){return assignDeep$1.call(this,e),this},updateDeep:function(e){return updateDeep$1.call(this,e),this},assign:function(e){return assign$5.call(this,e),this},update:function(e){return update$2.call(this,e),this},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,Map)},deleteKey:defineHelpers_1$1.deleteKey,forEach:function(){var e=function(e,t,n){return canReflect_1_18_0_canReflect.eachKey(e,t,n)},t=canObservationRecorder_1_3_1_canObservationRecorder.ignore(e);return function(n,a,r){return!1===r?t(this,n,a):e(this,n,a)}}(),"*":{type:canDefine_2_8_0_canDefine.types.observable}}),defineMapProto={"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":getKeyValue$1,"can.setKeyValue":setKeyValue$1,"can.deleteKeyValue":defineHelpers_1$1.deleteKey,"can.getOwnKeys":function(){var e=canReflect_1_18_0_canReflect.getOwnEnumerableKeys(this);if(this._computed)for(var t=canReflect_1_18_0_canReflect.getOwnKeys(this._computed),n=0,a;n<t.length;n++)a=t[n],0>e.indexOf(a)&&e.push(a);return e},"can.getOwnEnumerableKeys":function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.keys"),canObservationRecorder_1_3_1_canObservationRecorder.add(Object.getPrototypeOf(this),"can.keys"),keysForDefinition$1(this._define.definitions).concat(keysForDefinition$1(this._instanceDefinitions))},"can.hasOwnKey":function(e){return Object.hasOwnProperty.call(this._define.definitions,e)||void 0!==this._instanceDefinitions&&Object.hasOwnProperty.call(this._instanceDefinitions,e)},"can.hasKey":function(e){return e in this._define.definitions||void 0!==this._instanceDefinitions&&e in this._instanceDefinitions},"can.assignDeep":assignDeep$1,"can.updateDeep":updateDeep$1,"can.unwrap":defineHelpers_1$1.reflectUnwrap,"can.serialize":defineHelpers_1$1.reflectSerialize,"can.keyHasDependencies":function(e){return!!(this._computed&&this._computed[e]&&this._computed[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computed&&this._computed[e]&&this._computed[e].compute&&(t={},t.valueDependencies=new Set,t.valueDependencies.add(this._computed[e].compute)),t}};for(var prop$2 in canReflect_1_18_0_canReflect.assignSymbols(DefineMap.prototype,defineMapProto),canReflect_1_18_0_canReflect.setKeyValue(DefineMap.prototype,canSymbol_1_6_5_canSymbol.iterator,function(){return new canDefine_2_8_0_canDefine.Iterator(this)}),canDefine_2_8_0_canDefine.eventsProto)DefineMap[prop$2]=canDefine_2_8_0_canDefine.eventsProto[prop$2],Object.defineProperty(DefineMap.prototype,prop$2,{enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[prop$2],writable:!0});function getSymbolsForIE(e){return Object.getOwnPropertyNames(e).filter(function(e){return 0===e.indexOf("@@symbol")})}var eventsProtoSymbols$1="getOwnPropertySymbols"in Object?Object.getOwnPropertySymbols(canDefine_2_8_0_canDefine.eventsProto):getSymbolsForIE(canDefine_2_8_0_canDefine.eventsProto);eventsProtoSymbols$1.forEach(function(e){Object.defineProperty(DefineMap.prototype,e,{configurable:!0,enumerable:!1,value:canDefine_2_8_0_canDefine.eventsProto[e],writable:!0})}),canDefine_2_8_0_canDefine.DefineMap=DefineMap,Object.defineProperty(DefineMap.prototype,"toObject",{enumerable:!1,writable:!0,value:function(){return canLog_1_0_2_canLog.warn("Use DefineMap::get instead of DefineMap::toObject"),this.get()}});var map$4=canNamespace_1_0_0_canNamespace.DefineMap=DefineMap;function superModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.Map&&(t.Map=map$4.extend({seal:!1},{})),"undefined"==typeof t.List&&(t.List=t.Map.List||list$2.extend({"#":t.Map})),t=canReflect_1_18_0_canReflect.assignDeep({},t),t.name||(t.name=canReflect_1_18_0_canReflect.getName(t.Map)+".connection"),t.queryLogic||(t.queryLogic=new canQueryLogic_1_2_2_canQueryLogic(t.Map));var n=[constructor_1,map$3,ref,store,callbacks,combineRequests_1,parse$1,url,realTime,callbacksOnce];return"undefined"!=typeof localStorage&&(!t.cacheConnection&&(t.cacheConnection=canConnect_4_0_2_canConnect([localstorageCache],{name:t.name+".cacheConnection",idProp:t.idProp,queryLogic:t.queryLogic})),n.push(callbacksCache,fallThroughCache_1)),canConnect_4_0_2_canConnect(n,t)}var canSuperModel_2_0_0_canSuperModel=canNamespace_1_0_0_canNamespace.superModel=superModel,each$5=canReflect_1_18_0_canReflect.each,convertToValue=function(e){return"function"==typeof e?convertToValue(e()):e};function connectTag(e,t){var n=function(e,t,n){return t=t||"{",n=n||"}",e[0]===t&&e[e.length-1]===n?e.substr(1,e.length-2):e};canViewCallbacks_5_0_0_canViewCallbacks.tag(e,function(e,a){var r=e.getAttribute("getList")||e.getAttribute("get-list"),o=e.getAttribute("get"),i=r?"getList":"get",s=expression_1.parse("tmp("+n(r||o)+")",{baseMethodType:"Call"}),l=!1,d=canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(e,n){if(!l){var r=a.scope.peek("%root")||a.scope.peek("@root");r&&r.pageData&&("get"===i&&(e=t.id(e)),r.pageData(t.name,e,n))}l=!0}),p=new canObservation_4_2_0_canObservation(function(){var e={};if("object"==typeof s.hash)each$5(s.hash,function(t,n){e[n]=t&&t.hasOwnProperty("get")?a.scope.read(t.get,{}).value:t});else if("function"==typeof s.hash){var n=s.hash(a.scope,a.options,{});each$5(n(),function(t,n){e[n]=convertToValue(t)})}else e=s.argExprs.length?canReflect_1_18_0_canReflect.getValue(s.argExprs[0].value(a.scope,a.options)):{};var r=t[i](e);return d(e,r),r});e[canSymbol_1_6_5_canSymbol.for("can.viewModel")]=p;var c=a.subtemplate?a.subtemplate(a.scope.add(p),a.options):document.createDocumentFragment();canDomMutate_2_0_8_node.appendChild.call(e,c)})}var canConnectTag_2_0_0_canConnectTag=canNamespace_1_0_0_canNamespace.connectTag=connectTag,extractResponse=canFixture_3_1_7_core.extractResponse;function requestHandlerToListener(e){return function(t,n){e({data:t},function(){var e=extractResponse.apply(null,arguments);200===e[0]?n(null,e[1]):n(e[1])})}}function storeToListeners(e){return["getListData","getData","updateData","createData","destroyData"].reduce(function(t,n){return t[n]=requestHandlerToListener(e[n]),t},{})}var store$1={requestHandlerToListener:requestHandlerToListener,storeToListeners:storeToListeners},storeToListeners$1=store$1.storeToListeners;function subscribeFeathersStoreToServer(e,t,n,a){var r=storeToListeners$1(t);n.on(e+"::find",toFeathersDataHandler(r.getListData,null,toFeathersFind)),n.on(e+"::get",toFeathersDataHandler(r.getData,wrapToId(a),null)),n.on(e+"::remove",toFeathersRemoveHandler(r.getData,r.destroyData,a)),n.on(e+"::create",toFeathersCreateHandler(r.createData)),n.on(e+"::update",toFeathersUpdateHandler(r.updateData,a))}function toFeathersDataHandler(e,t,n){return function(a){var r=Array.prototype.slice.call(arguments),o;"function"==typeof r[r.length-1]&&(o=r[r.length-1]),a=t?t(a):a,e(a,function(e,t){e?o&&o(e):(t=n?n(t):t,o&&o(null,t))})}}function wrapToId(e){return function(t){var n={},a=e&&e.id||"id";return n[a]=t,n}}function toFeathersFind(e){return{total:e.count,limit:e.limit,skip:e.offset,data:e.data}}function toFeathersRemoveHandler(e,t,n){return function(a,r,o){var i=wrapToId(n)(a);e(i,function(e,n){e?o(e):t(i,function(e){e?o(e):o(null,n)})})}}function toFeathersUpdateHandler(e,t){return function(n,a,r,o){var i=wrapToId(t)(n);e(canAssign_1_3_3_canAssign(i,a),function(e,t){e?o(e):o(null,canAssign_1_3_3_canAssign(i,canAssign_1_3_3_canAssign(a,t)))})}}function toFeathersCreateHandler(e){return function(t,n,a){e(t,function(e,n){e?a(e):a(null,canAssign_1_3_3_canAssign(t,n))})}}var feathersClient={subscribeFeathersStoreToServer:subscribeFeathersStoreToServer},subscribeFeathersStoreToServer$1=feathersClient.subscribeFeathersStoreToServer,MockedServer=function(e){this.io=e,this.events={},this.subscribers={},resetManagerCache(e.managers),this.origs=mockManager(e.Manager.prototype,this)};MockedServer.prototype.on=function(e,t){var n=this,a={};"string"==typeof e&&(a[e]=t),"object"==typeof e&&(a=e),Object.keys(a).forEach(function(e){sub$1(n.events,e,a[e])})},MockedServer.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1);pub(this.subscribers,e,t)},MockedServer.prototype.onFeathersService=function(e,t,n){subscribeFeathersStoreToServer$1(e,t,this,n)},MockedServer.prototype.restore=function(){restoreManager(this.io.Manager.prototype,this.origs),resetManagerCache(this.io.managers)};var MockedSocket=function(e){this._server=e,this.io={engine:this}};MockedSocket.prototype={on:function(e,t){debug("MockedSocket.on ... "+e),sub$1(this._server.subscribers,e,t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);debug("MockedSocket.emit ..."+e),pub(this._server.events,e,t)},once:function(){debug("MockedSocket.once ...")},off:function(e,t){debug("MockedSocket.off ... "+e),unsub(this._server.subscribers,e,t)},open:function(){return this.connect()},connect:function(){this.connected=!0,this.disconnected=!1},close:function(){return this.disconnect()},disconnect:function(){this.connected=!1,this.disconnected=!0}};function pub(e,t,n){debug(" >>> pub "+t,n),n&&"string"==typeof n[0]&&e[n[0]+"::"+t]&&(t=n.shift()+"::"+t);var a=e[t]||[];a.forEach(function(e){e.apply(null,n)})}function sub$1(e,t,n){debug(" <<< sub "+t),e[t]||(e[t]=[]),e[t].push(n)}function unsub(e,t,n){debug(" <<< unsub "+t),e[t].forEach(function(a,r){a===n&&e[t].splice(r,1)})}function mockManager(e,t){var n=["open","socket"].map(function(t){return{name:t,method:e[t]}});return e.open=e.connect=function(){debug("MockedManager.prototype.open or connect ... arguments:",arguments),setTimeout(function(){pub(t.subscribers,"connect"),pub(t.events,"connection")},0)},e.socket=function(){debug("MockedManager.prototype.socket ...");var e=new MockedSocket(t);return e.connected=!0,e.disconnected=!1,e},n}function restoreManager(e,t){debug("Restore."),t.forEach(function(t){e[t.name]=t.method})}function resetManagerCache(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t]}var _DEBUG=!1;function debug(){_DEBUG&&console.log.apply(console,arguments)}var canFixtureSocket_2_0_3_src={Server:MockedServer,mockSocketManager:mockManager,restoreManager:restoreManager},canFixtureSocket_2_0_3_canFixtureSocket={Server:canFixtureSocket_2_0_3_src.Server,requestHandlerToListener:store$1.requestHandlerToListener,storeToListeners:store$1.storeToListeners},ndjsonStream=function(e){var t=!1,n;return new ReadableStream({start:function(a){var r=e.getReader();n=r;var o=new TextDecoder,s="";r.read().then(function n(e){if(e.done){if(t)return;if(s=s.trim(),0!==s.length)try{var d=JSON.parse(s);a.enqueue(d)}catch(t){return void a.error(t)}return void a.close()}var p=o.decode(e.value,{stream:!0});s+=p;for(var c=s.split("\n"),u=0,y;u<c.length-1;++u)if(y=c[u].trim(),0<y.length)try{var m=JSON.parse(y);a.enqueue(m)}catch(n){return a.error(n),t=!0,void r.cancel()}return s=c[c.length-1],r.read().then(n)})},cancel:function(e){console.log("Cancel registered due to ",e),t=!0,n.cancel()}})},canNdjsonStream_1_0_2_canNdjsonStream=canNamespace_1_0_0_canNamespace.ndjsonStream=ndjsonStream,connectNdjson=canConnect_4_0_2_canConnect.behavior("data-ndjson",function(e){try{if(new ReadableStream,"function"!=typeof window.fetch)throw new Error("fetch not supported")}catch(e){return{}}return{hydrateList:function(t,n){n=n||this.listSet(t);var a=sortedSetJson(n),r=e.hydrateList.call(this,t,n);return this._getHydrateListCallbacks[a]&&(this._getHydrateListCallbacks[a].shift()(r),!this._getHydrateListCallbacks[a].length&&delete this._getHydrateListCallbacks[a]),r},_getHydrateListCallbacks:{},_getHydrateList:function(e,t){var n=sortedSetJson(e);this._getHydrateListCallbacks[n]||(this._getHydrateListCallbacks[n]=[]),this._getHydrateListCallbacks[n].push(t)},getListData:function(e){var t=fetch(this.ndjson||this.url);return this._getHydrateList(e,function(n){function a(t){canReflect_1_18_0_canReflect.setKeyValue(n,"isStreaming",!1),canReflect_1_18_0_canReflect.setKeyValue(n,"streamError",t)}t.then(function(e){return canReflect_1_18_0_canReflect.setKeyValue(n,"isStreaming",!0),canNdjsonStream_1_0_2_canNdjsonStream(e.body)}).then(function(e){var t=e.getReader();t.read().then(function r(e){return e.done?void canReflect_1_18_0_canReflect.setKeyValue(n,"isStreaming",!1):void(n.push(e.value),t.read().then(r,a))},a)})}),t.then(function(){return{data:[]}})}}}),canConnectNdjson_2_0_0_canConnectNdjson=canNamespace_1_0_0_canNamespace.connectNdjson=connectNdjson,zoneStorage={data:{},getStore:function(){if(window.doneSsr){var e=window.CanZone||void 0;return"undefined"==typeof e?this.data:e.current.data}return this.data},setItem:function(e,t){var n=this.getStore();n[e]=t},getItem:function(e){var t=this.getStore();return t[e]},removeItem:function(e){var t=this.getStore();delete t[e]}},assign$6=function(e){for(var t=Object(e),n=1,a=arguments.length,r;n<a;n++)if(r=arguments[n],null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t},helpers$5={assign:assign$6},defaults={storagePrefix:"can-define-connected-singleton",currentPropertyName:"current",savingPropertyName:"saving",fetchMethodName:"get",createMethodName:"save",destroyMethodName:"destroy"};function isDefineMapConstructor(e){return e&&e.prototype instanceof map$4}function wrapCreateMethod(e,t){var n=e.prototype[t.createMethodName];e.prototype[t.createMethodName]=function(){var a=n.apply(this,arguments);return zoneStorage.setItem(t.storageKeys.savingProperty,this),e.dispatch(t.savingPropertyName,[this]),zoneStorage.setItem(t.storageKeys.currentPropertyPromise,a),e.dispatch(t.currentPropertyPromiseName,[a]),a.then(n=>{zoneStorage.setItem(t.storageKeys.savingProperty,void 0),e.dispatch(t.savingPropertyName,[void 0]),zoneStorage.setItem(t.storageKeys.currentProperty,n),e.dispatch(t.currentPropertyName,[n])},()=>{zoneStorage.setItem(t.storageKeys.savingProperty,void 0),e.dispatch(t.savingPropertyName,[void 0])}),a}}function wrapDestroyMethod(e,t){var n=e.prototype[t.destroyMethodName];e.prototype[t.destroyMethodName]=function(){var a=n.apply(this,arguments);return a.then(n=>{zoneStorage.setItem(t.storageKeys.currentProperty,void 0),e.dispatch(t.currentPropertyName,[void 0]);const a=zoneStorage.getItem(t.storageKeys.currentPropertyPromise);return a.then(()=>{var n=Promise.reject(void 0);zoneStorage.setItem(t.storageKeys.currentPropertyPromise,n),e.dispatch(t.currentPropertyPromiseName,[n])},()=>{}),n})}}function checkForExistingKeys(e){(zoneStorage.getItem(e.storageKeys.currentProperty)||zoneStorage.getItem(e.storageKeys.currentPropertyPromise)||zoneStorage.getItem(e.storageKeys.savingProperty))&&(console.warn("can-define-connected-singleton: Removing existing values from zone storage. You are likely configuring a singleton twice."),zoneStorage.removeItem(e.storageKeys.currentProperty),zoneStorage.removeItem(e.storageKeys.currentPropertyPromise),zoneStorage.removeItem(e.storageKeys.savingProperty))}function getCurrentAndPromise(e,t){var n=zoneStorage.getItem(t.storageKeys.currentProperty),a=zoneStorage.getItem(t.storageKeys.currentPropertyPromise);return null==a&&(a=e[t.fetchMethodName](),zoneStorage.setItem(t.storageKeys.currentPropertyPromise,a),e.dispatch(t.currentPropertyPromiseName,[a]),a.then(function(n){zoneStorage.setItem(t.storageKeys.currentProperty,n),e.dispatch(t.currentPropertyName,[n])}).catch(function(){zoneStorage.setItem(t.storageKeys.currentProperty,null),e.dispatch(t.currentPropertyName,[null])})),{current:n,promise:a}}function makeSingleton(e,t){if(!isDefineMapConstructor(e))throw new Error("The singleton decorator/mixin can only be used for DefineMaps: https://canjs.com/doc/can-define-connected-singleton");var n=t.savingPropertyName,a=t.currentPropertyName,r=t.storagePrefix+"-"+e.name+"-"+a,o={savingProperty:t.storagePrefix+"-"+e.name+"-"+n,currentProperty:r,currentPropertyPromise:r+"-promise"},i=Object.assign({},t,{currentPropertyPromiseName:a+"Promise",storageKeys:o});return checkForExistingKeys(i),Object.defineProperty(e,i.currentPropertyPromiseName,{get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(e,i.currentPropertyPromiseName),getCurrentAndPromise(e,i).promise}}),Object.defineProperty(e,i.currentPropertyName,{get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(e,i.currentPropertyName),getCurrentAndPromise(e,i).current},set:function(t){if(!(t instanceof e)&&void 0!==t)throw new TypeError("Attempted to set singleton to an unexpected type. Expected an instance of the constructor \""+canReflect_1_18_0_canReflect.getName(e)+"\"");let n=t?Promise.resolve(t):Promise.reject(void 0);zoneStorage.setItem(i.storageKeys.currentProperty,t),e.dispatch(i.currentPropertyName,[t]),zoneStorage.setItem(i.storageKeys.currentPropertyPromise,n),e.dispatch(i.currentPropertyPromiseName,[n])}}),Object.defineProperty(e,i.savingPropertyName,{get:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(e,i.savingPropertyName),zoneStorage.getItem(i.storageKeys.savingProperty)}}),wrapCreateMethod(e,i),wrapDestroyMethod(e,i),e}function singleton(e){var t=helpers$5.assign({},defaults);return isDefineMapConstructor(e)?makeSingleton(e,t):function(n){return makeSingleton(n,helpers$5.assign(t,e))}}var canDefineConnectedSingleton_0_2_2_canDefineConnectedSingleton=singleton,session=canConnect_4_0_2_connect.behavior("can/session",function(e){return{id:function(e){return e.isDestroying()?canReflect_1_18_0_canReflect.getName(this.Map)+"-singleton":void 0},init:function(){e.init.apply(this,arguments),canDefineConnectedSingleton_0_2_2_canDefineConnectedSingleton(this.Map)},createdInstance:function(t){e.createdInstance.apply(this,arguments),this.Map.current=t},destroyedInstance:function(){e.destroyedInstance.apply(this,arguments),this.Map.current=void 0}}}),hasOwnProperty$1=Object.prototype.hasOwnProperty,isFunction$3=function(e){return"function"==typeof e},fnTest=/xyz/.test(function(){return this.xyz})?/\b_super\b/:/.*/,getset=["get","set"],getSuper=function(e,t,n){return function(){var a=!1,r=getPrototypeOf(this),o=r._super,i;hasOwnProperty$1.call(this,"_super")&&(a=!0,i=this._super,delete this._super),r._super=e[t];var s=n.apply(this,arguments);return r._super=o,a&&(this._super=i),s}};canConstruct_3_5_6_canConstruct._defineProperty=function(e,t,n,a){var r=Object.getOwnPropertyDescriptor(t,n);r&&canReflect_1_18_0_canReflect.each(getset,function(e){isFunction$3(r[e])&&isFunction$3(a[e])?a[e]=getSuper(r,e,a[e]):!isFunction$3(a[e])&&(a[e]=r[e])}),Object.defineProperty(e,n,a)};var getPrototypeOf=Object.getPrototypeOf||function(e){return e.__proto__},getPropertyDescriptor=Object.getPropertyDescriptor||function(e,t){if(t in e){for(var n=Object.getOwnPropertyDescriptor(e,t),a=getPrototypeOf(e);n===void 0&&null!==a;)n=Object.getOwnPropertyDescriptor(a,t),a=getPrototypeOf(a);return n}};canConstruct_3_5_6_canConstruct._overwrite=function(e,t,n,a){var r=getPropertyDescriptor(t,n),o=r&&r.value;Object.defineProperty(e,n,{value:isFunction$3(a)&&isFunction$3(o)&&fnTest.test(a)?getSuper(t,n,a):a,configurable:!0,enumerable:!0,writable:!0})};var canConstructSuper_3_2_1_canConstructSuper=canConstruct_3_5_6_canConstruct;function MockRoute(){this.routeValue=new canSimpleObservable_2_5_0_canSimpleObservable("")}canReflect_1_18_0_canReflect.assignMap(MockRoute.prototype,{paramsMatcher:/^(?:&[^=]+=[^&]*)+/,querySeparator:"&",matchSlashes:!1,root:"#!",get:function(){return this.value},set:function(e){return this.value=e},on:function(e){canReflect_1_18_0_canReflect.onValue(this,e)},off:function(e){canReflect_1_18_0_canReflect.offValue(this,e)}}),Object.defineProperty(MockRoute.prototype,"value",{get:function(){return this.routeValue.get().split(/#!?/)[1]||""},set:function(e){return"#"===e[0]?this.routeValue.set(e||""):this.routeValue.set("#"+(e||"")),e}}),canReflect_1_18_0_canReflect.assignSymbols(MockRoute.prototype,{"can.onValue":function(e){this.routeValue.on(e)},"can.offValue":function(e){this.routeValue.off(e)},"can.getValue":function(){return this.value},"can.setValue":function(e){this.value=e}});var canRouteMock_1_0_2_canRouteMock=MockRoute,validate={},helpers$6={object:function(e){var t=0<e.length?{}:void 0;return canReflect_1_18_0_canReflect.eachIndex(e,function(e){canReflect_1_18_0_canReflect.eachIndex(e.related,function(n){t[n]||(t[n]=[]),t[n].push(e.message)})}),t},flat:function(e){var t=0<e.length?[]:void 0;return canReflect_1_18_0_canReflect.eachIndex(e,function(e){t.push(e.message)}),t},errors:function(e){return 0<e.length?e:void 0},"errors-object":function(e){var t=0<e.length?{}:void 0;return canReflect_1_18_0_canReflect.eachIndex(e,function(e){canReflect_1_18_0_canReflect.eachIndex(e.related,function(n){t[n]||(t[n]=[]),t[n].push(e)})}),t}},parseErrorItem=function(e){var t=[];return"string"==typeof e&&t.push({message:e,related:["*"]}),"object"!=typeof e||Array.isArray(e)||(e.related?!Array.isArray(e.related)&&(e.related=[e.related]):e.related="*",t.push(e)),Array.isArray(e)&&canReflect_1_18_0_canReflect.eachIndex(e,function(e){[].push.apply(t,parseErrorItem(e))}),t},normalizeErrors=function(e){var t=[];return"string"!=typeof e&&("object"!=typeof e||Array.isArray(e))||(e=[e]),null!=e&&canReflect_1_18_0_canReflect.eachIndex(e,function(e){[].push.apply(t,parseErrorItem(e))}),t};validate.formatErrors=function(e,t){var n=normalizeErrors(e);return t?helpers$6[t]?helpers$6[t](n):n:n};var canValidate_1_2_1_canValidate=validate,validate_js_0_11_1_validate=createCommonjsModule(function(e,t){var n=Math.round;/*!
 * validate.js 0.11.1
 *
 * (c) 2013-2016 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */(function(e,t,a){var r=function(e,t,n){n=l.extend({},l.options,n);var a=l.runValidations(e,t,n),o,i;for(o in a)for(i in a[o])if(l.isPromise(a[o][i]))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(a,n)},l=r;l.extend=function(e){return[].slice.call(arguments,1).forEach(function(t){for(var n in t)e[n]=t[n]}),e},l.extend(r,{version:{major:0,minor:11,patch:1,metadata:null,toString:function(){var e=l.format("%{major}.%{minor}.%{patch}",l.version);return l.isEmpty(l.version.metadata)||(e+="+"+l.version.metadata),e}},Promise:"undefined"==typeof Promise?null:Promise,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(e,t,n){var a=[],r,o,i,s,d,p,c;for(r in(l.isDomElement(e)||l.isJqueryElement(e))&&(e=l.collectFormValues(e)),t)for(o in i=l.getDeepObjectValue(e,r),s=l.result(t[r],i,e,r,n,t),s){if(d=l.validators[o],!d)throw c=l.format("Unknown validator %{name}",{name:o}),new Error(c);(p=s[o],p=l.result(p,i,e,r,n,t),!!p)&&a.push({attribute:r,value:i,validator:o,globalOptions:n,attributes:e,options:p,error:d.call(d,i,p,r,e,n)})}return a},processValidationResults:function(e,t){e=l.pruneEmptyErrors(e,t),e=l.expandMultipleErrors(e,t),e=l.convertErrorMessages(e,t);var n=t.format||"grouped";if("function"==typeof l.formatters[n])e=l.formatters[n](e);else throw new Error(l.format("Unknown format %{format}",t));return l.isEmpty(e)?void 0:e},async:function(e,t,n){n=l.extend({},l.async.options,n);var a=n.wrapErrors||function(e){return e};!1!==n.cleanAttributes&&(e=l.cleanAttributes(e,t));var r=l.runValidations(e,t,n);return new l.Promise(function(o,i){l.waitForResults(r).then(function(){var s=l.processValidationResults(r,n);s?i(new a(s,n,e,t)):o(e)},function(e){i(e)})})},single:function(e,t,n){return n=l.extend({},l.single.options,n,{format:"flat",fullMessages:!1}),l({single:e},{single:t},n)},waitForResults:function(e){return e.reduce(function(e,t){return l.isPromise(t.error)?e.then(function(){return t.error.then(function(e){t.error=e||null})}):e},new l.Promise(function(e){e()}))},result:function(e){var t=[].slice.call(arguments,1);return"function"==typeof e&&(e=e.apply(null,t)),e},isNumber:function(e){return"number"==typeof e&&!isNaN(e)},isFunction:function(e){return"function"==typeof e},isInteger:function(e){return l.isNumber(e)&&0==e%1},isBoolean:function(e){return"boolean"==typeof e},isObject:function(e){return e===Object(e)},isDate:function(e){return e instanceof Date},isDefined:function(e){return null!==e&&e!==void 0},isPromise:function(e){return!!e&&l.isFunction(e.then)},isJqueryElement:function(e){return e&&l.isString(e.jquery)},isDomElement:function(e){return!!e&&!!(e.querySelectorAll&&e.querySelector)&&(!!(l.isObject(document)&&e===document)||("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName))},isEmpty:function(e){if(!l.isDefined(e))return!0;if(l.isFunction(e))return!1;if(l.isString(e))return l.EMPTY_STRING_REGEXP.test(e);if(l.isArray(e))return 0===e.length;if(l.isDate(e))return!1;if(l.isObject(e)){for(var t in e)return!1;return!0}return!1},format:l.extend(function(e,t){return l.isString(e)?e.replace(l.format.FORMAT_REGEXP,function(e,n,a){return"%"===n?"%{"+a+"}":t[a]+""}):e},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(e){return l.isNumber(e)?0==100*e%1?""+e:parseFloat(n(100*e)/100).toFixed(2):l.isArray(e)?e.map(function(e){return l.prettify(e)}).join(", "):l.isObject(e)?e.toString():(e=""+e,e.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(e,t,n){return""+t+" "+n.toLowerCase()}).toLowerCase())},stringifyValue:function(e){return l.prettify(e)},isString:function(e){return"string"==typeof e},isArray:function(e){return"[object Array]"==={}.toString.call(e)},isHash:function(e){return l.isObject(e)&&!l.isArray(e)&&!l.isFunction(e)},contains:function(e,t){return!!l.isDefined(e)&&(l.isArray(e)?-1!==e.indexOf(t):t in e)},unique:function(e){return l.isArray(e)?e.filter(function(e,t,n){return n.indexOf(e)==t}):e},forEachKeyInKeypath:function(e,t,n){if(l.isString(t)){var a="",r=!1,o;for(o=0;o<t.length;++o)switch(t[o]){case".":r?(r=!1,a+="."):(e=n(e,a,!1),a="");break;case"\\":r?(r=!1,a+="\\"):r=!0;break;default:r=!1,a+=t[o];}return n(e,a,!0)}},getDeepObjectValue:function(e,t){return l.isObject(e)?l.forEachKeyInKeypath(e,t,function(e,t){if(l.isObject(e))return e[t]}):void 0},collectFormValues:function(e,t){var n={},a,r,o,s,d,p;if(l.isJqueryElement(e)&&(e=e[0]),!e)return n;for(t=t||{},s=e.querySelectorAll("input[name], textarea[name]"),a=0;a<s.length;++a)(o=s.item(a),!l.isDefined(o.getAttribute("data-ignored")))&&(p=l.sanitizeFormValue(o.value,t),"number"===o.type?p=p?+p:null:"checkbox"===o.type?o.attributes.value?!o.checked&&(p=n[o.name]||null):p=o.checked:"radio"===o.type&&!o.checked&&(p=n[o.name]||null),n[o.name]=p);for(s=e.querySelectorAll("select[name]"),a=0;a<s.length;++a){if(o=s.item(a),o.multiple)for(r in p=[],o.options)d=o.options[r],d.selected&&p.push(l.sanitizeFormValue(d.value,t));else p=l.sanitizeFormValue(o.options[o.selectedIndex].value,t);n[o.name]=p}return n},sanitizeFormValue:function(e,t){return t.trim&&l.isString(e)&&(e=e.trim()),!1!==t.nullify&&""===e?null:e},capitalize:function(e){return l.isString(e)?e[0].toUpperCase()+e.slice(1):e},pruneEmptyErrors:function(e){return e.filter(function(e){return!l.isEmpty(e.error)})},expandMultipleErrors:function(e){var t=[];return e.forEach(function(e){l.isArray(e.error)?e.error.forEach(function(n){t.push(l.extend({},e,{error:n}))}):t.push(e)}),t},convertErrorMessages:function(e,t){t=t||{};var n=[];return e.forEach(function(e){var a=l.result(e.error,e.value,e.attribute,e.options,e.attributes,e.globalOptions);return l.isString(a)?void("^"===a[0]?a=a.slice(1):!1!==t.fullMessages&&(a=l.capitalize(l.prettify(e.attribute))+" "+a),a=a.replace(/\\\^/g,"^"),a=l.format(a,{value:l.stringifyValue(e.value)}),n.push(l.extend({},e,{error:a}))):void n.push(e)}),n},groupErrorsByAttribute:function(e){var t={};return e.forEach(function(e){var n=t[e.attribute];n?n.push(e):t[e.attribute]=[e]}),t},flattenErrorsToArray:function(e){return e.map(function(e){return e.error}).filter(function(e,t,n){return n.indexOf(e)===t})},cleanAttributes:function(e,t){function n(e,t,n){return l.isObject(e[t])?e[t]:e[t]=!!n||{}}function a(e){var t={},a;for(a in e)e[a]&&l.forEachKeyInKeypath(t,a,n);return t}function r(e,t){if(!l.isObject(e))return e;var n=l.extend({},e),a,o;for(o in e)a=t[o],l.isObject(a)?n[o]=r(n[o],a):!a&&delete n[o];return n}return l.isObject(t)&&l.isObject(e)?(t=a(t),r(e,t)):{}},exposeModule:function(e,t,n,a,r){n?(a&&a.exports&&(n=a.exports=e),n.validate=e):(t.validate=e,e.isFunction(r)&&r.amd&&r([],function(){return e}))},warn:function(e){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+e)},error:function(e){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+e)}}),r.validators={presence:function(e,t){if(t=l.extend({},this.options,t),t.allowEmpty?!l.isDefined(e):l.isEmpty(e))return t.message||this.message||"can't be blank"},length:function(e,t,n){if(l.isDefined(e)){t=l.extend({},this.options,t);var a=t.is,r=t.maximum,o=t.minimum,i=t.tokenizer||function(e){return e},s=[],d;e=i(e);var p=e.length;if(!l.isNumber(p))return l.error(l.format("Attribute %{attr} has a non numeric value for `length`",{attr:n})),t.message||this.notValid||"has an incorrect length";if(l.isNumber(a)&&p!==a&&(d=t.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",s.push(l.format(d,{count:a}))),l.isNumber(o)&&p<o&&(d=t.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",s.push(l.format(d,{count:o}))),l.isNumber(r)&&p>r&&(d=t.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",s.push(l.format(d,{count:r}))),0<s.length)return t.message||s}},numericality:function(e,t){if(l.isDefined(e)){t=l.extend({},this.options,t);var n=[],a={greaterThan:function(e,t){return e>t},greaterThanOrEqualTo:function(e,t){return e>=t},equalTo:function(e,t){return e===t},lessThan:function(e,t){return e<t},lessThanOrEqualTo:function(e,t){return e<=t},divisibleBy:function(e,t){return 0==e%t}},r,o;if(l.isString(e)&&t.strict){var i="^(0|[1-9]\\d*)";if(t.onlyInteger||(i+="(\\.\\d+)?"),i+="$",!new RegExp(i).test(e))return t.message||t.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==t.noStrings&&l.isString(e)&&!l.isEmpty(e)&&(e=+e),!l.isNumber(e))return t.message||t.notValid||this.notValid||this.message||"is not a number";if(t.onlyInteger&&!l.isInteger(e))return t.message||t.notInteger||this.notInteger||this.message||"must be an integer";for(r in a)if(o=t[r],l.isNumber(o)&&!a[r](e,o)){var s="not"+l.capitalize(r),d=t[s]||this[s]||this.message||"must be %{type} %{count}";n.push(l.format(d,{count:o,type:l.prettify(r)}))}if(t.odd&&1!=e%2&&n.push(t.notOdd||this.notOdd||this.message||"must be odd"),t.even&&0!=e%2&&n.push(t.notEven||this.notEven||this.message||"must be even"),n.length)return t.message||n}},datetime:l.extend(function(e,t){if(!l.isFunction(this.parse)||!l.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(l.isDefined(e)){t=l.extend({},this.options,t);var n=[],a=t.earliest?this.parse(t.earliest,t):NaN,r=t.latest?this.parse(t.latest,t):NaN,o;if(e=this.parse(e,t),isNaN(e)||t.dateOnly&&0!=e%864e5)return o=t.notValid||t.message||this.notValid||"must be a valid date",l.format(o,{value:arguments[0]});if(!isNaN(a)&&e<a&&(o=t.tooEarly||t.message||this.tooEarly||"must be no earlier than %{date}",o=l.format(o,{value:this.format(e,t),date:this.format(a,t)}),n.push(o)),!isNaN(r)&&e>r&&(o=t.tooLate||t.message||this.tooLate||"must be no later than %{date}",o=l.format(o,{date:this.format(r,t),value:this.format(e,t)}),n.push(o)),n.length)return l.unique(n)}},{parse:null,format:null}),date:function(e,t){return t=l.extend({},t,{dateOnly:!0}),l.validators.datetime.call(l.validators.datetime,e,t)},format:function(e,t){(l.isString(t)||t instanceof RegExp)&&(t={pattern:t}),t=l.extend({},this.options,t);var n=t.message||this.message||"is invalid",a=t.pattern,r;if(l.isDefined(e)){if(!l.isString(e))return n;if(l.isString(a)&&(a=new RegExp(t.pattern,t.flags)),r=a.exec(e),!r||r[0].length!=e.length)return n}},inclusion:function(e,t){if(l.isDefined(e)&&(l.isArray(t)&&(t={within:t}),t=l.extend({},this.options,t),!l.contains(t.within,e))){var n=t.message||this.message||"^%{value} is not included in the list";return l.format(n,{value:e})}},exclusion:function(e,t){if(l.isDefined(e)&&(l.isArray(t)&&(t={within:t}),t=l.extend({},this.options,t),!!l.contains(t.within,e))){var n=t.message||this.message||"^%{value} is restricted";return l.format(n,{value:e})}},email:l.extend(function(e,t){t=l.extend({},this.options,t);var n=t.message||this.message||"is not a valid email";return l.isDefined(e)?l.isString(e)?this.PATTERN.exec(e)?void 0:n:n:void 0},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(e,t,n,a){if(l.isDefined(e)){l.isString(t)&&(t={attribute:t}),t=l.extend({},this.options,t);var r=t.message||this.message||"is not equal to %{attribute}";if(l.isEmpty(t.attribute)||!l.isString(t.attribute))throw new Error("The attribute must be a non empty string");var o=l.getDeepObjectValue(a,t.attribute),i=t.comparator||function(e,t){return e===t};if(!i(e,o,t,n,a))return l.format(r,{attribute:l.prettify(t.attribute)})}},url:function(e,t){if(l.isDefined(e)){t=l.extend({},this.options,t);var n=t.message||this.message||"is not a valid url",a=t.schemes||this.schemes||["http","https"],r=t.allowLocal||this.allowLocal||!1;if(!l.isString(e))return n;var o="^(?:(?:"+a.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",i="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";r?i+="?":o+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",o+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+i+")(?::\\d{2,5})?(?:[/?#]\\S*)?$";var s=new RegExp(o,"i");if(!s.exec(e))return n}}},r.formatters={detailed:function(e){return e},flat:l.flattenErrorsToArray,grouped:function(e){for(var t in e=l.groupErrorsByAttribute(e),e)e[t]=l.flattenErrorsToArray(e[t]);return e},constraint:function(e){for(var t in e=l.groupErrorsByAttribute(e),e)e[t]=e[t].map(function(e){return e.validator}).sort();return e}},r.exposeModule(r,this,e,t,a)}).call(commonjsGlobal,t,e,null)}),makeValidator=function(e){return function(t){return validate_js_0_11_1_validate.single(t,e)}};makeValidator.many=function(e){return function(t){var n=validate_js_0_11_1_validate(t,e,{format:"detailed",fullMessages:!1}),a;return n&&(a=[],canReflect_1_18_0_canReflect.eachIndex(n,function(e){a.push({message:e.options.message||e.error,related:[e.attribute]})})),a}},makeValidator.validatejs=validate_js_0_11_1_validate;var canValidateValidatejs_1_0_1_canValidateValidatejs=makeValidator;class DeepObservableObject extends canObservableObject{static get propertyDefaults(){return canType_1_1_5_canType.maybeConvert(DeepObservable)}}class DeepObservableArray extends canObservableArray{static get items(){return canType_1_1_5_canType.maybeConvert(DeepObservable)}}function isPlainArray(e){return Array.isArray(e)&&e.constructor===Array}function DeepObservable(){}canReflect_1_18_0_canReflect.assignSymbols(DeepObservable,{"can.new":function(e){return isPlainArray(e)?new DeepObservableArray(e):canReflect_1_18_0_canReflect.isPlainObject(e)?new DeepObservableObject(e):e}});var canDeepObservable_1_0_2_canDeepObservable=canNamespace_1_0_0_canNamespace.DeepObservable=canType_1_1_5_canType.maybeConvert(DeepObservable),baseEventType="keyup";function isEnterEvent(e){var t="Enter"===e.key,n=13===e.keyCode;return t||n}var enterEvent={defaultEventType:"enter",addEventListener:function(e,t,n){var a=function(e){if(isEnterEvent(e))return n.apply(this,arguments)},r=enterEvent._eventTypeHandlerMap[t];r||(r=enterEvent._eventTypeHandlerMap[t]=new Map),r.set(n,a),this.addEventListener(e,baseEventType,a)},removeEventListener:function(e,t,n){var a=enterEvent._eventTypeHandlerMap[t];if(a){var r=a.get(n);r&&(a.delete(n),0===a.size&&delete enterEvent._eventTypeHandlerMap[t],this.removeEventListener(e,baseEventType,r))}},_eventTypeHandlerMap:{}},canEventDomEnter_2_2_1_canEventDomEnter=canNamespace_1_0_0_canNamespace.domEventEnter=enterEvent;function defineRealtimeRestModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.Map&&(t.Map=map$4.extend({seal:!1},{})),"undefined"==typeof t.List&&(t.List=t.Map.List||list$2.extend({"#":t.Map}));return canConnect_4_0_2_canConnect([constructor_1,map$3,store,callbacks,parse$1,url,realTime,callbacksOnce],t)}var canDefineRealtimeRestModel_2_0_0_canDefineRealtimeRestModel=canNamespace_1_0_0_canNamespace.defineRealtimeRestModel=defineRealtimeRestModel;function defineRestModel(e){var t="string"==typeof e?{url:e}:e;"undefined"==typeof t.Map&&(t.Map=map$4.extend({seal:!1},{})),"undefined"==typeof t.List&&(t.List=t.Map.List||list$2.extend({"#":t.Map}));var n=[base,url,parse$1,constructor_1,map$3].reduce(function(e,t){return t(e)},t);return n.init(),n}var canDefineRestModel_2_0_0_canDefineRestModel=canNamespace_1_0_0_canNamespace.defineRestModel=defineRestModel,isMap=function(e){return e&&!canReflect_1_18_0_canReflect.isFunctionLike(e)&&canReflect_1_18_0_canReflect.isMapLike(e)&&!Array.isArray(e)&&canReflect_1_18_0_canReflect.isObservableLike(e)},bubble={bind:function(e,t){if(!e.__inSetup){var n=bubble.events(e,t),a=n.length,r;e._bubbleBindings||(e._bubbleBindings={});for(var o=0;o<a;o++)r=n[o],e._bubbleBindings[r]?e._bubbleBindings[r]++:(e._bubbleBindings[r]=1,bubble.childrenOf(e,r))}},unbind:function(e,t){for(var n=bubble.events(e,t),a=n.length,r=0,o;r<a;r++)o=n[r],e._bubbleBindings&&e._bubbleBindings[o]--,e._bubbleBindings&&!e._bubbleBindings[o]&&(delete e._bubbleBindings[o],bubble.teardownChildrenFrom(e,o),0===canReflect_1_18_0_canReflect.size(e._bubbleBindings)&&delete e._bubbleBindings)},add:function(e,t,n){if(canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)&&e._bubbleBindings)for(var a in e._bubbleBindings)e._bubbleBindings[a]&&(bubble.teardownFromParent(e,t,a),bubble.toParent(t,e,n,a))},addMany:function(e,t){for(var n=0,a=t.length;n<a;n++)bubble.add(e,t[n],n)},remove:function(e,t){if(canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)&&e._bubbleBindings)for(var n in e._bubbleBindings)e._bubbleBindings[n]&&bubble.teardownFromParent(e,t,n)},removeMany:function(e,t){for(var n=0,a=t.length;n<a;n++)bubble.remove(e,t[n])},set:function(e,t,n,a){return canReflect_1_18_0_canReflect.isObservableLike(n)&&canReflect_1_18_0_canReflect.isMapLike(n)&&bubble.add(e,n,t),canReflect_1_18_0_canReflect.isObservableLike(a)&&canReflect_1_18_0_canReflect.isMapLike(a)&&bubble.remove(e,a),n},events:function(e,t){if(isMap(e))return e.constructor._bubbleRule(t,e)},toParent:function(e,t,n,a){map$1.listenTo.call(t,e,a,function(){var r=canReflect_1_18_0_canReflect.toArray(arguments),o=r.shift();r[0]=(canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isListLike(t)?t.indexOf(e):n)+(r[0]?"."+r[0]:""),o.triggeredNS=o.triggeredNS||{};o.triggeredNS[t._cid]||(o.triggeredNS[t._cid]=!0,map$1.dispatch.call(t,o,r),"change"===a&&map$1.dispatch.call(t,r[0],[r[2],r[3]]))})},childrenOf:function(e,t){e._each(function(n,a){isMap(n)&&bubble.toParent(n,e,a,t)})},teardownFromParent:function(e,t,n){t&&t.unbind&&map$1.stopListening.call(e,t,n)},teardownChildrenFrom:function(e,t){e._each(function(n){bubble.teardownFromParent(e,n,t)})},isBubbling:function(e,t){return e._bubbleBindings&&e._bubbleBindings[t]}},canMap_4_3_12_bubble=bubble,canMap_4_3_12_mapHelpers=createCommonjsModule(function(e,t){var n=null,a=function(){for(var e in n)n[e].added&&delete n[e].obj._cid;n=null},r={attrParts:function(e,t){return t?[e]:"object"==typeof e?e:(""+e).split(".")},canMakeObserve:function(e){return e&&!canReflect_1_18_0_canReflect.isPromise(e)&&(Array.isArray(e)||canReflect_1_18_0_canReflect.isPlainObject(e))},reflectSerialize:function(e){return this.forEach(function(t,n){t=this.___serialize?this.___serialize(n,t):canReflect_1_18_0_canReflect.serialize(t),void 0!==t&&(e[n]=t)},this),e},reflectUnwrap:function(e){return this.forEach(function(t,n){void 0!==t&&(e[n]=canReflect_1_18_0_canReflect.unwrap(t))}),e},removeSpecialKeys:function(e){return e&&["_data","constructor","_cid","__bindEvents"].forEach(function(t){delete e[t]}),e},serialize:function(){var e=null;return function(t,n,a){var o=canCid_1_3_1_canCid(t),i=!1;return e||(i=!0,e={attr:{},serialize:{}}),e[n][o]=a,t.forEach(function(o,i){var s=canReflect_1_18_0_canReflect.isObservableLike(o),l=s&&e[n][canCid_1_3_1_canCid(o)],d;d=l?l:t["___"+n]?t["___"+n](i,o):r.getValue(t,i,o,n),void 0!==d&&(a[i]=d)}),i&&(e=null),a}}(),getValue:function(e,t,n,a){return"attr"===a&&(a=canSymbol_1_6_5_canSymbol.for("can.getValue")),canReflect_1_18_0_canReflect.isObservableLike(n)&&n[a]?n[a]():n},define:null,addComputedAttr:function(e,t,n){e._computedAttrs[t]={compute:n,count:0,handler:function(n,a){e._triggerChange(t,"set",n,a)}}},addToMap:function(e,t){var r;n||(r=a,n={});var o=e._cid,i=canCid_1_3_1_canCid(e);return n[i]||(n[i]={obj:e,instance:t,added:!o}),r},getMapFromObject:function(e){return n&&n[e._cid]&&n[e._cid].instance},twoLevelDeepExtend:function(e,t){for(var n in t)e[n]=e[n]||{},canAssign_1_3_3_canAssign(e[n],t[n])}};e.exports=t=r}),canTypes_1_4_0_canTypes=createCommonjsModule(function(e){var t={isMapLike:function(e){return canReflect_1_18_0_canReflect.isObservableLike(e)&&canReflect_1_18_0_canReflect.isMapLike(e)},isListLike:function(e){return canReflect_1_18_0_canReflect.isObservableLike(e)&&canReflect_1_18_0_canReflect.isListLike(e)},isPromise:function(e){return canReflect_1_18_0_canReflect.isPromise(e)},isConstructor:function(e){return canReflect_1_18_0_canReflect.isConstructorLike(e)},isCallableForValue:function(e){return e&&canReflect_1_18_0_canReflect.isFunctionLike(e)&&!canReflect_1_18_0_canReflect.isConstructorLike(e)},isCompute:function(e){return e&&e.isComputed},get iterator(){return canSymbol_1_6_5_canSymbol.iterator||canSymbol_1_6_5_canSymbol.for("iterator")},DefaultMap:null,DefaultList:null,queueTask:function(e){var t=e[2]||[];e[0].apply(e[1],t)},wrapElement:function(e){return e},unwrapElement:function(e){return e}};if(canNamespace_1_0_0_canNamespace.types)throw new Error("You can't have two versions of can-types, check your dependencies");else e.exports=canNamespace_1_0_0_canNamespace.types=t}),canCid_1_3_1_helpers={each:function(e,t,n){for(var a in e)t.call(n,e[a],a);return e}},getCID=canCid_1_3_1_canCid.get,CIDSet;if("undefined"!=typeof Set)CIDSet=Set;else{var CIDSet=function(){this.values={}};CIDSet.prototype.add=function(e){this.values[getCID(e)]=e},CIDSet.prototype["delete"]=function(e){var t=(getCID(e)in this.values);return t&&delete this.values[getCID(e)],t},CIDSet.prototype.forEach=function(e,t){canCid_1_3_1_helpers.each(this.values,e,t)},CIDSet.prototype.has=function(e){return getCID(e)in this.values},CIDSet.prototype.clear=function(){return this.values={}},Object.defineProperty(CIDSet.prototype,"size",{get:function(){var e=0;return canCid_1_3_1_helpers.each(this.values,function(){e++}),e}})}var set$3=CIDSet,getCID$1=canCid_1_3_1_canCid.get,CIDMap;if("undefined"!=typeof Map)CIDMap=Map;else{var CIDMap=function(){this.values={}};CIDMap.prototype.set=function(e,t){this.values[getCID$1(e)]={key:e,value:t}},CIDMap.prototype["delete"]=function(e){var t=(getCID$1(e)in this.values);return t&&delete this.values[getCID$1(e)],t},CIDMap.prototype.forEach=function(e,t){canCid_1_3_1_helpers.each(this.values,function(n){return e.call(t||this,n.value,n.key,this)},this)},CIDMap.prototype.has=function(e){return getCID$1(e)in this.values},CIDMap.prototype.get=function(e){var t=this.values[getCID$1(e)];return t&&t.value},CIDMap.prototype.clear=function(){return this.values={}},Object.defineProperty(CIDMap.prototype,"size",{get:function(){var e=0;return canCid_1_3_1_helpers.each(this.values,function(){e++}),e}})}var map$5=CIDMap,unobservable={constructor:!0},hasOwnProperty$2={}.hasOwnProperty,inSetupSymbol$8=canSymbol_1_6_5_canSymbol.for("can.initializing"),Map$1=canConstruct_3_5_6_canConstruct.extend({setup:function(e){if(canConstruct_3_5_6_canConstruct.setup.apply(this,arguments),this._computedPropertyNames=[],Map$1){for(var t in type$1(this),this[canSymbol_1_6_5_canSymbol.for("can.defineInstanceKey")]=function(e,t){void 0!==t.value&&(this.defaults[e]=t.value),!1===t.enumerable&&(this.enumerable[e]=!1)},this.defaults||(this.defaults={}),this.enumerable||(this.enumerable={}),this.prototype)"define"!=t&&"constructor"!==t&&("function"!=typeof this.prototype[t]||this.prototype[t].prototype instanceof canConstruct_3_5_6_canConstruct)?this.defaults[t]=this.prototype[t]:canReflect_1_18_0_canReflect.isObservableLike(this.prototype[t])&&this._computedPropertyNames.push(t);canMap_4_3_12_mapHelpers.define&&canMap_4_3_12_mapHelpers.define(this,e.prototype.define)}},shortName:"Map",_bubbleRule:function(e){return"change"===e||0<=e.indexOf(".")?["change"]:[]},addEventListener:map$1.addEventListener,removeEventListener:map$1.removeEventListener,keys:function(e){return canReflect_1_18_0_canReflect.getOwnEnumerableKeys(e)}},{setup:function(e){canReflect_1_18_0_canReflect.isObservableLike(e)&&"function"==typeof e.serialize&&(e=e.serialize()),this._data=Object.create(null),canCid_1_3_1_canCid(this,".map"),this._setupComputedProperties();var t=e&&canMap_4_3_12_mapHelpers.addToMap(e,this),n=this._setupDefaults(e),a=canAssign_1_3_3_canAssign(canReflect_1_18_0_canReflect.assignDeep({},n),e);this.attr(a),t&&t()},_setupComputedProperties:function(){this._computedAttrs=Object.create(null);for(var e=this.constructor._computedPropertyNames,t=0,n=e.length,a;t<n;t++)a=e[t],canMap_4_3_12_mapHelpers.addComputedAttr(this,a,this[a])},_setupDefaults:function(){return this.constructor.defaults||{}},attr:function(e,t){var n=typeof e;return void 0===e?this._getAttrs():"string"!==n&&"number"!==n?this._setAttrs(e,t):1===arguments.length?this._get(e):(this._set(e+"",t),this)},_get:function(e){e+="";var t=e.indexOf(".");if(0<=t){var n=this.___get(e);if(void 0!==n)return canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),n;var a=e.substr(0,t),r=e.substr(t+1),o=this.__get(a);return o&&canReflect_1_18_0_canReflect.getKeyValue(o,r)}return this.__get(e)},__get:function(e){return unobservable[e]||this._computedAttrs[e]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,e),this.___get(e)},___get:function(e){if(e!==void 0){var t=this._computedAttrs[e];return t?canReflect_1_18_0_canReflect.getValue(t.compute):hasOwnProperty$2.call(this._data,e)?this._data[e]:void 0}return this._data},_set:function(e,t,n){e+="";var a=e.indexOf("."),r;if(0<=a&&!n){var o=e.substr(0,a),i=e.substr(a+1);r=this[inSetupSymbol$8]?void 0:this.___get(o),canReflect_1_18_0_canReflect.isMapLike(r)?canReflect_1_18_0_canReflect.setKeyValue(r,i,t):(r=this[inSetupSymbol$8]?void 0:this.___get(e),this.__convert&&(t=this.__convert(e,t)),this.__set(e,this.__type(t,e),r))}else r=this[inSetupSymbol$8]?void 0:this.___get(e),this.__convert&&(t=this.__convert(e,t)),this.__set(e,this.__type(t,e),r)},__type:function(e){if("object"==typeof e&&!canReflect_1_18_0_canReflect.isObservableLike(e)&&canMap_4_3_12_mapHelpers.canMakeObserve(e)&&!canReflect_1_18_0_canReflect.isListLike(e)){var t=canMap_4_3_12_mapHelpers.getMapFromObject(e);if(t)return t;var n=this.constructor.Map||Map$1;return new n(e)}return e},__set:function(e,t,n){if(t!==n||!Object.prototype.hasOwnProperty.call(this._data,e)){var a=this._computedAttrs[e],r=a||n!==void 0||hasOwnProperty$2.call(this.___get(),e)?"set":"add";this.___set(e,"object"==typeof t?canMap_4_3_12_bubble.set(this,e,t,n):t),a&&a.count||this._triggerChange(e,r,t,n),"object"==typeof n&&canMap_4_3_12_bubble.teardownFromParent(this,n)}},___set:function(e,t){var n=this._computedAttrs[e];n?canReflect_1_18_0_canReflect.setValue(n.compute,t):this._data[e]=t,"function"==typeof this.constructor.prototype[e]||n||(this[e]=t)},removeAttr:function(e){return this._remove(e)},_remove:function(e){var t=canMap_4_3_12_mapHelpers.attrParts(e),n=t.shift(),a=this.___get(n);return t.length&&a?canReflect_1_18_0_canReflect.deleteKeyValue(a,t.join(".")):("string"!=typeof e||!~e.indexOf(".")||(n=e),this.__remove(n,a),a)},__remove:function(e,t){e in this._data&&(this.___remove(e),this._triggerChange(e,"remove",void 0,t))},___remove:function(e){delete this._data[e],e in this.constructor.prototype||delete this[e]},___serialize:function(e,t){return this._legacyAttrBehavior?canMap_4_3_12_mapHelpers.getValue(this,e,t,"serialize"):canReflect_1_18_0_canReflect.serialize(t,map$5)},_getAttrs:function(){return this._legacyAttrBehavior?canMap_4_3_12_mapHelpers.serialize(this,"attr",{}):canReflect_1_18_0_canReflect.unwrap(this,map$5)},_setAttrs:function(e,t){return this._legacyAttrBehavior?this.__setAttrs(e,t):(!0===t||"true"===t?this[canSymbol_1_6_5_canSymbol.for("can.updateDeep")](e):this[canSymbol_1_6_5_canSymbol.for("can.assignDeep")](e),this)},__setAttrs:function(e,t){e=canAssign_1_3_3_canAssign({},e);var n=this,a,r;for(a in canQueues_1_3_2_canQueues.batch.start(),this._each(function(a,o){if("_cid"!==o)return r=e[o],void 0===r?void(t&&n.removeAttr(o)):void(n.__convert&&(r=n.__convert(o,r)),canReflect_1_18_0_canReflect.isObservableLike(a)&&canReflect_1_18_0_canReflect.isMapLike(a)&&canMap_4_3_12_mapHelpers.canMakeObserve(r)?!0===t?canReflect_1_18_0_canReflect.updateDeep(a,r):canReflect_1_18_0_canReflect.assignDeep(a,r):a!==r&&n.__set(o,n.__type(r,o),a),delete e[o])}),e)"_cid"!==a&&(r=e[a],this._set(a,r,!0));return canQueues_1_3_2_canQueues.batch.stop(),this},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,map$5)},_triggerChange:function(e,t,n,a,r){canQueues_1_3_2_canQueues.batch.start(),canMap_4_3_12_bubble.isBubbling(this,"change")&&map$1.dispatch.call(this,{type:"change",target:this,batchNum:r},[e,t,n,a]),map$1.dispatch.call(this,{type:e,target:this,batchNum:r,patches:[{type:"set",key:e,value:n}]},[n,a]),("remove"===t||"add"===t)&&map$1.dispatch.call(this,{type:"__keys",target:this,batchNum:r}),canQueues_1_3_2_canQueues.batch.stop()},compute:function(e){if("function"==typeof this.constructor.prototype[e])return canCompute_4_1_1_canCompute(this[e],this);var t=canStacheKey_1_4_3_canStacheKey.reads(e),n=t.length-1;return canCompute_4_1_1_canCompute(function(a){return arguments.length?void canStacheKey_1_4_3_canStacheKey.write(this,t[n].key,a,{}):canStacheKey_1_4_3_canStacheKey.get(this,e)},this)},forEach:function(e,t){for(var n=canReflect_1_18_0_canReflect.getOwnEnumerableKeys(this),a=0,r=n.length,o,s;a<r&&(o=n[a],s=this.attr(o),!1!==e.call(t||s,s,o,this));a++);return this},_each:function(e){var t=this.___get();for(var n in t)hasOwnProperty$2.call(t,n)&&e(t[n],n)},dispatch:map$1.dispatch});map$1(Map$1.prototype),Map$1.prototype.addEventListener=function(e){var t=this._computedAttrs&&this._computedAttrs[e];return t&&t.compute&&(t.count?t.count++:(t.count=1,canReflect_1_18_0_canReflect.onValue(t.compute,t.handler,"notify"))),canMap_4_3_12_bubble.bind(this,e),map$1.addEventListener.apply(this,arguments)},Map$1.prototype.removeEventListener=function(e){var t=this._computedAttrs&&this._computedAttrs[e];return t&&(1===t.count?(t.count=0,canReflect_1_18_0_canReflect.offValue(t.compute,t.handler,"notify")):t.count--),canMap_4_3_12_bubble.unbind(this,e),map$1.removeEventListener.apply(this,arguments)},Map$1.prototype.on=Map$1.prototype.bind=Map$1.prototype.addEventListener,Map$1.prototype.off=Map$1.prototype.unbind=Map$1.prototype.removeEventListener,Map$1.on=Map$1.bind=Map$1.addEventListener,Map$1.off=Map$1.unbind=Map$1.removeEventListener,canReflect_1_18_0_canReflect.assignSymbols(Map$1.prototype,{"can.isMapLike":!0,"can.isListLike":!1,"can.isValueLike":!1,"can.getKeyValue":Map$1.prototype._get,"can.setKeyValue":Map$1.prototype._set,"can.deleteKeyValue":Map$1.prototype._remove,"can.getOwnEnumerableKeys":function(){this[inSetupSymbol$8]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,"__keys");var e=this.constructor.enumerable;return e?Object.keys(this._data).filter(function(t){return!1!==e[t]},this):Object.keys(this._data)},"can.assignDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepMap(this,canMap_4_3_12_mapHelpers.removeSpecialKeys(canReflect_1_18_0_canReflect.assignMap({},e))),canQueues_1_3_2_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateDeepMap(this,canMap_4_3_12_mapHelpers.removeSpecialKeys(canReflect_1_18_0_canReflect.assignMap({},e))),canQueues_1_3_2_canQueues.batch.stop()},"can.unwrap":canMap_4_3_12_mapHelpers.reflectUnwrap,"can.serialize":canMap_4_3_12_mapHelpers.reflectSerialize,"can.onKeyValue":function(e,t,n){var a=function(e,n,a){t.call(this,n,a)};canSingleReference_1_3_0_canSingleReference.set(t,this,a,e),this.addEventListener(e,a,n)},"can.offKeyValue":function(e,t,n){this.removeEventListener(e,canSingleReference_1_3_0_canSingleReference.getAndDelete(t,this,e),n)},"can.keyHasDependencies":function(e){return!!(this._computedAttrs&&this._computedAttrs[e]&&this._computedAttrs[e].compute)},"can.getKeyDependencies":function(e){var t;return this._computedAttrs&&this._computedAttrs[e]&&this._computedAttrs[e].compute&&(t={},t.valueDependencies=new set$3,t.valueDependencies.add(this._computedAttrs[e].compute)),t}}),canTypes_1_4_0_canTypes.DefaultMap||(canTypes_1_4_0_canTypes.DefaultMap=Map$1);var canMap_4_3_12_canMap=canNamespace_1_0_0_canNamespace.Map=Map$1,splice$2=[].splice,spliceRemovesProps=function(){var e={0:"a",length:1};return splice$2.call(e,0,1),!e[0]}(),serializeNonTypes=function(e,t,n){t&&t.serialize&&!(t instanceof e)?n.push(new e(t.serialize())):n.push(t)},List=canMap_4_3_12_canMap.extend({Map:canMap_4_3_12_canMap},{setup:function(e,t){this.length=0,canCid_1_3_1_canCid(this,".map"),this._setupComputedProperties(),e=e===void 0?[]:canReflect_1_18_0_canReflect.toArray(e);var n;canReflect_1_18_0_canReflect.isPromise(e)?this.replace(e):(n=e.length&&canMap_4_3_12_mapHelpers.addToMap(e,this),this.push.apply(this,e)),n&&n(),canAssign_1_3_3_canAssign(this,t)},_triggerChange:function(e,t,n,a){canQueues_1_3_2_canQueues.batch.start();var r=+e,o;~(""+e).indexOf(".")||isNaN(r)?canMap_4_3_12_canMap.prototype._triggerChange.apply(this,arguments):(canMap_4_3_12_bubble.isBubbling(this,"change")&&map$1.dispatch.call(this,{type:"change",target:this},[e,t,n,a]),"add"===t?(o=[{insert:n,index:r,deleteCount:0,type:"splice"}],map$1.dispatch.call(this,{type:t,patches:o},[n,r]),map$1.dispatch.call(this,"length",[this.length]),map$1.dispatch.call(this,"can.patches",[o])):"remove"===t?(o=[{index:r,deleteCount:a.length,type:"splice"}],map$1.dispatch.call(this,{type:t,patches:o},[a,r]),map$1.dispatch.call(this,"length",[this.length]),map$1.dispatch.call(this,"can.patches",[o])):map$1.dispatch.call(this,t,[n,r])),canQueues_1_3_2_canQueues.batch.stop()},__get:function(e){return e=isNaN(+e)||e%1?e:+e,"number"==typeof e?(canObservationRecorder_1_3_1_canObservationRecorder.add(this,"can.patches"),this.___get(""+e)):canMap_4_3_12_canMap.prototype.__get.call(this,e)},___get:function(e){if(e){var t=this._computedAttrs[e];return t&&t.compute?canReflect_1_18_0_canReflect.getValue(t.compute):this[e]&&this[e].isComputed&&"function"==typeof this.constructor.prototype[e]?canReflect_1_18_0_canReflect.getValue(this[e]):this[e]}return this},__set:function(e,t,n){if(e=isNaN(+e)||e%1?e:+e,"number"==typeof e){if(e>this.length-1){var a=Array(e+1-this.length);return a[a.length-1]=t,this.push.apply(this,a),a}return this.splice(e,1,t),this}return canMap_4_3_12_canMap.prototype.__set.call(this,""+e,t,n)},___set:function(e,t){this[e]=t,+e>=this.length&&(this.length=+e+1)},__remove:function(e,t){isNaN(+e)?(delete this[e],this._triggerChange(e,"remove",void 0,t)):this.splice(e,1)},_each:function(e){for(var t=this.___get(),n=0;n<t.length;n++)e(t[n],n)},serialize:function(){return canReflect_1_18_0_canReflect.serialize(this,map$5)},splice:function(e,t){var n=canReflect_1_18_0_canReflect.toArray(arguments),a=[],r=2<n.length,o,s,l;for(e=e||0,o=0,s=n.length-2;o<s;o++)l=o+2,n[l]=this.__type(n[l],l),a.push(n[l]),this[o+e]!==n[l]&&(r=!1);if(r&&this.length<=a.length)return a;void 0===t&&(t=n[1]=this.length-e);var d=splice$2.apply(this,n);if(!spliceRemovesProps)for(o=this.length;o<d.length+this.length;o++)delete this[o];return canQueues_1_3_2_canQueues.batch.start(),0<t&&(canMap_4_3_12_bubble.removeMany(this,d),this._triggerChange(""+e,"remove",void 0,d)),2<n.length&&(canMap_4_3_12_bubble.addMany(this,a),this._triggerChange(""+e,"add",a,d)),canQueues_1_3_2_canQueues.batch.stop(),d}}),getArgs$1=function(e){return e[0]&&Array.isArray(e[0])?e[0]:canReflect_1_18_0_canReflect.toArray(e)};canReflect_1_18_0_canReflect.eachKey({push:"length",unshift:0},function(e,t){var n=[][t];List.prototype[t]=function(){for(var t=[],a=e?this.length:0,r=arguments.length,o,s;r--;)s=arguments[r],t[r]=canMap_4_3_12_bubble.set(this,r,this.__type(s,r));return o=n.apply(this,t),(!this.comparator||t.length)&&this._triggerChange(""+a,"add",t,void 0),o}}),canReflect_1_18_0_canReflect.eachKey({pop:"length",shift:0},function(e,t){List.prototype[t]=function(){if(this.length){var n=getArgs$1(arguments),a=e&&this.length?this.length-1:0,r=[][t].apply(this,n);return this._triggerChange(""+a,"remove",void 0,[r]),r&&r.removeEventListener&&canMap_4_3_12_bubble.remove(this,r),r}}}),canAssign_1_3_3_canAssign(List.prototype,{indexOf:function(e,t){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length");for(var n=t||0,a=this.length;n<a;n++)if(this.attr(n)===e)return n;return-1},join:function(){return canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length"),[].join.apply(this,arguments)},reverse:function(){var e=[].reverse.call(canReflect_1_18_0_canReflect.toArray(this));return this.replace(e)},slice:function(){canObservationRecorder_1_3_1_canObservationRecorder.add(this,"length");var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var e=[],t=this.constructor.Map;return canReflect_1_18_0_canReflect.each(arguments,function(n){if(canReflect_1_18_0_canReflect.isObservableLike(n)&&canReflect_1_18_0_canReflect.isListLike(n)||Array.isArray(n)){var a=canReflect_1_18_0_canReflect.isObservableLike(n)&&canReflect_1_18_0_canReflect.isListLike(n)?canReflect_1_18_0_canReflect.toArray(n):n;canReflect_1_18_0_canReflect.each(a,function(n){serializeNonTypes(t,n,e)})}else serializeNonTypes(t,n,e)}),new this.constructor(Array.prototype.concat.apply(canReflect_1_18_0_canReflect.toArray(this),e))},forEach:function(e,t){for(var n=0,a=this.attr("length"),r;n<a&&(r=this.attr(n),void 0===r||!1!==e.call(t||r,r,n,this));n++);return this},replace:function(e){if(canReflect_1_18_0_canReflect.isPromise(e)){this._promise&&(this._promise.__isCurrentPromise=!1);var t=this._promise=e;t.__isCurrentPromise=!0;var n=this;e.then(function(e){t.__isCurrentPromise&&n.replace(e)})}else e=void 0===e?[]:canReflect_1_18_0_canReflect.toArray(e),this.splice.apply(this,[0,this.length].concat(e));return this},filter:function(e,t){var n=new this.constructor,a=this,r;return this.forEach(function(o,i){r=e.call(t||a,o,i,a),r&&n.push(o)}),n},map:function(e,t){var n=new List,a=this;return this.forEach(function(r,o){var i=e.call(t||a,r,o,a);n.push(i)}),n},sort:function(e){var t=Array.prototype.slice.call(this);return Array.prototype.sort.call(t,e),this.splice.apply(this,[0,t.length].concat(t)),this}});var oldType=canMap_4_3_12_canMap.prototype.__type;canMap_4_3_12_canMap.prototype.__type=function(e){if("object"==typeof e&&Array.isArray(e)){var t=canMap_4_3_12_mapHelpers.getMapFromObject(e);return t?t:new List(e)}return oldType.apply(this,arguments)};var oldSetup=canMap_4_3_12_canMap.setup;canMap_4_3_12_canMap.setup=function(){oldSetup.apply(this,arguments),this.prototype instanceof List||(this.List=canMap_4_3_12_canMap.List.extend({Map:this},{}))},canTypes_1_4_0_canTypes.DefaultList||(canTypes_1_4_0_canTypes.DefaultList=List),canReflect_1_18_0_canReflect.assignSymbols(List.prototype,{"can.isMoreListLikeThanMapLike":!0,"can.isListLike":!0,"can.getKeyValue":List.prototype._get,"can.setKeyValue":List.prototype._set,"can.deleteKeyValue":List.prototype._remove,"can.getOwnEnumerableKeys":function(){return Object.keys(this._data||{}).concat(this.map(function(e,t){return t}))},"can.assignDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.assignDeepList(this,e),canQueues_1_3_2_canQueues.batch.stop()},"can.updateDeep":function(e){canQueues_1_3_2_canQueues.batch.start(),canReflect_1_18_0_canReflect.updateDeepList(this,e),canQueues_1_3_2_canQueues.batch.stop()},"can.unwrap":canMap_4_3_12_mapHelpers.reflectUnwrap,"can.serialize":canMap_4_3_12_mapHelpers.reflectSerialize,"can.onKeysAdded":function(e){this[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")]("add",e)},"can.onKeysRemoved":function(e){this[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")]("remove",e)},"can.splice":function(e,t,n){this.splice.apply(this,[e,t].concat(n))},"can.onPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.onKeyValue")]("can.patches",e,t)},"can.offPatches":function(e,t){this[canSymbol_1_6_5_canSymbol.for("can.offKeyValue")]("can.patches",e,t)}}),canMap_4_3_12_canMap.List=List;var canList_4_2_2_canList=canNamespace_1_0_0_canNamespace.List=List,define$2={},inSetupSymbol$9=canSymbol_1_6_5_canSymbol.for("can.initializing"),hasDefaultForSerialize=function(e){return"object"==typeof e&&"serialize"in e},getDefaultForSerialize=function(e){var t=!0;return hasDefaultForSerialize(e)&&(t=!!e.serialize),t},keysForDefinition$2=function(e){var t=[],n=e&&e["*"];for(var a in e){var r=e[a],o=getDefaultForSerialize(n);"object"==typeof r&&"serialize"in r?o=!!r.serialize:"object"==typeof r&&!hasDefaultForSerialize(n)&&(o=!r.get),o&&t.push(a)}return t},getPropDefineBehavior=function(e,t,n){var a,r;if(n){if(a=n[t],r=n["*"],a&&void 0!==a[e])return a[e];if(r&&void 0!==r[e])return r[e]}};canMap_4_3_12_mapHelpers.define=function(e,t){var n=e.prototype.define;if(t){var a={};canMap_4_3_12_mapHelpers.twoLevelDeepExtend(a,t),canMap_4_3_12_mapHelpers.twoLevelDeepExtend(a,n),canAssign_1_3_3_canAssign(n,a)}for(var r in e.defaultGenerators={},n){var o=n[r].type;"string"==typeof o&&"object"==typeof define$2.types[o]&&(delete n[r].type,canAssign_1_3_3_canAssign(n[r],define$2.types[o])),"value"in n[r]&&("function"==typeof n[r].value?e.defaultGenerators[r]=n[r].value:e.defaults[r]=n[r].value),"function"==typeof n[r].Value&&function(t){e.defaultGenerators[r]=function(){return new t}}(n[r].Value)}};var oldSetupDefaults=canMap_4_3_12_canMap.prototype._setupDefaults;canMap_4_3_12_canMap.prototype._setupDefaults=function(e){var t=canAssign_1_3_3_canAssign({},oldSetupDefaults.call(this)),n={},a=this.constructor,r=this._get;for(var o in this._get=function(e){var a=-1===e.indexOf(".")?e:e.substr(0,e.indexOf("."));return a in t&&!(a in n)&&(this.attr(a,t[a]),n[a]=!0),r.apply(this,arguments)},a.defaultGenerators)e&&o in e||(t[o]=a.defaultGenerators[o].call(this));return delete this._get,t};var proto=canMap_4_3_12_canMap.prototype,oldSet=proto.__set;proto.__set=function(e,t,n,a,r){var o=this,i=function(t){var n=r&&r.call(o,t);return!1!==n&&map$1.dispatch.call(o,"error",[e,t],!0),!1},s=getPropDefineBehavior("set",e,this.define),l=getPropDefineBehavior("get",e,this.define);if(s){canQueues_1_3_2_canQueues.batch.start();var d=!1,p=s.call(this,t,function(t){l?o[e](t):oldSet.call(o,e,t,n,a,i),d=!0},i,l?this._computedAttrs[e].compute.computeInstance.lastSetValue.get():n);return l?(void 0!==p&&!d&&1<=s.length&&this._computedAttrs[e].compute(p),void canQueues_1_3_2_canQueues.batch.stop()):void 0===p&&!d&&1<s.length?void canQueues_1_3_2_canQueues.batch.stop():(d||oldSet.call(o,e,0===s.length&&void 0===p?t:p,n,a,i),canQueues_1_3_2_canQueues.batch.stop(),this)}return oldSet.call(o,e,t,n,a,i),this},define$2.types={date:function(e){var t=typeof e;return"string"==t?(e=Date.parse(e),isNaN(e)?null:new Date(e)):"number"===t?new Date(e):e},number:function(e){return null==e?e:+e},boolean:function(e){return null==e?e:!!("false"!==e&&"0"!==e&&e)},htmlbool:function(e){return"string"==typeof e||!!e},"*":function(e){return e},string:function(e){return null==e?e:""+e},compute:{set:function(e,t,n,a){return e&&e.isComputed?e:a&&a.isComputed?(a(e),a):e},get:function(e){return e&&e.isComputed?e():e}}};var oldType$1=proto.__type;proto.__type=function(e,t){var n=getPropDefineBehavior("type",t,this.define),a=getPropDefineBehavior("Type",t,this.define),r=e;return("string"==typeof n&&(n=define$2.types[n]),n||a)?(n&&(r=n.call(this,r,t)),a&&null!=r&&!(r instanceof a)&&(r=new a(r)),r):(canReflect_1_18_0_canReflect.isPlainObject(r)&&r.define&&(r=canMap_4_3_12_canMap.extend(r),r=new r),oldType$1.call(this,r,t))};var oldRemove=proto.__remove;proto.__remove=function(e,t){var n=getPropDefineBehavior("remove",e,this.define),a;return n?(canQueues_1_3_2_canQueues.batch.start(),a=n.call(this,t),!1===a?void canQueues_1_3_2_canQueues.batch.stop():(a=oldRemove.call(this,e,t),canQueues_1_3_2_canQueues.batch.stop(),a)):oldRemove.call(this,e,t)};var oldSetupComputes=proto._setupComputedProperties;proto._setupComputedProperties=function(){for(var e in oldSetupComputes.apply(this,arguments),this.define){var t=this.define[e],n=t.get;n&&canMap_4_3_12_mapHelpers.addComputedAttr(this,e,canCompute_4_1_1_canCompute.async(void 0,n,this)),t.resolver&&canMap_4_3_12_mapHelpers.addComputedAttr(this,e,new resolver(t.resolver,this,t.value))}};var oldSingleSerialize=proto.___serialize,serializeProp=function(e,t,n){var a="*"!==t&&getPropDefineBehavior("serialize",t,e.define);if(a===void 0)return oldSingleSerialize.call(e,t,n);return!1===a?void 0:"function"==typeof a?a.call(e,n,t):oldSingleSerialize.call(e,t,n)};proto.___serialize=function(e,t){return serializeProp(this,e,t)};var oldSerialize=proto.serialize;proto.serialize=function(e){var t=oldSerialize.apply(this,arguments);if(e)return t;var n,a;for(var r in this.define)r in t||(n=this.define&&(this.define[r]&&this.define[r].serialize||this.define["*"]&&this.define["*"].serialize),n&&(a=serializeProp(this,r,this.attr(r)),void 0!==a&&(t[r]=a)));return t},canReflect_1_18_0_canReflect.assignSymbols(proto,{"can.hasKey":function(e){var t=this.define&&e in this.define,n=this._data&&e in this._data,a=(e in this);return t||n||a},"can.getOwnEnumerableKeys":function(){this[inSetupSymbol$9]||canObservationRecorder_1_3_1_canObservationRecorder.add(this,"__keys");var e=keysForDefinition$2(this.define),t=Object.keys(this._data),n=getDefaultForSerialize(this.define&&this.define["*"]),a=this.constructor.enumerable;t=t.filter(function(e){return a?n&&!1!==a[e]:n});var r,o;for(r=0;r<t.length;r++)o=t[r],!(0>e.indexOf(o))||this.define&&this.define[o]||e.push(t[r]);return e}});var canMapDefine_4_4_0_canMapDefine=define$2,controlsSymbol=canSymbol_1_6_5_canSymbol.for("can.controls"),bind=function(e,t,n,a){return map$1.on.call(e,t,n,a),function(){map$1.off.call(e,t,n,a)}},slice$3=[].slice,paramReplacer=/\{([^\}]+)\}/g,delegate=function(e,t,n,a){return map$1.on.call(e,n,t,a),function(){map$1.off.call(e,n,t,a)}},binder=function(e,t,n,a){return a?delegate(e,a.trim(),t,n):bind(e,t,n)},Control=canConstruct_3_5_6_canConstruct.extend("Control",{setup:function(){if(canConstruct_3_5_6_canConstruct.setup.apply(this,arguments),Control){var e=this,t;for(t in e.actions={},e.prototype)e._isAction(t)&&(e.actions[t]=e._action(t))}},_shifter:function(e,t){function n(){var n=r.wrapElement(this);return e.called=t,a.apply(e,[n].concat(slice$3.call(arguments,0)))}var a="string"==typeof t?e[t]:t;"function"!=typeof a&&(a=e[a]);var r=this;return n},_isAction:function(e){var t=this.prototype[e],n=typeof t;return"constructor"!==e&&("function"===n||"string"===n&&"function"==typeof this.prototype[t])&&!!(Control.isSpecial(e)||processors[e]||/[^\w]/.test(e))},_action:function(e,t,n){var a;if(paramReplacer.lastIndex=0,t||!paramReplacer.test(e)){var r=function(){var n=e.replace(paramReplacer,function(e,n){var r,o;return this._isDelegate(t,n)?(a=this._getDelegate(t,n),""):(n=this._removeDelegateFromKey(n),o=this._lookup(t)[0],r=canStacheKey_1_4_3_canStacheKey.read(o,canStacheKey_1_4_3_canStacheKey.reads(n),{readCompute:!1}).value,void 0===r&&"undefined"!=typeof window&&(r=get_1(window,n)),o&&(canReflect_1_18_0_canReflect.isObservableLike(o)&&canReflect_1_18_0_canReflect.isMapLike(o)||r)?"string"==typeof r?r:(a=r,""):null)}.bind(this)),a;n=n.trim();var r=n.split(/\s+/g),o=r.pop();return{processor:this.processors[o]||basicProcessor,parts:[n,r.join(" "),o],delegate:a||void 0}};if(a=new canObservation_4_2_0_canObservation(r,this),n){var o=function(t){n._bindings.control[e]&&n._bindings.control[e](n.element),n._bindings.control[e]=t.processor(t.delegate||n.element,t.parts[2],t.parts[1],e,n)};canReflect_1_18_0_canReflect.onValue(a,o,"mutate"),n._bindings.readyComputes[e]={compute:a,handler:o}}return a.get()}},_lookup:function(e){return[e,window]},_removeDelegateFromKey:function(e){return e},_isDelegate:function(e,t){return"element"===t},_getDelegate:function(){},processors:{},defaults:{},convertElement:function(e){return e="string"==typeof e?document.querySelector(e):e,this.wrapElement(e)},wrapElement:function(e){return e},unwrapElement:function(e){return e},isSpecial:function(e){return"inserted"===e||"removed"===e}},{setup:function(e,t){var n=this.constructor,a=n.pluginName||n.shortName,r;if(!e)throw new Error("Creating an instance of a named control without passing an element");if(this.element=n.convertElement(e),a&&"Control"!==a&&this.element.classList&&this.element.classList.add(a),r=this.element[controlsSymbol],r||(r=[],this.element[controlsSymbol]=r),r.push(this),canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)){for(var o in n.defaults)t.hasOwnProperty(o)||canStacheKey_1_4_3_canStacheKey.set(t,o,n.defaults[o]);this.options=t}else this.options=canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},n.defaults),t);return this.on(),[this.element,this.options]},on:function(e,t,n,a){if(!e){this.off();var r=this.constructor,o=this._bindings,i=r.actions,s=this.constructor.unwrapElement(this.element),l=Control._shifter(this,"destroy"),d,p;for(d in i)i.hasOwnProperty(d)&&(p=i[d]||r._action(d,this.options,this),p&&(o.control[d]=p.processor(p.delegate||s,p.parts[2],p.parts[1],d,this)));var c=canDomMutate_2_0_8_canDomMutate.onNodeDisconnected(s,function(){var e=s.ownerDocument,t=e.contains?e:e.documentElement;t&&!1!==t.contains(s)||(canQueues_1_3_2_canQueues.domQueue.isFlushing?canQueues_1_3_2_canQueues.mutateQueue.enqueue(l):l())});return o.user.push(function(){c&&(c(),c=void 0)}),o.user.length}return"string"==typeof e&&(a=n,n=t,t=e,e=this.element),void 0===a&&(a=n,n=t,t=null),"string"==typeof a&&(a=Control._shifter(this,a)),this._bindings.user.push(binder(e,n,a,t)),this._bindings.user.length},off:function(){var e=this.constructor.unwrapElement(this.element),t=this._bindings;t&&((t.user||[]).forEach(function(t){t(e)}),canReflect_1_18_0_canReflect.eachKey(t.control||{},function(t){t(e)}),canReflect_1_18_0_canReflect.eachKey(t.readyComputes||{},function(e){canReflect_1_18_0_canReflect.offValue(e.compute,e.handler,"mutate")})),this._bindings={user:[],control:{},readyComputes:{}}},destroy:function(){if(null!==this.element){var e=this.constructor,t=e.pluginName||e.shortName&&canString_1_1_0_canString.underscore(e.shortName),n;this.off(),t&&"can_control"!==t&&this.element.classList&&this.element.classList.remove(t),n=this.element[controlsSymbol],n&&n.splice(n.indexOf(this),1),this.element=null}}}),processors,basicProcessor;processors=Control.processors,basicProcessor=function(e,t,n,a,r){return binder(e,t,Control._shifter(r,a),n)},["beforeremove","change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed","dragstart","dragenter","dragover","dragleave","drag","drop","dragend"].forEach(function(e){processors[e]=basicProcessor});var canControl_5_0_1_canControl=canNamespace_1_0_0_canNamespace.Control=Control,paramReplacer$1=/\{([^\}]+)\}/g,ComponentControl=canControl_5_0_1_canControl.extend({_lookup:function(e){return[e.scope,e,window]},_removeDelegateFromKey:function(e){return e.replace(/^(scope|^viewModel)\./,"")},_isDelegate:function(e,t){return"scope"===t||"viewModel"===t},_getDelegate:function(e,t){return e[t]},_action:function(e,t,n){var a;return paramReplacer$1.lastIndex=0,a=paramReplacer$1.test(e),!n&&a?void 0:canControl_5_0_1_canControl._action.apply(this,arguments)}},{setup:function(e,t){return this.scope=t.scope,this.viewModel=t.viewModel,canControl_5_0_1_canControl.prototype.setup.call(this,e,t)},off:function(){this._bindings&&canReflect_1_18_0_canReflect.eachKey(this._bindings.readyComputes||{},function(e){canReflect_1_18_0_canReflect.offValue(e.compute,e.handler)}),canControl_5_0_1_canControl.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments),canControl_5_0_1_canControl.prototype.destroy.apply(this,arguments)}}),control=ComponentControl;canStache_5_1_1_canStache.addBindings(canStacheBindings_5_0_4_canStacheBindings);var createdByCanComponentSymbol=canSymbol_1_6_5_canSymbol("can.createdByCanComponent"),getValueSymbol$4=canSymbol_1_6_5_canSymbol.for("can.getValue"),setValueSymbol$5=canSymbol_1_6_5_canSymbol.for("can.setValue"),viewInsertSymbol$3=canSymbol_1_6_5_canSymbol.for("can.viewInsert"),viewModelSymbol$4=canSymbol_1_6_5_canSymbol.for("can.viewModel");function addContext$1(e,t,n){var a,r;canDomData_1_0_3_canDomData.set(e,"preventDataBindings",!0);var o=canStacheBindings_5_0_4_canStacheBindings.behaviors.viewModel(e,n,function(e,n,o){return o&&!0===o.isSettingOnViewModel?(r=t.scope.addLetContext(e),r._context):a=new canSimpleObservable_2_5_0_canSimpleObservable(e)},void 0,!0);return o?canAssign_1_3_3_canAssign(canAssign_1_3_3_canAssign({},t),{teardown:o,scope:r||t.scope.add(a)}):t}function makeReplacementTagCallback(e,t,n,a,r){var o=n.options;return function s(n,i){var l=r(n)||i.subtemplate,d=l!==i.subtemplate;if(l){delete o.tags[e];var p=d?a.toLightContent?addContext$1(n,{scope:i.scope.cloneFromRef(),options:i.options},i):addContext$1(n,t,i):addContext$1(n,i,i);var c=l(p.scope,p.options);if(p.teardown){var u=n.ownerDocument.createComment(e);c.insertBefore(u,c.firstChild),canDomMutate_2_0_8_canDomMutate.onNodeRemoved(u,p.teardown)}n.parentNode.replaceChild(c,n),o.tags[e]=s}}}function getSetupFunctionForComponentVM(e){return canObservationRecorder_1_3_1_canObservationRecorder.ignore(function(t,n,a,r){var o={element:t,scope:n.scope,parentNodeList:n.parentNodeList,viewModel:void 0},i={},s=[];canReflect_1_18_0_canReflect.eachKey(e,function(e,n){var a=null!=e&&!!e[getValueSymbol$4],l=null!=e&&!!e[setValueSymbol$5];if(!0==a||l){var d=canStacheBindings_5_0_4_canStacheBindings.getObservableFrom.viewModel({name:n},o,i),p=new canBind_1_5_1_canBind({child:d,parent:e,queue:"dom",element:t});s.push({binding:p,siblingBindingData:{parent:{source:"scope",exports:a},child:{source:"viewModel",exports:l,name:n}}})}else r[n]=e});var l=canStacheBindings_5_0_4_canStacheBindings.behaviors.initializeViewModel(s,r,function(e){return o.viewModel=a(e)},o);return function(){for(var e in l.onTeardowns)l.onTeardowns[e]()}})}var Component=canConstruct_3_5_6_canConstruct.extend({setup:function(){if(canConstruct_3_5_6_canConstruct.setup.apply(this,arguments),Component){var e=this;void 0!==this.prototype.events&&0!==canReflect_1_18_0_canReflect.size(this.prototype.events)&&(this.Control=control.extend(this.prototype.events));var t=this.prototype.viewModel||this.prototype.scope;if(t&&this.prototype.ViewModel)throw new Error("Cannot provide both a ViewModel and a viewModel property");var n=canString_1_1_0_canString.capitalize(canString_1_1_0_canString.camelize(this.prototype.tag))+"VM";if(this.prototype.ViewModel?"function"==typeof this.prototype.ViewModel?this.ViewModel=this.prototype.ViewModel:this.ViewModel=map$4.extend(n,{},this.prototype.ViewModel):t?"function"==typeof t?canReflect_1_18_0_canReflect.isObservableLike(t.prototype)&&canReflect_1_18_0_canReflect.isMapLike(t.prototype)?this.ViewModel=t:this.viewModelHandler=t:canReflect_1_18_0_canReflect.isObservableLike(t)&&canReflect_1_18_0_canReflect.isMapLike(t)?this.viewModelInstance=t:(canLog_1_0_2_canLog.warn("can-component: "+this.prototype.tag+" is extending the viewModel into a can-simple-map"),this.ViewModel=canSimpleMap_4_3_3_canSimpleMap.extend(n,{},t)):this.ViewModel=canSimpleMap_4_3_3_canSimpleMap.extend(n,{},{}),this.prototype.template&&(this.view=this.prototype.template),this.prototype.view&&(this.view=this.prototype.view),"string"==typeof this.view){var a=canString_1_1_0_canString.capitalize(canString_1_1_0_canString.camelize(this.prototype.tag))+"View";this.view=canStache_5_1_1_canStache(a,this.view)}this.renderer=this.view;var r=function(t,n){void 0===t[createdByCanComponentSymbol]&&new e(t,n)};canViewCallbacks_5_0_0_canViewCallbacks.tag(this.prototype.tag,r)}}},{setup:function(e,t){function n(){u&&(u(),u=null),a._torndown=!0,canDomEvents_1_3_11_canDomEvents.dispatch(e,"beforeremove",!1),p&&p(),m?m(e):"function"==typeof d.stopListening&&d.stopListening(),y&&(y(),y=null)}this._initialArgs=[e,t];var a=this,r={helpers:{},tags:{}};if(void 0===t&&(void 0===e?t={}:(t=e,e=void 0)),void 0===e&&(e=document$1().createElement(this.tag),e[createdByCanComponentSymbol]=!0),this.element=e,!1===t.initializeBindings&&!this._skippedSetup)return this._skippedSetup=this._torndown=!0,void(this.viewModel=Object.create(null));var o=t.content;void 0!==o&&("function"==typeof o?t.subtemplate=o:"string"==typeof o&&(t.subtemplate=canStache_5_1_1_canStache(o)));var i=t.scope;void 0!==i&&!1==i instanceof canViewScope_4_13_6_canViewScope&&(t.scope=new canViewScope_4_13_6_canViewScope(i));var s=t.templates;void 0!==s&&canReflect_1_18_0_canReflect.eachKey(s,function(e,t){if("string"==typeof e){s[t]=canStache_5_1_1_canStache(t+" template",e)}});var l=canDomData_1_0_3_canDomData.get(e,"preventDataBindings"),d,p;if(l)d=e[viewModelSymbol$4];else{var c;c=t.setupBindings?function(e,t,n,a){return t.setupBindings(e,n,a)}:t.viewModel?getSetupFunctionForComponentVM(t.viewModel):canStacheBindings_5_0_4_canStacheBindings.behaviors.viewModel,p=c(e,t,function(n){var r=a.constructor.ViewModel,o=a.constructor.viewModelHandler,i=a.constructor.viewModelInstance;if(o){var s=o.call(a,n,t.scope,e);canReflect_1_18_0_canReflect.isObservableLike(s)&&canReflect_1_18_0_canReflect.isMapLike(s)?i=s:canReflect_1_18_0_canReflect.isObservableLike(s.prototype)&&canReflect_1_18_0_canReflect.isMapLike(s.prototype)?r=s:r=canSimpleMap_4_3_3_canSimpleMap.extend(s)}return r&&(i=new r(n)),d=i,i},{})}this.viewModel=d,e[viewModelSymbol$4]=d,e.viewModel=d,canDomData_1_0_3_canDomData.set(e,"preventDataBindings",!0);var u,y,m;void 0!==this.helpers&&canReflect_1_18_0_canReflect.eachKey(this.helpers,function(e,t){"function"==typeof e&&(r.helpers[t]=e.bind(d))}),this.constructor.Control&&(this._control=new this.constructor.Control(e,{scope:this.viewModel,viewModel:this.viewModel})),u=canDomMutate_2_0_8_canDomMutate.onNodeRemoved(e,function(){var t=e.ownerDocument,a=t.contains?t:t.documentElement;a&&a.contains(e)||n()});var g={toLightContent:!0===this.leakScope,intoShadowContent:!0===this.leakScope},h=!!this.constructor.view,f,b,v;if(h){var _;_=g.intoShadowContent?{scope:t.scope.add(this.viewModel,{viewModel:!0}),options:r}:{scope:new canViewScope_4_13_6_canViewScope(this.viewModel,null,{viewModel:!0}),options:r},r.tags["can-slot"]=makeReplacementTagCallback("can-slot",t,_,g,function(e){var n=t.templates;if(n)return n[e.getAttribute("name")]}),r.tags.content=makeReplacementTagCallback("content",t,_,g,function(){return t.subtemplate}),b=this.constructor.view,v=_}else{var S={scope:t.scope.add(this.viewModel,{viewModel:!0}),options:r};v=S,b=t.subtemplate||e.ownerDocument.createDocumentFragment.bind(e.ownerDocument)}if(f=b(v.scope,v.options),canDomMutate_2_0_8_node.appendChild.call(e,f),d&&d.connectedCallback){var k=document$1().body,E=k&&k.contains(e);E?m=d.connectedCallback(e):y=canDomMutate_2_0_8_canDomMutate.onNodeConnected(e,function(){y(),y=null,m=d.connectedCallback(e)})}a._torndown=!1}});Component.prototype[viewInsertSymbol$3]=function(){return this._torndown&&this.setup.apply(this,this._initialArgs),this.element};var canComponent_5_0_0_canComponent=canNamespace_1_0_0_canNamespace.Component=Component,IsBoolean=function(){};makeEnum_1(IsBoolean,[!0,!1],function(e){return!("true"!==e)||"false"!==e&&e});function hasKey(e,t,n,a){if(e&&"object"==typeof e)for(var r in e)if(t[r]){if("function"==typeof t[r])n[a]=t[r](e);else return!0;}else if(hasKey(e[r],t,e,r))return!0;return!1}function convertToJSONAPISort(e){var t=e.split(" "),n="desc"===(t[1]||"").toLowerCase();return n?"-"+t[0]:t[0]}function convertToLegacySort(e){var t=helpers_1$3.sortData(e);return t.desc?"-"+t.prop:t.prop}var set$4={UNIVERSAL:set_1$1.UNIVERSAL,EMPTY:set_1$1.EMPTY,UNDEFINABLE:set_1$1.UNDEFINABLE,UNKNOWABLE:set_1$1.UNKNOWABLE,Algebra:function(){var e={schema:[],hydrate:[],serialize:[]};canReflect_1_18_0_canReflect.eachIndex(arguments,function(t){for(var n in t)if(e[n])e[n].push(t[n]);else throw new Error("can-query-logic: This type of configuration is not supported. Please use can-query-logic directly.")});var t=canReflect_1_18_0_canReflect.assignSymbols({},{"can.getSchema":function(){var t={kind:"record",identity:[],keys:{}};return e.schema.forEach(function(e){e(t)}),t.identity.length||t.identity.push("id"),t}});return new canQueryLogic_1_2_2_canQueryLogic(t,{toQuery:function(t){return e.hydrate.reduce(function(e,t){return t(e)},{filter:t})},toParams:function(t){if(set_1$1.isSpecial(t))return t;if(Array.isArray(t.filter))return set_1$1.UNDEFINABLE;var n=t.filter||{};if(hasKey(n,{$ne:!0,$in:function(e){return e.$in}}))return set_1$1.UNDEFINABLE;var a=e.serialize.reduce(function(e,t){return t(e)},t);return n=a.filter||{},delete a.filter,canReflect_1_18_0_canReflect.assign(a,n)}})},Translate:function(e,t){if("where"!==e)throw new Error("can-query-logic/compat.Translate is only able to translate the where clause");return{hydrate:function(e){var n=canReflect_1_18_0_canReflect.serialize(e),a=n.filter[t];return delete n.filter[t],a&&canReflect_1_18_0_canReflect.assign(n.filter,a),n},serialize:function(e){if(e.filter){var n=canReflect_1_18_0_canReflect.serialize(e),a=e.filter;return n.filter={},n.filter[t]=a,n}return e}}},props:{boolean:function(e){return{schema:function(t){t.keys[e]=IsBoolean}}},dotNotation:function(){return{}},enum:function(e,t){function n(){}return makeEnum_1(n,t),{schema:function(t){t.keys[e]=n}}},id:function(e){return{schema:function(t){t.identity.push(e)}}},offsetLimit:function(e,t){return e=e||"offset",t=t||"limit",{hydrate:function(n){var a=canReflect_1_18_0_canReflect.serialize(n);return(e in a.filter||t in a.filter)&&(a.page={}),e in a.filter&&(a.page.start=parseInt(a.filter[e],10),delete a.filter[e]),t in a.filter&&(a.page.end=(a.page.start||0)+parseInt(a.filter[t],10)-1,delete a.filter[t]),a},serialize:function(n){var a=canReflect_1_18_0_canReflect.serialize(n);return a.page&&(a[e]=a.page.start,a[t]=a.page.end-a.page.start+1,delete a.page),a}}},rangeInclusive:function(e,t){var n={};n["filter."+e]="page.start",n["filter."+t]="page.end";var a={"page.start":e,"page.end":t};return{hydrate:function(e){var t=transform(e,n);return t.page&&(t.page.start&&(t.page.start=parseInt(t.page.start,10)),t.page.end&&(t.page.end=parseInt(t.page.end,10))),t},serialize:function(e){return transform(e,a)}}},ignore:function(e){return{hydrate:function(t){var n=canReflect_1_18_0_canReflect.serialize(t);return delete n.filter[e],n}}},sort:function(e,t){if(e||(e="sort"),t)throw new Error("can-query-logic/compat.sort - sortFunc is not supported");return{hydrate:function(t){var n=canReflect_1_18_0_canReflect.serialize(t),a=get_1(n,"filter."+e);return void 0!==a&&(_delete(n,"filter."+e),n.sort=convertToJSONAPISort(a)),n},serialize:function(t){var n=canReflect_1_18_0_canReflect.serialize(t),a=n.sort;return void 0!==a&&(delete n.sort,n[e]=convertToLegacySort(a)),n}}}}},defaultAlgebra;function makeAlgebra(e){if(!e)return defaultAlgebra;return e instanceof canQueryLogic_1_2_2_canQueryLogic?e:new set$4.Algebra(e)}function makeFromTwoQueries(e){set$4[e]=function(t,n,a){return makeAlgebra(a)[e](t,n)}}makeFromTwoQueries("difference"),makeFromTwoQueries("union"),makeFromTwoQueries("intersection"),makeFromTwoQueries("isSubset"),makeFromTwoQueries("isEqual"),makeFromTwoQueries("isProperSubset"),set$4.count=function(e,t){return makeAlgebra(t).count(e)},set$4.comparators=set$4.props,defaultAlgebra=new set$4.Algebra;var canSetLegacy_1_0_1_canSetLegacy=set$4;export{canValue_1_1_2_canValue as value,canObservation_4_2_0_canObservation as Observation,canObservationRecorder_1_3_1_canObservationRecorder as ObservationRecorder,canSimpleMap_4_3_3_canSimpleMap as SimpleMap,canObservableObject as ObservableObject,canObservableArray as ObservableArray,canObservableBindings_1_3_3_canObservableBindings_1 as fromAttribute,canBind_1_5_1_canBind as bind,map$1 as mapEventBindings,value as valueEventBindings,canSimpleObservable_2_5_0_canSimpleObservable as SimpleObservable,async as AsyncObservable,key as keyObservable,resolver as ResolverObservable,settable as SettableObservable,setter as SetterObservable,canStacheElement as StacheElement,canStache_5_1_1_canStache as stache,canStacheBindings_5_0_4_canStacheBindings as stacheBindings,canStacheRouteHelpers_2_0_0_canStacheRouteHelpers as stacheRouteHelpers,canViewCallbacks_5_0_0_canViewCallbacks as viewCallbacks,canViewLive_5_0_4_canViewLive as viewLive,canViewModel_4_0_3_canViewModel as viewModel,canViewParser_4_1_3_canViewParser as viewParser,canViewScope_4_13_6_canViewScope as Scope,canViewTarget_5_0_0_canViewTarget as target,canFixture_3_1_7_fixture as fixture,canQueryLogic_1_2_2_canQueryLogic as QueryLogic,canRealtimeRestModel_2_0_0_canRealtimeRestModel as realtimeRestModel,canRestModel_2_0_0_canRestModel as restModel,canConnect_4_0_2_all as connect,canLocalStore_1_0_1_canLocalStore as localStore,canMemoryStore_1_0_3_canMemoryStore as memoryStore,canRoute_5_0_2_canRoute as route,canRouteHash_1_0_2_canRouteHash as RouteHash,canRoutePushstate_6_0_0_canRoutePushstate as RoutePushstate,canParam_1_1_3_canParam as param,canDeparam_1_2_3_canDeparam as deparam,canAssign_1_3_3_canAssign as assign,canDefineLazyValue_1_1_1_defineLazyValue as defineLazyValue,canDiff_1_5_0_canDiff as diff,canGlobals_1_2_2_canGlobals as globals,canKey_1_2_1_canKey as key,canKeyTree_1_2_2_canKeyTree as KeyTree,canMakeMap_1_2_2_canMakeMap as makeMap,canParseUri_1_2_2_canParseUri as parseURI,canQueues_1_3_2_canQueues as queues,canString_1_1_0_canString as string,canStringToAny_1_2_1_canStringToAny as stringToAny,canAjax_2_4_6_canAjax as ajax,canAttributeEncoder_1_1_4_canAttributeEncoder as attributeEncoder,canChildNodes_1_2_1_canChildNodes as childNodes,canDomData_1_0_3_canDomData as domData,canDomEvents_1_3_11_canDomEvents as domEvents,addJqueryEvents as addJQueryEvents,canDomMutate_2_0_8_canDomMutate as domMutate,canDomMutate_2_0_8_node as domMutateNode,canDomMutate_2_0_8_domEvents as domMutateDomEvents,canFragment_1_3_1_canFragment as fragment,canValidateInterface_1_0_3_index as makeInterfaceValidator,canCid_1_3_1_canCid as cid,canConstruct_3_5_6_canConstruct as Construct,maybeBoolean as MaybeBoolean,maybeDate as MaybeDate,maybeNumber as MaybeNumber,maybeString as MaybeString,canNamespace_1_0_0_canNamespace as can,canReflect_1_18_0_canReflect as Reflect,canReflectDependencies_1_1_2_canReflectDependencies as reflectDependencies,canReflectPromise_2_2_1_canReflectPromise as reflectPromise,canType_1_1_5_canType as type,canDebug_2_0_7_canDebug as debug,canDefineBackup_2_1_2_canDefineBackup as defineBackup,canDefineStream_1_1_1_canDefineStream as defineStream,canDefineStreamKefir_1_1_1_canDefineStreamKefir as defineStreamKefir,canKefir_1_1_4_canKefir as kefir,canKefir_1_1_4_canKefir as Kefir,canObserve_2_3_2_canObserve as observe,canStream_1_1_1_canStream as stream,canStreamKefir_1_2_1_canStreamKefir as streamKefir,canMapCompat_1_1_1_canMapCompat as makeMapCompat,canStacheConverters_5_0_0_canStacheConverters as stacheConverters,canViewAutorender_6_0_0_canViewAutorender as viewAutorender,canSuperModel_2_0_0_canSuperModel as superModel,canConnectTag_2_0_0_canConnectTag as connectTag,canFixtureSocket_2_0_3_canFixtureSocket as fixtureSocket,canNdjsonStream_1_0_2_canNdjsonStream as ndjsonStream,canConnectNdjson_2_0_0_canConnectNdjson as connectNDJSON,session as connectCanSession,canConstructSuper_3_2_1_canConstructSuper as constructSuper,canRouteMock_1_0_2_canRouteMock as RouteMock,canValidate_1_2_1_canValidate as validate,canValidateValidatejs_1_0_1_canValidateValidatejs as validateValidatejs,canDeepObservable_1_0_2_canDeepObservable as DeepObservable,canEventDomRadiochange_2_2_1_canEventDomRadiochange as radioChangeEvent,canEventDomEnter_2_2_1_canEventDomEnter as enterEvent,mixins as observableMixin,mixins as defineMixin,canDefine_2_8_0_canDefine as define,map$4 as DefineMap,list$2 as DefineList,canDefineRealtimeRestModel_2_0_0_canDefineRealtimeRestModel as defineRealtimeRestModel,canDefineRestModel_2_0_0_canDefineRestModel as defineRestModel,canCompute_4_1_1_canCompute as compute,canMap_4_3_12_canMap as CanMap,canList_4_2_2_canList as CanList,canMapDefine_4_4_0_canMapDefine as canMapDefine,canComponent_5_0_0_canComponent as Component,canSetLegacy_1_0_1_canSetLegacy as set,canControl_5_0_1_canControl as Control};